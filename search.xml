<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[SOFABoot ÂÅ•Â∫∑Ê£ÄÊü•ËÉΩÂäõÂàÜÊûê]]></title>
    <url>%2F2018%2F11%2F16%2Fsofaboot-health-one%2F</url>
    <content type="text"><![CDATA[Liveness Check &amp; Readiness CheckSpring Boot Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âü∫Á°ÄÁöÑÂÅ•Â∫∑Ê£ÄÊü•ÁöÑËÉΩÂäõÔºå‰∏≠Èó¥‰ª∂ÂíåÂ∫îÁî®ÈÉΩÂèØ‰ª•Êâ©Â±ïÊù•ÂÆûÁé∞Ëá™Â∑±ÁöÑÂÅ•Â∫∑Ê£ÄÊü•ÈÄªËæë„ÄÇ‰ΩÜÊòØ Spring Boot ÁöÑÂÅ•Â∫∑Ê£ÄÊü•Âè™Êúâ Liveness Check ÁöÑËÉΩÂäõÔºåÁº∫Â∞ë Readiness Check ÁöÑËÉΩÂäõÔºåËøôÊ†∑‰ºöÊúâÊØîËæÉËá¥ÂëΩÁöÑÈóÆÈ¢ò„ÄÇÂΩì‰∏Ä‰∏™ÂæÆÊúçÂä°Â∫îÁî®ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ªË¶ÅÂÖà‰øùËØÅÂêØÂä®ÂêéÂ∫îÁî®ÊòØÂÅ•Â∫∑ÁöÑÔºåÊâçÂèØ‰ª•Â∞Ü‰∏äÊ∏∏ÁöÑÊµÅÈáèÊîæËøõÊù•ÔºàÊù•Ëá™‰∫é RPCÔºåÁΩëÂÖ≥ÔºåÂÆöÊó∂‰ªªÂä°Á≠âÁ≠âÊµÅÈáèÔºâÔºåÂê¶ÂàôÂ∞±ÂèØËÉΩ‰ºöÂØºËá¥‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÂ§ßÈáèÁöÑÈîôËØØÂèëÁîü„ÄÇ ÈíàÂØπ Spring Boot Áº∫Â∞ë Readiness Check ËÉΩÂäõÁöÑÊÉÖÂÜµÔºåSOFABoot Â¢ûÂä†‰∫Ü Spring Boot Áé∞ÊúâÁöÑÂÅ•Â∫∑Ê£ÄÊü•ÁöÑËÉΩÂäõÔºåÊèê‰æõ‰∫Ü Readiness Check ÁöÑËÉΩÂäõ„ÄÇÂà©Áî® Readiness Check ÁöÑËÉΩÂäõÔºåSOFA ‰∏≠Èó¥‰ª∂‰∏≠ÁöÑÂêÑ‰∏™ÁªÑ‰ª∂Âè™ÊúâÂú® Readiness Check ÈÄöËøá‰πãÂêéÔºåÊâçÂ∞ÜÊµÅÈáèÂºïÂÖ•Âà∞Â∫îÁî®ÁöÑÂÆû‰æã‰∏≠ÔºåÊØîÂ¶Ç RPCÔºåÂè™ÊúâÂú® Readiness Check ÈÄöËøá‰πãÂêéÔºåÊâç‰ºöÂêëÊúçÂä°Ê≥®ÂÜå‰∏≠ÂøÉÊ≥®ÂÜåÔºåÂêéÈù¢Êù•Ëá™‰∏äÊ∏∏Â∫îÁî®ÁöÑÊµÅÈáèÊâç‰ºöËøõÂÖ•„ÄÇ Èô§‰∫Ü‰∏≠Èó¥‰ª∂ÂèØ‰ª•Âà©Áî® Readiness Check ÁöÑ‰∫ã‰ª∂Êù•ÊéßÂà∂ÊµÅÈáèÁöÑËøõÂÖ•‰πãÂ§ñÔºåPAAS Á≥ªÁªü‰πüÂèØ‰ª•ÈÄöËøáËÆøÈóÆ http://localhost:8080/actuator/readiness Êù•Ëé∑ÂèñÂ∫îÁî®ÁöÑ Readiness Check ÁöÑÁä∂ÂÜµÔºåÁî®Êù•ÊéßÂà∂‰æãÂ¶ÇË¥üËΩΩÂùáË°°ËÆæÂ§áÁ≠âÁ≠âÊµÅÈáèÁöÑËøõÂÖ•„ÄÇ ‰ΩøÁî®ÊñπÂºèSOFABoot ÁöÑÂÅ•Â∫∑Ê£ÄÊü•ËÉΩÂäõÈúÄË¶ÅÂºïÂÖ•Ôºö 1234&lt;dependency&gt; &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt; &lt;artifactId&gt;healthcheck-sofa-boot-starter&lt;/artifactId&gt;&lt;/dependency&gt; Âå∫Âà´‰∫éSpringBootÁöÑÔºö 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; ËØ¶ÁªÜÂ∑•Á®ãÁßëÂèÇËÄÉÔºösofa-boot ÂÅ•Â∫∑Ê£ÄÊü•ÂêØÂä®Êó•Âøó ‰ª£Á†ÅÂàÜÊûêÊó¢ÁÑ∂ÊòØ‰∏™StarterÔºåÈÇ£‰πàÂ∞±ÂÖà‰ªé spring.factories Êñá‰ª∂Êù•ÁúãÔºö 12345org.springframework.context.ApplicationContextInitializer=\com.alipay.sofa.healthcheck.initializer.SofaBootHealthCheckInitializerorg.springframework.boot.autoconfigure.EnableAutoConfiguration=\com.alipay.sofa.healthcheck.configuration.SofaBootHealthCheckAutoConfiguration SofaBootHealthCheckInitializerSofaBootHealthCheckInitializer ÂÆûÁé∞‰∫Ü ApplicationContextInitializer Êé•Âè£„ÄÇ ApplicationContextInitializer ÊòØ Spring Ê°ÜÊû∂ÂéüÊúâÁöÑÊ¶ÇÂøµÔºåËøô‰∏™Á±ªÁöÑ‰∏ªË¶ÅÁõÆÁöÑÂ∞±ÊòØÂú® ConfigurableApplicationContext Á±ªÂûãÔºàÊàñËÄÖÂ≠êÁ±ªÂûãÔºâÁöÑ ApplicationContext ÂÅö refresh ‰πãÂâçÔºåÂÖÅËÆ∏Êàë‰ª¨ ÂØπ ConfigurableApplicationContext ÁöÑÂÆû‰æãÂÅöËøõ‰∏ÄÊ≠•ÁöÑËÆæÁΩÆÊàñËÄÖÂ§ÑÁêÜ„ÄÇ 123456789101112131415public class SofaBootHealthCheckInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; &#123; @Override public void initialize(ConfigurableApplicationContext applicationContext) &#123; Environment environment = applicationContext.getEnvironment(); if (SOFABootEnvUtils.isSpringCloudBootstrapEnvironment(environment)) &#123; return; &#125; // init logging.level.com.alipay.sofa.runtime argument String healthCheckLogLevelKey = Constants.LOG_LEVEL_PREFIX + HealthCheckConstants.SOFABOOT_HEALTH_LOG_SPACE; SofaBootLogSpaceIsolationInit.initSofaBootLogger(environment, healthCheckLogLevelKey); SofaBootHealthCheckLoggerFactory.getLogger(SofaBootHealthCheckInitializer.class).info( "SOFABoot HealthCheck Starting!"); &#125;&#125; SofaBootHealthCheckInitializer Âú® initialize ÊñπÊ≥ï‰∏≠‰∏ªË¶ÅÂÅö‰∫Ü‰∏§‰ª∂‰∫ãÔºö È™åËØÅÂΩìÂâç environment ÊòØÂê¶ÊòØ SpringCloud ÁöÑÔºà3.0.0 ÂºÄÂßãÊîØÊåÅ springCloudÔºå‰πãÂâçÁâàÊú¨Êó†Ê≠§ checkÔºâ ÂàùÂßãÂåñ logging.level Ëøô‰∏§‰ª∂‰∫ãÂíåÂÅ•Â∫∑Ê£ÄÊü•Ê≤°Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºå‰ΩÜÊòØÊó¢ÁÑ∂ÊîæÂú®Ëøô‰∏™Ê®°ÂùóÈáåÈù¢ËøòÊòØÊù•Áúã‰∏ã„ÄÇ 1„ÄÅspringCloud ÁéØÂ¢ÉÈ™åËØÅÈ¶ñÂÖàÂ∞±ÊòØ‰∏∫‰ªÄ‰πà‰ºöÊúâËøô‰∏™È™åËØÅ„ÄÇSOFABoot Âú®ÊîØÊåÅ SpringcLoud Êó∂ÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÂΩìÂú® classpath ‰∏≠Ê∑ªÂä†spring-cloud-context ‰æùËµñÂÖ≥Á≥ªÊó∂,org.springframework.context.ApplicationContextInitializer‰ºöË¢´Ë∞ÉÁî®‰∏§Ê¨°„ÄÇÂÖ∑‰ΩìËÉåÊôØÂèØÂèÇËÄÉ # issue1151 &amp;&amp; # issue 232 1234567891011121314private final static String SPRING_CLOUD_MARK_NAME = "org.springframework.cloud.bootstrap.BootstrapConfiguration";public static boolean isSpringCloudBootstrapEnvironment(Environment environment) &#123; if (environment instanceof ConfigurableEnvironment) &#123; return !((ConfigurableEnvironment) environment).getPropertySources().contains( SofaBootInfraConstants.SOFA_BOOTSTRAP) &amp;&amp; isSpringCloud(); &#125; return false;&#125;public static boolean isSpringCloud() &#123; return ClassUtils.isPresent(SPRING_CLOUD_MARK_NAME, null);&#125; ‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÊòØ SOFABoot Êèê‰æõÁöÑ‰∏Ä‰∏™Áî®‰∫éÂå∫ÂàÜ ÂºïÂØº‰∏ä‰∏ãÊñá Âíå Â∫îÁî®‰∏ä‰∏ãÊñá ÁöÑÊñπÊ≥ïÔºö Ê£ÄÈ™åÊòØÂê¶Êúâ&quot;org.springframework.cloud.bootstrap.BootstrapConfiguration&quot;Ëøô‰∏™Á±ªÊù•Âà§Êñ≠ÂΩìÂâçÊòØÂê¶ÂºïÂÖ•‰∫ÜspingCloudÁöÑÂºïÂØºÈÖçÁΩÆÁ±ª ‰ªéenvironment ‰∏≠Ëé∑Âèñ MutablePropertySources ÂÆû‰æãÔºåÈ™åËØÅ MutablePropertySources ‰∏≠ÊòØÂê¶ÂåÖÊã¨ sofaBootstrap Ôºà Â¶ÇÊûúÂΩìÂâçÁéØÂ¢ÉÊòØ SOFA bootstrap environmentÔºåÂàôÂåÖÂê´ sofaBootstrapÔºõËøô‰∏™ÊòØÂú® SofaBootstrapRunListener ÂõûË∞ÉÊñπÊ≥ï‰∏≠ËÆæÁΩÆËøõË°åÁöÑ Ôºâ 2„ÄÅÂàùÂßãÂåñ logging.levelËøôÈáåÊòØÂ§ÑÁêÜ SOFABoot Êó•ÂøóÁ©∫Èó¥ÈöîÁ¶ªÁöÑ„ÄÇ 1234567891011121314151617181920public static void initSofaBootLogger(Environment environment, String runtimeLogLevelKey) &#123; // ÂàùÂßãÂåñ logging.path ÂèÇÊï∞ String loggingPath = environment.getProperty(Constants.LOG_PATH); if (!StringUtils.isEmpty(loggingPath)) &#123; System.setProperty(Constants.LOG_PATH, environment.getProperty(Constants.LOG_PATH)); ReportUtil.report("Actual " + Constants.LOG_PATH + " is [ " + loggingPath + " ]"); &#125; //for example : init logging.level.com.alipay.sofa.runtime argument String runtimeLogLevelValue = environment.getProperty(runtimeLogLevelKey); if (runtimeLogLevelValue != null) &#123; System.setProperty(runtimeLogLevelKey, runtimeLogLevelValue); &#125; // init file.encoding String fileEncoding = environment.getProperty(Constants.LOG_ENCODING_PROP_KEY); if (!StringUtils.isEmpty(fileEncoding)) &#123; System.setProperty(Constants.LOG_ENCODING_PROP_KEY, fileEncoding); &#125;&#125; SofaBootHealthCheckAutoConfigurationËøô‰∏™Á±ªÊòØ SOFABoot ÂÅ•Â∫∑Ê£ÄÊü•Êú∫Âà∂ÁöÑËá™Âä®ÂåñÈÖçÁΩÆÂÆûÁé∞„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@Configurationpublic class SofaBootHealthCheckAutoConfiguration &#123; /** ReadinessCheckListener: ÂÆπÂô®Âà∑Êñ∞‰πãÂêéÂõûË∞É */ @Bean public ReadinessCheckListener readinessCheckListener() &#123; return new ReadinessCheckListener(); &#125; /** HealthCheckerProcessor: HealthCheckerÂ§ÑÁêÜÂô® */ @Bean public HealthCheckerProcessor healthCheckerProcessor() &#123; return new HealthCheckerProcessor(); &#125; /** HealthCheckerProcessor: HealthIndicatorÂ§ÑÁêÜÂô® */ @Bean public HealthIndicatorProcessor healthIndicatorProcessor() &#123; return new HealthIndicatorProcessor(); &#125; /** AfterReadinessCheckCallbackProcessor: ReadinessCheck‰πãÂêéÁöÑÂõûË∞ÉÂ§ÑÁêÜÂô® */ @Bean public AfterReadinessCheckCallbackProcessor afterReadinessCheckCallbackProcessor() &#123; return new AfterReadinessCheckCallbackProcessor(); &#125; /** ËøîÂõû SofaBootÂÅ•Â∫∑Ê£ÄÊü•ÊåáÊ†áÁ±ª ÂÆû‰æã*/ @Bean public SofaBootHealthIndicator sofaBootHealthIndicator() &#123; return new SofaBootHealthIndicator(); &#125; @ConditionalOnClass(Endpoint.class) public static class ConditionReadinessEndpointConfiguration &#123; @Bean @ConditionalOnEnabledEndpoint public SofaBootReadinessCheckEndpoint sofaBootReadinessCheckEndpoint() &#123; return new SofaBootReadinessCheckEndpoint(); &#125; &#125; @ConditionalOnClass(Endpoint.class) public static class ReadinessCheckExtensionConfiguration &#123; @Bean @ConditionalOnMissingBean @ConditionalOnEnabledEndpoint public ReadinessEndpointWebExtension readinessEndpointWebExtension() &#123; return new ReadinessEndpointWebExtension(); &#125; &#125;&#125; ReadinessCheckListener12public class ReadinessCheckListener implements PriorityOrdered, ApplicationListener&lt;ContextRefreshedEvent&gt; ‰ªé‰ª£Á†ÅÊù•ÁúãÔºåReadinessCheckListener ÂÆûÁé∞‰∫Ü ApplicationListener ÁõëÂê¨Âô®Êé•Âè£ÔºåÂÖ∂ÊâÄÁõëÂê¨ÁöÑ‰∫ã‰ª∂ÂØπË±°ÊòØContextRefreshedEventÔºåÂç≥ÂΩìÂÆπÂô®‰∏ä‰∏ãÊñáÂà∑Êñ∞ÂÆåÊàê‰πãÂêéÂõûË∞É„ÄÇ SOFABoot ‰∏≠ÈÄöËøáËøô‰∏™ÁõëÂê¨Âô®Êù•ÂÆåÊàê readniess check ÁöÑÂ§ÑÁêÜ„ÄÇ onApplicationEvent ÂõûË∞ÉÊñπÊ≥ïÔºö 12345678910public void onApplicationEvent(ContextRefreshedEvent event) &#123; // healthCheckerProcessor init healthCheckerProcessor.init(); // healthIndicatorProcessor init healthIndicatorProcessor.init(); // afterReadinessCheckCallbackProcessor init afterReadinessCheckCallbackProcessor.init(); // readiness health check execute readinessHealthCheck();&#125; ÂàùÂßãÂåñ healthCheckerProcessorÔºåËøô‰∏™ÈáåÈù¢Â∞±ÊòØÂ∞ÜÂΩìÂâçÊâÄÊúâÁöÑHealthCheckerÁ±ªÂûãÁöÑbeanÊâæÂá∫Êù•ÔºåÁÑ∂ÂêéÊîæÂú®‰∏Ä‰∏™map‰∏≠ÔºåÁ≠âÂæÖÂêéÈù¢ÁöÑ readiness check„ÄÇ 12345678910111213141516171819public void init() &#123; // ÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñ‰∫Ü if (isInitiated.compareAndSet(false, true)) &#123; // applicationContext Â∫îÁî®‰∏ä‰∏ãÊñá‰∏çËÉΩ‰∏∫null Assert.notNull(applicationContext, () -&gt; "Application must not be null"); // Ëé∑ÂèñÊâÄÊúâÁ±ªÂûãÊòØ HealthChecker ÁöÑbean Map&lt;String, HealthChecker&gt; beansOfType = applicationContext .getBeansOfType(HealthChecker.class); // ÊéíÂ∫è healthCheckers = HealthCheckUtils.sortMapAccordingToValue(beansOfType, applicationContext.getAutowireCapableBeanFactory()); // ÊûÑÂª∫Êó•Âøó‰ø°ÊÅØÔºåÂØπÂ∫îÂú®ÂÅ•Â∫∑Ê£ÄÊü•Êó•ÂøóÈáåÈù¢ÊâìÂç∞Âá∫Êù•ÁöÑÊòØÔºö // ./logs/health-check/common-default.log:Found 0 HealthChecker implementation StringBuilder healthCheckInfo = new StringBuilder(512).append("Found ") .append(healthCheckers.size()).append(" HealthChecker implementation:") .append(String.join(",", healthCheckers.keySet())); logger.info(healthCheckInfo.toString()); &#125;&#125; ÂàùÂßãÂåñ healthIndicatorProcessorÔºåÂ∞ÜÊâÄÊúâÁöÑhealthIndicator Á±ªÂûãÁöÑbean ÊâæÂá∫Êù•ÔºåÁÑ∂ÂêéÊîæÂú®‰∏Ä‰∏™map‰∏≠Á≠âÂæÖreadiness check„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú® SOFABoot ÁöÑ Readiness Check ÈáåÈù¢Â¢ûÂä†‰∏Ä‰∏™Ê£ÄÊü•È°πÔºåÈÇ£‰πàÂèØ‰ª•Áõ¥Êé•Êâ©Â±ï Spring Boot ÁöÑHealthIndicatorËøô‰∏™Êé•Âè£„ÄÇ 12345678910111213141516171819202122232425public void init() &#123; // ÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñ if (isInitiated.compareAndSet(false, true)) &#123; // applicationContext È™åËØÅ Assert.notNull(applicationContext, () -&gt; "Application must not be null"); // Ëé∑ÂèñÊâÄÊúâHealthIndicatorÁ±ªÂûãÁöÑbean Map&lt;String, HealthIndicator&gt; beansOfType = applicationContext .getBeansOfType(HealthIndicator.class); // ÊîØÊåÅ Reactive ÊñπÂºè if (ClassUtils.isPresent(REACTOR_CLASS, null)) &#123; applicationContext.getBeansOfType(ReactiveHealthIndicator.class).forEach( (name, indicator) -&gt; beansOfType.put(name, () -&gt; indicator.health().block())); &#125; // ÊéíÂ∫è healthIndicators = HealthCheckUtils.sortMapAccordingToValue(beansOfType, applicationContext.getAutowireCapableBeanFactory()); // ÊûÑÂª∫Êó•Âøó‰ø°ÊÅØ // Found 2 HealthIndicator implementation: // sofaBootHealthIndicator, diskSpaceHealthIndicator StringBuilder healthIndicatorInfo = new StringBuilder(512).append("Found ") .append(healthIndicators.size()).append(" HealthIndicator implementation:") .append(String.join(",", healthIndicators.keySet())); logger.info(healthIndicatorInfo.toString()); &#125;&#125; ÂàùÂßãÂåñ afterReadinessCheckCallbackProcessor„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú® Readiness Check ‰πãÂêéÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖÔºåÈÇ£‰πàÂèØ‰ª•Êâ©Â±ï SOFABoot ÁöÑËøô‰∏™Êé•Âè£ 12345678910111213141516171819public void init() &#123; // ÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñ if (isInitiated.compareAndSet(false, true)) &#123; // applicationContext È™åËØÅ Assert.notNull(applicationContext, () -&gt; "Application must not be null"); // ÊâæÂà∞ÊâÄÊúâ ReadinessCheckCallback Á±ªÂûãÁöÑ bean Map&lt;String, ReadinessCheckCallback&gt; beansOfType = applicationContext .getBeansOfType(ReadinessCheckCallback.class); // ÊéíÂ∫è readinessCheckCallbacks = HealthCheckUtils.sortMapAccordingToValue(beansOfType, applicationContext.getAutowireCapableBeanFactory()); // ÊûÑÂª∫Êó•Âøó StringBuilder applicationCallbackInfo = new StringBuilder(512).append("Found ") .append(readinessCheckCallbacks.size()) .append(" ReadinessCheckCallback implementation: ") .append(String.join(",", beansOfType.keySet())); logger.info(applicationCallbackInfo.toString()); &#125;&#125; readinessHealthCheckÔºåÂâçÈù¢ÁöÑÂá†‰∏™initÊñπÊ≥ï‰∏≠ÂùáÊòØ‰∏∫readinessHealthCheckÂÅöÂáÜÂ§áÁöÑÔºåÂà∞ËøôÈáåSOFABootÂ∑≤ÁªèÊãøÂà∞‰∫ÜÂΩìÂâçÂ§öÊúâÁöÑHealthChecker„ÄÅHealthIndicator Âíå ReadinessCheckCallback Á±ªÂûãÁöÑ bean ‰ø°ÊÅØ„ÄÇ 12345678910111213141516171819202122232425262728293031323334// readiness health checkpublic void readinessHealthCheck() &#123; // ÊòØÂê¶Ë∑≥ËøáÊâÄÊúâcheck,ÂèØ‰ª•ÈÄöËøá com.alipay.sofa.healthcheck.skip.all ÈÖçÁΩÆÈ°πÈÖçÁΩÆÂÜ≥ÂÆö if (skipAllCheck()) &#123; logger.warn("Skip all readiness health check."); &#125; else &#123; // ÊòØÂê¶Ë∑≥ËøáÊâÄÊúâ HealthChecker Á±ªÂûãbeanÁöÑ readinessHealthCheck, // ÂèØ‰ª•ÈÄöËøácom.alipay.sofa.healthcheck.skip.componentÈÖçÁΩÆÈ°πÈÖçÁΩÆ if (skipComponent()) &#123; logger.warn("Skip HealthChecker health check."); &#125; else &#123; //HealthChecker ÁöÑ readiness check healthCheckerStatus = healthCheckerProcessor .readinessHealthCheck(healthCheckerDetails); &#125; // ÊòØÂê¶Ë∑≥ËøáÊâÄÊúâHealthIndicator Á±ªÂûãbeanÁöÑreadinessHealthCheck // ÂèØ‰ª•ÈÄöËøá com.alipay.sofa.healthcheck.skip.indicatorÈÖçÁΩÆÈ°πÈÖçÁΩÆ if (skipIndicator()) &#123; logger.warn("Skip HealthIndicator health check."); &#125; else &#123; //HealthIndicator ÁöÑ readiness check healthIndicatorStatus = healthIndicatorProcessor .readinessHealthCheck(healthIndicatorDetails); &#125; &#125; // ReadinessCheck ‰πãÂêéÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂÅö‰∏Ä‰∫õÂêéÁΩÆÂ§ÑÁêÜ healthCallbackStatus = afterReadinessCheckCallbackProcessor .afterReadinessCheckCallback(healthCallbackDetails); if (healthCheckerStatus &amp;&amp; healthIndicatorStatus &amp;&amp; healthCallbackStatus) &#123; logger.info("Readiness check result: success"); &#125; else &#123; logger.error("Readiness check result: fail"); &#125;&#125; Readiness Check ÂÅö‰∫Ü‰ªÄ‰πàÂâçÈù¢ÊòØ SOFABoot ÂÅ•Â∫∑Ê£ÄÊü•ÁªÑ‰ª∂Â§ÑÁêÜÂÅ•Â∫∑Ê£ÄÊü•ÈÄªËæëÁöÑ‰∏Ä‰∏™Â§ß‰ΩìÊµÅÁ®ãÔºå‰∫ÜËß£Âà∞‰∫Ü Readiness ÂåÖÊã¨Ê£ÄÊü• HealthChecker Á±ªÂûãÁöÑbeanÂíåHealthIndicator Á±ªÂûãÁöÑ bean„ÄÇÂÖ∂‰∏≠HealthIndicatorÊòØSpringBootËá™Â∑±ÁöÑÊé•Âè£ ÔºåËÄå HealthChecker ÊòØ SOFABoot Êèê‰æõÁöÑÊé•Âè£„ÄÇ‰∏ãÈù¢ÁªßÁª≠ÈÄöËøá XXXProcess Êù•Áúã‰∏ã Readiness Check Âà∞Â∫ïÂÅö‰∫Ü‰ªÄ‰πàÔºü HealthCheckerProcessorHealthChecker ÁöÑÂÅ•Â∫∑Ê£ÄÊü•Â§ÑÁêÜÂô®ÔºåreadinessHealthCheck ÊñπÊ≥ï 12345678910111213public boolean readinessHealthCheck(Map&lt;String, Health&gt; healthMap) &#123; Assert.notNull(healthCheckers, "HealthCheckers must not be null."); logger.info("Begin SOFABoot HealthChecker readiness check."); boolean result = healthCheckers.entrySet().stream() .map(entry -&gt; doHealthCheck(entry.getKey(), entry.getValue(), true, healthMap, true)) .reduce(true, BinaryOperators.andBoolean()); if (result) &#123; logger.info("SOFABoot HealthChecker readiness check result: success."); &#125; else &#123; logger.error("SOFABoot HealthChecker readiness check result: failed."); &#125; return result;&#125; ËøôÈáåÊØè‰∏™HealthCheckerÂèàÂßîÊâòÁªôdoHealthCheckÊù•Ê£ÄÊü• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152private boolean doHealthCheck(String beanId, HealthChecker healthChecker, boolean isRetry, Map&lt;String, Health&gt; healthMap, boolean isReadiness) &#123; Assert.notNull(healthMap, "HealthMap must not be null"); Health health; boolean result; int retryCount = 0; // check Á±ªÂûã readiness Ôºü liveness String checkType = isReadiness ? "readiness" : "liveness"; do &#123; // Ëé∑Âèñ Health ÂØπË±° health = healthChecker.isHealthy(); // Ëé∑Âèñ ÂÅ•Â∫∑Ê£ÄÊü•Áä∂ÊÄÅÁªìÊûú result = health.getStatus().equals(Status.UP); if (result) &#123; logger.info("HealthChecker[&#123;&#125;] &#123;&#125; check success with &#123;&#125; retry.", beanId, checkType,retryCount); break; &#125; else &#123; logger.info("HealthChecker[&#123;&#125;] &#123;&#125; check fail with &#123;&#125; retry.", beanId, checkType,retryCount); &#125; // ÈáçËØï &amp;&amp; Á≠âÂæÖ if (isRetry &amp;&amp; retryCount &lt; healthChecker.getRetryCount()) &#123; try &#123; retryCount += 1; TimeUnit.MILLISECONDS.sleep(healthChecker.getRetryTimeInterval()); &#125; catch (InterruptedException e) &#123; logger .error( String .format( "Exception occurred while sleeping of %d retry HealthChecker[%s] %s check.", retryCount, beanId, checkType), e); &#125; &#125; &#125; while (isRetry &amp;&amp; retryCount &lt; healthChecker.getRetryCount()); // Â∞ÜÂΩìÂâç ÂÆû‰æã bean ÁöÑÂÅ•Â∫∑Ê£ÄÊü•ÁªìÊûúÂ≠òÂà∞ÁªìÊûúÈõÜhealthMap‰∏≠ healthMap.put(beanId, health); try &#123; if (!result) &#123; logger .error( "HealthChecker[&#123;&#125;] &#123;&#125; check fail with &#123;&#125; retry; fail details:&#123;&#125;; strict mode:&#123;&#125;", beanId, checkType, retryCount, objectMapper.writeValueAsString(health.getDetails()), healthChecker.isStrictCheck()); &#125; &#125; catch (JsonProcessingException ex) &#123; logger.error( String.format("Error occurred while doing HealthChecker %s check.", checkType), ex); &#125; // ËøîÂõûÂÅ•Â∫∑Ê£ÄÊü•ÁªìÊûú return !healthChecker.isStrictCheck() || result;&#125; ËøôÈáåÁöÑ doHealthCheck ÁªìÊûúÈúÄË¶Å‰æùËµñÂÖ∑‰Ωì HealthChecker ÂÆûÁé∞Á±ªÁöÑÂ§ÑÁêÜ„ÄÇÈÄöËøáËøôÊ†∑‰∏ÄÁßçÊñπÂºèÂèØ‰ª•SOFABootÂèØ‰ª•ÂæàÂèãÂ•ΩÁöÑÂÆûÁé∞ÂØπÊâÄ‰ª• HealthChecker ÁöÑÂÅ•Â∫∑Ê£ÄÊü•„ÄÇHealthIndicatorProcessor ÁöÑ readinessHealthCheck ÂíåHealthCheckerÁöÑÂü∫Êú¨Â∑Æ‰∏çÂ§öÔºõÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•Ëá™Ë°åÈòÖËØªÊ∫êÁ†Å Alipay-SOFABoot„ÄÇ AfterReadinessCheckCallbackProcessorËøô‰∏™Êé•Âè£ÊòØ SOFABoot Êèê‰æõÁöÑ‰∏Ä‰∏™Êâ©Â±ïÊé•Âè£Ôºå Áî®‰∫éÂú® Readiness Check ‰πãÂêéÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖ„ÄÇÂÖ∂ÂÆûÁé∞ÊÄùË∑ØÂíåÂâçÈù¢ÁöÑXXXXProcessor ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂØπ‰πãÂâçÂàùÂßãÂåñÊó∂ÂæóÂà∞ÁöÑÊâÄÊúâÁöÑReadinessCheckCallbacksÂÆû‰æãbeanÈÄê‰∏ÄËøõË°åÂõûË∞ÉÂ§ÑÁêÜ„ÄÇ 123456789101112131415public boolean afterReadinessCheckCallback(Map&lt;String, Health&gt; healthMap) &#123; logger.info("Begin ReadinessCheckCallback readiness check"); Assert.notNull(readinessCheckCallbacks, "ReadinessCheckCallbacks must not be null."); boolean result = readinessCheckCallbacks.entrySet().stream() .map(entry -&gt; doHealthCheckCallback(entry.getKey(), entry.getValue(), healthMap)) .reduce(true, BinaryOperators.andBoolean()); if (result) &#123; logger.info("ReadinessCheckCallback readiness check result: success."); &#125; else &#123; logger.error("ReadinessCheckCallback readiness check result: failed."); &#125; return result;&#125; ÂêåÊ†∑‰πüÊòØÂßîÊâòÁªô‰∫ÜdoHealthCheckCallbackÊù•Â§ÑÁêÜ 123456789101112131415161718private boolean doHealthCheckCallback(String beanId, ReadinessCheckCallback readinessCheckCallback, Map&lt;String, Health&gt; healthMap) &#123; Assert.notNull(healthMap, () -&gt; "HealthMap must not be null"); boolean result = false; Health health = null; try &#123; health = readinessCheckCallback.onHealthy(applicationContext); result = health.getStatus().equals(Status.UP); // print log ÁúÅÁï• &#125; catch (Throwable t) &#123; // ÂºÇÂ∏∏Â§ÑÁêÜ &#125; finally &#123; // Â≠òÂÖ• healthMap healthMap.put(beanId, health); &#125; return result;&#125; Êâ©Â±ï Readiness Check ËÉΩÂäõÊåâÁÖß‰∏äÈù¢ÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™Â∑±Êù•ÂÆûÁé∞‰∏ãËøôÂá†‰∏™Êâ©Â±ï„ÄÇ ÂÆûÁé∞ HealthChecker Êé•Âè£1234567891011121314151617181920212223242526272829303132333435363738@Componentpublic class GlmapperHealthChecker implements HealthChecker &#123; @Override public Health isHealthy() &#123; // ÂèØ‰ª•Ê£ÄÊµãÊï∞ÊçÆÂ∫ìËøûÊé•ÊòØÂê¶ÊàêÂäü // ÂèØ‰ª•Ê£ÄÊµãzookeeperÊòØÂê¶ÂêØÂä®ÊàêÂäü // ÂèØ‰ª•Ê£ÄÊµãredisÂÆ¢Êà∑Á´ØÊòØÂê¶ÂêØÂä®ÊàêÂäü // everything you want ... if(OK)&#123; return Health.up().build(); &#125; return Health.down().build(); &#125; @Override public String getComponentName() &#123; // ÁªÑ‰ª∂Âêç return "GlmapperComponent"; &#125; @Override public int getRetryCount() &#123; // ÈáçËØïÊ¨°Êï∞ return 1; &#125; @Override public long getRetryTimeInterval() &#123; // ÈáçËØïÈó¥Èöî return 0; &#125; @Override public boolean isStrictCheck() &#123; return false; &#125;&#125; ÂÆûÁé∞ ReadinessCheckCallback Êé•Âè£123456789101112@Componentpublic class GlmapperReadinessCheckCallback implements ReadinessCheckCallback &#123; @Override public Health onHealthy(ApplicationContext applicationContext) &#123; Object glmapperHealthChecker = applicationContext.getBean("glmapperHealthChecker"); if (glmapperHealthChecker instanceof GlmapperHealthChecker)&#123; return Health.up().build(); &#125; return Health.down().build(); &#125;&#125; ÂÜçÊù•Áúã‰∏ãÂÅ•Â∫∑Ê£ÄÊü•Êó•ÂøóÔºö ÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨Ëá™Â∑±ÂÆö‰πâÁöÑÊ£ÄÊü•Á±ªÂûãready‰∫Ü„ÄÇ ‰ªéÊó•ÂøóÁúãÂà∞Êúâ‰∏Ä‰∏™ sofaBootHealthIndicatorÔºåÂÆûÁé∞‰∫ÜHealthIndicator Êé•Âè£„ÄÇ 1234567891011121314151617public class SofaBootHealthIndicator implements HealthIndicator &#123; private static final String CHECK_RESULT_PREFIX = "Middleware"; @Autowired private HealthCheckerProcessor healthCheckerProcessor; @Override public Health health() &#123; Map&lt;String, Health&gt; healths = new HashMap&lt;&gt;(); // Ë∞ÉÁî®‰∫Ü healthCheckerProcessor ÁöÑ livenessHealthCheck boolean checkSuccessful = healthCheckerProcessor.livenessHealthCheck(healths); if (checkSuccessful) &#123; return Health.up().withDetail(CHECK_RESULT_PREFIX, healths).build(); &#125; else &#123; return Health.down().withDetail(CHECK_RESULT_PREFIX, healths).build(); &#125; &#125;&#125; livenessHealthCheck Âíå readinessHealthCheck ‰∏§‰∏™ÊñπÊ≥ïÈÉΩÊòØ‰∫§Áªô doHealthCheck Êù•Â§ÑÁêÜÁöÑÔºåÊ≤°ÊúâÁúãÂá∫Êù•Êúâ‰ªÄ‰πàÂå∫Âà´„ÄÇ Â∞èÁªìÊú¨ÊñáÂü∫‰∫é SOFABoot 3.0.0 ÁâàÊú¨Ôºå‰∏é‰πãÂâçÁâàÊú¨Êúâ‰∏Ä‰∫õÂå∫Âà´„ÄÇËØ¶ÁªÜÂèòÊõ¥ËßÅÔºöSOFABoot upgrade_3_x„ÄÇÊú¨ÁØáÊñáÁ´†ÁÆÄÂçï‰ªãÁªç‰∫Ü SOFABoot ÂØπ SpringBoot ÂÅ•Â∫∑Ê£ÄÊü•ËÉΩÂäõÊâ©Â±ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ„ÄÇ ÊúÄÂêéÂÜçÊù•Ë°•ÂÖÖ‰∏ã liveness Âíå readinessÔºå‰ªéÂ≠óÈù¢ÊÑèÊÄùÊù•ÁêÜËß£ÔºålivenessÂ∞±ÊòØÊòØÂê¶ÊòØÊ¥ªÁöÑÔºåreadiness Â∞±ÊòØÊÑèÊÄùÊòØÂê¶ÂèØËÆøÈóÆÁöÑ„ÄÇ readinessÔºöÂ∫îÁî®Âç≥‰æøÂ∑≤ÁªèÊ≠£Âú®ËøêË°å‰∫ÜÔºåÂÆÉ‰ªçÁÑ∂ÈúÄË¶Å‰∏ÄÂÆöÊó∂Èó¥ÊâçËÉΩ Êèê‰æõ ÊúçÂä°ÔºåËøôÊÆµÊó∂Èó¥ÂèØËÉΩÁî®Êù•Âä†ËΩΩÊï∞ÊçÆÔºåÂèØËÉΩÁî®Êù•ÊûÑÂª∫ÁºìÂ≠òÔºåÂèØËÉΩÁî®Êù•Ê≥®ÂÜåÊúçÂä°ÔºåÂèØËÉΩÁî®Êù•ÈÄâ‰∏æ LeaderÁ≠âÁ≠â„ÄÇÊÄª‰πã Readiness Ê£ÄÊü•ÈÄöËøáÂâçÊòØ‰∏ç‰ºöÊúâÊµÅÈáèÂèëÁªôÂ∫îÁî®ÁöÑ„ÄÇÁõÆÂâç SOFARPC Â∞±ÊòØÂú® readiness check ‰πãÂêéÊâç‰ºöÂ∞ÜÊâÄÊúâÁöÑÊúçÂä°Ê≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÂéª„ÄÇ livenessÔºöÊ£ÄÊµãÂ∫îÁî®Á®ãÂ∫èÊòØÂê¶Ê≠£Âú®ËøêË°å]]></content>
      <categories>
        <category>SOFA</category>
      </categories>
      <tags>
        <tag>SOFABoot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[20181111-‰π¶Ê≥ïÁªÉ‰π†]]></title>
    <url>%2F2018%2F11%2F10%2Fshufa-20181111%2F</url>
    <content type="text"><![CDATA[ÈªÑÈπ§Ê•ºÈÄÅÂ≠üÊµ©ÁÑ∂‰πãÂπøÈôµ -ÊùéÁôΩÊïÖ‰∫∫Ë•øËæûÈªÑÈπ§Ê•ºÔºåÁÉüËä±‰∏âÊúà‰∏ãÊâ¨Â∑ûÂ≠§Â∏ÜËøúÂΩ±Á¢ßÁ©∫Â∞ΩÔºåÂîØËßÅÈïøÊ±üÂ§©ÈôÖÊµÅ Â∞ÜËøõÈÖí -ÊùéÁôΩÂêõ‰∏çËßÅÔºåÈªÑÊ≤≥‰πãÊ∞¥Â§©‰∏äÊù•ÔºåÂ•îÊµÅÂà∞Êµ∑‰∏çÂ§çÂõû„ÄÇÂêõ‰∏çËßÅÔºåÈ´òÂ†ÇÊòéÈïúÊÇ≤ÁôΩÂèëÔºåÊúùÂ¶ÇÈùí‰∏ùÊöÆÊàêÈõ™„ÄÇ‰∫∫ÁîüÂæóÊÑèÈ°ªÂ∞ΩÊ¨¢ÔºåËé´‰ΩøÈáëÊ®ΩÁ©∫ÂØπÊúà„ÄÇÂ§©ÁîüÊàëÊùêÂøÖÊúâÁî®ÔºåÂçÉÈáëÊï£Â∞ΩËøòÂ§çÊù•„ÄÇÁÉπÁæäÂÆ∞Áâõ‰∏î‰∏∫‰πêÔºå‰ºöÈ°ª‰∏ÄÈ•Æ‰∏âÁôæÊùØ„ÄÇÂ≤ëÂ§´Â≠êÔºå‰∏π‰∏òÁîüÔºåÂ∞ÜËøõÈÖíÔºåÊùØËé´ÂÅú„ÄÇ‰∏éÂêõÊ≠å‰∏ÄÊõ≤ÔºåËØ∑Âêõ‰∏∫ÊàëÂÄæËÄ≥Âê¨„ÄÇ(ÂÄæËÄ≥Âê¨ ‰∏Ä‰ΩúÔºö‰æßËÄ≥Âê¨)ÈíüÈºìÈ¶îÁéâ‰∏çË∂≥Ë¥µÔºå‰ΩÜÊÑøÈïøÈÜâ‰∏çÂ§çÈÜí„ÄÇ(‰∏çË∂≥Ë¥µ ‰∏Ä‰ΩúÔºö‰ΩïË∂≥Ë¥µÔºõ‰∏çÂ§çÈÜí ‰∏Ä‰ΩúÔºö‰∏çÊÑøÈÜí/‰∏çÁî®ÈÜí)Âè§Êù•Âú£Ë¥§ÁöÜÂØÇÂØûÔºåÊÉüÊúâÈ•ÆËÄÖÁïôÂÖ∂Âêç„ÄÇ(Âè§Êù• ‰∏Ä‰ΩúÔºöËá™Âè§ÔºõÊÉü ÈÄöÔºöÂîØ)ÈôàÁéãÊòîÊó∂ÂÆ¥Âπ≥‰πêÔºåÊñóÈÖíÂçÅÂçÉÊÅ£Ê¨¢Ë∞ë„ÄÇ‰∏ª‰∫∫‰Ωï‰∏∫Ë®ÄÂ∞ëÈí±ÔºåÂæÑÈ°ªÊ≤ΩÂèñÂØπÂêõÈÖå„ÄÇ‰∫îËä±È©¨ÔºåÂçÉÈáëË£òÔºåÂëºÂÑøÂ∞ÜÂá∫Êç¢ÁæéÈÖíÔºå‰∏éÂ∞îÂêåÈîÄ‰∏áÂè§ÊÑÅ„ÄÇ ÈùíÁéâÊ°à¬∑ÂÖÉÂ§ï -ËæõÂºÉÁñæ‰∏úÈ£éÂ§úÊîæËä±ÂçÉÊ†ë„ÄÇÊõ¥ÂêπËêΩ„ÄÅÊòüÂ¶ÇÈõ®„ÄÇÂÆùÈ©¨ÈõïËΩ¶È¶ôÊª°Ë∑Ø„ÄÇÂá§ÁÆ´Â£∞Âä®ÔºåÁéâÂ£∂ÂÖâËΩ¨Ôºå‰∏ÄÂ§úÈ±ºÈæôËàû„ÄÇËõæÂÑøÈõ™Êü≥ÈªÑÈáëÁºï„ÄÇÁ¨ëËØ≠ÁõàÁõàÊöóÈ¶ôÂéª„ÄÇ‰ºóÈáåÂØª‰ªñÂçÉÁôæÂ∫¶„ÄÇËì¶ÁÑ∂ÂõûÈ¶ñÔºåÈÇ£‰∫∫Âç¥Âú®ÔºåÁÅØÁÅ´ÈòëÁèäÂ§Ñ„ÄÇ]]></content>
      <categories>
        <category>‰π¶Ê≥ï</category>
      </categories>
      <tags>
        <tag>‰π¶Ê≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Á≠ñÁï•Ê®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-strategy%2F</url>
    <content type="text"><![CDATA[‰∏äÊ¨°Âú®Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè‰∏≠ÊúâÊèêÂèäÂà∞ÔºåÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÈÄöÂ∏∏‰∏ç‰ºöÂçïÁã¨Êù•ËØïÁî®ÔºåÂú®‰∏Ä‰∫õÂÆûÈôÖÁöÑÂ∫îÁî®‰∏≠‰ºöÊê≠ÈÖçÂÖ∂‰ªñÁöÑÊ®°ÂºèÊù•‰ΩøÁî®ÔºåÊØîÂ¶ÇËØ¥‰ªäÂ§©Ë¶ÅÂ≠¶‰π†ÁöÑÁ≠ñÁï•Ê®°Âºè„ÄÇ ‰∏ÄÁõ¥ÊàëÈÉΩÂæàÂñúÊ¨¢Á≠ñÁï•Ëøô‰∏™ËØçÔºåÊúâÁßçËé´ÂêçÁöÑÈ´òÂ§ß‰∏äÔºåÂØπ‰∏âÂõΩÊúâ‰∫ÜËß£ÁöÑÂ∞è‰ºô‰º¥ËÇØÂÆö‰ºöÁü•ÈÅìÔºåÊúâÁöÑË∞ãÂ£´ÊòØÊØîËæÉÁõ¥Êé•ÁöÑÔºåÁåÆËÆ°Â∞±ÊòØÁåÆËÆ°ÔºåÊúâËØùÂΩìÈù¢ËØ¥Ôºõ‰ΩÜÊòØ‰πüÊúâÁöÑË∞ãÂ£´Â∞±ÊòØÊØîËæÉÂñúÊ¨¢Êêû‰∏ÄÁßçÁ•ûÁßòÊÑüÔºåÂºÑ‰∏™Â∞èÂ∏ÉË¢ãÂ≠êÈáåÈù¢Â°û‰∏™Â∞èÂ∏ÉÊù°ÔºàÁÆÄÁß∞ÔºöÈî¶ÂõäÔºâÔºõÂØπ‰∫é‰∏Ä‰ª∂ÂæàÊ£òÊâãÁöÑ‰∫ãÊÉÖÔºåÂú®‰∫§‰ª£‰∏ãÂéªÁöÑÊó∂ÂÄôÂ∞±‰ºöÊúâËøôÊ†∑ÁöÑÂò±ÂíêÔºö‚ÄúÊ≠§‰∫ãÂÖ≥Á≥ªÈáçÂ§ßÔºåËøòÊúõXXXÔºàÊòµÁß∞ÔºâÂä°ÂøÖÂ§ÑÁêÜÂ¶•Â∏ñÔºõËøôÈáåÊúâ‰∏â‰∏™Èî¶ÂõäÔºåÂ¶ÇÊûúXXXXÔºå‰Ω†Â∞±ÊãÜÂºÄÁ¨¨X‰∏™Èî¶ÂõäÔºåÁÑ∂ÂêéXXXX‚ÄùÔºõÊúâÊó∂ÂÄôÊàëÂ∞±Âæà‰∏çËß£ÔºåÂÅáÂ¶ÇÁúüÂú®ÈÅáÂà∞‰∫ãÊÉÖÁöÑÊó∂ÂÄôÊù•ÁúãÔºåÈÇ£Ë∑Ø‰∏ä‰∏¢‰∫ÜÊÄé‰πàÂäûÔºü‰∏ÄÊë∏Âè£Ë¢ãÂ∞±ÊáµÈÄº‰∫ÜÊúâÊú®ÊúâÔºü ÊâØËøú‰∫ÜÔºå‰∏çËøáÊÑèÊÄùÂ∞±ÊòØËøô‰∏™ÊÑèÊÄùÔºå‰∏Ä‰∏™Èî¶ÂõäÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁßçÁ≠ñÁï•ÔºõÁÑ∂ÂêéÂÆÉÊúâ‰∏Ä‰∏™ÊÄªÁöÑËÉåÊôØÔºàÊàë‰ª¨Áß∞‰πã‰∏∫‰∏ä‰∏ãÊñáÁéØÂ¢ÉÔºâÔºåËøô‰∏™Â§ßËÉåÊôØ‰∏ãÔºåÊØè‰∏™‰∏çÂêåÁöÑÂú∫ÊôØÈÉΩ‰ºöÊúâ‰∏Ä‰∏≠Á≠ñÁï•Êù•ÂØπÂ∫îÂ§ÑÁêÜÔºõ Êàë‰ª¨ÂÖà‰ª•‰∏äÈù¢ÁöÑÂàóÂ≠ê‰∏∫ËÉåÊôØÊù•Êí∏‰∏Ä‰∏™Â∞èÁöÑ‰æãÂ≠êÔºåÁÑ∂ÂêéÂÜçÂéªÁúã‰∏Ä‰∏™spring‰∏≠ÊØîËæÉÂÖ∏ÂûãÁöÑÁ≠ñÁï•Ê®°Âºè‰ΩøÁî®ÔºåÊúÄÂêéÂÜçÊù•Êé¢ËÆ®‰∏ãÁ≠ñÁï•Ê®°ÂºèÁöÑÁ±ªÂõæÔºåÂπ∂‰ª•Ê≠§Êù•ËØ¥ÊòéÁ≠ñÁï•Ê®°Âºè‰∏≠ÁöÑ‰∏Ä‰∫õÂü∫Êú¨ËßíËâ≤ÂèäÂÖ∂ËÅåË¥£„ÄÇ Èî¶ÂõäÂ¶ôËÆ° ÂÖµÈ©¨Êú™Âä®ÔºåÁ≤ÆËçâÂÖàË°åÔºõ‰ΩÜÊòØËøô‰∏™ËøêËæìÁ≤ÆËçâÂà∞Â∫ïÊòØËµ∞Ê∞¥Ë∑ØËøòÊòØËµ∞ÈôÜÂú∞Âë¢ÔºüÈÇ£ËøôÂæóÁúãÂæÄÂì™Ëøê‚Ä¶ 12345678910111213141516171819202122232425package com.glmapper.designmode.policy;/** * @description: Â§ßËÉåÊôØÔºåËøêËæìÁ≤ÆËçâ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/5/5 */public class TransportFood &#123; //ÊåÅÊúâ‰∏Ä‰∏™ËøêËæìÁ≠ñÁï•ÁöÑÂØπË±° private TransportFoodStrategy strategy; /** * ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰º†ÂÖ•‰∏Ä‰∏™ÂÖ∑‰ΩìÁ≠ñÁï•ÂØπË±° * @param strategy ÂÖ∑‰ΩìÁ≠ñÁï•ÂØπË±° */ public TransportFood(TransportFoodStrategy strategy)&#123; this.strategy = strategy; &#125; /** * Á≠ñÁï•ÊñπÊ≥ï */ public void trasportFood()&#123; strategy.trasport(); &#125;&#125; Ëøô‰∏™ÊòØÊàë‰ª¨ÁöÑÊÄª‰ΩìËÉåÊôØÔºåÂ∞±ÊòØËøêËæìÁ≤ÆËçâÔºõ‰ΩÜÊòØËøô‰∏™Âè™ÊòØËØ¥Ë¶ÅËøêËæìÁ≤ÆËçâÔºå‰ΩÜÊòØÂπ∂Ê≤°ÊúâËØ¥ÊòØÊÄé‰πàËøêÔºüËøôÂ∞±ÂæóTransportFoodStrategyËøô‰∏™ËøêËæìÁ≠ñÁï•ÊúâÂÖ∑‰ΩìÁöÑËøêËæìÊñπÊ°à„ÄÇ ËøêËæìÊñπÊ°à1ÔºöÂ¶ÇÊûúÁ≤ÆËçâÊòØ‰ªéÊ≠¶Ê±âÂà∞Âçó‰∫¨ÔºåOKÔºåÈÇ£Â∞±Ëµ∞Ê∞¥ËøêÂêß„ÄÇ 123456789101112/** * @description: ËøêËæìÁ≤ÆËçâÁöÑÁ≠ñÁï•‰πãÊ∞¥ËøêËøêËæì * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/5/5 */public class WaterTransportStrategy implements TransportFoodStrategy &#123; @Override public void trasport() &#123; System.out.println("Áî®ËàπÔºåËµ∞Ê∞¥Ëøê"); &#125;&#125; ËøêËæìÊñπÊ°à2ÔºöÂ¶ÇÊûú‰ªéÂÜÖËíôÂà∞Âåó‰∫¨ÔºõÈÇ£Â∞±Ëµ∞ÈôÜËøêÂêß„ÄÇ 123456789101112/** * @description: ËøêËæìÁ≤ÆËçâÁöÑÁ≠ñÁï•‰πãÈôÜÂú∞ËøêËæì * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/5/5 */public class LandTransportStrategy implements TransportFoodStrategy &#123; @Override public void trasport() &#123; System.out.println("Áî®È©¨ËΩ¶ÔºåËµ∞ÈôÜËøê"); &#125;&#125; Â•Ω‰∫ÜÔºåÊù•Áúã‰∏ãÂ¶ôËÆ°‰ΩøÁî®Ôºö 1234567891011121314151617181920212223242526272829303132333435/** * @description: ÂÜ≥Á≠ñÂà∂ÂÆö-ÂÆ¢Êà∑Á´Ø * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/5/5 */public class Client &#123; public static void main(String[] args) &#123; TransportFoodStrategy strategy = getTransportFoodStrategy("ÂÜÖËíôÂà∞Âåó‰∫¨"); TransportFood transportFood = new TransportFood(strategy); transportFood.trasportFood(); &#125; /** * Ëé∑ÂèñËøêËæìÊñπÊ°à * @param lineType ËøêËæìË∑ØÁ∫ø * @return */ private static TransportFoodStrategy getTransportFoodStrategy( String lineType)&#123; if (lineType.equals("ÂÜÖËíôÂà∞Âåó‰∫¨"))&#123; return new LandTransportStrategy(); &#125; if (lineType.equals("Ê≠¶Ê±âÂà∞Âçó‰∫¨"))&#123; return new WaterTransportStrategy(); &#125; return null; &#125;&#125;-&gt; Áî®È©¨ËΩ¶ÔºåËµ∞ÈôÜËøê Á≤ÆËçâËøêÂÆå‰∫ÜÔºåÁúüÊ≠£ÁöÑË°®ÊºîÂºÄÂßã‰∫Ü‚Ä¶ Spring‰∏≠ÂÖ∏ÂûãÁöÑÁ≠ñÁï•Ê®°Âºè‰ΩøÁî®Êàë‰ª¨Áü•ÈÅìspringÂä†ËΩΩËµÑÊ∫êÊñá‰ª∂ÊòØÈÄöËøáResourceLoaderÊù•ÊêûÂÆöÁöÑ„ÄÇÂú®ResourceLoader‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™Ôºö 1Resource getResource(String location); Ëøô‰∏™ÊñπÊ≥ïÁöÑÊ≥®Ëß£‰∏≠ËØ¥ÈÅì 12//ÂÖÅËÆ∏Â§ö‰∏™ËµÑÊ∫êË∞ÉÁî®„ÄÇallowing for multiple &#123;@link Resource#getInputStream()&#125; calls. ËøôÈáåÂ∞±ÂæàËµ§Ë£∏Ë£∏‰∫ÜÔºå‰ªñÂëäËØâ‰∫Ü‰Ω†Ë¶ÅËé∑ÂèñËµÑÊ∫êÔºå‰ΩÜÊòØÂ¶ÇÊûúËé∑ÂèñËµÑÊ∫êÂë¢ÔºüËøôÂ∞±ÂæóÁúãÊúâÂì™‰∫õÂÖ∑‰ΩìÁöÑËé∑ÂèñÁ≠ñÁï•‰∫Ü„ÄÇ ‰∏äÂõæÂ∞±ÊòØResourceÁöÑÂÖ∑‰ΩìÂ≠êÁ±ªÂÆûÁé∞Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∫õÂÖ∑‰ΩìÁöÑÁ≠ñÁï•„ÄÇÊàë‰ª¨ÊØîËæÉÂ∏∏ËßÅÁöÑÂ∫îËØ•ÁÆóÊòØUrlResourceÔºàÂä†ËΩΩURLÊåáÂÆöÁöÑËµÑÊ∫êÔºâÂíåClasspathResourceÔºàÂä†ËΩΩÁ±ªË∑ØÂæÑ‰∏≠ÁöÑËµÑÊ∫êÔºâËøô‰∏§‰∏™„ÄÇÂÜçÊù•Áúã‰∏ãËøô‰∏™getResourceËøô‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞Ôºö getResourceÊñπÊ≥ïÊòØÂú®DefaultResourceLoader‰∏≠ÂÖ∑‰ΩìÂÆûÁé∞ÁöÑÔºõDefaultResourceLoaderÊòØResourceLoaderÁöÑÈªòËÆ§ÂÆûÁé∞„ÄÇ 12345678910111213141516171819202122232425262728293031323334@Overridepublic Resource getResource(String location) &#123; Assert.notNull(location, "Location must not be null"); //È¶ñÂÖà‰ΩøÁî®ProtocolResolverÊù•ÈÄöËøálocationÂèÇÊï∞ÂàõÂª∫ResourceÂØπË±° // spring4.3.xÂºÄÂßãÊâçÊúâÁöÑ for (ProtocolResolver protocolResolver : this.protocolResolvers) &#123; Resource resource = protocolResolver.resolve(location,this); if (resource != null) &#123; return resource; &#125; &#125; //ÊåáÂÆöË∑ØÂæÑÁöÑ if (location.startsWith("/")) &#123; return getResourceByPath(location); &#125; //‰ª•classpathÂºÄÂ§¥ÁöÑ else if (location.startsWith(CLASSPATH_URL_PREFIX)) &#123; return new ClassPathResource(location.substring( CLASSPATH_URL_PREFIX.length()), getClassLoader()); &#125; //ËøôÈáåÊòØÂÖàÂ∞ùËØïËß£ÊûêÊòØÂê¶ÊòØÂ∏¶ÊúâÁΩëÁªúÂçèËÆÆÁöÑËµÑÊ∫êÔºå //Â¶ÇÊûúËß£ÊûêÂºÇÂ∏∏ÔºåÂàôÊòØÂú®ÂºÇÂ∏∏Â§ÑÁêÜ‰∏≠‰ΩøÁî®‰∫Ü‰∏ÄÁßçÈªòËÆ§ÁöÑÊú∫Âà∂„ÄÇ else &#123; try &#123; // Try to parse the location as a URL... URL url = new URL(location); return new UrlResource(url); &#125; catch (MalformedURLException ex) &#123; // No URL -&gt; resolve as resource path. return getResourceByPath(location); &#125; &#125;&#125; ÂÖ≥‰∫éProtocolResolver ÂÖ∂ÂÆûÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞ÔºåËøôÈáåÁöÑlocationÂÖ∂ÂÆûÂíåÊàë‰ª¨‰∏äÈù¢ÈÇ£‰∏™‰æãÂ≠ê‰∏≠ÁöÑlineTypeÁöÑ‰ΩúÁî®ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊ†πÊçÆËøô‰∏™Êù•Á°ÆÂÆöÂÖ∑‰Ωì‰ΩøÁî®Âì™‰∏™Á≠ñÁï•ÊñπÊ≥ï„ÄÇ Á≠ñÁï•1Ôºö‰ΩøÁî®ProtocolResolverÊù•ÈÄöËøálocationÂèÇÊï∞ÂàõÂª∫ResourceÂØπË±°ÔºåÂú®ProtocolResolver‰∏≠ÂÖ≥‰∫éProtocolResolverÁöÑËß£ÈáäÊòØÔºöA resolution strategy for protocol-specific resource handles-ÂçèËÆÆ‰∏ìÁî®ËµÑÊ∫êÂè•ÊüÑÁöÑËß£ÊûêÁ≠ñÁï•„ÄÇ Á≠ñÁï•2ÔºöËøîÂõûÁªôÂÆöË∑ØÂæÑ‰∏äËµÑÊ∫êÁöÑËµÑÊ∫êÂè•ÊüÑ„ÄÇ Á≠ñÁï•3Ôºö‰ª•classpath:‰∏∫ÂâçÁºÄÁöÑÔºåËøôÁßçlocationÂèÇÊï∞Áõ¥Êé•ËøîÂõû‰∏Ä‰∏™ClassPathResourceÂØπË±°ÔºåË°®Á§∫Âä†ËΩΩclassesË∑ØÂæÑ‰∏ãÁöÑËµÑÊ∫êÔºõ Á≠ñÁï•4Ôºö‰ΩøÁî®ÁΩëÁªúÂçèËÆÆ‰Ωú‰∏∫ÂâçÁºÄÁöÑÔºåÊØîÂ¶Çhttp„ÄÅftpÁ≠âÔºåËøôÁßçÁõ¥Êé•ËøîÂõû‰∏Ä‰∏™UrlResourceÂØπË±°Ôºõ Á≠ñÁï•5ÔºöÊó†ÂâçÁºÄÁöÑÔºåÂú®ÈªòËÆ§ÂÆûÁé∞‰∏≠ÂíåÁ¨¨‰∏âÁßç‰∏ÄÊ†∑ÊòØÂä†ËΩΩclassesË∑ØÂæÑ‰∏ãÁöÑËµÑÊ∫êÔºå‰∏çÂêåÁöÑÊòØÊ≠§Â§ÑÂΩì‰ΩúÊòØClassPathContextResourceÊù•Â§ÑÁêÜÁöÑ„ÄÇ Spring‰∏≠ResourceÁöÑÁ≠ñ(tao)Áï•(lu)ËØ¥ÂÆå‰∫ÜÔºåÂÜçÂõûËøáÂ§¥Êù•Áúã‰∏ãÁ≠ñÁï•Ê®°ÂºèÁöÑ‰∏Ä‰∫õÂÖ∑‰ΩìÁêÜËÆ∫Áü•ËØÜ„ÄÇ Á≠ñÁï•Ê®°Âºè ÂÆö‰πâÔºöÁ≠ñÁï•Ê®°ÂºèÂ±û‰∫éÂØπË±°ÁöÑË°å‰∏∫Ê®°Âºè„ÄÇÂÖ∂Áî®ÊÑèÊòØÈíàÂØπ‰∏ÄÁªÑÁÆóÊ≥ïÔºåÂ∞ÜÊØè‰∏Ä‰∏™ÁÆóÊ≥ïÂ∞ÅË£ÖÂà∞ÂÖ∑ÊúâÂÖ±ÂêåÊé•Âè£ÁöÑÁã¨Á´ãÁöÑÁ±ª‰∏≠Ôºå‰ªéËÄå‰ΩøÂæóÂÆÉ‰ª¨ÂèØ‰ª•Áõ∏‰∫íÊõøÊç¢„ÄÇÁ≠ñÁï•Ê®°Âºè‰ΩøÂæóÁÆóÊ≥ïÂèØ‰ª•Âú®‰∏çÂΩ±ÂìçÂà∞ÂÆ¢Êà∑Á´ØÁöÑÊÉÖÂÜµ‰∏ãÂèëÁîüÂèòÂåñ„ÄÇ ÁªìÂêàÂâçÈù¢ÁöÑ‰æãÂ≠êÂàÜÊûêÂíåËøôÊÆµÂÆö‰πâÔºåÂèØ‰ª•Áü•ÈÅìÔºåÂÖ∂ÂÆûÁ≠ñÁï•Ê®°ÂºèÁúüÁöÑÊÑèÂõæ‰∏çÊòØÂ¶Ç‰ΩïÂÆûÁé∞Á≠ñÁï•ÁÆóÊ≥ïÔºåÂÆÉÊõ¥Âú®ÊÑèÁöÑÊòØÂ¶Ç‰ΩïÁªÑÁªáËøô‰∫õÁÆóÊ≥ï„ÄÇ Ëøô‰πüÊòØÁ≠ñÁï•Ê®°ÂºèÁöÑ‰ΩøÁî®ÂèØ‰ª•ËÆ©Á®ãÂ∫èÁªìÊûÑÊõ¥ÁÅµÊ¥ªÔºåÂÖ∑ÊúâÊõ¥Â•ΩÁöÑÁª¥Êä§ÊÄßÂíåÊâ©Â±ïÊÄßÁöÑÈáçË¶ÅÂõ†Á¥†„ÄÇ Á±ªÂõæÔºöËøô‰∏™Á±ªÂõæÁîªÁöÑÁ°ÆÂÆûÊòØÊúâÁÇπ‰∏ëÔºå‰ΩÜÊòØ‰∏∫‰∫Ü‰∫≤ÊâãÁªòÂà∂‰∏Ä‰∏ãÔºåÊâÄ‰ª•ËøòËØ∑Â§öÂ§öËßÅË∞ÖÔºÅ Á±ªÂõæ‰∏≠ÁöÑ‰∏Ä‰∫õËßíËâ≤Ôºö contextÔºöÁ≠ñÁï•ËÉåÊôØÔºå‰πüÂ∞±ÊòØÈúÄË¶Å‰ΩøÁî®Á≠ñÁï•ÁöÑ‰∏ª‰ΩìÔºõÂÆÉÊåÅÊúâ‰∏Ä‰∏™strategyÁ±ªÁöÑÂºïÁî® strategyÔºöÊäΩË±°Á≠ñÁï•ÔºåËøô‰∏™ËßíËâ≤ÁªôÂá∫‰∫ÜÊâÄÊúâÂÖ∑‰ΩìÁ≠ñÁï•Á±ªÊâÄÈúÄÁöÑÊé•Âè£„ÄÇÊâÄ‰ª•ÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÊàñËÄÖÊé•Âè£„ÄÇ strategyPolicyÔºöÂÖ∑‰ΩìÁ≠ñÁï•ÔºåÂÆÉÁöÑ‰ΩúÁî®Â∞±ÊòØÂåÖË£ÖÂÖ∑‰ΩìÁöÑÁÆóÊ≥ïÊàñËÄÖË°å‰∏∫ ÈÇ£‰πàÂú®ÂÆûÈôÖÁöÑÂ∫îÁî®‰∏≠ÔºåÁ≠ñÁï•Ê®°ÂºèÂà∞Â∫ïÁªôÊàë‰ª¨Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑÊòØ‰ªÄ‰πàÔºåÂÆÉËÉΩÂ§üÂ∏ÆÂä©Êàë‰ª¨Ëß£ÂÜ≥‰ªÄ‰πàÊ†∑ÁöÑÈóÆÈ¢òÂë¢ÔºüËøô‰∏™ÈúÄË¶Å‰ªéÊ®°ÂºèÊú¨Ë∫´ÁöÑ‰ºòÁº∫ÁÇπÊù•ÁúãÔºö ‰ºòÁÇπ Á≠ñÁï•Ê®°ÂºèÊèê‰æõ‰∫ÜÁÆ°ÁêÜÁõ∏ÂÖ≥ÁöÑÁÆóÊ≥ïÊóèÁöÑÂäûÊ≥ï„ÄÇÁ≠ñÁï•Á±ªÁöÑÁ≠âÁ∫ßÁªìÊûÑÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁÆóÊ≥ïÊàñË°å‰∏∫Êóè„ÄÇÊÅ∞ÂΩì‰ΩøÁî®ÁªßÊâøÂèØ‰ª•ÊääÂÖ¨ÂÖ±ÁöÑ‰ª£Á†ÅÁßªÂà∞Áà∂Á±ªÈáåÈù¢Ôºå‰ªéËÄåÈÅøÂÖç‰ª£Á†ÅÈáçÂ§ç„ÄÇ Á≠ñÁï•Ê®°ÂºèÂèØ‰ª•ÈÅøÂÖç‰ΩøÁî®Â§öÈáçÊù°‰ª∂(if-else)ËØ≠Âè•„ÄÇÈÄöÂ∏∏ÂØπ‰∫é‰∏Ä‰∏™ËÉåÊôØ‰∏ª‰ΩìÔºå‰∏ÄËà¨Âè™‰ºöÊúâ‰∏ÄÁßçÁ≠ñÁï•ÁÆóÊ≥ïÂèØ‰æõ‰ΩøÁî®Ôºå‰ΩøÁî®Â§öÈáçÊù°‰ª∂Âè•ÁöÑËØù‰∏çÊòìÁª¥Êä§ÔºõÂõ†‰∏∫ÂÆÉÊääÈááÂèñÂì™‰∏ÄÁßçÁÆóÊ≥ïÊàñÈááÂèñÂì™‰∏ÄÁßçË°å‰∏∫ÁöÑÈÄªËæë‰∏éÁÆóÊ≥ïÊàñË°å‰∏∫ÁöÑÈÄªËæëÊ∑∑ÂêàÂú®‰∏ÄËµ∑‰∫Ü„ÄÇ Áº∫ÁÇπ ÂÆ¢Êà∑Á´ØÂøÖÈ°ªÁü•ÈÅìÊâÄÊúâÁöÑÁ≠ñÁï•Á±ªÔºåÂπ∂Ëá™Ë°åÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏Ä‰∏™Á≠ñÁï•Á±ª„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÂÆ¢Êà∑Á´ØÂøÖÈ°ªÁêÜËß£Ëøô‰∫õÁÆóÊ≥ïÁöÑÂå∫Âà´Ôºå‰ª•‰æøÈÄÇÊó∂ÈÄâÊã©ÊÅ∞ÂΩìÁöÑÁÆóÊ≥ïÁ±ª„ÄÇÊç¢Ë®Ä‰πãÔºåÁ≠ñÁï•Ê®°ÂºèÂè™ÈÄÇÁî®‰∫éÂÆ¢Êà∑Á´ØÁü•ÈÅìÁÆóÊ≥ïÊàñË°å‰∏∫ÁöÑÊÉÖÂÜµ„ÄÇ Áî±‰∫éÁ≠ñÁï•Ê®°ÂºèÊääÊØè‰∏™ÂÖ∑‰ΩìÁöÑÁ≠ñÁï•ÂÆûÁé∞ÈÉΩÂçïÁã¨Â∞ÅË£ÖÊàê‰∏∫Á±ªÔºåÂ¶ÇÊûúÂ§áÈÄâÁöÑÁ≠ñÁï•ÂæàÂ§öÁöÑËØùÔºåÈÇ£‰πàÂØπË±°ÁöÑÊï∞ÁõÆÂ∞±‰ºöÂæàÂèØËßÇ„ÄÇ‚ÄìÂ¶ÇÊûúÁ≠ñÁï•ÂæàÂ§öÔºåÈÄöÂ∏∏‰ºöÈááÁî®‰∏Ä‰∫õÊ∑∑ÂêàÁ≠ñÁï•Êù•ÈÅøÂÖçÁ≠ñÁï•Á±ªÁöÑ‰∏çÊñ≠ËÜ®ËÉÄ„ÄÇ Âú®‰∫ÜËß£ÂÖ∂‰ºòÁº∫ÁÇπÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÂêàÁêÜÁöÑÂ∞ÜÂÖ∂ÊîæÂú®‰∏Ä‰∫õÈÄÇÂΩìÁöÑÂú∫ÊôØ‰∏≠Êù•ÔºõÂ¶Ç‰ª•‰∏ãÂú∫ÊôØÔºö Â¶ÇÊûúÂú®‰∏Ä‰∏™Á≥ªÁªüÈáåÈù¢ÊúâËÆ∏Â§öÁ±ªÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´‰ªÖÂú®‰∫éÂÆÉ‰ª¨ÁöÑË°å‰∏∫ÔºåÈÇ£‰πà‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÂèØ‰ª•Âä®ÊÄÅÂú∞ËÆ©‰∏Ä‰∏™ÂØπË±°Âú®ËÆ∏Â§öË°å‰∏∫‰∏≠ÈÄâÊã©‰∏ÄÁßçË°å‰∏∫„ÄÇ ‰∏Ä‰∏™Á≥ªÁªüÈúÄË¶ÅÂä®ÊÄÅÂú∞Âú®Âá†ÁßçÁÆóÊ≥ï‰∏≠ÈÄâÊã©‰∏ÄÁßç„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÊúâÂæàÂ§öÁöÑË°å‰∏∫ÔºåÂ¶ÇÊûú‰∏çÁî®ÊÅ∞ÂΩìÁöÑÊ®°ÂºèÔºåËøô‰∫õË°å‰∏∫Â∞±Âè™Â•Ω‰ΩøÁî®Â§öÈáçÁöÑÊù°‰ª∂ÈÄâÊã©ËØ≠Âè•Êù•ÂÆûÁé∞„ÄÇ ÂèÇËÄÉ „ÄäJAVA‰∏éÊ®°Âºè„Äã „ÄäJAVA‰∏éÊ®°Âºè„Äã‰πãÁ≠ñÁï•Ê®°Âºè Á≠ñÁï•Ê®°Âºè]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-modulemethod%2F</url>
    <content type="text"><![CDATA[Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÂú®sring‰∏≠ÊúâÂ§ßÈáèÁöÑÂ∫îÁî®Ôºå‰∏ÄËà¨Êàë‰ª¨‰ºö‰ΩøÁî®Ê®°ÊùøÊñπÊ≥ïÊù•Â∞ÜÂΩìÂâçÁöÑÂÆûÁé∞ÂßîÊâòÁªôÂ≠êÁ±ªÊù•ÂÆûÁé∞ÔºåÂ¢ûÂº∫‰ª£Á†ÅÁöÑÂèØÊâ©Â±ïÊÄßÂíåÂ§çÁî®ÊÄß„ÄÇÂõ†‰∏∫Ê∂âÂèäÂà∞Áà∂Â≠êÁ±ªÂÖ≥Á≥ªÔºåÊâÄ‰ª•Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊòØÂü∫‰∫é‚ÄúÁªßÊâø‚ÄùÊù•ÂÆûÁé∞ÁöÑÔºõÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÂ±û‰∫éË°å‰∏∫ÂûãÊ®°Âºè„ÄÇ ÁÆÄÂçïÂú∞ËØ¥Â∞±ÊòØÔºåÈÄöËøáÁà∂Á±ªÊù•ÂÆö‰πâ‰∏ÄÁ≥ªÂàóÁöÑÁÆóÊ≥ïÈ™®Êû∂ÔºåÂπ∂‰∏îÁ∫¶ÂÆöËøô‰∫õÊñπÊ≥ïÂèäÂÖ∂Ë∞ÉÁî®È°∫Â∫èÔºåËÄåÂÖ∑‰ΩìÁöÑÊüê‰∫õÁâπÂÆöÊñπÊ≥ïÁî±Â≠êÁ±ªÂÆûÁé∞„ÄÇ ÂÖàÊù•Áúã‰∏Ä‰∏™Â∞èdemoÔºõÊàë‰ª¨‰ª•ÂÜôÂçöÂÆ¢Êù•‰∏æ‰æãÂ≠êÔºå‰∏ÄËà¨Êàë‰ª¨ÂÜôÂçöÂÆ¢ÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö ÊâìÂºÄÁõÆÊ†áÁΩëÁ´ô ÊâìÂºÄÁºñËæëÂô® ÂÜôÊñáÁ´† ÂèëÂ∏ÉÊñáÁ´† ÂÆû‰æã‰ª£Á†ÅÈ¶ñÂÖàÊòØÂÆö‰πâ‰∏Ä‰∏™Áà∂Á±ªÔºåÂπ∂‰∏îÊèê‰æõ‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ï„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142package com.glmapper.designmode.mudolmethod;/** * @description: ÊäΩË±°Ê®°ÊùøÁà∂Á±ª * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/30 */public abstract class AbstractTemplateMethod &#123; /** * ÊµÅÁ®ãÊñπÊ≥ï1ÔºöÊäΩË±°ÊñπÊ≥ïÔºå‰æõÂ≠êÁ±ªÂÆûÁé∞ */ public abstract void openTargetWebSite(); /** * ÊµÅÁ®ãÊñπÊ≥ï2ÔºöÂ≠êÁ±ªÂèØÈÄâÊã©ÈáçÂÜô */ public void openMarkDown()&#123; System.out.println("ÊâìÂºÄÁºñËæëÂô®"); &#125; /** * ÊµÅÁ®ãÊñπÊ≥ï3ÔºöÊäΩË±°ÊñπÊ≥ïÔºå‰æõÂ≠êÁ±ªÂÆûÁé∞ */ public abstract void writeBlog(); /** * ÊµÅÁ®ãÊñπÊ≥ï4ÔºöÂ≠êÁ±ªÂèØÈÄâÊã©ÈáçÂÜô */ protected void publisher()&#123; System.out.println("ÂèëÂ∏ÉÊñáÁ´†"); &#125; /** * Ê®°ÊùøÊñπÊ≥ïÔºåÊ≠§Â§ÑÁî≥Êòé‰∏∫finalÔºåÊòØ‰∏çÂ∏åÊúõÂ≠êÁ±ªË¶ÜÁõñËøô‰∏™ÊñπÊ≥ïÔºåÈò≤Ê≠¢Êõ¥ÊîπÊµÅÁ®ãÁöÑÊâßË°åÈ°∫Â∫è */ public final void templateWriteBlog()&#123; openTargetWebSite(); openMarkDown(); writeBlog(); publisher(); &#125;&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™templateWriteBlogÊñπÊ≥ïÔºåËøôÈáåÊñπÊ≥ï‰∏≠ÂåÖÊã¨‰∫ÜÂÜôÂçöÂÆ¢ÁöÑ‰∏Ä‰∫õÊµÅÁ®ã„ÄÇÂú®Ëøô‰∫õÊµÅÁ®ãÊñπÊ≥ï‰∏≠Êúâ‰∫õÊñπÊ≥ïÁà∂Á±ªÊèê‰æõ‰∫ÜÈªòËÆ§ÂÆûÁé∞ÔºåËÄå‰∏Ä‰∫õÂÖ∑ÊúâÂ∑ÆÂºÇÊÄßÁöÑÊñπÊ≥ïÂàôËÆ©Â≠êÁ±ªÊù•ÂÆûÁé∞„ÄÇ 123456789101112131415161718package com.glmapper.designmode.mudolmethod;/** * @description: Â≠êÁ±ª * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/30 */public class JueJinTemplateMethodPolicy extends AbstractTemplateMethod &#123; @Override public void openTargetWebSite() &#123; System.out.println("ÊâìÂºÄÊéòÈáëÁΩëÁ´ô"); &#125; @Override public void writeBlog() &#123; System.out.println("ÂÜô‰∏ÄÁØáSpringÁõ∏ÂÖ≥ÁöÑÊñáÁ´†"); &#125;&#125; Â≠êÁ±ª1ÔºöJueJinTemplateMethodPolicyÔºåËøô‰∏™Â≠êÁ±ª‰∏≠ÂÆûÁé∞‰∫ÜÁà∂Á±ª‰∏≠ÁöÑÈÉ®ÂàÜÊñπÊ≥ïÔºåÂåÖÊã¨ÔºöopenTargetWebSiteÂíåwriteBlog„ÄÇÔºà‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÂéªÈáçÂÜôÁà∂Á±ªÈªòËÆ§Â∑≤ÁªèÂÆûÁé∞ÁöÑÊñπÊ≥ïÔºå‰ªÖÂÆûÁé∞Áà∂Á±ª‰∏≠È¢ÑÁïôÁöÑÊäΩË±°ÊñπÊ≥ïÊù•ÂÆûÁé∞Ôºâ„ÄÇ 1234567891011121314151617181920package com.glmapper.designmode.mudolmethod;/** * @description: Â≠êÁ±ª * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/30 */public class CSDNTemplateMethodPolicy extends AbstractTemplateMethod&#123; @Override public void openTargetWebSite() &#123; System.out.println("ÊâìÂºÄCSDNÁΩëÁ´ô"); &#125; @Override public void writeBlog() &#123; System.out.println("ÂÜô‰∏ÄÁØáËÆæËÆ°Ê®°ÂºèÊñáÁ´†"); &#125;&#125; Â≠êÁ±ª2ÔºöCSDNTemplateMethodPolicy,Ëøô‰∏™Â≠êÁ±ªÁöÑ‰ΩúÁî®ÂÖ∂ÂÆûÂíåÂ≠êÁ±ª1ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™‰∏çËøáÊòØÊèê‰æõ‰∫ÜÂè¶Â§ñÁöÑ‰∏ÄÁßçÂÆûÁé∞Á≠ñÁï•ÔºõÔºàÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÈÉΩÊòØÂíåÁ≠ñÁï•Ê®°ÂºèÊù•ËÅîÂêà‰ΩøÁî®ÁöÑÔºåÈÄöËøá‰∏ÄÂ•óÊ®°ÊùøÊú∫Âà∂ÔºåÂØπ‰∫éÊ®°Êùø‰∏≠ÁöÑÈÉ®ÂàÜÊµÅÁ®ãÈÄöËøá‰∏çÂêåÁöÑÁ≠ñÁï•Êù•ÂÆûÁé∞‰∏çÂêåÁöÑÂäüËÉΩÔºâ 1234567891011121314151617181920212223242526package com.glmapper.designmode.mudolmethod;/** * @description: Â≠êÁ±ª * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/30 */public class MainTest &#123; public static void main(String[] args) &#123; AbstractTemplateMethod csdnTemplate = new CSDNTemplateMethodPolicy(); csdnTemplate.templateWriteBlog(); AbstractTemplateMethod juejinTemplate = new JueJinTemplateMethodPolicy(); juejinTemplate.templateWriteBlog(); &#125;&#125;ÊâìÂºÄCSDNÁΩëÁ´ôÊâìÂºÄÁºñËæëÂô®ÂÜô‰∏ÄÁØáËÆæËÆ°Ê®°ÂºèÊñáÁ´†ÂèëÂ∏ÉÊñáÁ´†ÊâìÂºÄÊéòÈáëÁΩëÁ´ôÊâìÂºÄÁºñËæëÂô®ÂÜô‰∏ÄÁØáSpringÁõ∏ÂÖ≥ÁöÑÊñáÁ´†ÂèëÂ∏ÉÊñáÁ´† ‰∏äÈù¢ÊòØÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÂèäËæìÂá∫ÁªìÊûú„ÄÇÈÄöËøáËæìÂá∫Êàë‰ª¨ÂèØ‰ª•ÊòéÊòæÁöÑÁúãÂá∫ÔºåÊ®°Êùø‰∏≠ÁöÑ‰∏Ä‰∫õÊñπÊ≥ïÂ∞ÜÂª∂ËøüÂà∞Â≠êÁ±ª‰∏≠ÂéªÂÆûÁé∞ÔºåÊ®°ÊùøÊñπÊ≥ï‰ΩøÂæóÂ≠êÁ±ªÂèØ‰ª•‰∏çÊîπÂèò‰∏Ä‰∏™ÁÆóÊ≥ïÁöÑÁªìÊûÑÂç≥ÂèØÈáçÂÆö‰πâËØ•ÁÆóÊ≥ïÁöÑÊüê‰∫õÁâπÂÆöÊ≠•È™§„ÄÇÂõ†Ê≠§ÂØπ‰∫éÊ®°ÊùøÊñπÊ≥ïËøô‰∏™Ê®°ÂºèÊù•ËØ¥ÔºåÁà∂Á±ªÊòØÂßãÁªàÊéßÂà∂ÁùÄÊï¥‰∏™ÊµÅÁ®ã‰∏ªÂä®ÊùÉÁöÑÔºåËÄåÂ≠êÁ±ªÂè™ÊòØËæÖÂä©Áà∂Á±ªÂÆûÁé∞Êüê‰∫õÂèØÂÆöÂà∂ÁöÑÊ≠•È™§„ÄÇ Ê®°ÂºèËß£ÊûêÂÖàÁúã‰∏ãÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÁöÑÁ±ªÂõæÔºö ‰ªéÁ±ªÂõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè‰∏≠ÁöÑËßíËâ≤‰πüÊòØÂæàÁÆÄÂçïÁöÑÔºå‰∏ªË¶ÅÂåÖÊã¨‰∏§‰∏™ËßíËâ≤Ôºö ÊäΩË±°Ê®°ÊùøÔºàAbstractTemplateÔºâÔºö ÂÆö‰πâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÊäΩË±°Êìç‰ΩúÔºå‰ª•‰æø‰∫éËÆ©Â≠êÁ±ªÂÆûÁé∞„ÄÇËøô‰∫õÊäΩË±°Êìç‰ΩúÂ∞±ÊòØÊµÅÁ®ã‰∏≠ÁöÑÂü∫Êú¨Êìç‰ΩúÔºàÂØπÂ∫îÁöÑÊòØÊ®°ÊùøÊñπÊ≥ï‰∏≠ÁöÑÊüê‰∏™ÂÖ∑‰ΩìÁöÑÊìç‰ΩúÊñπÊ≥ïÔºâÔºõËøô‰∫õÂü∫Êú¨Êìç‰ΩúÊòØ‰∏Ä‰∏™È°∂Á∫ßÈÄªËæëÁöÑÁªÑÊàêÊ≠•È™§ ÂÆö‰πâÂπ∂‰∏îÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ï„ÄÇËøô‰∏™Ê®°ÊùøÊñπÊ≥ï‰∏ÄËà¨ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÊñπÊ≥ïÔºåÂÆÉÁªôÂá∫‰∫Ü‰∏Ä‰∏™È°∂Á∫ßÈÄªËæëÁöÑÈ™®Êû∂ÔºåËÄåÈÄªËæëÁöÑÁªÑÊàêÊ≠•È™§Âú®Áõ∏Â∫îÁöÑÊäΩË±°Êìç‰Ωú‰∏≠ÔºåÊé®ËøüÂà∞Â≠êÁ±ª‰∏≠ÂèñÂÆûÁé∞ÔºåÂΩìÁÑ∂ÔºåÂú®Ëøô‰∏™È°∂Á∫ßÈÄªËæë‰∏≠ÔºåÈÉ®ÂàÜÊñπÊ≥ï‰πüÂèØ‰ª•Áî±Áà∂Á±ªÊù•Êèê‰æõÈªòËÆ§ÂÆûÁé∞ÁöÑ„ÄÇ ÂÖ∑‰ΩìÁ±ªÔºàSubTemplateImpl)Ôºö ÂÆûÁé∞Áà∂Á±ªÊâÄÂÆö‰πâÁöÑ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÊäΩË±°ÊñπÊ≥ï ÊØè‰∏Ä‰∏™ÊäΩË±°Ê®°ÊùøËßíËâ≤ÈÉΩÂèØ‰ª•Êúâ‰ªªÊÑèÂ§ö‰∏™ÂÖ∑‰ΩìÊ®°ÊùøËßíËâ≤‰∏é‰πãÂØπÂ∫îÔºåËÄåÊØè‰∏Ä‰∏™ÂÖ∑‰ΩìÊ®°ÊùøËßíËâ≤ÈÉΩÂèØ‰ª•ÁªôÂá∫Ëøô‰∫õÊäΩË±°ÊñπÊ≥ïÁöÑ‰∏çÂêåÂÆûÁé∞„ÄÇ Ê®°ÊùøÊñπÊ≥ï‰∏≠ÁöÑËøô‰∏™ÊñπÊ≥ïÁöÑÊ¶ÇÂøµÊãÜÂºÄÊù•ËØ¥ÂåÖÊã¨‰∏§ÁßçÔºå‰∏ÄÁßçÊòØÊ®°ÊùøÊñπÊ≥ïÔºåËøòÊúâ‰∏ÄÁßçÊòØÊ®°ÊùøÊñπÊ≥ïÈáåÈù¢ÁöÑÂü∫Êú¨ÊñπÊ≥ï„ÄÇÊ®°ÊùøÊñπÊ≥ïÂÆö‰πâÊ∏∏ÊàèËßÑÂàôÔºåÂü∫Êú¨ÊñπÊ≥ïÂÆûÁé∞ËßÑÂàô‰∏≠ÁöÑÊØè‰∏™ÈÉ®ÂàÜ„ÄÇ Ê®°ÊùøÊñπÊ≥ïÂ∏¶Êù•ÁöÑ‰ºòÂäøÊòØÊòæËÄåÊòìËßÅÁöÑÔºåÂÆÉÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨ÊúâÊïàÁöÑÂ∏ÆÂä©Êàë‰ª¨ÊêûÂÆö‰∏ãÈù¢ÁöÑËøô‰∫õÂú∫ÊôØÈóÆÈ¢òÔºö Â∞ÅË£Ö‰∏çÂèòÈÉ®ÂàÜÔºåÊâ©Â±ïÂèØÂèòÈÉ®ÂàÜ„ÄÇ ÊèêÂèñÂÖ¨ÂÖ±‰ª£Á†ÅÔºå‰æø‰∫éÁª¥Êä§„ÄÇ Ë°å‰∏∫Áî±Áà∂Á±ªÊéßÂà∂ÔºåÂ≠êÁ±ªÂÆûÁé∞„ÄÇ ‰ΩÜÊòØÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºåÂõ†‰∏∫ÂØπ‰∫éÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂÆûÁé∞ÈÉΩÈúÄË¶Å‰∏Ä‰∏™Â≠êÁ±ªÊù•ÂÆûÁé∞ÔºåÂØºËá¥Á±ªÁöÑ‰∏™Êï∞Â¢ûÂä†Ôºå‰ΩøÂæóÁ≥ªÁªüÊõ¥Âä†Â∫ûÂ§ß„ÄÇ ÂÖ∏ÂûãÁöÑÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÁöÑÂ∫îÁî®ÊúÄÂÖàÊÉ≥Âà∞ÁöÑÂ∞±ÊòØservletÔºåservletÁöÑÁîüÂëΩÂë®Êúü(‰ª•ÂâçÁªèÂ∏∏ÈÅáÂà∞ÁöÑÈù¢ËØïÁÇπÔºåÁé∞Âú®Â∑≤ÁªèÊ≤°‰∫∫ÈóÆ‰∫ÜÂêß) ÂàùÂßãÂåñ init Â§ÑÁêÜ service ÈîÄÊØÅ destroy ÂÖ∂ÂÆûËøôÈáåÊàëËßâÂæó‰πüÊòØÊ®°ÊùøÊñπÊ≥ïÁöÑ‰∏ÄÁßç‰ΩìÁé∞ÔºåËôΩÁÑ∂Âú®servlet‰∏≠Ê≤°ÊúâÂÆö‰πâÈ°∂Â±ÇÁöÑÊ®°ÊùøÊñπÊ≥ïÊù•ÊéßÂà∂Ëøô‰∏™ÊµÅÁ®ã(ÊàëÁöÑÊÉ≥Ê≥ïÊòØËøô‰∏™ÊµÅÁ®ãÊòØÁî±ÂÆπÂô®Êù•ÊéßÂà∂ÁöÑÔºå‰πüÂèØËÉΩÊòØ‰∏ÄÁßçÈªòËÆ§ÁöÑÁ∫¶ÂÆö)„ÄÇ Âú®ÂÖ∂Â≠êÁ±ªGenericServlet‰∏≠ÂØπinitÂíådestroyÊúâ‰∫ÜÈªòËÆ§ÁöÑÂÆûÁé∞ÔºåËÄåserviceÊñπÊ≥ïÂàôÊòØ‰∫§Áî±Â≠êÁ±ªÊù•ÂÆûÁé∞ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥‰ªª‰ΩïservletÁ±ªÂùáÂøÖÈ°ªÂÆûÁé∞serviceÊñπÊ≥ï„ÄÇ ËøôÈáåÁöÑserviceÊñπÊ≥ïÂ∞±ÊòØ‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ï„ÄÇserviceÊñπÊ≥ï‰∏≠Ë∞ÉÁî®‰∫Ü7‰∏™doÊñπÊ≥ï‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñËÄÖÂá†‰∏™ÔºåÂÆåÊàêÂØπÂÆ¢Êà∑Á´ØÁöÑÂìçÂ∫îÔºåËøô‰∫õdoÊñπÊ≥ïÈúÄË¶ÅÁî±HttpServletÁöÑÂÖ∑‰ΩìÂ≠êÁ±ªÊèê‰æõ„ÄÇ HttpServlet‰∏≠ÁöÑÂÆûÁé∞Ôºö 1234567891011121314151617181920212223242526272829303132333435363738394041protected void service(HttpServletRequest req, HttpServletResponseresp) throws ServletException, IOException &#123; String method = req.getMethod(); long lastModified; if (method.equals("GET")) &#123; lastModified = this.getLastModified(req); if (lastModified == -1L) &#123; this.doGet(req, resp); &#125; else &#123; long ifModifiedSince = req.getDateHeader("If-Modified-Since"); if (ifModifiedSince &lt; lastModified) &#123; this.maybeSetLastModified(resp, lastModified); this.doGet(req, resp); &#125; else &#123; resp.setStatus(304); &#125; &#125; &#125; else if (method.equals("HEAD")) &#123; lastModified = this.getLastModified(req); this.maybeSetLastModified(resp, lastModified); this.doHead(req, resp); &#125; else if (method.equals("POST")) &#123; this.doPost(req, resp); &#125; else if (method.equals("PUT")) &#123; this.doPut(req, resp); &#125; else if (method.equals("DELETE")) &#123; this.doDelete(req, resp); &#125; else if (method.equals("OPTIONS")) &#123; this.doOptions(req, resp); &#125; else if (method.equals("TRACE")) &#123; this.doTrace(req, resp); &#125; else &#123; String errMsg = lStrings.getString("http.method_not_implemented"); Object[] errArgs = new Object[]&#123;method&#125;; errMsg = MessageFormat.format(errMsg, errArgs); resp.sendError(501, errMsg); &#125; &#125; FrameworkServlet‰∏≠ÁöÑÂÆûÁé∞(FrameworkServletÊòØSpringMVCÊ†∏ÂøÉÊéßÂà∂Âô®DispatchServletÁöÑÁà∂Á±ª)Ôºö 1234567891011121314151617/** * Override the parent class implementation in order to intercept PATCH requests. */@Overrideprotected void service(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException &#123; HttpMethod httpMethod = HttpMethod.resolve(request.getMethod()); if (HttpMethod.PATCH == httpMethod || httpMethod == null) &#123; processRequest(request, response); &#125; else &#123; super.service(request, response); &#125;&#125; ÂÖ≥‰∫éÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÁöÑÂ≠¶‰π†Â∞±Âà∞ËøôÈáå‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-ËßÇÂØüËÄÖÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-obs%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëÊÉ≥Ê∑±ÂÖ•Á†îÁ©∂‰∏ãÂìçÂ∫îÂºèÁºñÁ®ãÔºå‰Ωú‰∏∫Âü∫Á°ÄÂæàÊúâÂøÖË¶ÅÊù•ÊääËßÇÂØüËÄÖÊ®°ÂºèÊí∏‰∏ÄÈÅçÔºõ‰∏ÄÂºÄÂßãÊàëÊòØËßâÂæóÂæàeasy,ÁÑ∂ÂêéÂ∞±Áõ¥Êé•ÂºÄÊí∏‰∫ÜÔºåÊí∏ÁùÄÊí∏ÁùÄÂèëÁé∞Êí∏‰∏çÂä®‰∫Ü„ÄÇÂõ†‰∏∫ÊàëÁ™ÅÁÑ∂‰∏çÂ§™ÊòéÁôΩËøô‰∏™Ê®°Âºè‰∫ÜÔºåËØ¥Â•ΩÁöÑËßÇÂØüËÄÖÔºåÂà∞Â∫ïÂèëÂ∏É-ËÆ¢ÈòÖÁöÑ‰∏§ËÄÖÊâßË°åËÄÖË∞ÅÊâçÊòØËßÇÂØüËÄÖÔºüÂèàÊàñËÄÖËØ¥ËøòÊúâÂÖ∂‰ªñËßíËâ≤Ôºü‰ΩÜÊòØÊ†πÊçÆ„ÄäJAVA‰∏éÊ®°Âºè„Äã‰∏Ä‰π¶‰∏≠ÁöÑÁªìÊûÑÔºåÂπ∂Ê≤°ÊúâÈ¢ùÂ§ñÁöÑËßíËâ≤Âá∫Áé∞„ÄÇ ÊÄùËÄÉ‰∏≠‚Ä¶.ÔºåÂ•ΩÂêßÊÉ≥‰∏çÂá∫Êù•‚Ä¶.ÔºåË∑ëÊ≠•Âéª‚Ä¶ Ë∑ëÊ≠•Êó∂ÊàëÁªôËá™Â∑±ÁΩóÂàó‰∫ÜÂá†‰∏™ÈóÆÈ¢òÔºö ËøôÈáåÂÖàÊäõÂá∫ÂÆö‰πâÔºöGOFÁªôËßÇÂØüËÄÖÊ®°ÂºèÂ¶Ç‰∏ãÂÆö‰πâÔºöÂÆö‰πâÂØπË±°Èó¥ÁöÑ‰∏ÄÁßç‰∏ÄÂØπÂ§öÁöÑ‰æùËµñÂÖ≥Á≥ªÔºåÂΩì‰∏Ä‰∏™ÂØπË±°ÁöÑÁä∂ÊÄÅÂèëÁîüÊîπÂèòÊó∂ÔºåÊâÄÊúâ‰æùËµñ‰∫éÂÆÉÁöÑÂØπË±°ÈÉΩÂæóÂà∞ÈÄöÁü•Âπ∂Ë¢´Ëá™Âä®Êõ¥Êñ∞„ÄÇ Êó¢ÁÑ∂ÊòØÂØπË±°Áä∂ÊÄÅÂèëÁîüÂèòÊõ¥ÔºåÈÇ£‰πàÂà∞Â∫ïÊòØË∞ÅÁöÑÁä∂ÊÄÅÂèëÁîü‰∫ÜÂèòÊõ¥ÔºåÂèàÂØºËá¥‰∫ÜË∞ÅË¢´ÈÄöÁü•„ÄÇ ËßÇÂØüËÄÖÊ®°ÂºèÊó¢ÁÑ∂ÂèàÂèØ‰ª•Áß∞‰πã‰∏∫‚ÄúÂèëÂ∏É-ËÆ¢ÈòÖÊ®°Âºè‚ÄùÔºåÈÇ£‰πàÂØπÂ∫îËµ∑Êù•ÔºåËßÇÂØüËÄÖÂà∞Â∫ïÊâøÂΩì‰∫Ü‚ÄúÂèëÂ∏É‚ÄùÁöÑËßíËâ≤ËøòÊòØ‚ÄúËÆ¢ÈòÖ‚ÄùÁöÑËßíËâ≤„ÄÇÂ∞±ÊòØËØ¥ËßÇÂØüËÄÖÂà∞Â∫ïÊòØ‰∏ªÂä®ÁöÑËøòÊòØË¢´Âä®ÁöÑÔºü Ë¢´ËßÇÂØüËÄÖÂèàÂπ≤‰∫Ü‰ªÄ‰πà‰∫ãÔºüÂÆÉÊòØ‰∏ªÂä®ÁöÑËøòÊòØË¢´Âä®ÁöÑËßíËâ≤Ôºü ËøôÈáåÁî±‰∫é‰∏Ä‰∫õÂÆöÂºèÊÄùÁª¥ÔºåÊÄª‰ºöËßâÂæóÊó¢ÁÑ∂ÊòØ‚ÄúË¢´ËßÇÂØüËÄÖ‚ÄùÔºåÈÇ£‰πàËøô‰∏™‚ÄúË¢´‚ÄùÂ≠óÂ∞±ÊòØ‰∏çÊòØÂ∞±Ë°®Êòé‚ÄúË¢´ËßÇÂØüËÄÖ‚ÄùÊòØË¢´Âä®Êé•ÂèóÂèòÊõ¥ÁöÑ‰∏ÄÊñπÔºå‰πüÂ∞±ÊòØÊé•ÂèóÈÄöÁü•ÁöÑ‰∏ÄÊñπÂë¢Ôºü ‰πãÂâçÊàë‰πüÊòØËµ∞Âà∞Ëøô‰∏™ËÉ°ÂêåÈáå‰∫ÜÔºåÁ®ãÂ∫èÂÜôÂÆåÊÄªËßâÂæóÂì™Èáå‰∏çÂØπÔºõÂõûËøáÂ§¥ÁúãÔºåËøòÊòØËá™Â∑±Â§™Âπ¥ËΩªÔºåÊ≤°ÊúâgetÂà∞Âì™‰∫õÂ§ß‰Ω¨‰ª¨ÁöÑÁÇπ„ÄÇ ÂÖàÊù•ÁúãÁ®ãÂ∫èÔºõËøôÈáåÁî®ÊéòÈáëÊù•Êâì‰∏™ÊØîÊñπÔºåÊàëÁöÑÂçöÂÆ¢glmmaper‰Ωú‰∏∫Ë¢´ËßÇÂØüËÄÖÔºå‰πüÂ∞±ÊòØÂèëÂ∏ÉËÄÖ„ÄÇÊéòÈáëÂ∞è‰ºô‰º¥‰ª¨‰Ωú‰∏∫ËßÇÂØüËÄÖÔºå‰πüÂ∞±ÊòØËÆ¢ÈòÖËÄÖ„ÄÇ ÂÖ∑‰ΩìÈÄªËæëÔºöÂ∞è‰ºô‰º¥‰ª¨ÔºàËÆ¢ÈòÖËÄÖÔºâÂÖ≥Ê≥®ÔºàËÆ¢ÈòÖÔºâ‰∫ÜÊàëÁöÑÂçöÂÆ¢ÔºàÂèëÂ∏ÉËÄÖÔºâÔºåÂ¶ÇÊûúÊàëÂèëÂ∏É‰∫Ü‰∏ÄÁØáÊñáÁ´†ÔºàÁä∂ÊÄÅÂèòÊõ¥ÔºâÔºåÂ∞±‰ºöÈÄöÁü•ÔºàÊé®ÈÄÅÊ∂àÊÅØÔºâÊâÄÊúâÂÖ≥Ê≥®ÊàëÁöÑÂ∞è‰ºô‰º¥„ÄÇ 123456789101112131415161718192021222324252627package com.glmapper.designmode.observor;/** * @description: ÊäΩË±°‰∏ªÈ¢òÊé•Âè£ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/22 */public interface Subject &#123; /** * Êñ∞Â¢ûÂÖ≥Ê≥®ËÄÖ * @param observer ÂÖ≥Ê≥®ÁöÑÂ∞è‰ºô‰º¥ */ void addFocusObserver(Observer observer); /** * ÂèñÊ∂àÂÖ≥Ê≥® * @param observer ÂèñÊ∂àÂÖ≥Ê≥®ÁöÑÂ∞è‰ºô‰º¥ */ void removeFocusObserver(Observer observer); /** * ÈÄöÁü•Êú∫Âà∂ÔºåÈÄöÁü•Êú∫Âà∂Áî±Áõ∏ÂÖ≥‰∫ã‰ª∂Êù•Ëß¶ÂèëÔºåÊØîÂ¶ÇËØ¥ÂèëÂ∏ÉÊñáÁ´† * @param blogName ÂçöÂÆ¢Âêç * @param articleName ÊñáÁ´†Âêç */ void notifyObservers(String blogName,String articleName);&#125; ‰∏â‰∏™ÊñπÊ≥ïÔºå‰∏Ä‰∏™ÊòØÂçöÂÆ¢‰∏ªÈ°µÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™ÂÖ≥Ê≥®ËÄÖÔºõ‰∏Ä‰∏™ÊòØÂçöÂÆ¢‰∏ªÈ°µÊúâÂ∞è‰ºô‰º¥ÂèñÊ∂àÁöÑÂÖ≥Ê≥®ÔºàÂØπ‰∫éÂçöÂÆ¢Êù•ËØ¥Â∞±ÊòØÁßªÈô§‰∏Ä‰∏™ÂÖ≥Ê≥®ËÄÖÔºåËøôÈáå‰∏çÁü•ÈÅìÊòØÂê¶‰πü‰ºöËßâÂæóÂà´Êâ≠ÔºüÊòéÊòé‰Ω†ÂèñÊ∂àÁöÑÂÖ≥Ê≥®Ôºå‰∏∫Âï•ËØ¥ÊàêÊòØÊàëÁßªÈô§‰Ω†Ôºå‰πüÂ∞±ÊòØ‰∏çËÆ©‰Ω†ÂÖ≥Ê≥®‰∫ÜÔºåËøòËÉΩËøô‰πàÁé©?ËøôÈáåËÇØÂÆöÊòØÈúÄË¶ÅÂú®ÂºïÂÖ•ÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õËæÖÂä©Êú∫Âà∂ÔºåÊØîÂ¶ÇËØ¥‰Ω†Âú®ÂÆ¢Êà∑Á´ØÂèëËµ∑‰∫Ü‰∏Ä‰∏™ÂèñÊ∂àÂÖ≥Ê≥®ÁöÑËØ∑Ê±ÇÔºåÂêéÁ´ØÂ§ÑÁêÜÁöÑÊó∂ÂÄôÊéòÈáëÁöÑÂ∑•Á®ãÂ∏à‰ª¨Â∞±ÊòØÂú®ÊàëÁöÑÂÖ≥Ê≥®ÂàóË°®‰∏≠Â∞Ü‰Ω†ÁßªÈô§ÁöÑÔºåÂóØÔºåËøô‰πà‰∏ÄÊÉ≥Á°ÆÂÆûÊòØÊàë‰∏çËÆ©‰Ω†ÂÖ≥Ê≥®‰∫Ü„ÄÇüòÑ‚Ä¶.ÔºâÔºõÊúÄÂêé‰∏Ä‰∏™ÊñπÊ≥ïÊòØÂèëËµ∑‰∏Ä‰∏™ÈÄöÁü•„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂçöÂÆ¢ÔºåÊØîÂ¶ÇËØ¥ÊòØglmapperÔºõ 1234567891011121314151617181920212223242526272829303132333435363738394041package com.glmapper.designmode.observor;import java.util.ArrayList;import java.util.List;/** * @description: Ëøô‰∏™ÊòØÂÖ∑‰ΩìÂèëÂ∏ÉËÄÖÔºåËøôÈáåÊØîÂñªÊàêÊàëÁöÑÂçöÂÆ¢glmapper * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/22 */public class ConcreteSubject implements Subject &#123; /** ÊàëÁöÑÂΩìÂâçÂÖ≥Ê≥®ÂàóË°® */ List&lt;Observer&gt; Observers = new ArrayList&lt;&gt;(); /** ÊàëÁöÑÂçöÂÆ¢Âêç ÔºöÊ±ÇÂÖ≥Ê≥® */ private static final String blogName = "glmapper"; @Override public void addFocusObserver(Observer observer) &#123; Observers.add(observer); &#125; @Override public void removeFocusObserver(Observer observer) &#123; Observers.remove(observer); &#125; @Override public void notifyObservers(String blogName,String articleName) &#123; for (Observer observer:Observers) &#123; observer.update(blogName,articleName); &#125; &#125; /** * ËøôÈáåÊòØÂèëÂ∏ÉÊñáÁ´†ÔºåËß¶ÂèëÈÄöÁü•‰∫ã‰ª∂ */ public void publishArticle(String articleName)&#123; notifyObservers(blogName,articleName); &#125;&#125; ÂâçÈù¢ÊèêÂà∞ÔºåÈÄöÁü•‰∫ã‰ª∂ËÇØÂÆöÊòØÁî±‰∫éÊüê‰∫õÁä∂ÊÄÅÂèëÁîüÂèòÊõ¥‰∫ÜÔºåÊâç‰ºöËøõË°åÈÄöÁü•ÔºåËøôÈáåÂ∞±ÂèØ‰ª•ÊØîÊñπ‰∏∫ÊàëÂèëÂ∏É‰∫Ü‰∏ÄÁØáÂçöÂÆ¢ÔºåÁÑ∂ÂêéÈÄöÁü•‰Ω†ÔºàËøôÈáåÂè™ËÉΩÂÅáÂ¶Ç‰Ω†ÂÖ≥Ê≥®‰∫ÜÔºâ„ÄÇÂÜçÊù•ÁúãËßÇÂØüËÄÖÔºö 12345678910111213141516package com.glmapper.designmode.observor;/** * @description: ËÆ¢ÈòÖËÄÖÊäΩË±°Êé•Âè£ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/22 */public interface Observer &#123; /** * Ë∞ÉÁî®Ê≠§ÊñπÊ≥ï‰ºöÊõ¥Êñ∞Áä∂ÊÄÅÔºåÂÅöÂá∫Áõ∏Â∫îÁöÑÂä®‰Ωú * @param blogName * @param articleName */ void update(String blogName,String articleName);&#125; ÊäΩË±°ËÆ¢ÈòÖËÄÖÔºåÊúâ‰∏Ä‰∏™updateÊñπÊ≥ïÔºåÈÄöÁü•‰Ω†ÂéªÂÅöÂá∫Áõ∏Â∫îÁöÑÂä®‰ΩúÔºåÂÖ∑‰ΩìÂä®‰ΩúÊØè‰∏™ËßÇÂØüËÄÖÈÉΩÂèØËÉΩ‰∏çÂêå„ÄÇ 123456789101112131415161718192021package com.glmapper.designmode.observor;/** * @description: Ëøô‰∏™ÊòØÂÖ∑‰ΩìËÆ¢ÈòÖËÄÖ,ËøôÈáåÂèØ‰ª•ÊØîÂñªÊàêÂçöÂÆ¢ÂÖ≥Ê≥®ËÄÖÔºå * Êî∂Âà∞ÂèòÊõ¥‰ø°ÊÅØ‰πãÂêéÈúÄË¶ÅÂÅöÂá∫Áõ∏Â∫îÁöÑÂä®‰Ωú * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/22 */public class ConcreteObserver implements Observer &#123; @Override public void update(String blogName,String articleName) &#123; System.out.println(blogName+"ÂèëÂ∏É‰∫ÜÊñ∞ÁöÑÊñáÁ´†ÔºåÊñáÁ´†Âêç‰∏∫Ôºö"+articleName); read(articleName); &#125; private void read(String articleName)&#123; System.out.println("Âç≥Â∞ÜÈòÖËØª "+articleName+" ËøôÁØáÊñáÁ´†"); &#125;&#125; ‰∏äÈù¢ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂÖ≥Ê≥®ËÄÖÔºåÂä†ÂÖ•ËØ¥Â∞±ÊòØ‰Ω†„ÄÇÂçöÂÆ¢Êõ¥Êñ∞‰πãÂêéÂèë‰∫Ü‰∏Ä‰∏™ÈÄöÁü•Áªô‰Ω†(ÊéòÈáëappÊé®ÈÄÅÁöÑÊ∂àÊÅØ)ÔºåÁÑ∂Âêé‰Ω†ÁÇπ‰∫Ü‰∏Ä‰∏ãÔºåËøô‰∏™‰πüÊòØ‰∏ÄÁßçÂä®‰Ωú„ÄÇ‰æãÂ≠ê‰∏≠‰∏æÁöÑÊòØread,Â∞±ÊòØÂÖ≥Ê≥®ËÄÖÂÅöÂá∫ÈòÖËØªÁöÑÂä®‰Ωú„ÄÇ Áúã‰∏ãÊúÄÂêéÁöÑËøêË°åÁªìÊûúÔºö 1234567891011121314151617181920212223242526package com.glmapper.designmode.observor;/** * @description: [ÊèèËø∞ÊñáÊú¨] * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: Á£äÂèî * @date: 18/4/22 */public class MyMainIndex&#123; public static void main(String[] args) &#123; //ÂçöÂÆ¢‰∏ª‰Ωì ConcreteSubject subject = new ConcreteSubject(); //ÂÖ≥Ê≥®ËÄÖÔºöhandSomeÊòØÂ∏ÖÊ∞îÁöÑÊÑèÊÄù Observer handSome = new ConcreteObserver(); //Â¢ûÂä†‰∏Ä‰∏™ÂÖ≥Ê≥®ËÄÖ subject.addFocusObserver(handSome); //Âèë‰∏ÄÁØáÊñáÁ´† subject.publishArticle("ËÆæËÆ°Ê®°Âºè-ËßÇÂØüËÄÖÊ®°Âºè"); &#125;&#125;glmapperÂèëÂ∏É‰∫ÜÊñ∞ÁöÑÊñáÁ´†ÔºåÊñáÁ´†Âêç‰∏∫ÔºöËÆæËÆ°Ê®°Âºè-ËßÇÂØüËÄÖÊ®°ÂºèÂç≥Â∞ÜÈòÖËØª ËÆæËÆ°Ê®°Âºè-ËßÇÂØüËÄÖÊ®°Âºè ËøôÁØáÊñáÁ´† ÈÖíÊ°∂ËØ¥ÔºöÂïäÔºåÊ¨¢‰πêÊó∂ÂÖâÊÄªÊòØÁü≠ÊöÇÁöÑ ÊâÄ‰ª•‰Ωú‰∏∫ÁßØÁ¥ØÔºåËøòÊòØÈúÄË¶ÅÂ∞Ü‰∏Ä‰∫õÂü∫Êú¨ÁöÑÊ¶ÇÂøµÊù•ÁΩóÂàó‰∏Ä‰∏ãÁöÑ„ÄÇ ‰∏ªË¶ÅËßíËâ≤Ôºö ÊäΩË±°‰∏ªÈ¢òËßíËâ≤ÔºàSubjectÔºö‰∏ªÈ¢òËßíËâ≤Â∞ÜÊâÄÊúâÂØπËßÇÂØüËÄÖÂØπË±°ÁöÑÂºïÁî®‰øùÂ≠òÂú®‰∏Ä‰∏™ÈõÜÂêà‰∏≠ÔºåÊØè‰∏™‰∏ªÈ¢òÂèØ‰ª•Êúâ‰ªªÊÑèÂ§ö‰∏™ËßÇÂØüËÄÖ„ÄÇÊäΩË±°‰∏ªÈ¢òÊèê‰æõ‰∫ÜÂ¢ûÂä†ÂíåÂà†Èô§Á≠âËßÇÂØüËÄÖÂØπË±°ÁöÑÊé•Âè£„ÄÇ ÊäΩË±°ËßÇÂØüËÄÖËßíËâ≤ÔºàObserverÔºâÔºö‰∏∫ÊâÄÊúâÁöÑÂÖ∑‰ΩìËßÇÂØüËÄÖÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£ÔºåÂú®ËßÇÂØüÁöÑ‰∏ªÈ¢òÂèëÁîüÊîπÂèòÊó∂Êõ¥Êñ∞Ëá™Â∑±„ÄÇ ÂÖ∑‰Ωì‰∏ªÈ¢òËßíËâ≤ÔºàConcreteSubjectÔºâ(1‰∏™)ÔºöÂ≠òÂÇ®Áõ∏ÂÖ≥Áä∂ÊÄÅÂà∞ÂÖ∑‰ΩìËßÇÂØüËÄÖÂØπË±°ÔºåÂΩìÂÖ∑‰Ωì‰∏ªÈ¢òÁöÑÂÜÖÈÉ®Áä∂ÊÄÅÊîπÂèòÊó∂ÔºåÁªôÊâÄÊúâÁôªËÆ∞ËøáÁöÑËßÇÂØüËÄÖÂèëÂá∫ÈÄöÁü•„ÄÇÂÖ∑‰Ωì‰∏ªÈ¢òËßíËâ≤ÈÄöÂ∏∏Áî®‰∏Ä‰∏™ÂÖ∑‰ΩìÂ≠êÁ±ªÂÆûÁé∞„ÄÇ ÂÖ∑‰ΩìËßÇÂØüËÄÖËßíËâ≤ÔºàConcretedObserverÔºâ(Â§ö‰∏™)ÔºöÂ≠òÂÇ®‰∏Ä‰∏™ÂÖ∑‰Ωì‰∏ªÈ¢òÂØπË±°ÔºåÂ≠òÂÇ®Áõ∏ÂÖ≥Áä∂ÊÄÅÔºåÂÆûÁé∞ÊäΩË±°ËßÇÂØüËÄÖËßíËâ≤ÊâÄË¶ÅÊ±ÇÁöÑÊõ¥Êñ∞Êé•Âè£Ôºå‰ª•‰ΩøÂæóÂÖ∂Ëá™Ë∫´Áä∂ÊÄÅÂíå‰∏ªÈ¢òÁöÑÁä∂ÊÄÅ‰øùÊåÅ‰∏ÄËá¥„ÄÇ ÂÖ∑‰ΩìÂÖ≥Á≥ªÔºö ÊäΩË±°‰∏ªÈ¢òÔºàSubjectÔºâ(Êé•Âè£)‚Äì&gt;Ë¢´ÂÖ∑‰Ωì‰∏ªÈ¢òÔºàConcreteSubjectÔºâËßíËâ≤(1‰∏™)ÂÆûÁé∞ ÊäΩË±°ËßÇÂØüËÄÖÔºàObserverÔºâ(Êé•Âè£)‚Äì&gt;Ë¢´ÂÖ∑‰ΩìËßÇÂØüËÄÖÔºàConcretedObserverÔºâËßíËâ≤(N‰∏™)ÂÆûÁé∞ ËßÇÂØüËÄÖÂØπË±°ËΩΩÂÖ•‰∏ªÈ¢òÊñπÊ≥ï,Âπ∂Âú®‰∏ªÈ¢òÊñπÊ≥ï‰∏≠Ë∞ÉÁî®ËßÇÂØüËÄÖÂØπË±°ÂÆûÁé∞ÁöÑÊé•Âè£ÊñπÊ≥ïupdateÊù•ËÆ©Ëá™Â∑±ÂèëÁîüÂèòÊõ¥ÂìçÂ∫î„ÄÇ ‰∏Ä‰∫õÂú∫ÊôØÔºö ÂΩìÂØπ‰∏Ä‰∏™ÂØπË±°ÁöÑÁöÑÊîπÂä®‰ºöÂºïÂèëÂÖ∂‰ªñÂØπË±°ÁöÑÂèòÂä®Êó∂ÔºåËÄå‰∏î‰Ω†Êó†Ê≥ïÈ¢ÑÊµãÊúâÂ§öÂ∞ë‰∏™ÂØπË±°ÈúÄË¶ÅË¢´ÊîπÂä®„ÄÇ ÂΩì‰∏Ä‰∏™ÂØπË±°ÈúÄË¶ÅÊúâËÉΩÂäõÈÄöÁü•ÂÖ∂‰ªñÂØπË±°Ôºå‰∏î‰∏çÈúÄË¶Å‰∫ÜËß£Ëøô‰∫õÂØπË±°ÊòØ‰ªÄ‰πàÁ±ªÂûãÊó∂„ÄÇ Âü∫‰∫éÂèëÂ∏ÉËÆ¢ÈòÖÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰æãÂ≠êËøòÊòØÂæàÂ§öÁöÑÔºåÊØîËæÉÂÖ∏ÂûãÁöÑÂ∞±ÊòØËøôÁßçËÆ¢ÈòÖ‰∏Ä‰∏™ÂçöÂÆ¢ÔºåÁÑ∂ÂêéÂçöÂÆ¢Êõ¥Êñ∞Êé®ÈÄÅÔºõËøòÊúâÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÔºåÊúçÂä°Âè∑Ëøô‰∫õ„ÄÇ Âà∞ËøôÈáåÊàë‰ª¨ÂÜçÂõûËøáÂ§¥Êù•Áúã‰∏ÄÂºÄÂßãÁïô‰∏ãÁöÑÂá†‰∏™ÈóÆÈ¢òÔºö Ë¢´ËßÇÂØüËÄÖÁöÑÁä∂ÊÄÅÂèëÁîüÂèòÊõ¥ÔºåÁÑ∂Âêé‚Äú‰∏ªÂä®ÈÄöÁü•‚ÄùËßÇÂØüËÄÖÔºåÂπ∂‰∏çÊòØËØ¥ÔºåËßÇÂØüËÄÖ‰∏ªÂä®ÂéªËé∑ÂèñÈÄöÁü•„ÄÇ Ë¢´ËßÇÂØüËÄÖÊòØÊ∂àÊÅØÂèëÂ∏ÉËÄÖÔºåËßÇÂØüËÄÖÊòØÊ∂àÊÅØËÆ¢ÈòÖËÄÖÔºõËßÇÂØüËÄÖÊòØË¢´Âä®Êé•ÂèóËÄÖ„ÄÇ Ë¢´ËßÇÂØüËÄÖÁöÑ‰ΩúÁî®Â∞±ÊòØÂ≠òÂÇ®ÂΩìÂâçÁöÑËßÇÂØüËÄÖÂàóË°®ÔºåÁÑ∂ÂêéÊèê‰æõ‰∏Ä‰∫õÈÄöÁü•Êú∫Âà∂Êù•ÂëäËØâËßÇÂØüËÄÖËá™Â∑±ÂèëÁîü‰∫ÜÁä∂ÊÄÅÂèòÊõ¥ÔºåÊòØ‰∏ªÂä®ËÄÖ„ÄÇ OKÔºåËßÇÂØüËÄÖÊ®°ÂºèÂ∞±Êí∏Âà∞ËøôÈáåÔºå‰πüÊ¨¢ËøéÂ∞è‰ºô‰º¥‰ª¨ÊèêÂá∫Ëá™Â∑±ÁèçË¥µÁöÑÊÑèËßÅÔºõÊúâÂÜôÁöÑ‰∏çÂΩì‰πãÂ§ÑÁÉ¶ËØ∑ÂèäÊó∂ÊèêÂá∫„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰πùÂ§ßÁªÑ‰ª∂Â∞èËÆ∞]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-webmvc5%2F</url>
    <content type="text"><![CDATA[ÂâçÈù¢Âá†ÁØáÊñáÁ´†ÈÉΩÊòØÈíàÂØπ‰∫éSpringMVC‰∏≠ÁöÑÂÖ∑‰ΩìÁªÑ‰ª∂ËøõË°åÊ∫êÁ†ÅÂàÜÊûêÁöÑÔºõÊú¨Êñá‰∏ªË¶ÅÁî®‰∫éË°•ÂÖÖËÆ∞ÂΩï‰∏Ä‰∏ãÂÖ≥‰∫éSpringMVC‰∏≠‰πùÂ§ßÁªÑ‰ª∂ÁöÑÂ≠¶‰π†„ÄÇËøô‰∏™‰ºöÁâµÊâØÂá∫Èô§‰πãÂâçÁöÑÂá†ÁØáHandlerMapping‰πãÂ§ñÁöÑÂÖ∂‰ªñ‰∏Ä‰∫õÂü∫Á°ÄÁªÑ‰ª∂„ÄÇ ‰πãÂâçÁÆÄÂçïÁöÑÊúâ‰ªãÁªçËøáDispatcherServletËøô‰∏™Á±ªÁöÑ‰ΩìÁ≥ªÁªìÊûÑÔºåÊ≠§Â§ÑÂ∞±‰∏çÂÜçËµòËø∞‰∫Ü„ÄÇÂú®DispatcherServletÁ±ª‰∏≠ÔºåÂÖ∂Âú®mvcÂ≠êÂÆπÂô®ËøõË°åÂàùÂßãÂåñÊó∂Â∞±‰ºöÂÆåÊàêÂØπ‰πùÂ§ßÁªÑ‰ª∂ÁöÑÂàùÂßãÂåñÂ∑•‰ΩúÔºåÂÖ∑‰ΩìÂì™‰πùÂ§ßÁªÑ‰ª∂ÂêéÈù¢‰ºöÊÖ¢ÊÖ¢ËØ¥Âà∞„ÄÇÂÖàÊù•Áúã‰∏ãÂú®DispatcherServlet‰∏≠ÊòØÈÄöËøáÂì™‰∫õÊñπÊ≥ïÊù•ÂÆåÊàêÂàùÂßãÂåñÂ∑•‰ΩúÁöÑ,ÂÖàË¥¥‰∏ÄÊÆµ‰ª£Á†ÅÔºö 123456789101112131415protected void onRefresh(ApplicationContext context) &#123; this.initStrategies(context);&#125;protected void initStrategies(ApplicationContext context) &#123; this.initMultipartResolver(context); this.initLocaleResolver(context); this.initThemeResolver(context); this.initHandlerMappings(context); this.initHandlerAdapters(context); this.initHandlerExceptionResolvers(context); this.initRequestToViewNameTranslator(context); this.initViewResolvers(context); this.initFlashMapManager(context);&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÁöÑonRefreshÊñπÊ≥ïÂ∞±ÊòØDispatcherServletÁöÑÂÖ•Âè£ÊñπÊ≥ï„ÄÇÂú®onRefresh‰∏≠ÂèàÈÄöËøáË∞ÉÁî®initStrategiesÊñπÊ≥ïÊù•Â∞ÜÂêÑ‰∏™ÁªÑ‰ª∂ÁöÑÂàùÂßãÂåñÈÄªËæëËøõË°åÊï¥ÂêàÔºå‰∏™‰∫∫ÁêÜËß£ÂÖ∂ÂÆûÂ∞±ÊòØÁ≠ñÁï•Â•óÁ≠ñÁï•ÔºåÂú®‰∏Ä‰∏™Â∞±ÊòØËÅåË¥£‰πüÊòéÁ°Æ„ÄÇ Âú®initStrategiesÊñπÊ≥ï‰∏≠ÂèàÈÄöËøáË∞ÉÁî®ÁªÑ‰ª∂ÂêÑËá™ÁöÑÂàùÂßãÂåñÊñπÊ≥ïÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÂàùÂßãÂåñÂ∑•‰Ωú„ÄÇ‰ªéËøô‰∏™Âú∞ÊñπÂÖ∂ÂÆûÂ∞±ÂèØ‰ª•Ê∏ÖÊ•öÁöÑÁúãÂá∫SpringMVC‰∏≠ÁöÑ9‰∏™ÁªÑ‰ª∂ÂêçÁß∞‰∫Ü„ÄÇ‰∏ãÈù¢Â∞±Êù•Êçã‰∏ÄÊçãËøô‰πùÂ§ßÁªÑ‰ª∂ÁöÑÂü∫Êú¨ËÅåË¥£„ÄÇ HandlerMappingÂÖ≥‰∫éhandlermappingÂú®‰∏ãÈù¢Âá†ÁØáÊñáÁ´†‰∏≠ÂÅöËøá‰∏Ä‰∫õÂü∫Êú¨‰ªãÁªçÔºå‰ΩÜÊòØËøò‰∏çÊòØÂæàÂÖ®ÔºåÂØπ‰∫éhandlermappingÁöÑÂ≠êÁ±ªËøòÊ≤°ÊúâÂàÜÊûêÂÆåÔºåËøô‰∏™‰ºöÂêéÊúüÊõ¥Êñ∞ÁöÑ„ÄÇ SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöHandlerMapping SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöAbstractHandlerMapping SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöAbstractUrlHandlerMapping ÂØπ‰∫éHandlerMappingÊù•ËØ¥ÔºåÂÖ∂‰ΩúÁî®Â∞±ÊòØÊ†πÊçÆrequestÊâæÂà∞Áõ∏Â∫îÁöÑÂ§ÑÁêÜÂô®HandlerÂíåIntecepterÊã¶Êà™Âô®„ÄÇÂÖ∑‰ΩìÁªÜËäÇÂèÇÊï∞‰∏äÈù¢Á¨¨‰∏ÄÁØáÊñáÁ´†„ÄÇ HandlerAdapterÂ¶ÇÊûúËØ¥HandlerMappingÊòØ‰∏ÄÊîØÁ¨îÔºåÈÇ£‰πàHandlerAdapterÂ∞±ÊòØÁî®Á¨îÁöÑ‰∫∫„ÄÇ‰πüÂ∞±ÊòØËØ¥HandlerAdapterÂ∞±ÊòØ‰ΩøÁî®Â§ÑÁêÜÂô®Âπ≤Ê¥ªÁöÑ‰∫∫„ÄÇ‰∏∫‰ªÄ‰πàÂë¢ÔºüÊù•Áúã‰∏ã‰ª£Á†ÅÔºö 12345public interface HandlerAdapter &#123; boolean supports(Object var1); ModelAndView handle(HttpServletRequest var1, HttpServletResponse var2, Object var3) throws Exception; long getLastModified(HttpServletRequest var1, Object var2);&#125; ÊòØ‰∏çÊòØ‰∏ÄÁõÆ‰∫ÜÁÑ∂‰∫ÜÔºåÂú®HandlerAdapterÊé•Âè£‰∏≠Êèê‰æõ‰∫ÜhandleËøôÊ†∑‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂèÇÊï∞‰∏≠Object handlerÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™Â§ÑÁêÜÂô®ÔºåÈÇ£Êàë‰ª¨Â∞±Áü•ÈÅì‰∫ÜÔºåhandleÊñπÊ≥ïÂ∞±ÊòØ‰ΩøÁî®handlerÊù•Â§ÑÁêÜÈÄªËæëÁöÑ„ÄÇÂ§ÑÁêÜ‰πãÂêéËøîÂõû‰∏Ä‰∏™ModelAndView„ÄÇ HandlerExceptionResolverËøô‰∏™ÊòØSpringMVC‰∏≠ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÁªÑ‰ª∂ÔºåHandlerExceptionResolverËøô‰∏™ÁªÑ‰ª∂ÁöÑ‰ΩúÁî®Â∞±ÊòØÊ†πÊçÆÂºÇÂ∏∏ËÆæÁΩÆModelAndViewÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÂ§ÑÁêÜÁªìÊûú‰∫§ÁªôrenderÊñπÊ≥ïËøõË°åÊ∏≤Êüì„ÄÇÂΩìÁÑ∂render‰πü‰ªÖ‰ªÖÂè™ÊòØË¥üË¥£Â∞ÜModelAndViewÊ∏≤ÊüìÊàêÈ°µÈù¢ÔºåModelAndViewÁöÑÂÖ∑‰ΩìÊù•Ê∫êÂÆÉ‰∏çÂÖ≥ÂøÉ„ÄÇ ËøôÈáåÈúÄË¶ÅËØ¥Êòé‰∏Ä‰∏ãÔºåÂä†ÂÖ•Âú®Ê∏≤ÊüìËøáÁ®ã‰∏≠ÂèëÁîüÂºÇÂ∏∏ÊÄé‰πàÂäûÔºü‰ªé‰∏äÈù¢ÁöÑÂàÜÊûêÊàë‰ª¨ÂèØ‰ª•Ê∏ÖÊ•öÁöÑÁü•ÈÅìÔºåHandlerExceptionResolverËøô‰∏™ÁªÑ‰ª∂ÂØπÂºÇÂ∏∏ÁöÑÂ§ÑÁêÜÁªìÊûúÊòØModelAndViewÔºåÁÑ∂ÂêéÂÜçÁî±renderÊñπÊ≥ïËøõË°åÊ∏≤ÊüìÔºå‰πüÂ∞±ÊòØËØ¥HandlerExceptionResolverÊòØÂú®Ê∏≤Êüì‰πãÂâçÂ∑•‰ΩúÁöÑÔºåÂõ†Ê≠§Ê∏≤ÊüìËøáÁ®ã‰∏≠ÂèëÁîüÂºÇÂ∏∏ÔºåHandlerExceptionResolverÊòØ‰∏ç‰ºöÂ§ÑÁêÜÁöÑ„ÄÇ 123public interface HandlerExceptionResolver &#123; ModelAndView resolveException(HttpServletRequest var1, HttpServletResponse var2, Object var3, Exception var4);&#125; Âú®HandlerExceptionResolver‰∏≠‰πüÂè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØ‰ªéÂºÇÂ∏∏‰∏≠Ëß£ÊûêÂá∫ModelAndView„ÄÇ ViewResolverViewResolverÁöÑ‰ΩúÁî®ÊòØÂ∞ÜStringÁ±ªÂûãÁöÑÈÄªËæëËßÜÂõæÊ†πÊçÆlocalËß£Êûê‰∏∫ViewËßÜÂõæÁöÑ„ÄÇ‰∏ãÈù¢ÊòØViewResolverÁöÑÊ∫êÁ†ÅÊé•Âè£ÂÆö‰πâÔºö 123public interface ViewResolver &#123; View resolveViewName(String viewName, Locale local) throws Exception;&#125; ‰ªé‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®ViewResolver‰∏≠‰πüÊòØÂè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÔºå‰ªéresolveViewNameÊñπÊ≥ïÁöÑÂèÇÊï∞ÂíåËøîÂõûÁªìÊûúÂ∞±ÂæàÂ•ΩÁöÑËß£Èáä‰∫ÜÂÖ∂‰ΩúÁî®„ÄÇ viewName StringÁ±ªÂûãÁöÑËßÜÂõæÂêç local Âå∫ÂüüÔºåÂèØ‰ª•Áî®Êù•ÂÅöÂõΩÈôÖÂåñ„ÄÇ ViewÂÆûÈôÖ‰∏äÊòØÁî®Êù•Ê∏≤ÊüìÈ°µÈù¢ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Â∞ÜÁ®ãÂ∫èËøîÂõûÁöÑÁªìÊûúÂ°´ÂÖ•Âà∞ÂÖ∑‰ΩìÁöÑÊ®°ÊùøÈáåÈù¢ÔºåÁîüÊàêÂÖ∑‰ΩìÁöÑËßÜÂõæÊñá‰ª∂ÔºåÊØîÂ¶ÇÔºöjspÔºåftlÔºåhtmlÁ≠â„ÄÇ ‰ΩÜÊòØËøôÈáåÂèà‰ºöÁâµÊâØÂá∫‰∏§‰∏™ÈóÆÈ¢òÔºö Áî®‰ªÄ‰πàÊ®°ÊùøÔºü ÂèÇÊï∞ÊÄé‰πàÂ°´ÂÖ•Ôºü ÂΩìÁÑ∂ÔºåËøô‰∏§‰∏™ÈóÆÈ¢ò‰πüÂ∞±ÊòØÊú¨Â∞èËäÇËØ¥ÁöÑViewResolverÈúÄË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢ò„ÄÇÂ§ß‰ΩìÂàÜ‰∏∫‰∏§ÁßçÔºö ÈíàÂØπÂçï‰∏ÄËßÜÂõæÁ±ªÂûãÁöÑËß£ÊûêÂô® InternalResourceViewResolver FreeMarkerViewResolver ‰∏äÈù¢‰∏§ÁßçÊòØÁî®ÁöÑÊúÄÂ§öÁöÑ‰∏§ÁßçÔºåInternalResourceViewResolverÁî®Êù•Ëß£ÊûêjspÔºåËÄåFreeMarkerViewResolverÂàôÊòØÈíàÂØπFreeMarker„ÄÇ ÈíàÂØπÂêåÊó∂Ëß£ÊûêÂ§öÁßçÁ±ªÂûãËßÜÂõæÁöÑËß£ÊûêÂô® BeanNameViewResolver ÈúÄË¶ÅÂêåÊó∂‰ΩøÁî®ËßÜÂõæÂêçÂíåÂØπÂ∫îÁöÑlocalÊù•Ëß£ÊûêËßÜÂõæ„ÄÇÂÆÉÈúÄË¶ÅÂ∞ÜÊØè‰∏Ä‰∏™ËßÜÂõæÂêçÂíåÂØπÂ∫îÁöÑËßÜÂõæÁ±ªÂûãÈÖçÁΩÆÂà∞Áõ∏Â∫îÁöÑpropertiesÊñá‰ª∂‰∏≠„ÄÇÔºàÂêéÈù¢ËÆ≤ÁªÑ‰ª∂ÂÆûÁé∞ÁªÜËäÇÊó∂ÁªôÂá∫ÂàóÂ≠êÔºâ XmlViewResolver XmlViewResolverÂíåBeanNameViewResolverÊúâÁÇπÂ∑Æ‰∏çÂ§öÔºåBeanNameViewResolver‰ΩøÁî®ÁöÑÊòØxmlÊ†ºÂºèÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ ResourceBundleViewResolver Ëøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØÊ†πÊçÆviewName‰ªéSpringÂÆπÂô®‰∏≠Êü•ÊâæbeanÔºåÂÜçÊ†πÊçÆËøô‰∏™beanÊù•ÊâæÂà∞ÂØπÂ∫îÁöÑËßÜÂõæ„ÄÇ LocalResolverÂú®‰∏äÈù¢ÁöÑViewResolver‰∏≠ÊèêÂà∞ÔºåËß£ÊûêËßÜÂõæÈúÄË¶Å‰∏§‰∏™ÂèÇÊï∞Ôºå‰∏Ä‰∏™ÊòØStringÁ±ªÂûãÁöÑÈÄªËæëËßÜÂõæÂêçÔºåÂè¶Â§ñ‰∏Ä‰∏™ÊòØlocal„ÄÇLocalResolverÁöÑ‰ΩúÁî®Â∞±ÊòØ‰ªérequest‰∏≠Ëß£ÊûêÂá∫localÁöÑ„ÄÇ 12345public interface LocaleResolver &#123; Locale resolveLocale(HttpServletRequest request); void setLocale(HttpServletRequest request, HttpServletResponse response, Locale local);&#125; Á¨¨‰∏Ä‰∏™ÊñπÊ≥ïÊòØ‰ªérequest‰∏≠Ëß£ÊûêÂá∫localÔºåÁ¨¨‰∫å‰∏™ÊñπÊ≥ïÊòØÂ∞ÜlocalËÆæÁΩÆÂà∞request‰∏≠„ÄÇ ÂÖ≥‰∫élocalÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÈÉΩÊòØÁî®Êù•ÂÅöÂõΩÈôÖÂåñÂ§ÑÁêÜÁöÑ„ÄÇ ThemeResolverËß£Êûê‰∏ªÈ¢òÁöÑ„ÄÇËøô‰∏™ÊàëÂπ≥Êó∂Èô§‰∫ÜSpringMVCËá™Â∑±Êèê‰æõÁöÑÂäüËÉΩÂ§ñÔºåÂæàÂ∞ëËá™Â∑±ÂéªÊâ©Â±ï‰ΩøÁî®ÔºåÂç≥‰ΩøÊòØÊç¢‰∏ªÈ¢ò‰πüÊ≤°ÊúâÂÅöËøá„ÄÇ‰∏çËøáÊó¢ÁÑ∂Â≠òÂú®ËÇØÂÆöÊòØÊúâÂ≠òÂú®ÁöÑÂéüÂõ†ÁöÑ„ÄÇÂØπ‰∫éÊàë‰ª¨Â∏∏ËßÅÁöÑÁΩëÈ°µÁïåÈù¢Ê¥ªÁùÄÊâãÊú∫ÁïåÈù¢Êù•ËØ¥Ôºå‰∏ÄÂ•ó‰∏ªÈ¢òÊó†ÈùûÂ∞±ÊòØÊç¢‰∏ÄÂ•óÂõæÁâáÔºåÊ¥ªÁùÄcssÊ†∑ÂºèÊñá‰ª∂Á≠âÁ≠â„ÄÇÊàë‰ª¨ÈÄöËøáThemeResolverËøô‰∏™Â∞±ÂèØ‰ª•ÂÆûÁé∞ËøôÊ†∑ÁöÑÂäüËÉΩ„ÄÇÂÖ∑‰Ωì‰ΩøÁî®ÂÖ∂ÂÆû‰πüÂ∞±ÊòØÈÖç‰∏ÄÂ•ópropertiesÊñá‰ª∂‰æõÁ≥ªÁªüÂú®‰∏çÂêåÁöÑÊó∂ÂÄôËØªÂèñÂàáÊç¢ÔºõÂΩìÁÑ∂‰ΩøÁî®Ëøô‰∏™‰πüÊòØÂèØ‰ª•ÂÆûÁé∞ÂõΩÈôÖÂåñÁöÑ„ÄÇ 12345public interface ThemeResolver &#123; String resolveThemeName(HttpServletRequest request); void setThemeName(HttpServletRequest request, HttpServletResponse response, String themeName);&#125; RequestToViewNameTranslatorËøô‰∏™ÂÖ∂ÂÆûËøòÊòØÊå∫ÊúâÊÑèÊÄùÁöÑÔºåÂ∞±ÊòØÂ∞ÜrequestËØ∑Ê±ÇËΩ¨Êç¢‰∏∫ËßÜÂõæÂêçÁß∞„ÄÇ 123public interface RequestToViewNameTranslator &#123; String getViewName(HttpServletRequest request) throws Exception;&#125; RequestToViewNameTranslatorÂè™Êúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑÂÆûÁé∞Á±ªDefaultRequestToViewNameTranslator„ÄÇ Âú®DefaultRequestToViewNameTranslatorÂÖ∑‰ΩìÂÆûÁé∞‰∫ÜgetViewName(HttpServletRequest request)ÊñπÊ≥ïÔºö 1234public String getViewName(HttpServletRequest request) &#123; String lookupPath = this.urlPathHelper.getLookupPathForRequest(request); return this.prefix + this.transformPath(lookupPath) + this.suffix;&#125; ‰∏ªË¶ÅÊòØÂßîÊ¥æÁªôurlPathHelperÂ∏ÆÂä©Á±ªÂæóÂà∞ËØ∑Ê±ÇÁöÑÂêéÁºÄÂêçÁß∞ÔºåÊØîÂ¶ÇÈÄöËøá ËØ∑Ê±ÇË∑ØÂæÑÊØîÂ¶Ç/glmapper/login.doËΩ¨Êç¢ÂæóÂà∞/login.do ÔºõÂÖ∑‰ΩìÊÄé‰πàËΩ¨Êç¢ÊàêËßÜÂõæ‰πü‰ºöÂú®ÂêéÈù¢ÁöÑÁªÑ‰ª∂‰ªãÁªç‰∏≠ÁªôÂá∫ÂÖ∑‰ΩìÁöÑ‰æãÂ≠ê„ÄÇ MultipartResolverËøô‰∏™Áõ∏Â∫îÂ∞è‰ºô‰º¥‰ª¨‰πü‰∏çÈôåÁîüÔºåÂÅöÁΩëÁ´ôÂ§öÂ§öÂ∞ëÂ∞ë‰ºöÊ∂âÂèäÂà∞Êñá‰ª∂‰∏ä‰º†„ÄÇMultipartResolverÂ∞±ÊòØÁî®Êù•Â§ÑÁêÜ‰∏ä‰º†ËØ∑Ê±ÇÁöÑ„ÄÇÂÖ∂Â§ÑÁêÜÊñπÂºèÂ∞±ÊòØÂ∞ÜrequestÂåÖË£ÖÊàêMultipartHttpServletRequest„ÄÇÁÑ∂ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•Áî®MultipartHttpServletRequestËøô‰∏™Áõ¥Êé•Ë∞ÉÁî®getFileËé∑ÂèñÁöÑÊñá‰ª∂‰∫Ü„ÄÇ FlashMapManagerËøô‰∏™Âú®redirectÊòØËøõË°åÂèÇÊï∞‰º†ÈÄíÈúÄË¶ÅÁî®Âà∞„ÄÇ 12345public interface FlashMapManager &#123; FlashMap retrieveAndUpdate(HttpServletRequest request, HttpServletResponse response); void saveOutputFlashMap(FlashMap flashMap, HttpServletRequest request, HttpServletResponse response);&#125; retrieveAndUpdateËøô‰∏™ÊñπÊ≥ïÊòØÁî®Êù•ÊÅ¢Â§çÂèÇÊï∞ÁöÑÔºåÂØπ‰∫éÊÅ¢Â§çËøáÁöÑÂíåË∂ÖÊó∂ÁöÑÂèÇÊï∞Â∞ÜÈÉΩ‰ºöË¢´Âà†Èô§Êéâ„ÄÇ saveOutputFlashMapËøô‰∏™ÊñπÊ≥ïÊòØÁî®Êù•‰øùÂ≠òÂèÇÊï∞ÁöÑ„ÄÇ FlashMapManagerÁöÑÈªòËÆ§ÂÆûÁé∞Êú∫Âà∂‰∏≠ÂèÇÊï∞ÁöÑÂ≠òÂÇ®ÊòØÊîæÂú®session‰∏≠ÁöÑ„ÄÇÊàë‰πãÂâçÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠Â∞±ÊúâÈÅáÂà∞ËøáËøôÁßçÊÉÖÂÜµÔºåÂØπ‰∫é‰∏Ä‰∫õÊàë‰ª¨‰∏çÊÉ≥Êö¥Èú≤Âú®url‰∏≠ÁöÑÂèÇÊï∞ÔºåÂú®ËøõË°åËØ∑Ê±ÇËΩ¨ÂèëÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®@RedirectAttributesÂ∞ÜÂèÇÊï∞‰øùÂ≠òÔºåÁÑ∂ÂêéÂú®‰∏ã‰∏Ä‰∏™Â§ÑÁêÜÂô®‰∏≠Ëé∑ÂèñÂà∞„ÄÇ Â∞èÁªìÊú¨ÁØá‰∏ªË¶ÅÊòØÊù•ÂØπ‰πùÂ§ßÁªÑ‰ª∂ÂÅö‰∏Ä‰∏™Á¨ºÁªüÁöÑ‰ªãÁªçÔºåÁªÜËäÇÂÆûÁé∞ÂèäÊ°à‰æãÂùá‰∏çÊ∂âÂèäÔºõÂú®ÂêéÁª≠ÁöÑSpringMVCÊ∫êÁ†ÅÁ≥ªÂàó‰∏≠ÂØπÂêÑ‰∏™ÁªÑ‰ª∂ÁöÑÂÆûÁé∞ÁªÜËäÇÂàÜÊûêÊó∂ÂÜç‰∏ÄÊé¢Á©∂Á´üÂêß„ÄÇ]]></content>
      <categories>
        <category>spring mvc</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>mvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöAbstractUrlHandlerMapping]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-webmvc4%2F</url>
    <content type="text"><![CDATA[AbstractUrlHandlerMappingÊòØÈÄöËøáurlÊù•ËøõË°åÂåπÈÖçÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÈÄöËøáurl‰∏éÂØπÂ∫îÁöÑHandlerÂåÖÂ≠òÂà∞‰∏Ä‰∏™Map‰∏≠ÔºåÁÑ∂ÂêéÂú®getHandlerInternalÊñπÊ≥ï‰∏≠‰ΩøÁî®url‰Ωú‰∏∫key‰ªéMap‰∏≠Ëé∑ÂèñÊàë‰ª¨ÁöÑhandler„ÄÇ AbstractUrlHandlerMappingÂÆûÁé∞‰∫Ü‰ªéurlËé∑ÂèñhandlerÁöÑËøáÁ®ãÔºåÂÖ∑‰ΩìÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºå‰πüÂ∞±ÊòØhandlerMapÂàôÊòØ‰∫§ÁªôÂÖ∑‰ΩìÂ≠êÁ±ªÊù•ÂéªÂÆåÊàêÁöÑ„ÄÇAbstractUrlHandlerMapping‰∏≠ÂÆö‰πâ‰∫ÜhandlerMapÁî®Êù•Áª¥Êä§Êò†Â∞ÑÂÖ≥Á≥ªÔºåÂ¶Ç‰∏ãÔºö12private final Map&lt;String, Object&gt; handlerMap = new LinkedHashMap&lt;String, Object&gt;(); Èô§Ê≠§‰πãÂ§ñÔºåËøòÊúâ‰∏Ä‰∏™rootHandler,Ëøô‰∏™Áî®‰∫éÂ§ÑÁêÜ‚Äú/‚ÄùËØ∑Ê±Ç„ÄÇ Âú®ÂâçÈù¢‰∏âÁØáÊñáÁ´†‰∏≠ÊèêÂà∞ËøáÔºåhandlerÁöÑËé∑ÂèñÊòØÈÄöËøágetHandlerInternalÊñπÊ≥ïÂÆåÊàêÁöÑÔºå‰∏ãÈù¢Áúã‰∏ãÂÖ∑‰ΩìÁöÑÊ∫êÁ†ÅÔºåÂàÜÊûê‰∏ãhandlerÁöÑËé∑ÂèñÂíåhandlerMapÁöÑÊûÑÂª∫„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243//Êü•ÊâæÁªôÂÆöËØ∑Ê±ÇÁöÑURLË∑ØÂæÑÁöÑHandler„ÄÇprotected Object getHandlerInternal(HttpServletRequest request) throwsException &#123; String lookupPath = getUrlPathHelper().getLookupPathForRequest(request); //‰ΩøÁî®lookupPath‰ªéMap‰∏≠Êü•Êâæhandler Object handler = lookupHandler(lookupPath, request); if (handler == null) &#123; //‰∏¥Êó∂ÂèòÈáèÔºå‰øùÂ≠òÂéüÂßãÁöÑhandler Object rawHandler = null; //ÊòØÂê¶ÊòØ‚Äò/‚ÄôÊ†πË∑ØÂæÑ if ("/".equals(lookupPath)) &#123; //Ëé∑ÂèñrootHandler rawHandler = getRootHandler(); &#125; //Â¶ÇÊûúrawHandlerÊòØnull if (rawHandler == null) &#123; //Ëé∑ÂèñÈªòËÆ§ÁöÑhandler rawHandler = getDefaultHandler(); &#125; //Â¶ÇÊûúrawHandler‰∏çÊòØnull if (rawHandler != null) &#123; // Â¶ÇÊûúÊòØstringÁ±ªÂûãÔºåÂàôÂà∞ÂÆπÂô®‰∏≠Êü•ÊâæÂÖ∑‰ΩìÁöÑbean if (rawHandler instanceof String) &#123; String handlerName = (String) rawHandler; //ÂÆπÂô®‰∏≠Ëé∑Âèñ rawHandler = getApplicationContext().getBean(handlerName); &#125; //Ê†°È™åhandlerÂíårequestÊòØÂê¶ÂåπÈÖç validateHandler(rawHandler, request); //Ê≥®ÂÜåÊã¶Êà™Âô® handler = buildPathExposingHandler(rawHandler, lookupPath, lookupPath, null); &#125; &#125; //Êó•Âøódebug if (handler != null &amp;&amp; logger.isDebugEnabled()) &#123; logger.debug("Mapping [" + lookupPath + "] to " + handler); &#125; else if (handler == null &amp;&amp; logger.isTraceEnabled()) &#123; logger.trace("No handler mapping found for [" + lookupPath + "]"); &#125; //ËøîÂõûhandler return handler;&#125; Âú®getHandlerInternalÊñπÊ≥ï‰∏≠ÊúâÂá†‰∏™ÊñπÊ≥ïË∞ÉÁî®ÔºåÂÉègetLookupPathForRequest„ÄÅgetRootHandler„ÄÅgetDefaultHandler„ÄÅlookupHandler„ÄÅbuildPathExposingHandlerÁ≠â„ÄÇÂÖ∂‰∏≠getLookupPathForRequest„ÄÅgetRootHandler„ÄÅgetDefaultHandlerËøôÂá†‰∏™Ê≤°Âï•Â•ΩËØ¥ÁöÑÔºõÊØîËæÉÊ†∏ÂøÉÁöÑÂ∞±ÊòØlookupHandler„ÄÅbuildPathExposingHandlerËøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ lookupHandler lookupHandler‰ΩøÁî®getUrlPathHelper().getLookupPathForRequest(request)Ëé∑ÂèñÂà∞ÁöÑlookupPath‰ªéMap‰∏≠Êü•ÊâæÈúÄË¶ÅÁöÑHandler,ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÊòØÁõ¥Êé•get‰∏çÂà∞ÁöÑ„ÄÇ‰∏∫‰ªÄ‰πàÂë¢ÔºüÂéüÂõ†Âú®‰∫éÂæàÂ§öÁöÑhandlerÈÉΩÊòØ‰ΩøÁî®‰∫ÜPatternÁöÑÂåπÈÖçÊ®°ÂºèÔºåÊØîÂ¶ÇËØ¥‚Äú/user/*‚Äù,ÊòüÂè∑Ë°®Á§∫ÂåπÈÖç‰ªªÊÑèÂÜÖÂÆπÔºåÂπ∂ÈùûÊòØÊåáÂÆöurl‰∏≤‰∏≠ÁöÑÂ≠óÁ¨¶„ÄÇÂ¶ÇÊûúPattern‰∏≠ÂåÖÂê´‰∫ÜPathVariable,‰πü‰∏çËÉΩÁõ¥Êé•‰ªéMap‰∏≠Ëé∑ÂèñÂà∞„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºå‰∏Ä‰∏™urlËøòÂèØËÉΩÂíåÂ§ö‰∏™PatternÁõ∏ÂåπÈÖçÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂí±‰ª¨ËÇØÂÆöÂ∞±ÈúÄË¶ÅÈÄâÊã©ÊúÄ‰ºòÁöÑÔºåÊâÄ‰ª•ËØ¥Êü•ÊâæËøáÁ®ãÂÖ∂ÂÆûÂπ∂‰∏çÊòØÁõ¥Êé•‰ªémap‰∏≠Ëé∑ÂèñÈÇ£‰πàÁÆÄÂçï„ÄÇÈÇ£‰πàÂ∞±Êù•Áúã‰∏ãÂú®lookupHandler‰∏≠ÈÉΩÂπ≤‰∫ÜÂì™‰∫õ‰∫ãÊÉÖÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374protected Object lookupHandler(String urlPath, HttpServletRequest request) throws Exception &#123; // Áõ¥Êé•ÂåπÈÖçÔºåÁõ¥Êé•‰ªéMap‰∏≠Ëé∑Âèñ Object handler = this.handlerMap.get(urlPath); //ÂèñÂà∞‰∫Ü if (handler != null) &#123; // Â¶ÇÊûúÊòØstringÁ±ªÂûãÔºåÂàô‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñBean if (handler instanceof String) &#123; String handlerName = (String) handler; handler = getApplicationContext().getBean(handlerName); &#125; //È™åËØÅÊòØÂê¶ÂåπÈÖç validateHandler(handler, request); //Ê≥®ÂÜåÊã¶Êà™Âô® return buildPathExposingHandler(handler, urlPath, urlPath, null); &#125; // Pattern ÂåπÈÖçÔºåÂ∏¶*Âè∑ÁöÑÊ®°Âºè‰∏éurlËøõË°åÂåπÈÖç List&lt;String&gt; matchingPatterns = new ArrayList&lt;String&gt;(); for (String registeredPattern : this.handlerMap.keySet()) &#123; if (getPathMatcher().match(registeredPattern, urlPath)) &#123; matchingPatterns.add(registeredPattern); &#125; else if (useTrailingSlashMatch()) &#123; if (!registeredPattern.endsWith("/") &amp;&amp; getPathMatcher().match(registeredPattern + "/", urlPath)) &#123; matchingPatterns.add(registeredPattern +"/"); &#125; &#125; &#125; //Ëé∑ÂèñÊúÄ‰Ω≥ÂåπÈÖç String bestPatternMatch = null; Comparator&lt;String&gt; patternComparator = getPathMatcher().getPatternComparator(urlPath); if (!matchingPatterns.isEmpty()) &#123; Collections.sort(matchingPatterns, patternComparator); if (logger.isDebugEnabled()) &#123; logger.debug("Matching patterns for request [" + urlPath + "] are " + matchingPatterns); &#125; bestPatternMatch = matchingPatterns.get(0); &#125; //ÊúÄ‰Ω≥ÂåπÈÖç‰∏ç‰∏∫null if (bestPatternMatch != null) &#123; //‰ªéMap‰∏≠ÁúãÁúãÊòØÂê¶ÊúâÂØπÂ∫îÁöÑHandler handler = this.handlerMap.get(bestPatternMatch); //Â¶ÇÊûúMap‰∏≠Ê≤°Êúâ if (handler == null) &#123; //ÊòØÂê¶‰ª•/ÁªìÂ∞æ Assert.isTrue(bestPatternMatch.endsWith("/")); //ÂéªÈô§/‰πãÂêéÂÜçËé∑Âèñ‰∏ÄÊ¨° handler = this.handlerMap.get(bestPatternMatch.substring(0, bestPatternMatch.length() - 1)); &#125; // Â¶ÇÊûúÊòØStringÁ±ªÂûãÔºåÂàô‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñBean? if (handler instanceof String) &#123; String handlerName = (String) handler; handler = getApplicationContext().getBean(handlerName); &#125; //È™åËØÅÊòØÂê¶ÂåπÈÖç validateHandler(handler, request); String pathWithinMapping = getPathMatcher().extractPathWithinPattern(bestPatternMatch, urlPath); // ÂèØËÉΩÊúâÂ§öÁßçÊúÄ‰Ω≥Ê®°ÂºèÔºåËÆ©Êàë‰ª¨Á°Æ‰øùÊàë‰ª¨ÊúâÊ≠£Á°ÆÁöÑURIÊ®°ÊùøÂèòÈáèÔºàËØëÔºâ Map&lt;String, String&gt; uriTemplateVariables = new LinkedHashMap&lt;String, String&gt;(); for (String matchingPattern : matchingPatterns) &#123; if (patternComparator.compare(bestPatternMatch, matchingPattern) == 0) &#123; Map&lt;String, String&gt; vars = getPathMatcher().extractUriTemplateVariables(matchingPattern, urlPath); Map&lt;String, String&gt; decodedVars = getUrlPathHelper().decodePathVariables(request, vars); uriTemplateVariables.putAll(decodedVars); &#125; &#125; if (logger.isDebugEnabled()) &#123; logger.debug("URI Template variables for request [" + urlPath + "] are " + uriTemplateVariables); &#125; return buildPathExposingHandler(handler, bestPatternMatch, pathWithinMapping, uriTemplateVariables); &#125; // No handler found... return null;&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂÖ≥‰∫éËØëÊ≥®ÁöÑÈÉ®ÂàÜÈúÄË¶ÅËØ¥‰∏Ä‰∏ãÔºõ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789Map&lt;String, String&gt; uriTemplateVariables = new LinkedHashMap&lt;String, String&gt;();for (String matchingPattern : matchingPatterns) &#123; if (patternComparator.compare(bestPatternMatch, matchingPattern) == 0) &#123; Map&lt;String, String&gt; vars = getPathMatcher().extractUriTemplateVariables(matchingPattern, urlPath); Map&lt;String, String&gt; decodedVars = getUrlPathHelper().decodePathVariables(request, vars); uriTemplateVariables.putAll(decodedVars); &#125;&#125; ‰πãÂâçÊòØÈÄöËøásortÊñπÊ≥ïËøõË°åÊéíÂ∫èÁöÑÔºåÁÑ∂ÂêéÂ∞ÜÁ¨¨‰∏Ä‰∏™‰Ωú‰∏∫bestPatternMatchÔºå‰ΩÜÊòØÂ¶ÇÊûúÂ§ö‰∏™patternÁöÑÈ°∫Â∫èÁõ∏ÂêåÔºå‰πüÂ∞±ÊòØËØ¥sortËøîÂõûÁöÑÊòØ0,Â≠òÂú®Â§öÁßçÊúÄ‰Ω≥ÂåπÈÖçÔºåÈÇ£Â∞±ÈúÄË¶ÅÁ°Æ‰øùÊàë‰ª¨ÊúâÊ≠£Á°ÆÁöÑURIÊ®°ÊùøÂèòÈáè„ÄÇ‰∏äÈù¢‰ª£Á†ÅÂ∞±ÊòØÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµÁöÑ„ÄÇ buildPathExposingHandler Ëøô‰∏™ÊñπÊ≥ïÂú®‰∏äÈù¢ÁöÑ‰∏§ÊÆµ‰ª£Á†Å‰∏≠ÈÉΩÈ¢ëÁπÅÂá∫Áé∞ÔºåÈÇ£‰πàËøô‰∏™ÊñπÊ≥ïÂà∞Â∫ïÊúâ‰ªÄ‰πà‰ΩúÁî®Âë¢Ôºü‰ª£Á†Å‰∏≠ÊàëÊ≥®ÈáäÁöÑÊòØÊ≥®ÂÜåÊã¶Êà™Âô®ÔºåÈÇ£‰πàÊ≥®ÂÜåÁöÑÂèàÊòØ‰ªÄ‰πàÊã¶Êà™Âô®ÔºüÂ∏¶ÁùÄËøô‰∏§‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨Êù•Áúã‰∏ã‰ª£Á†Å„ÄÇ 123456789101112131415161718//buildPathExposingHandler‰∏∫ÁªôÂÆöÁöÑrawHandlerÊûÑÂª∫‰∏Ä‰∏™HandlerÂØπË±°ÔºåÂπ∂Âú®Êâß//Ë°åÂ§ÑÁêÜÁ®ãÂ∫è‰πãÂâçÊö¥Èú≤ÂÆûÈôÖÁöÑÂ§ÑÁêÜÁ®ãÂ∫èPATH_WITHIN_HANDLER_MAPPING_ATTRIBUT//E‰ª•ÂèäURI_TEMPLATE_VARIABLES_ATTRIBUTE„ÄÇ//ÈªòËÆ§ÂÆûÁé∞Áî®‰∏Ä‰∏™ÁâπÊÆäÁöÑÊã¶Êà™Âô®ÊûÑÂª∫‰∏Ä‰∏™HandlerExecutionChainÔºåËØ•Êã¶Êà™Âô®Êö¥Èú≤//pathÂ±ûÊÄßÂíåuriÊ®°ÊùøÂèòÈáè„ÄÇprotected Object buildPathExposingHandler(Object rawHandler, String bestMatchingPattern, String pathWithinMapping, Map&lt;String, String&gt; uriTemplateVariables) &#123; HandlerExecutionChain chain = new HandlerExecutionChain(rawHandler); chain.addInterceptor(new PathExposingHandlerInterceptor(bestMatchingPattern, pathWithinMapping)); if (!CollectionUtils.isEmpty(uriTemplateVariables)) &#123; chain.addInterceptor(new UriTemplateVariablesHandlerInterceptor(uriTemplateVariables)); &#125; return chain;&#125; Âõõ‰∏™ÂèÇÊï∞Ôºö rawHandler ÂéüÂßãÂ§ÑÁêÜÁ®ãÂ∫è bestMatchingPattern ÊúÄ‰Ω≥ÂåπÈÖçÊ®°Âºè pathWithinMapping Âú®ÊâßË°åHandler‰πãÂâçÂÖ¨ÂºÄÁöÑË∑ØÂæÑ uriTemplateVariables Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÂèòÈáèÔºåURIÊ®°ÊùøÂèòÈáèÂèØ‰ª•ÊòØ{null} ‰ªé‰ª£Á†ÅÊ≥®ÈáäÁøªËØëÂèä‰ª£Á†ÅÂÜÖÂÆπÂèØ‰ª•‰∫ÜËß£Âà∞ÔºåbuildPathExposingHandlerÁöÑ‰ΩúÁî®Â∞±ÊòØÁªôÂ∑≤ÁªèÊü•ÊâæÂà∞ÁöÑhandlerÊ≥®ÂÜå‰∏§‰∏™Êã¶Êà™Âô® ExposingHandlerInterceptor UriTemplateVariablesHandlerInterceptor Ëøô‰∏§‰∏™Á±ªÂùáÊòØAbstractUrlHandlerMappingÁöÑÂÜÖÈÉ®Á±ªÔºå‰πüÂ∞±ÊòØ‰∏§‰∏™ÂÜÖÈÉ®Êã¶Êà™Âô®„ÄÇËøô‰∏§‰∏™Êã¶Êà™Âô®ÁöÑ‰∏ªË¶Å‰ΩúÁî®Â∞±ÊòØÂ∞Ü‰∏éÂΩìÂâçurlÂÆûÈôÖÂåπÈÖçÁöÑpattern„ÄÅÂåπÈÖçÊù°‰ª∂‰ª•ÂèäurlÊ®°ÊùøÂèÇÊï∞Á≠âËÆæÁΩÆÂà∞requestÁöÑÂ±ûÊÄßÈáåÈù¢ÂéªÔºåËøôÊ†∑Âú®ÂêéÈù¢ÁöÑÂ§ÑÁêÜËøáÁ®ã‰∏≠Â∞±ÂèØ‰ª•Áõ¥Êé•‰ªérequestÂ±ûÊÄß‰∏≠Ëé∑Âèñ„ÄÇÁúã‰∏ã‰∏§‰∏™ÂÜÖÈÉ®Á±ªÁöÑÂÆö‰πâÔºö 123456789101112131415161718192021222324252627282930313233private class PathExposingHandlerInterceptor extends HandlerInterceptorAdapter &#123; private final String bestMatchingPattern; private final String pathWithinMapping; public PathExposingHandlerInterceptor(String bestMatchingPattern, String pathWithinMapping) &#123; this.bestMatchingPattern = bestMatchingPattern; this.pathWithinMapping = pathWithinMapping; &#125; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) &#123; exposePathWithinMapping(this.bestMatchingPattern, this.pathWithinMapping, request); //ËÆæÁΩÆrequestÂ±ûÊÄß request.setAttribute(HandlerMapping.INTROSPECT_TYPE_LEVEL_MAPPING, supportsTypeLevelMappings()); return true; &#125;&#125;private class UriTemplateVariablesHandlerInterceptor extends HandlerInterceptorAdapter &#123; private final Map&lt;String, String&gt; uriTemplateVariables; public UriTemplateVariablesHandlerInterceptor(Map&lt;String, String&gt; uriTemplateVariables) &#123; this.uriTemplateVariables = uriTemplateVariables; &#125; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) &#123; //ËøôexposeUriTemplateVariablesÁßçËÆæÁΩÆrequestÂ±ûÊÄß exposeUriTemplateVariables(this.uriTemplateVariables, request); return true; &#125;&#125; ‰ªéÂÜÖÈÉ®Á±ªÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåËøô‰∏§‰∏™ÂÜÖÈÉ®Á±ªÊòØÈÄöËøáÂú®preHandleÊñπÊ≥ï‰∏≠Ë∞ÉÁî®exposePathWithinMappingÂíåexposeUriTemplateVariablesÂÆåÊàêÂ±ûÊÄßËÆæÁΩÆÂà∞request‰∏≠ÁöÑ„ÄÇ ÂØπ‰∫éÊü•ÊâæhandlerÁöÑÂÖ≥ÈîÆÂÖ∂ÂÆûÂ∞±ÊòØÁª¥Êä§urlÂíåhandlerÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºå‰πüÂ∞±ÊòØhandlerMapÁöÑÊûÑÂª∫„ÄÇÂú®AbstractUrlHandlerMapping‰∏≠ÊòØÈÄöËøáregisterHandlerËøô‰∏™ÊñπÊ≥ïÊù•ÊûÑÂª∫handlerMapÁöÑ„ÄÇAbstractUrlHandlerMappingÊèê‰æõ‰∫Ü‰∏§‰∏™registerHandlerÊñπÊ≥ïÔºå‰∏ãÈù¢Â∞±ÈÄöËøá‰ª£Á†ÅÊù•Áúã‰∏ãÂÖ∑‰ΩìÁöÑÂÆûÁé∞„ÄÇ 1234567protected void registerHandler(String[] urlPaths, String beanName) throws BeansException, IllegalStateException &#123; Assert.notNull(urlPaths, "URL path array must not be null"); for (String urlPath : urlPaths) &#123; registerHandler(urlPath, beanName); &#125;&#125; Á¨¨‰∏Ä‰∏™registerHandlerÊòØÂ∞ÜÂ§ö‰∏™urlÊ≥®ÂÜåÂà∞‰∏Ä‰∏™Â§ÑÁêÜÂô®„ÄÇbeanNameÂÖ∂ÂÆûÂ∞±ÊòØÂí±‰ª¨Â§ÑÁêÜÂô®ÁöÑÂêçÁß∞ÔºåÂèØ‰ª•ÈÄöËøábeanNameÂà∞ÂÆπÂô®‰∏≠ÂéªÊâæÂà∞ÁúüÊ≠£ÁöÑÂ§ÑÁêÜÂô®Bean„ÄÇÂÖ∑‰ΩìÂ§ÑÁêÜÂ∞±ÊòØÈÄöËøáÈÅçÂéÜÊâÄÊúâÁöÑurlÔºåÁÑ∂ÂêéÂÜçÈÄöËøáË∞ÉÁî®Á¨¨‰∫å‰∏™registerHandlerÂ∞ÜhandlerÊ≥®ÂÜåÂà∞handlerMap‰∏≠„ÄÇÊù•ÁúãÁ¨¨‰∫å‰∏™Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748protected void registerHandler(String urlPath, Object handler) throwsBeansException, IllegalStateException &#123; Assert.notNull(urlPath, "URL path must not be null"); Assert.notNull(handler, "Handler object must not be null"); Object resolvedHandler = handler; // Â¶ÇÊûúÁöÑhandlerÊòØstringÁ±ªÂûãÔºåÂπ∂‰∏î‰∏çÊòØlazyInitHandlersÔºåÂàô‰ªéSpringMV //CÂÆπÂô®‰∏≠Ëé∑Âèñhandler if (!this.lazyInitHandlers &amp;&amp; handler instanceof String) &#123; String handlerName = (String) handler; if (getApplicationContext().isSingleton(handlerName)) &#123; resolvedHandler = getApplicationContext().getBean(handlerName); &#125; &#125; Object mappedHandler = this.handlerMap.get(urlPath); if (mappedHandler != null) &#123; if (mappedHandler != resolvedHandler) &#123; //ÂºÇÂ∏∏Â§ÑÁêÜ &#125; &#125; else &#123; //ÊòØÂê¶ÊòØË∑üË∑ØÂæÑ if (urlPath.equals("/")) &#123; if (logger.isInfoEnabled()) &#123; logger.info("Root mapping to " + getHandlerDescription(handler)); &#125; setRootHandler(resolvedHandler); &#125; //ÊòØÂê¶ÊòØ*Ê®°Âºè else if (urlPath.equals("/*")) &#123; if (logger.isInfoEnabled()) &#123; logger.info("Default mapping to " + getHandlerDescription(handler)); &#125; setDefaultHandler(resolvedHandler); &#125; //Âä†ÂÖ•Âà∞handlerMap‰∏≠ else &#123; this.handlerMap.put(urlPath, resolvedHandler); if (logger.isInfoEnabled()) &#123; logger.info("Mapped URL path [" + urlPath + "] onto " + getHandlerDescription(handler)); &#125; &#125; &#125;&#125; Ëøô‰∏™ÈáåÈù¢È¶ñÂÖàÊòØÁúãMap‰∏≠ÊòØÂê¶ÊúâÂéüÊù•‰º†ÂÖ•ÁöÑurlÔºåÂ¶ÇÊûúÊ≤°ÊúâÂ∞±Âä†ÂÖ•ÔºåÂ¶ÇÊûúÊúâÂ∞±Áúã‰∏ãÂéüÊù•‰øùÂ≠òÁöÑÂíåÂΩìÂâçÊ≥®ÂÜåÁöÑhandlerÊòØÂê¶ÊòØÂêå‰∏Ä‰∏™ÔºåÂ¶ÇÊûú‰∏çÊòØÂêå‰∏Ä‰∏™Â∞±ÊäõÂá∫ÂºÇÂ∏∏„ÄÇÔºàÂêå‰∏Ä‰∏™url‰∏çÂèØËÉΩÂ≠òÂú®‰∏§‰∏™‰∏çÂêåÁöÑhandlerÔºâ„ÄÇ Âú®put‰πãÂâçÔºå‰πüÂÅö‰∫Ü‰∏Ä‰∫õ‚Äú/‚ÄùÂíå‚Äú/*‚ÄùÁöÑÈ™åËØÅÂ§ÑÁêÜÔºåÂ¶ÇÊûúÊòØËøô‰∏§ÁßçË∑ØÂæÑÁöÑËØùÂ∞±‰∏ç‰øùÂ≠òÂà∞handlerMap‰∏≠‰∫Ü„ÄÇ ‚Äú/‚ÄùÔºösetRootHandler(resolvedHandler); ‚Äú/*‚ÄùÔºösetDefaultHandler(resolvedHandler); OKÔºåÂà∞ËøôAbstractUrlHandlerMappingËøô‰∏™Á±ªÂ∞±ÂàÜÊûêÂÆå‰∫ÜÔºåÂÖ∂ÂÆûAbstractUrlHandlerMappingÂÅöÁöÑ‰∫ãÊÉÖÂ∞±ÊòØÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Ê°ÜÂ≠êÔºåÂ≠êÁ±ªÂè™Ë¶ÅÂÆåÊàêÂØπMapÁöÑÂàùÂßãÂåñÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂÖ≥‰∫éAbstractUrlHandlerMappingÁöÑÂ≠êÁ±ªÂêéÁª≠ÂÜçË∞à„ÄÇ]]></content>
      <categories>
        <category>spring mvc</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>mvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöÊ≥®Ëß£ËØ¥Êòé]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase13%2F</url>
    <content type="text"><![CDATA[Âõ†‰∏∫Ë¶ÅÁúãSpring‰∏≠Ê≥®Ëß£ÁöÑÂÖ∑‰ΩìÂÆö‰πâÔºåÊâÄ‰ª•Âú®ËØ¥‰πãÂâçÔºåÂÖàÊù•ÁÆÄÂçïËØ¥‰∏ãJAVA‰∏≠Ê≥®Ëß£ÁöÑ‰∏Ä‰∫õÂü∫Êú¨Áü•ËØÜ„ÄÇ ÂÖÉÊ≥®Ëß£‰ªÄ‰πàÊòØÂÖÉÊ≥®Ëß£Âë¢ÔºåÂ∞±ÊòØÊ≥®Ëß£ÁöÑÊ≥®Ëß£„ÄÇjava‰∏≠Êèê‰æõ‰∫Ü‰ª•‰∏ãÂá†ÁßçÔºö @Target Ê≥®Ëß£ÁöÑ‰ΩúÁî®ÂüüÊèèËø∞ 123456789101112131415161718public enum ElementType &#123; /** Á±ª, Êé•Âè£ ÊàñËÄÖÊûö‰∏æ */ TYPE, /** Â≠óÊÆµ */ FIELD, /** ÊñπÊ≥ï */ METHOD, /** ÂèÇÊï∞ */ PARAMETER, /** ÊûÑÈÄ†ÊñπÊ≥ï */ CONSTRUCTOR, /** Â±ÄÈÉ®ÂèòÈáè */ LOCAL_VARIABLE, /** Ê≥®Ëß£Á±ªÂûã */ ANNOTATION_TYPE, /** ÂåÖ */ PACKAGE&#125; @Retention ÁîüÂëΩÂë®ÊúüÊèèËø∞ 1234567891011121314public enum RetentionPolicy &#123; /** * Âú®ÂéüÊñá‰ª∂‰∏≠ÊúâÊïàÔºåË¢´ÁºñËØëÂô®‰∏¢ÂºÉ„ÄÇ */ SOURCE, /** * Âú®classÊñá‰ª∂ÊúâÊïàÔºåÂèØËÉΩ‰ºöË¢´ËôöÊãüÊú∫ÂøΩÁï•„ÄÇ */ CLASS, /** * Âú®ËøêË°åÊó∂ÊúâÊïà„ÄÇ */ RUNTIME&#125; @Inherited Ê†áËØÜÊÄßÁöÑÂÖÉÊ≥®Ëß£ÔºåÂÆÉÂÖÅËÆ∏Â≠êÊ≥®Ëß£ÁªßÊâøÂÆÉ„ÄÇ @Documented Áî®‰∫éÊ†áÂáÜÁîüÊàêjavadocÊó∂‰ºöÂåÖÂê´ÁöÑÊ≥®Ëß£„ÄÇ JAVA‰∏≠Ê≥®Ëß£ÁöÑÂÆö‰πâÊñπÂºè1public @interface Ê≥®Ëß£Âêç &#123;ÂÆö‰πâ‰Ωì&#125; ‰∏äÈù¢ËØï‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµÁÇπÔºåÂÖ≥Ê≥®Ê≥®Ëß£ÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õÁâπÊÄßÂíåÁî®Ê≥ïÂ∞±‰∏çÁªÜËØ¥‰∫Ü„ÄÇÁõ¥Êé•ÁúãSpring‰∏≠ÁöÑÊ≥®Ëß£Âêß„ÄÇ 1„ÄÅ@Component12345678910111213@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Component &#123; /** * The value may indicate a suggestion for a logical component name, * to be turned into a Spring bean in case of an autodetected component. * @return the suggested component name, if any */ String value() default "";&#125; ÊåáÁ§∫Ê≥®ÈáäÁ±ªÊòØ‚ÄúÁªÑ‰ª∂‚Äù„ÄÇ ÂΩì‰ΩøÁî®Âü∫‰∫éÊ≥®ÈáäÁöÑÈÖçÁΩÆÂíåÁ±ªË∑ØÂæÑÊâ´ÊèèÊó∂ÔºåËøô‰∫õÁ±ªË¢´ËÆ§‰∏∫ÊòØËá™Âä®Ê£ÄÊµãÁöÑÂÄôÈÄâÂØπË±°„ÄÇ 2„ÄÅ@Controller1234567@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Componentpublic @interface Controller &#123; String value() default "";&#125; ‰ΩøÁî®ËøáSpring mvcÁöÑÂ∞è‰ºô‰º¥ÂØπ‰∫éËøô‰∏™Ê≥®Ëß£ËÇØÂÆö‰∏çÈôåÁîü„ÄÇ@ControllerË°®Á§∫Ê≥®ÈáäÁöÑÁ±ªÊòØ‚ÄúÊéßÂà∂Âô®‚ÄùÔºà‰æãÂ¶ÇWebÊéßÂà∂Âô®Ôºâ„ÄÇËøô‰∏™Ê≥®Ëß£‰Ωú‰∏∫@ComponentÁöÑ‰∏Ä‰∏™ÁâπÂÆöÊñπÂºèÂ≠òÂú®ÔºåÂÖÅËÆ∏ÈÄöËøáÁ±ªË∑ØÂæÑÊâ´ÊèèÊù•Ëá™Âä®Ê£ÄÊµãÂÆûÁé∞Á±ª„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã‰ºöÁªìÂêàRequestMappingÊ≥®Ëß£‰ΩøÁî®„ÄÇ‰ªéÂÆÉÁöÑÂÆö‰πâÂ±ÇÈù¢Êù•ÁúãÔºåËøô‰∏™Ê≥®Ëß£Âè™ËÉΩÁî®‰∫éÊé•Âè£ÊàñËÄÖÁ±ª‰∏äÈù¢Ôºå‰∏çËÉΩÁî®‰∫éÊñπÊ≥ïÊàñËÄÖÂ±ûÊÄßÂ≠óÊÆµ‰∏äÈù¢„ÄÇ 3„ÄÅ@Service1234567@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Componentpublic @interface Service &#123; String value() default "";&#125; Ë°®Á§∫Ê≥®ÈáäÁ±ªÊòØ‰∏Ä‰∏™‚ÄúÊúçÂä°‚ÄùÔºåÊúÄÂàùÁî±Domain-Driven Design ÔºàEvansÔºå2003ÔºâÂÆö‰πâ‰∏∫‚Äú‰Ωú‰∏∫Ê®°Âûã‰∏≠Áã¨Á´ãÁöÑÊé•Âè£Êèê‰æõÁöÑÊìç‰ΩúÔºåÊ≤°ÊúâÂ∞ÅË£ÖÁä∂ÊÄÅ‚Äù„ÄÇ Âú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Êää‰ªñÁî®Âú®Ê†áÂáÜÊàë‰ª¨ÁöÑserviceÊúçÂä°Êé•Âè£ÁöÑÂÆûÁé∞Á±ª‰∏äÈù¢ÔºåÂÆûÈôÖ‰∏äËøôÁõ∏ÂΩì‰∫éÁº©Â∞èÂÆÉ‰ª¨ÁöÑËØ≠‰πâÂíåÈÄÇÂΩìÁöÑ‰ΩøÁî®„ÄÇ @ServiceËøô‰∏™Ê≥®Èáä‰Ωú‰∏∫ @ComponentÁöÑ‰∏Ä‰∏™Áâπ‰æãÔºåÂÖÅËÆ∏ÈÄöËøáÁ±ªË∑ØÂæÑÊâ´ÊèèÊù•Ëá™Âä®Ê£ÄÊµãÂÆûÁé∞Á±ª„ÄÇ 4„ÄÅ@Repository123456789101112@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Componentpublic @interface Repository &#123; /** * The value may indicate a suggestion for a logical component name, * to be turned into a Spring bean in case of an autodetected component. * @return the suggested component name, if any */ String value() default "";&#125; Áî®‰∫éÊ†áÊ≥®Êï∞ÊçÆËÆøÈóÆÁªÑ‰ª∂ÔºåÂç≥DAOÁªÑ‰ª∂ 5„ÄÅ@RequestMapping123456789101112131415161718192021222324@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Mappingpublic @interface RequestMapping &#123; String name() default ""; @AliasFor("path") String[] value() default &#123;&#125;; @AliasFor("value") String[] path() default &#123;&#125;; RequestMethod[] method() default &#123;&#125;; String[] params() default &#123;&#125;; String[] headers() default &#123;&#125;; String[] consumes() default &#123;&#125;; String[] produces() default &#123;&#125;;&#125; @RequestMappingÊòØ‰∏Ä‰∏™Áî®Êù•Â§ÑÁêÜÂú∞ÂùÄÊò†Â∞ÑËØ∑Ê±ÇÁöÑÊ≥®Ëß£Ôºå‰ªéÂÆö‰πâÂèØ‰ª•ÁúãÂá∫ÔºåÂèØ‰ΩúÁî®‰∫éÊñπÊ≥ïÊàñËÄÖÁ±ª‰∏ä„ÄÇ Áî®‰∫éÁ±ª‰∏äÔºåÂ§ßÂ§öÊï∞ÊòØ‰∏∫‰∫ÜËøõË°åÂå∫ÂàÜcontroller Áî®‰∫éÊñπÊ≥ï‰∏äÂàôÊòØÂØπÊñπÊ≥ïËøõË°åÊ≥®Ëß£‰ª•‰∫ßÁîüËÆøÈóÆÁöÑË∑ØÂæÑ„ÄÇ ÂÆÉÂåÖÊã¨‰∫ÜÂá†‰∏™Â±ûÊÄßÔºö value Áî®‰∫éËÆæÁΩÆÊñπÊ≥ïÊàñËÄÖÁ±ªÁöÑÊò†Â∞ÑË∑ØÂæÑÔºåÂèØ‰ª•Áõ¥Êé•ÂÜôË∑ØÂæÑ„ÄÇÊàë‰ª¨ÈÄöÂ∏∏ÈÉΩÊòØÁõ¥Êé•ÂÜôÔºå‰æãÂ¶ÇÔºö@RequestMapping(‚Äú/XXX‚Äù); method Áî®‰∫éÊåáÂÆöËØ∑Ê±ÇÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•ËÆæÁΩÆÂçï‰∏™ÊàñÂ§ö‰∏™ÔºåÂ¶ÇÊûúËØ∑Ê±ÇÊñπÊ≥ï‰∏çÊª°Ë∂≥Êù°‰ª∂Âàô‰ºöËØ∑Ê±ÇÂ§±Ë¥•„ÄÇ params ÊåáÂÆörequest‰∏≠ÂøÖÈ°ªÂåÖÂê´Êüê‰∫õÂèÇÊï∞ÂÄºÊòØÔºåÊâçËÆ©ËØ•ÊñπÊ≥ïÂ§ÑÁêÜ„ÄÇ name Ê≠§Êò†Â∞ÑÊåáÂÆö‰∏Ä‰∏™ÂêçÁß∞ path ‰ªÖÂú®ServletÁéØÂ¢É‰∏≠ÔºöË∑ØÂæÑÊò†Â∞ÑURIÔºà‰æãÂ¶Ç‚Äú/myPath.do‚ÄùÔºâ„ÄÇ‰πüÊîØÊåÅAntÈ£éÊ†ºÁöÑË∑ØÂæÑÊ®°ÂºèÔºà‰æãÂ¶Ç‚Äú/myPath/*.do‚ÄùÔºâ„ÄÇÂú®ÊñπÊ≥ïÁ∫ßÂà´ÔºåÂú®Á±ªÂûãÁ∫ßÂà´Ë°®Á§∫ÁöÑ‰∏ªÊò†Â∞ÑÂÜÖÊîØÊåÅÁõ∏ÂØπË∑ØÂæÑÔºà‰æãÂ¶Ç‚Äúedit.do‚ÄùÔºâ„ÄÇ Ë∑ØÂæÑÊò†Â∞ÑURIÂèØËÉΩÂåÖÂê´Âç†‰ΩçÁ¨¶Ôºà‰æãÂ¶Ç‚Äú/ $ {connect}‚ÄùÔºâ consumes ÊåáÂÆöÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÊèê‰∫§ÂÜÖÂÆπÁ±ªÂûãÔºàContent-TypeÔºâÔºå‰æãÂ¶Çapplication/json, text/html; produces ÊåáÂÆöËøîÂõûÁöÑÂÜÖÂÆπÁ±ªÂûãÔºå‰ªÖÂΩìrequestËØ∑Ê±ÇÂ§¥‰∏≠ÁöÑ(Accept)Á±ªÂûã‰∏≠ÂåÖÂê´ËØ•ÊåáÂÆöÁ±ªÂûãÊâçËøîÂõûÔºõ headers ÊåáÂÆörequest‰∏≠ÂøÖÈ°ªÂåÖÂê´Êüê‰∫õÊåáÂÆöÁöÑheaderÂÄºÔºåÊâçËÉΩËÆ©ËØ•ÊñπÊ≥ïÂ§ÑÁêÜËØ∑Ê±Ç„ÄÇ ÂÖ∂‰ªñÁöÑÂá†‰∏™Ê≤°ÊÄé‰πàÁî®ËøáÔºåÁ°ÆÂÆû‰∏ç‰∫ÜËß£ÔºåÊúâÁü•ÈÅìÁöÑÂ∞è‰ºô‰º¥ÔºåÊ¨¢ËøéÁïôË®Ä„ÄÇ 6„ÄÅ@ResponseBody@ResponseBodyËøô‰∏™Êàë‰∏ÄËà¨ÊòØÁî®Âú®ÂÅöÂºÇÊ≠•ËØ∑Ê±ÇË∞ÉÁî®ÁöÑÊñπÊ≥ï‰∏äÊù•‰ΩøÁî®ÁöÑ„ÄÇÂõ†‰∏∫Âú®‰ΩøÁî®@RequestMappingÂêéÔºåËøîÂõûÂÄºÈÄöÂ∏∏Ëß£Êûê‰∏∫Ë∑≥ËΩ¨Ë∑ØÂæÑ„ÄÇÂä†‰∏ä@responsebodyÂêéÔºåËøîÂõûÁªìÊûúÁõ¥Êé•ÂÜôÂÖ•HTTP response body‰∏≠Ôºå‰∏ç‰ºöË¢´Ëß£Êûê‰∏∫Ë∑≥ËΩ¨Ë∑ØÂæÑ„ÄÇ ÂØπ‰∫éÂºÇÊ≠•ËØ∑Ê±ÇÔºåÊàë‰ª¨‰∏çÂ∏åÊúõËøîÂõûËß£ÊûêËßÜÂõæÔºå‰∫åÊòØÂ∏åÊúõÂìçÂ∫îÁöÑÁªìÊûúÊòØjsonÊï∞ÊçÆÔºåÈÇ£‰πàÂä†‰∏ä@responsebodyÂêéÔºåÂ∞±‰ºöÁõ¥Êé•ËøîÂõûjsonÊï∞ÊçÆ„ÄÇ 7„ÄÅ@AutowiredAutowiredÂ∞±ÊòØËá™Âä®Ë£ÖÈÖçÁöÑÊÑèÊÄùÔºåÂÖ∂‰ΩúÁî®ÊòØ‰∏∫‰∫ÜÊ∂àÈô§‰ª£Á†ÅJava‰ª£Á†ÅÈáåÈù¢ÁöÑgetter/setter‰∏ébeanÂ±ûÊÄß‰∏≠ÁöÑproperty„ÄÇÂΩìÁÑ∂ÔºågetterÁúã‰∏™‰∫∫ÈúÄÊ±ÇÔºåÂ¶ÇÊûúÁßÅÊúâÂ±ûÊÄßÈúÄË¶ÅÂØπÂ§ñÊèê‰æõÁöÑËØùÔºåÂ∞±Â∫îËØ•‰øùÁïô„ÄÇ @AutowiredÈªòËÆ§ÊåâÁ±ªÂûãÂåπÈÖçÁöÑÊñπÂºèÔºåÂú®ÂÆπÂô®Êü•ÊâæÂåπÈÖçÁöÑBeanÔºåÂΩìÊúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ÂåπÈÖçÁöÑBeanÊó∂ÔºåSpringÂ∞ÜÂÖ∂Ê≥®ÂÖ•@AutowiredÊ†áÊ≥®ÁöÑÂèòÈáè‰∏≠„ÄÇ ‰ΩÜÊòØÂΩìÊé•Âè£Â≠òÂú®‰∏§‰∏™ÂÆûÁé∞Á±ªÁöÑÊó∂ÂÄôÂøÖÈ°ª‰ΩøÁî®@QualifierÊåáÂÆöÊ≥®ÂÖ•Âì™‰∏™ÂÆûÁé∞Á±ªÔºåÂê¶ÂàôÂèØ‰ª•ÁúÅÁï•ÔºåÂè™ÂÜô@Autowired„ÄÇ 8„ÄÅ@Qualifier@QualifierÁî®‰∫éÊåáÂÆöÊ≥®ÂÖ•BeanÁöÑÂêçÁß∞ÔºåÂ∞±ÊòØ‰∏äÈù¢ËØ¥Âà∞ÁöÑÔºåÂ¶ÇÊûúÂÆπÂô®‰∏≠Êúâ‰∏Ä‰∏™‰ª•‰∏äÂåπÈÖçÁöÑBeanÔºåÂàôÂèØ‰ª•ÈÄöËøá@QualifierÊ≥®Ëß£ÈôêÂÆöBeanÁöÑÂêçÁß∞„ÄÇ 9„ÄÅ@ResourceËøô‰∏™Ê≥®Ëß£‰∏çÊòØSpringÁöÑÔºåÊîæÂú®ËøôÈáåÊòØ‰∏∫‰∫ÜÂíå@AutowiredÂÅö‰∏Ä‰∏™Âå∫Âà´„ÄÇ@ResourceÈªòËÆ§ÊåâÂêçÁß∞Ë£ÖÈÖçÔºåÂΩìÊâæ‰∏çÂà∞‰∏éÂêçÁß∞ÂåπÈÖçÁöÑbeanÊâç‰ºöÊåâÁ±ªÂûãË£ÖÈÖç„ÄÇ 10„ÄÅ@PathVariableÂΩì‰ΩøÁî®@RequestMapping URI template Ê†∑ÂºèÊò†Â∞ÑÊó∂Ôºå Âç≥ someUrl/{paramId}, ËøôÊó∂ÁöÑparamIdÂèØÈÄöËøá @PathvariableÊ≥®Ëß£ÁªëÂÆöÂÆÉ‰º†ËøáÊù•ÁöÑÂÄºÂà∞ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ä„ÄÇ 123456@RequestMapping("/user/&#123;userId&#125;")public ModelAndView userCenter(HttpServletRequest request, HttpServletResponse response, @PathVariable String userId)&#123; //do something &#125; Â¶ÇÊûúÊñπÊ≥ïÂèÇÊï∞ÂêçÁß∞ÂíåÈúÄË¶ÅÁªëÂÆöÁöÑuri template‰∏≠ÂèòÈáèÂêçÁß∞‰∏ç‰∏ÄËá¥ÔºåÈúÄË¶ÅÂú®@PathVariable(‚Äúname‚Äù)ÊåáÂÆöuri template‰∏≠ÁöÑÂêçÁß∞„ÄÇ 11„ÄÅ@RequestParam@RequestParamÊ≥®Ëß£Êúâ‰∏§‰∏™Â±ûÊÄßÔºö value„ÄÅrequiredÔºõ valueÁî®Êù•ÊåáÂÆöË¶Å‰º†ÂÖ•ÂÄºÁöÑidÂêçÁß∞ requiredÁî®Êù•ÊåáÁ§∫ÂèÇÊï∞ÊòØÂê¶ÂøÖÈ°ªÁªëÂÆöÔºõ ‰∏æ‰∏™‰æãÂ≠êÔºö 123456789@RequestMapping("/t_rparam1") public String t_rparam1(@RequestParam Long userId) &#123; //do something &#125; @RequestMapping("/t_rparam2") public String t_rparam2(Long userId) &#123; //do something &#125; t_rparam1 ÂøÖÈ°ªÂ∏¶ÊúâÂèÇÊï∞,‰πüÂ∞±ÊòØËØ¥‰Ω†Áõ¥Êé•ËæìÂÖ•localhost:8080/t_rparam1 ‰ºöÊä•ÈîôÂè™ËÉΩËæìÂÖ•localhost:8080/t_rparam1?userId=? ÊâçËÉΩÊâßË°åÁõ∏Â∫îÁöÑÊñπÊ≥ï t_rparam2 ÂèØÂ∏¶ÂèÇÊï∞‰πüÂèØ‰∏çÂ∏¶ÂèÇÊï∞;‰πüÂ∞±ÊòØËØ¥ËæìÂÖ•localhost:8080/t_rparam2ÂíåËæìÂÖ• localhost:8080/t_rparam2?userId=?ÈÉΩÂèØ‰ª•Ê≠£Â∏∏ËøêË°å ÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•ËÆæÁΩÆ @RequestParam ÈáåÈù¢ÁöÑrequired‰∏∫false(ÈªòËÆ§‰∏∫true ‰ª£Ë°®ÂøÖÈ°ªÂ∏¶ÂèÇÊï∞) ËøôÊ†∑t_rparam1Â∞±Ë∑üt_rparam2ÊòØ‰∏ÄÊ†∑ÁöÑ‰∫Ü„ÄÇ 12„ÄÅ@RequestHeaderÂà©Áî®@RequestHeader Ê≥®Ëß£ÂèØ‰ª•ÊääRequestËØ∑Ê±ÇheaderÈÉ®ÂàÜÁöÑÂÄºÁªëÂÆöÂà∞ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ä„ÄÇ 1234567@RequestMapping("/t_heander") public void getRequestHeaderTest(HttpServletRequest request, HttpServletResponse response, @RequestHeader("Accept-Encoding")String encoding) &#123; //do something &#125; 13„ÄÅ@CookieValue@CookieValueÂ∞±ÊòØÊääRequest header‰∏≠cookieÁöÑÂÄºÁªëÂÆöÂà∞ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ä„ÄÇÊØîÂ¶ÇËØ¥Êàë‰ª¨ÁöÑcookieÂ¶Ç‰∏ãÔºö 1Cookie:JSESSIONID=ka8A5L5t7WTUPXbaLupBieqOdmc0ZpD5MyKvea6oQr7JJSIZzM;userId=001;sysFlag=glmapper Ëé∑ÂèñÂ¶Ç‰∏ãÔºö1234@RequestMapping("/t_cookie") public void getCookieValueTest(@CookieValue("JSESSIONID") String cookie) &#123; //do something &#125; 14„ÄÅ@RequestBody@RequestBodyËøô‰∏™Ê≥®Ëß£Â∏∏Áî®Êù•Â§ÑÁêÜContent-Type‰∏çÊòØapplication/x-www-form-urlencodedÁºñÁ†ÅÁöÑÂÜÖÂÆπÔºåÊØîÂ¶ÇËØ¥Ôºöapplication/json, application/xmlÁ≠âÁ≠âÔºõËøô‰∏™ÂíåResonseBodyÂèØ‰ª•ÂèçËøáÊù•ÁêÜËß£„ÄÇ 15„ÄÅ@ModelAttribute ÊñπÊ≥ï‰∏ä ÈÄöÂ∏∏Áî®Êù•Âú®Â§ÑÁêÜ@RequestMapping‰πãÂâçÔºå‰∏∫ËØ∑Ê±ÇÁªëÂÆöÈúÄË¶Å‰ªéÂêéÂè∞Êü•ËØ¢ÁöÑmodelÔºõ ÂèÇÊï∞‰∏ä Áî®Êù•ÈÄöËøáÂêçÁß∞ÂØπÂ∫îÔºåÊääÁõ∏Â∫îÂêçÁß∞ÁöÑÂÄºÁªëÂÆöÂà∞Ê≥®Ëß£ÁöÑÂèÇÊï∞bean‰∏äÔºõ ÂèÇËÄÉ „ÄäSpringÊäÄÊúØÂÜÖÂπï„Äã https://www.cnblogs.com/FrankLei/p/6579843.html]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JUC¬∑ThreadPoolExecutor Á∫øÁ®ãÊ±†]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-up-juc2%2F</url>
    <content type="text"><![CDATA[ThreadPoolExecutorÁÆóÊòØJUC‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÁ±ª‰πã‰∏Ä‰∫Ü„ÄÇThreadPoolExecutorÔºåÈ°æÂêçÊÄù‰πâÔºåthread-pool-executor,Á°¨ÁøªËØëÂ∞±ÊòØ‚ÄúÁ∫øÁ®ã-Ê±†-ÊâßË°åËÄÖ‚ÄùÔºõjava‰∏≠ÔºåÈÄöËøáThreadPoolExecutorÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊ±†„ÄÇ‰ΩÜÊòØÊàë‰ª¨‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®Á∫øÁ®ãÊ±†ÔºüÂë¢ÔºüÂÆÉËÉΩÂ§üÂ∏¶Êù•‰ªÄ‰πàÊ†∑ÁöÑ‰ºòÂäøÂë¢ÔºüÂÆÉÂèàÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢ÔºüOKÔºåÂ∏¶ÁùÄËøôÂá†‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨Êù•Â≠¶‰π†‰∏Ä‰∏ãJAVA‰∏≠ÁöÑÁ∫øÁ®ãÊ±†ÊäÄÊúØ„ÄÇ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®Á∫øÁ®ãÊ±†ÔºüÂÖ≥‰∫éËøô‰∏™ÈóÆÈ¢òÂÖ∂ÂÆûÊúâÁÇπÈ∏°ËÇãÔºåÊàëËßâÂæóÂÜçÈóÆËøô‰∏™ÈóÆÈ¢ò‰πãÂâçÊõ¥Â∫îËØ•ÈóÆ‰∏∫‰ªÄ‰πàË¶ÅÊúâÁ∫øÁ®ãÊ±†„ÄÇÈÇ£‰∏∫‰ªÄ‰πàÂë¢? this is a ‰æãÂ≠êÔºö Âø´ÈÄíË°å‰∏öÊúÄËøë‰∏§Âπ¥ÂèëÂ±ïÁöÑÁÅ∞Â∏∏ÁÅ´ÁÉ≠ÔºåÂê¨ËØ¥Â∑•ËµÑ‰πüÈùûÂ∏∏ÁöÑÈ´òÔºåÊêûÂæóÊàë‰∏ÄÂ§©Â§©ÁöÑÈÉΩÊ≤°ÊúâÂøÉÊÄùÂéªÂ•ΩÂ•ΩÂÜô‰ª£Á†Å‰∫Ü... ‰πãÂâçÁöÑÂ∞èÂø´ÈÄíÂÖ¨Âè∏ÈÉΩÊòØÊ≤°ÊúâÂõ∫ÂÆöÁöÑÂø´ÈÄíÂëòÁöÑÔºåÂ∞±ÊòØËØ¥ÔºåÊØèÊ¨°ÂéªÈÄÅ‰∏Ä‰ª∂Âø´ÈÄíÔºåÁ´ôÁÇπË¥üË¥£‰∫∫Â∞±ÈúÄË¶ÅÂéªÊâæ‰∏Ä‰∏™‰∫∫Êù•Â∏ÆÂøôÈÄÅÔºåÈÄÅÂÆå‰πãÂêéÂ∞±Ê≤°ÊúâÁÑ∂Âêé‰∫Ü(ÂΩìÁÑ∂ÔºåÈí±ËøòÊòØË¶ÅÁªôÁöÑ)„ÄÇ ‰ΩÜÊòØÂêéÊù•ÈöèÁùÄË¥ßË∂äÊù•Ë∂äÂ§öÔºåÊâæ‰∫∫ÁªôÈí±ÊàêÊú¨Â§™Â§ßÔºåËÄå‰∏îÂÜúÂøôÊó∂ËøòÈúÄË¶ÅËä±ÂæàÈïøÊó∂Èó¥ÂéªÊâæ‰∫∫ÔºåÊâÄ‰ª•Â∞±ÈõáÁî®‰∫Ü5‰∏™‰∫∫ÔºåÁ≠æ‰∫ÜÂêàÂêåÔºåÈïøÊúü‰∏∫Á´ôÁÇπÈÖçÈÄÅ„ÄÇ ‰ª•ÂâçÈÉΩÊòØÈöèÊó∂Áî®ÈöèÊó∂ÊâæÔºåÁé∞Âú®‰∏çÊòØÔºåÁé∞Âú®ÊòØÊàêÁ´ã‰∫Ü‰∏Ä‰∏™Áâ©ÊµÅÂÖ¨Âè∏ÔºåÂºÄ‰∫Ü‰∏Ä‰∏™ÈÖçÈÄÅÈÉ®ÔºåÈÖçÈÄÅÈÉ®Èó®ËßÑÂÆöÊ≠£ÂºèÈÖçÈÄÅÂëòÊúÄÂ§öÂè™ËÉΩÊúâ‰∫î‰∏™‰∫∫„ÄÇ ‰πãÂâçÈÖçÈÄÅÁöÑÁº∫ÁÇπÊòØ‰ªÄ‰πàÔºö ÊØèÊ¨°ÊúâË¥ßÔºåÊàëÈÉΩ‰ºöÂéª‰∏¥Êó∂Êâæ‰∏Ä‰∏™‰∫∫ÔºåÁÑ∂ÂêéÁ≠æËÆ¢‰∏¥Êó∂ÂêàÂêåÔºåÈÄÅÂÆå‰πãÂêéËß£Èô§ÂêàÂêå„ÄÇÂæàÈ∫ªÁÉ¶„ÄÇËøô‰πüÊòØ‰∏çÁî®Á∫øÁ®ãÊ±†ÁöÑÁº∫ÁÇπÔºåÂ∞±ÊòØ‰ªªÂä°Êù•‰∫ÜÔºåÊàë‰ª¨ÈúÄË¶ÅÈ¢ëÁπÅÁöÑÂéªÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÔºåÁî®ÂÆå‰πãÂêéËøòÈúÄË¶ÅÈáäÊîæÁ∫øÁ®ãËµÑÊ∫êÔºåÂØπ‰∫éÁ≥ªÁªüÁöÑÊ∂àËÄóÊòØÂæàÂ§ßÁöÑ„ÄÇ Âõ†‰∏∫ÈÖçÈÄÅÁöÑË¥ßËΩ¶Âè™ÊúâÈÇ£‰πàÂá†‰∏™ÔºåÂ¶ÇÊûú‰∏¥Êó∂Á≠æËÆ¢ÁöÑ‰∫∫Â§ö‰∫ÜÔºåËΩ¶Â≠ê‰∏çÂ§üÁî®ÔºåÂÖ∂‰ªñ‰∫∫Âè™ËÉΩÁ≠âÁùÄËΩ¶Â≠êÈÄÅÂÆå‰πãÂêéÊâçËÉΩÁî®„ÄÇ ÊàêÁ´ãÈÖçÈÄÅÈÉ®‰πãÂêéËß£ÂÜ≥ÁöÑÈóÆÈ¢ò ÊàêÁ´ãÈÖçÈÄÅÈÉ®‰πãÂêéÂë¢ÔºåÂõ†‰∏∫Á≠æËÆ¢ÁöÑÊòØÂä≥Âä°ÂêàÂêåÔºåÊàë‰ª¨ÂèØ‰ª•ÈáçÂ§çÁöÑËÆ©ÈÖçÈÄÅÂëòÈÖçÈÄÅ‰∏çÂêåÁöÑË¥ßÁâ©„ÄÇËææÂà∞Á∫øÁ®ãËµÑÊ∫êÁöÑÂ§çÁî®„ÄÇ Âõ†‰∏∫ÈôêÂÆö‰∫ÜÊúÄÂ§öÊãõËÅòÁöÑ‰∫∫Êï∞ÔºåÂèØ‰ª•ÂæàÂ•ΩÁöÑÈÅøÂÖçÊãõËøáÂ§öÊó†Áî®ÁöÑ‰∫∫„ÄÇ OKÔºåÊàë‰ª¨‰ª•‰∏äËø∞‰æãÂ≠êÊù•ÂØπÂ∫îÁêÜËß£Á∫øÁ®ãÊ±†ÁöÑÂü∫Êú¨ÂéüÁêÜ ÂÖàÊù•Áúã‰∏ãÔºåJAVAÂØπThreadPoolExecutorÁöÑÁ±ªÁî≥ÊòéÔºö 1public class ThreadPoolExecutor extends AbstractExecutorService Âú®„ÄêÂàùËØÜ„Äë-JUC¬∑ExecutorÊ°ÜÊû∂‰∏≠ÁªôÂá∫‰∫ÜExecutorÁöÑÁªßÊâø‰ΩìÁ≥ª„ÄÇThreadPoolExecutorÂ∞±ÊòØÂÖ∑Â§áÁ∫øÁ®ãÊ±†ÂäüËÉΩÁöÑÈõÜÊàêËÄÖ„ÄÇ ÊûÑÈÄ†ÊñπÊ≥ï1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//ÊûÑÈÄ†ÊñπÊ≥ï‰∏Äpublic ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) &#123; this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, Executors.defaultThreadFactory(), defaultHandler); &#125; //ÊûÑÈÄ†ÊñπÊ≥ï‰∫å public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory) &#123; this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, threadFactory, defaultHandler);&#125;//ÊûÑÈÄ†ÊñπÊ≥ï‰∏âpublic ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, RejectedExecutionHandler handler) &#123; this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, Executors.defaultThreadFactory(), handler);&#125;//ÊûÑÈÄ†ÊñπÊ≥ïÂõõpublic ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÊûÑÈÄ†ÊñπÊ≥ïÔºà‰∏Ä„ÄÅ‰∫å„ÄÅ‰∏âÔºâÈÉΩÊòØÈÄöËøáË∞ÉÁî®ÔºàÂõõÔºâÊù•ÂÅöÂÖ∑‰ΩìÂ±ûÊÄßÂàùÂßãÂåñÁöÑ„ÄÇÈÇ£‰πàÊàë‰ª¨Áõ¥Êé•Êù•ÁúãÊûÑÈÄ†ÊñπÊ≥ïÂõõÔºõÂú®ÊûÑÈÄ†ÊñπÊ≥ïÂõõ‰∏≠ÊÄªÂÖ±ÈúÄË¶Å7‰∏™ÂèÇÊï∞ÔºåÂÖàÊù•Áúã‰∏ãÊØè‰∏™ÂèÇÊï∞ÁöÑÂÖ∑‰ΩìÂê´‰πâÔºö corePoolSize Ê†∏ÂøÉÁ∫øÁ®ãÊï∞Â§ßÂ∞è„ÄÇÈÇ£‰πà‰ªÄ‰πàÊòØÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Âë¢ÔºåÊàë‰ª¨ÂèØ‰ª•Á±ªÊØî‰∫é‰∏äÈù¢‰æãÂ≠ê‰∏≠ÁöÑÈÖçÈÄÅÈÉ®‰∏≠Á≠æËÆ¢Âä≥Âä®ÂêàÂêåÁöÑ‰∫∫ÁöÑ‰∏™Êï∞„ÄÇ maximumPoolSize ÊúÄÂ§ßÁ∫øÁ®ãÊï∞„ÄÇÂä†ÂÖ•ËØ¥Áé∞Âú®ÊòØÂèåÂçÅ‰∏ÄÊúüÈó¥ÔºåÂø´ÈÄíÂºÇÂ∏∏ÁöÑÂ§öÔºåÈÖçÈÄÅÈÉ®ÁöÑ5‰∏™‰∫∫ÂÆåÂÖ®Âøô‰∏çËøáÊù•ÔºåËÄå‰∏î‰ªìÂ∫ì‰πüÊª°‰∫ÜÔºåÊÄé‰πàÂäûÂë¢ÔºüËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÂÜçÊãõËÅò‰∏Ä‰∫õ‰∏¥Êó∂ÈÖçÈÄÅÂëòÔºåÂÅáËÆæmaximumPoolSize‰∏∫10ÔºåÈÇ£‰πà‰πüÂ∞±ÊòØËØ¥Ôºå‰∏¥Êó∂ÊãõËÅòÂèØ‰ª•Êãõ5‰∏™‰∫∫ÔºåÈÖçÈÄÅÈÉ®Á≠æËÆ¢Ê≠£ÂºèÂä≥Âä®ÂêàÂêåÁöÑ‰∫∫ÂíåÁ≠æËÆ¢‰∏¥Êó∂ÂêàÂêåÁöÑ‰∫∫Âä†‰∏ÄÂùó‰∏çËÉΩË∂ÖËøáÈÖçÈÄÅÈÉ®ËßÑÂÆöÁöÑÊúÄÂ§ß‰∫∫Êï∞Ôºà10‰∫∫Ôºâ„ÄÇÊâÄ‰ª•ËØ¥ÔºåmaximumPoolSizeÂ∞±ÊòØÁ∫øÁ®ãÊ±†ËÉΩÂ§üÂÖÅËÆ∏ÁöÑÂ≠òÂú®ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÁöÑÊï∞Èáè„ÄÇ keepAliveTime Â≠òÊ¥ªÊó∂Èó¥„ÄÇ‰∏∫‰ªÄ‰πàË¶ÅÊúâËøô‰∏™Âë¢ÔºüÊÉ≥‰∏Ä‰∏ãÔºåÂèåÂçÅ‰∏ÄËøáÂéª‰∫ÜÔºåË¥ßÁâ©Â∑≤ÁªèÈÖçÈÄÅÁöÑÂ∑Æ‰∏çÂ§ö‰∫Ü„ÄÇ‰∏¥Êó∂ÂêàÂêåÂÜôÁöÑÊòØÂ¶ÇÊûú‰∏¥Êó∂ÈÖçÈÄÅÂëò2Â§©Ê≤°ÊúâÈÖçÈÄÅ‰∫ÜÔºåÈÇ£ÈÖçÈÄÅÈÉ®Â∞±ÊúâÊùÉÂà©ÁªàÊ≠¢‰∏¥Êó∂ÂêàÂêåÔºåÁé∞Âú®Â∑≤ÁªèËææÂà∞2Â§©Ëøô‰∏™ÁÇπ‰∫ÜÔºåÈúÄË¶ÅÂºÄÈô§Ëøô‰∫õ‰∏¥Êó∂ÈÖçÈÄÅ‰∏ìÂëò‰∫Ü„ÄÇÂØπ‰∫éÁ∫øÁ®ãÊ±†Êù•ËØ¥ÔºåkeepAliveTimeÂ∞±ÊòØÁî®Êù•Ë°®Á§∫ÔºåÂΩìÈô§Ê†∏ÂøÉÁ∫øÁ®ãÊ±†‰πãÂ§ñÁöÑÁ∫øÁ®ãË∂ÖËøákeepAliveTimeÊó∂Èó¥‰πãÂêéÔºåÂ∞±ÈúÄË¶ÅË¢´Á≥ªÁªüÂõûÊî∂‰∫Ü„ÄÇ unit keepAliveTimeÁöÑÊó∂Èó¥Âçï‰Ωç„ÄÇ workQueue Â∑•‰ΩúÈòüÂàó„ÄÇËøô‰∏™Â∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™‰ªìÂ∫ìÔºåÁé∞Âú®ÈÖçÈÄÅÈÉ®5‰∏™‰∫∫ÈÉΩÂú®ÈÖçÈÄÅÔºå‰ΩÜÊòØËøò‰∏çÊñ≠ÁöÑÊúâÊñ∞ÁöÑÂø´ÈÄíËææÂà∞ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶Å‰∏Ä‰∏™‰ªìÂ∫ìÊù•Â≠òÊîæËøô‰∫õÂø´ÈÄí„ÄÇÂØπ‰∫éÁ∫øÁ®ãÊ±†Êù•ËØ¥ÔºåÂΩìÊ†∏ÂøÉÁ∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑ‰ªªÂä°Â§ÑÁêÜÔºåÂπ∂‰∏îËøòÊúâ‰ªªÂä°ËøõÊù•ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂ∞Ü‰ªªÂä°Ê∑ªÂä†Âà∞Â∑•‰ΩúÈòüÂàó‰∏≠Âéª„ÄÇ threadFactory Á∫øÁ®ãÂ∑•ÂéÇ„ÄÇÂ∞±ÊòØÁî®Êù•ÂàõÂª∫Á∫øÁ®ãÁöÑ„ÄÇÂèØ‰ª•Á±ªÊØîÊàêÊãõËÅòÁªÑÔºå‰ºöÁªôÊØè‰∏™Á∫øÁ®ãÂàÜÈÖçÂêçÂ≠óÊàñËÄÖÁºñÂè∑ËøôÊ†∑„ÄÇ handler RejectedExecutionHandler Áî®Êù•ÊèèËø∞ÊãíÁªùÁ≠ñÁï•ÁöÑ„ÄÇÂÅáËÆæÁé∞Âú®ÊàëÁöÑ‰ªìÂ∫ì‰πüÊª°Ë∂≥ÔºåÂπ∂‰∏îÈÖçÈÄÅÈÉ®Â∑≤ÁªèËææÂà∞10‰∏™‰∫∫‰∫Ü„ÄÇÊÄé‰πàÂäûÂë¢ÔºåÈÇ£‰πàÂè™ËÉΩÈááÁî®‰∏Ä‰∫õÁ≠ñÁï•Êù•ÊãíÁªù‰ªªÂä°‰∫Ü„ÄÇ Á∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅ 1234567891011// runState is stored in the high-order bits//RUNNINGÔºõËØ•Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÊ±†Êé•Êî∂Êñ∞‰ªªÂä°ÔºåÂπ∂‰∏îÂ§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°private static final int RUNNING = -1 &lt;&lt; COUNT_BITS;//SHUTDOWNÔºõËØ•Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÊ±†‰∏çÊé•Êî∂Êñ∞‰ªªÂä°Ôºå‰ΩÜ‰ºöÂ§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°Ôºõprivate static final int SHUTDOWN = 0 &lt;&lt; COUNT_BITS;//STOPÔºõ‰∏çÊé•Êî∂Êñ∞‰ªªÂä°Ôºå‰πü‰∏çÂ§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°ÔºåÂπ∂‰∏î‰ºö‰∏≠Êñ≠Ê≠£Âú®ËøêË°åÁöÑ‰ªªÂä°Ôºõprivate static final int STOP = 1 &lt;&lt; COUNT_BITS;//ÊâÄÊúâÁöÑ‰ªªÂä°Â∑≤ÁªàÊ≠¢ÔºåctlËÆ∞ÂΩïÁöÑ‚Äù‰ªªÂä°Êï∞Èáè‚Äù‰∏∫0ÔºåÁ∫øÁ®ãÊ±†‰ºöÂèò‰∏∫TIDYINGÁä∂ÊÄÅprivate static final int TIDYING = 2 &lt;&lt; COUNT_BITS;//Á∫øÁ®ãÊ±†ÂΩªÂ∫ïÁªàÊ≠¢ÔºåÂ∞±ÂèòÊàêTERMINATEDÁä∂ÊÄÅ„ÄÇ private static final int TERMINATED = 3 &lt;&lt; COUNT_BITS; ‰∏ãÈù¢ÊòØÂú®ÁΩë‰∏äÂèëÁé∞ÁöÑ‰∏Ä‰ΩçÂ§ßÁâõÁöÑÂõæÔºõÊÑüËßâÂèØ‰ª•ËæÉ‰∏∫Áõ¥ËßÇÁöÑÊèèËø∞Áä∂ÊÄÅÁöÑÂèòÊõ¥ Â∑•‰ΩúÂéüÁêÜ ÊúâÂá†‰∏™ÁÇπÈúÄË¶ÅÊ≥®ÊÑè„ÄÇ 1„ÄÅÂ¶Ç‰ΩïÊèê‰∫§‰∏Ä‰∏™‰ªªÂä°Âà∞Á∫øÁ®ãÊ±†Ôºü12345678910111213141516171819202122public void execute(Runnable command) &#123; //‰ªªÂä°‰∏∫null,Áõ¥Êé•ÊäõÂá∫Á©∫ÊåáÈíàÂºÇÂ∏∏ if (command == null) throw new NullPointerException(); int c = ctl.get(); //Â¶ÇÊûúÁ∫øÁ®ãÊï∞Â§ß‰∫éÁ≠â‰∫éÂü∫Êú¨Á∫øÁ®ãÊï∞ÔºåÂ∞Ü‰ªªÂä°Âä†ÂÖ•ÈòüÂàó if (workerCountOf(c) &lt; corePoolSize) &#123; if (addWorker(command, true)) return; c = ctl.get(); &#125; if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; int recheck = ctl.get(); if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); &#125; else if (!addWorker(command, false)) reject(command);&#125; Â¶ÇÊûúÂ∞ë‰∫écorePoolSizeÁ∫øÁ®ãÊ≠£Âú®ËøêË°åÔºåËØ∑Â∞ùËØï‰ΩøÁî®ÁªôÂÆöÂëΩ‰ª§ÂêØÂä®‰∏Ä‰∏™Êñ∞Á∫øÁ®ã‰Ωú‰∏∫ÂÖ∂Á¨¨‰∏Ä‰∏™‰ªªÂä°„ÄÇ ÂØπaddWorkerÁöÑË∞ÉÁî®‰ºöËá™Âä®Ê£ÄÊü•runStateÂíåworkerCountÔºå‰ªéËÄåÈò≤Ê≠¢ÈîôËØØÊä•Ë≠¶ÔºåÂú®‰∏çÂ∫îËØ•ÁöÑÊó∂ÂÄôÈÄöËøáËøîÂõûfalseÊù•Ê∑ªÂä†Á∫øÁ®ã„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™‰ªªÂä°ËÉΩÂ§üÊàêÂäüÊéíÈòüÔºåÈÇ£‰πàÊàë‰ª¨‰ªçÁÑ∂ÈúÄË¶ÅÂÜçÊ¨°Ê£ÄÊü•ÊòØÂê¶Â∫îËØ•Ê∑ªÂä†‰∏Ä‰∏™Á∫øÁ®ãÔºàÂõ†‰∏∫Áé∞ÊúâÁöÑÁ∫øÁ®ãËá™‰∏äÊ¨°Ê£ÄÊü•‰ª•Êù•Â∑≤ÁªèÊ≠ªÊéâÔºâÊàñËÄÖËá™‰ªéËøõÂÖ•Ëøô‰∏™ÊñπÊ≥ï‰ª•Êù•ÔºåÊ±†ÂÖ≥Èó≠‰∫Ü„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞Ê£ÄÊü•Áä∂ÊÄÅÔºåÂ¶ÇÊûúÂΩìÂâçcommandÂ∑≤Áªèstop‰∫ÜÔºåÈÇ£‰πàÂ∞±ÈÄÄÂá∫Â∑•‰ΩúÈòüÂàóÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±ÂºÄÂßã‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ã„ÄÇ Â¶ÇÊûúÈòüÂàóÊª°‰∫ÜÔºå‰ºöÊÉ≥Â∞ùËØïÂéªÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÂéªÊâßË°åÔºåÂ¶ÇÊûúÂàõÂª∫‰∏ç‰∫ÜÔºåÈÇ£Â∞±ÊâßË°åÊãíÁªùÁ≠ñÁï•„ÄÇ 2„ÄÅÂ¶Ç‰ΩïÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂéªÂ§ÑÁêÜ‰ªªÂä°ÔºüÈÄöËøáÂÆûÁé∞Ëøô‰∏™Êé•Âè£ÂéªÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ã 123public interface ThreadFactory &#123; Thread newThread(Runnable r);&#125; 3„ÄÅÂ¶Ç‰ΩïÂ∞Ü‰ªªÂä°Ê∑ªÂä†Âà∞ÈòüÂàóÔºüÈÄöËøáaddWorkerÊñπÊ≥ïÊù•Ê∑ªÂä†ÔºåÂÖ∂ÂÆûÂú®excute‰∏≠Âè™ÊòØ‰Ωú‰∏∫‰∏Ä‰∏™Êèê‰∫§‰ªªÂä°ÁöÑÂÖ•Âè£ÔºåÂÆûÈôÖÁöÑÂ§ÑÁêÜÈÄªËæëÈÉΩÊòØÂú®addWorkerËøô‰∏™ÊñπÊ≥ïÈáåÊù•ÂÆåÊàêÁöÑ„ÄÇaddWorkerÊúâ‰∏§‰∏™ÂèÇÊï∞Ôºö firstTask ÂΩìÂâç‰ªªÂä° core Áî®Êù•Ê†áÊ≥®ÂΩìÂâçÈúÄË¶ÅÂàõÂª∫ÁöÑÁ∫øÁ®ãÊòØÂê¶ÊòØÊ†∏ÂøÉÁ∫øÁ®ãÔºåÂ¶ÇÊûúcore‰∏∫trueÔºåÂàôË°®ÊòéÂàõÂª∫ÁöÑÊòØÊ†∏ÂøÉÁ∫øÁ®ãÔºå‰πüÂ∞±ÊòØËØ¥ÂΩìÂâçËøòÊ≤°ÊúâËææÂà∞ÊúÄÂ§ßÊ†∏ÂøÉÁ∫øÁ®ãÊï∞„ÄÇ ÂÖàÊù•Áúã‰∏ãËøô‰∏™ÊñπÊ≥ïÁöÑÂâçÂçäÈÉ®ÂàÜÔºö1234567891011121314151617181920212223242526272829private boolean addWorker(Runnable firstTask, boolean core) &#123; retry: //Ëá™ÊóãÊñπÂºè for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅ int c = ctl.get(); int rs = runStateOf(c); //Â¶ÇÊûúÁä∂ÊÄÅÊòØSTOPÔºåTIDYING,TERMINATEDÁä∂ÊÄÅÁöÑËØùÔºåÂàô‰ºöËøîÂõûfalse //Â¶ÇÊûúÁä∂ÊÄÅÊòØSHUTDOWNÔºå‰ΩÜÊòØfirstTask‰∏ç‰∏∫Á©∫ÊàñËÄÖworkQueue‰∏∫Á©∫ÁöÑËØùÔºåÈÇ£‰πàÁõ¥Êé•ËøîÂõûfalse„ÄÇ if (rs &gt;= SHUTDOWN &amp;&amp; ! (rs == SHUTDOWN &amp;&amp; firstTask == null &amp;&amp; ! workQueue.isEmpty())) return false; //ÈÄöËøáËá™ÊóãÁöÑÊñπÂºèÔºåÂà§Êñ≠Ë¶ÅÊ∑ªÂä†ÁöÑworkerÊòØÂê¶‰∏∫corePoolËåÉÁï¥‰πãÂÜÖÁöÑ for (;;) &#123; int wc = workerCountOf(c); if (wc &gt;= CAPACITY || wc &gt;= (core ? corePoolSize : maximumPoolSize)) return false; if (compareAndIncrementWorkerCount(c)) break retry; c = ctl.get(); // Re-read ctl if (runStateOf(c) != rs) continue retry; // else CAS failed due to workerCount change; retry inner loop &#125; &#125; //Â¶ÇÊûúË∂ÖËøáCAPACITYÈôêÂà∂‰∫ÜÂàôÁõ¥Êé•ËøîÂõûfalse1wc &gt;= CAPACITY //Âà§Êñ≠ÂΩìÂâçÁöÑworkerCountÊòØÂê¶Â§ß‰∫écorePoolsizeÔºåÂê¶ÂàôÂàôÂà§Êñ≠ÊòØÂê¶Â§ß‰∫émaximumPoolSize//ÂÖ∑‰ΩìÁöÑÊØîËæÉÂèñÂÜ≥‰∫éÂÖ•ÂèÇcoreÊòØtrueËøòÊòØfalse„ÄÇ1wc &gt;= (core ? corePoolSize : maximumPoolSize) Â¶ÇÊûú‰∏äÈù¢‰∏§‰∏™Êúâ‰∏Ä‰∏™Êª°Ë∂≥‰∫ÜÔºåÂàôÁõ¥Êé•ËøîÂõûfalse„ÄÇ ‰∏ãÈù¢ÊòØÂà§Êñ≠WorkerCountÈÄöËøáCASÊìç‰ΩúÂ¢ûÂä†1ÊòØÂê¶ÊàêÂäüÔºåÊàêÂäüÁöÑËØùÂ∞±Âà∞Ê≠§ÁªìÊùü12if (compareAndIncrementWorkerCount(c)) break retry; Â¶ÇÊûú‰∏çÊàêÂäüÔºåÂàôÂÜçÊ¨°Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊ±†ÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÊûúÁé∞Âú®Ëé∑ÂèñÂà∞ÁöÑÁä∂ÊÄÅ‰∏éËøõÂÖ•Ëá™ÊóãÁöÑÁä∂ÊÄÅ‰∏ç‰∏ÄËá¥ÁöÑËØùÔºåÈÇ£‰πàÂàôÈÄöËøácontinue retryÈáçÊñ∞ËøõË°åÁä∂ÊÄÅÁöÑÂà§Êñ≠„ÄÇ123c = ctl.get(); // Re-read ctlif (runStateOf(c) != rs) continue retry; ÂÜçÊù•Áúã‰∏ãËøô‰∏™ÊñπÊ≥ïÁöÑÂêéÈù¢Âçä‰∏™ÈÉ®ÂàÜÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849boolean workerStarted = false;boolean workerAdded = false;Worker w = null;try &#123; final ReentrantLock mainLock = this.mainLock; //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑWorkerÂØπË±° w = new Worker(firstTask); final Thread t = w.thread; // if (t != null) &#123; //Âä†ÈîÅ mainLock.lock(); try &#123; // Âú®ÈîÅÂÆöÁöÑÊÉÖÂÜµ‰∏ãÈáçÊñ∞Ê£ÄÊü•„ÄÇ // Âú®‰∏Ä‰∏ãÊÉÖÂÜµÈÄÄÂá∫ÔºöThreadFactory ÂàõÂª∫Â§±Ë¥•ÊàñËÄÖÂú®Ëé∑ÂèñÈîÅ‰πãÂâçshut down‰∫Ü int c = ctl.get(); int rs = runStateOf(c); //Áä∂ÊÄÅÊ†°È™å if (rs &lt; SHUTDOWN || (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123; if (t.isAlive()) // È¢ÑÂÖàÊ£ÄÊü•tÊòØÂèØ‰ª•ÂêØÂä®ÁöÑ throw new IllegalThreadStateException(); //Ê∑ªÂä†Ëá≥workers‰∏≠ workers.add(w); int s = workers.size(); //Â¶ÇÊûúË∂ÖËøá‰∫ÜÂéÜÂè≤ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÔºåÂàôÂ∞ÜÂΩìÂâçÊ±†Êï∞ÈáèËÆæÁΩÆ‰∏∫ÂéÜÂè≤ÊúÄÂ§ßÁ∫øÁ®ãËÆ∞ÂΩïÊï∞ if (s &gt; largestPoolSize) largestPoolSize = s; //Ê†áËØÜÊ∑ªÂä†Â∑•‰ΩúÁ∫øÁ®ãÊàêÂäü workerAdded = true; &#125; &#125; finally &#123; //Ëß£ÈîÅ mainLock.unlock(); &#125; //Â¶ÇÊûúÊ∑ªÂä†ÊàêÂäüÂàôÂêØÂä®ÂΩìÂâçÂ∑•‰ΩúÁ∫øÁ®ã if (workerAdded) &#123; t.start(); //Âπ∂Â∞ÜÂΩìÂâçÁ∫øÁ®ãÁä∂ÊÄÅËÆæÁΩÆ‰∏∫Â∑≤ÂêØÂä® workerStarted = true; &#125; &#125;&#125; finally &#123;//Ê∑ªÂä†Â§±Ë¥• if (! workerStarted) addWorkerFailed(w);&#125;return workerStarted;&#125; ÊãíÁªùÁ≠ñÁï•ÊúâÂì™‰∫õÔºü 1„ÄÅAbortPolicyÔºöÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ÔºåÈªòËÆ§Á≠ñÁï•Ôºõ 2„ÄÅCallerRunsPolicyÔºö‰ΩøÁî®Ë∞ÉÁî®ËÄÖËá™Â∑±ÁöÑÂΩìÂâçÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºõ 3„ÄÅDiscardOldestPolicyÔºö‰∏¢ÂºÉÈòªÂ°ûÈòüÂàó‰∏≠Èù†ÊúÄÂâçÁöÑ‰ªªÂä°ÔºåÂπ∂ÊâßË°åÂΩìÂâç‰ªªÂä°Ôºõ 4„ÄÅDiscardPolicyÔºöÁõ¥Êé•‰∏¢ÂºÉ‰ªªÂä°Ôºõ ÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÊãíÁªùÁ≠ñÁï•„ÄÇ Â∏∏Áî®Â∑•‰ΩúÈòüÂàóÁ±ªÂûã1„ÄÅArrayBlockingQueue Âü∫‰∫éÊï∞ÁªÑÁöÑÈòªÂ°ûÈòüÂàóÔºåÈïøÂ∫¶ÊúâÈôê 2„ÄÅLinkedBlockingQuene Âü∫‰∫éÈìæË°®ÁöÑÈòªÂ°ûÈòüÂàóÔºåÈïøÂ∫¶Êó†ÈôêÔºå‰ΩøÁî®Ëøô‰∏™ÂèØËÉΩ‰ºöÂØºËá¥Êàë‰ª¨ÁöÑÊãíÁªùÁ≠ñÁï•Â§±Êïà„ÄÇÂõ†‰∏∫ÂèØ‰ª•Êó†ÈôêÁöÑÂàõÂª∫Êñ∞ÁöÑÂ∑•‰ΩúÁ∫øÁ®ã„ÄÇ 3„ÄÅPriorityBlockingQueue ÂÖ∑Êúâ‰ºòÂÖàÁ∫ßÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàóÔºõ 3„ÄÅSynchronousQuene SynchronousQueneÊòØ‰∏Ä‰∏™ÊòØ‰∏Ä‰∏™‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑBlockingQueueÔºõÊØè‰∏Ä‰∏™putÊìç‰ΩúÂøÖÈ°ªË¶ÅÁ≠âÂæÖ‰∏Ä‰∏™takeÊìç‰ΩúÔºåÂê¶Âàô‰∏çËÉΩÁªßÁª≠Ê∑ªÂä†ÂÖÉÁ¥†„ÄÇÊâÄ‰ª•Ëøô‰∏™ÊØîËæÉÁâπÊÆäÔºåÂÆÉ‰∏çÂ≠òÊàë‰ª¨ÁöÑ‰ªªÂä°Ôºå‰πüÂ∞±ËØ¥ËØ¥ÂÆÉÁöÑÊØè‰∏™putÊìç‰ΩúÂøÖÈ°ªÁ≠âÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®takeÊìç‰ΩúÔºåÂê¶ÂàôputÊìç‰Ωú‰∏ÄÁõ¥Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ WorkerËøô‰∏™ÊòØThreadPoolExecutorÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªÔºåË°®Á§∫‰∏Ä‰∏™Â∑•‰ΩúÁ∫øÁ®ã„ÄÇÈáçË¶ÅÁöÑÊòØËøô‰∏™ÂÜÖÈÉ®Á±ªÂÆûÁé∞‰∫ÜAbstractQueuedSynchronizerÔºàAQS:ÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®ÔºâÊäΩË±°Á±ª„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475private final class Worker extends AbstractQueuedSynchronizer implements Runnable&#123; /** * This class will never be serialized, but we provide a * serialVersionUID to suppress a javac warning. */ private static final long serialVersionUID = 6138294804551838833L; /** ÂΩìÂâçworkÊåÅÊúâÁöÑÁ∫øÁ®ã */ final Thread thread; /** ËøêË°åÁöÑÂàùÂßã‰ªªÂä°„ÄÇ ÂèØËÉΩ‰∏∫Á©∫„ÄÇ*/ Runnable firstTask; /** ÊØè‰∏™Á∫øÁ®ãÂÆåÊàê‰ªªÂä°ÁöÑËÆ°Êï∞Âô® */ volatile long completedTasks; /** * ÊûÑÈÄ†ÂáΩÊï∞ */ Worker(Runnable firstTask) &#123; // Á¶ÅÊ≠¢‰∏≠Êñ≠ÔºåÁõ¥Âà∞runWorker setState(-1); //ÊÉ≥Êèê‰∫§ÁöÑ‰ªªÂä°‰∫§ÁªôÂΩìÂâçÂ∑•‰ΩúÁ∫øÁ®ã this.firstTask = firstTask; //ÈÄöËøáÁ∫øÁ®ãÂ∑•ÂéÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ã this.thread = getThreadFactory().newThread(this); &#125; /** Â∞ÜrunÊñπÊ≥ïÁöÑÊâßË°åÂßîÊâòÁªôÂ§ñÈÉ®runWorker */ public void run() &#123; runWorker(this); &#125; // ÊòØÂê¶ÈîÅÂÆö // // 0‰ª£Ë°®Ëß£ÈîÅÁä∂ÊÄÅ„ÄÇ // 1‰ª£Ë°®ÈîÅÂÆöÁä∂ÊÄÅ„ÄÇ protected boolean isHeldExclusively() &#123; return getState() != 0; &#125; //Â∞ùËØïËé∑ÂèñÈîÅÔºàÈáçÂÜôAQSÁöÑÊñπÊ≥ïÔºâ protected boolean tryAcquire(int unused) &#123; if (compareAndSetState(0, 1)) &#123; setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false; &#125; //Â∞ùËØïÈáäÊîæÈîÅÔºàÈáçÂÜôAQSÁöÑÊñπÊ≥ïÔºâ protected boolean tryRelease(int unused) &#123; setExclusiveOwnerThread(null); setState(0); return true; &#125; //Âä†ÈîÅ public void lock() &#123; acquire(1); &#125; //Â∞ùËØïÂä†ÈîÅ public boolean tryLock() &#123; return tryAcquire(1); &#125; //Ëß£ÈîÅ public void unlock() &#123; release(1); &#125; //ÊòØÂê¶ÈîÅÂÆö public boolean isLocked() &#123; return isHeldExclusively(); &#125; //Â¶ÇÊûúÂêØÂä®Âàô‰∏≠Êñ≠ void interruptIfStarted() &#123; Thread t; if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) &#123; try &#123; t.interrupt(); &#125; catch (SecurityException ignore) &#123; &#125; &#125; &#125;&#125; runWorkerÊúÄÂêéÊù•Áúã‰∏ãrunWorkerËøô‰∏™ÊñπÊ≥ïÔºàThreadPoolExecutor‰∏≠ÁöÑÊñπÊ≥ïÔºâÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243final void runWorker(Worker w) &#123; Thread wt = Thread.currentThread(); Runnable task = w.firstTask; w.firstTask = null; w.unlock(); // allow interrupts boolean completedAbruptly = true; try &#123; while (task != null || (task = getTask()) != null) &#123; w.lock(); // If pool is stopping, ensure thread is interrupted; // if not, ensure thread is not interrupted. This // requires a recheck in second case to deal with // shutdownNow race while clearing interrupt if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() &amp;&amp; runStateAtLeast(ctl.get(), STOP))) &amp;&amp; !wt.isInterrupted()) wt.interrupt(); try &#123; beforeExecute(wt, task); Throwable thrown = null; try &#123; task.run(); &#125; catch (RuntimeException x) &#123; thrown = x; throw x; &#125; catch (Error x) &#123; thrown = x; throw x; &#125; catch (Throwable x) &#123; thrown = x; throw new Error(x); &#125; finally &#123; afterExecute(task, thrown); &#125; &#125; finally &#123; task = null; w.completedTasks++; w.unlock(); &#125; &#125; completedAbruptly = false; &#125; finally &#123; processWorkerExit(w, completedAbruptly); &#125;&#125; ‰∏ãÈù¢ÊòØÂØπÊ≥®ÈáäÁöÑËπ©ËÑöÁøªËØëÔºåÊ¨¢ËøéÂêêÊßΩÔºå‰ΩÜÊ≥®ÊÑèÂ∞∫Â∫¶ÔºåO(‚à©_‚à©)OÂìàÂìà~ ‰∏ªË¶ÅÂ∑•‰ΩúÂæ™ÁéØËøêË°å„ÄÇÈáçÂ§çÂú∞‰ªéÈòüÂàó‰∏≠Ëé∑Âèñ‰ªªÂä°Âπ∂ÊâßË°åÂÆÉ‰ª¨ÔºåÂêåÊó∂Â§ÑÁêÜ‰∏Ä‰∫õÈóÆÈ¢ò: Êàë‰ª¨ÂèØËÉΩ‰ºö‰ªéÊúÄÂàùÁöÑ‰ªªÂä°ÂºÄÂßãÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÂæóÂà∞Á¨¨‰∏Ä‰∏™‰ªªÂä°„ÄÇÂê¶ÂàôÔºåÂè™Ë¶ÅÊ±†Ê≠£Âú®ËøêË°åÔºåÊàë‰ª¨Â∞±‰ªégetTaskËé∑Âæó‰ªªÂä°„ÄÇ Â¶ÇÊûúÂÆÉËøîÂõûnullÔºåÂàôÁî±‰∫éÊõ¥ÊîπÊ±†Áä∂ÊÄÅÊàñÈÖçÁΩÆÂèÇÊï∞ËÄåÂØºËá¥workerÈÄÄÂá∫„ÄÇÂÖ∂‰ªñÈÄÄÂá∫ÁöÑÁªìÊûúÊòØÂú®Â§ñÈÉ®‰ª£Á†Å‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãcompleteAbruptlyÊàêÁ´ãÔºåËøôÈÄöÂ∏∏‰ºöÂØºËá¥processWorkerExitÊù•Âèñ‰ª£Ëøô‰∏™Á∫øÁ®ã„ÄÇ Âú®ËøêË°å‰ªª‰Ωï‰ªªÂä°‰πãÂâçÔºåËé∑ÂèñÈîÅ‰ª•Èò≤Ê≠¢‰ªªÂä°Ê≠£Âú®ÊâßË°åÊó∂ÂèëÁîüÂÖ∂‰ªñÊ±†‰∏≠Êñ≠ÔºåË∞ÉÁî®clearInterruptsForTaskRunÁ°Æ‰øùÈô§ÈùûÊ±†Ê≠£Âú®ÂÅúÊ≠¢ÔºåÂàôÊ≠§Á∫øÁ®ãÊ≤°ÊúâËÆæÁΩÆÂÖ∂‰∏≠Êñ≠„ÄÇ ÊØè‰∏™‰ªªÂä°ËøêË°å‰πãÂâçÈÉΩ‰ºöË∞ÉÁî®beforeExecuteÔºåËøôÂèØËÉΩ‰ºöÂºïÂèë‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ºöÂØºËá¥Á∫øÁ®ãÊ≠ª‰∫°ÔºàÊñ≠ÂºÄÂæ™ÁéØcompleteAbruptly‰∏∫trueÔºâÔºåËÄå‰∏çÂ§ÑÁêÜ‰ªªÂä°„ÄÇ ÂÅáËÆæbeforeExecuteÊ≠£Â∏∏ÂÆåÊàêÔºåÊàë‰ª¨ËøêË°å‰ªªÂä°ÔºåÊî∂ÈõÜ‰ªª‰ΩïÊäõÂá∫ÁöÑÂºÇÂ∏∏ÂèëÈÄÅÂà∞afterExecute„ÄÇ Êàë‰ª¨ÂàÜÂà´Â§ÑÁêÜRuntimeExceptionÔºåErrorÔºàËøô‰∏§‰∏™ËßÑËåÉ‰øùËØÅÊàë‰ª¨Èô∑Èò±ÔºâÂíå‰ªªÊÑèÁöÑThrowables„ÄÇ Âõ†‰∏∫Êàë‰ª¨‰∏çËÉΩÂú®Runnable.run‰∏≠ÈáçÊñ∞ÊäõÂá∫ThrowableÔºåÊâÄ‰ª•Êàë‰ª¨ÊääÂÆÉ‰ª¨Â∞ÅË£ÖÂú®Errors‰∏≠ÔºàÂà∞Á∫øÁ®ãÁöÑUncaughtExceptionHandlerÔºâ„ÄÇ ‰ªª‰ΩïÊäõÂá∫ÁöÑÂºÇÂ∏∏‰πü‰øùÂÆàÂú∞ÂØºËá¥Á∫øÁ®ãÊ≠ª‰∫°„ÄÇ task.runÂÆåÊàêÂêéÔºåÊàë‰ª¨Ë∞ÉÁî®afterExecuteÔºåËøô‰πüÂèØËÉΩ‰ºöÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåËøô‰πü‰ºöÂØºËá¥Á∫øÁ®ãÊ≠ª‰∫°„ÄÇ Ê†πÊçÆJLS Sec 14.20ÔºåÂç≥‰Ωøtask.runÊäõÂá∫ÔºåËøô‰∏™ÂºÇÂ∏∏‰πüÊòØÊúâÊïàÁöÑ„ÄÇ ÂºÇÂ∏∏Êú∫Âà∂ÁöÑÊúÄÁªàÊïàÊûúÊòØafterExecuteÂíåÁ∫øÁ®ãÁöÑUncaughtExceptionHandlerÊã•ÊúâÂÖ≥‰∫éÁî®Êà∑‰ª£Á†ÅÈÅáÂà∞ÁöÑ‰ªª‰ΩïÈóÆÈ¢òÁöÑÂáÜÁ°Æ‰ø°ÊÅØ„ÄÇ ÊÄªÁªìÊú¨ÊñáÊòØJUCÁöÑÁ¨¨‰∫åÁØáÔºåÊÑèÂú®ÈÄöËøáÊü•ÁúãÊ∫êÁ†ÅÊù•‰∫ÜËß£Á∫øÁ®ãÊ±†ÁöÑÂÖ∑‰ΩìÂ∑•‰ΩúÂéüÁêÜ„ÄÇÊñá‰∏≠Â¶ÇÊûúÂ≠òÂú®‰∏çÂΩìÁöÑÊèèËø∞ÔºåÂ∏åÊúõÂ∞è‰ºô‰º¥‰ª¨ËÉΩÂ§üÂèäÊó∂ÊèêÂá∫„ÄÇÁÅ∞Â∏∏ÊÑüË∞¢ÔºÅ Ê¨¢ËøéÂÖ≥Ê≥®ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÔºåÂπ≤Ë¥ßÊª°Êª°Âì¶~]]></content>
      <categories>
        <category>JUC</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Á∫øÁ®ã</tag>
        <tag>thread</tag>
        <tag>Âπ∂ÂèëÁºñÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JUC¬∑Executor Ê°ÜÊû∂]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-up-juc1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂ§öÁ∫øÁ®ãÂíåÂπ∂ÂèëËøô‰∏§‰∏™‰∏úË•øÁúüÁöÑÊòØÂêëÂæÄÂ∑≤‰πÖÔºåÊÄªÊòØÊúâ‰∏ÄÁßçÁ•ûÁßòÁöÑÊÑüËßâÔºåÊÉ≥ÂéªÊé¢Á¥¢‰∏ÄÊ≥¢ÔºåÂèàÊãÖÂøÉÊ∞¥Âπ≥‰∏çÂ§üÊó†Ê≥ïÈ©æÈ©≠„ÄÇÊÉ≥‰ª•ËØª‰π¶Á¨îËÆ∞ÁöÑÊñπÂºèÊù•ÂÜôÔºå‰ΩÜÊòØÂèàËßâÂæóÁº∫Â∞ëËá™Â∑±ÁöÑ‰∏Ä‰∫õÊÄùËÄÉÔºõ‰ΩÜÊòØÂú®Ê≤°ÊúâË∂≥Â§üÂπ∂ÂèëÁºñÁ®ãÁªèÈ™åÁöÑÊÉÖÂÜµ‰∏ãÂèàÊ≤°Ê≥ïÂéªÂÜôÂá∫ÂæàÊ∑±ÂàªÁöÑ‰∏úË•øÔºåÊØïÁ´üÊ≤°ÊúâË∏©ËøáÂùë„ÄÇÊâÄ‰ª•Âú®ÈòÖËØªspringÊ∫êÁ†ÅÁöÑÂêåÊó∂Ôºå‰πüÊÉ≥ÊäΩÁÇπÊó∂Èó¥Êù•Áúã‰∏ÄÁúãJUCÁöÑ‰∏úË•øÔºåÂÖ≥‰∫éËøôÂùóÂè™ËÉΩËØ¥ÊòØËÆ∞ÂΩïËá™Â∑±Â≠¶‰π†JUCÁöÑ‰∏Ä‰∏™ËøáÁ®ãÔºåÂ∞ùËØïÁî®‰∏Ä‰∫õÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅdemoÊù•Âä†Ê∑±ÁêÜËß£„ÄÇÊâÄ‰ª•Â∞±ÊääÊú¨Á≥ªÂàóÂÜôÊàê„Ää„Äê ÂàùËØÜ„Äë-JUC¬∑XXXX„ÄãÔºåÁî®Êù•ËÆ©Ëá™Â∑±ÊâìÂºÄÂπ∂ÂèëÁºñÁ®ãÁöÑÂ§ßÈó®„ÄÇ JUCJUCÂç≥java.util.concurrentÔºõ‰πüÂ∞±ÊòØjavaÊèê‰æõÁöÑÂπ∂ÂèëÂåÖ„ÄÇJUC‰∏≠‰ªéÂåÖÁªìÊûÑ‰∏äÊù•Áúã‰∏ªË¶ÅÊòØÔºö java.util.concurrent Âú®Ëøô‰∏™ÂåÖ‰∏ãÈù¢‰∏ªË¶ÅÊòØÁ∫øÁ®ãÊ±†„ÄÅÂπ∂ÂèëÈõÜÂêà‰ª•Âèä‰∏Ä‰∫õÂπ∂ÂèëÂ∑•ÂÖ∑Á±ª„ÄÇÁ∫øÁ®ãÊ±†Áõ∏ÂÖ≥ÊòØÂõ¥ÁªïExcetorÊ°ÜÊû∂Êù•ÊûÑÂª∫ÔºõËøô‰πüÊòØÊú¨Êñá‰∏ãÈù¢ÈÉ®ÂàÜÁöÑÈáçÁÇπ„ÄÇ java.util.concurrent.atomic Ëøô‰∏™ÂåÖ‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÂéüÂ≠êÊìç‰ΩúÁ±ªÔºåÁÆóÊòØÂπ∂ÂèëËæÖÂä©Â∑•ÂÖ∑Á±ªÔºåÂü∫Êú¨ÂÆûÁé∞‰æùËµñ‰∫éCASÔºõ java.util.concurrent.locks Ëøô‰∏™‰ªéÂêçÂ≠óÂ∞±ÂèØ‰ª•Áü•ÈÅìÂÆÉÁöÑ‰ΩúÁî®ÔºåÂ∞±ÊòØÊèê‰æõÈîÅ„ÄÇ JUCÂêÑ‰∏™Ê®°ÂùóÁöÑÁ±ª Êï¥‰ΩìÊ°ÜÊû∂ atomic locks Âπ∂ÂèëÈõÜÂêà Âπ∂ÂèëÂ∑•ÂÖ∑ forkJoin fork-joinÂú®JUC‰∏≠Êúâ‰∏ãÈù¢‰∏â‰∏™Á±ªÔºö 1public class ForkJoinPool extends AbstractExecutorService 1public abstract class ForkJoinTask&lt;V&gt; implements Future&lt;V&gt;, Serializable 1public class ForkJoinWorkerThread extends Thread FutureFutureÊèê‰æõ‰∫ÜÂèØ‰ª•Ëé∑ÂèñÂºÇÊ≠•ÊâßË°åÁªìÊûúÁöÑÊñπÊ≥ïÔºåÂå∫Âà´‰∫éRunnableÁöÑrunÊñπÊ≥ïÔºårunÊòØ‰∏çÊèê‰æõËøîÂõûÁªìÊûúÁöÑ„ÄÇ1234567891011121314public interface Future&lt;V&gt; &#123; //ÂèñÊ∂à boolean cancel(boolean mayInterruptIfRunning); //Â¶ÇÊûú‰ªªÂä°ÂÆåÊàêÂâçË¢´ÂèñÊ∂àÔºåÂàôËøîÂõûtrue„ÄÇ boolean isCancelled(); //Â¶ÇÊûú‰ªªÂä°ÊâßË°åÁªìÊùüÔºåÊó†ËÆ∫ÊòØÊ≠£Â∏∏ÁªìÊùüÊàñÊòØ‰∏≠ÈÄîÂèñÊ∂àËøòÊòØÂèëÁîüÂºÇÂ∏∏ÔºåÈÉΩËøîÂõûtrue„ÄÇ boolean isDone(); //Ëé∑ÂèñÂºÇÊ≠•ÊâßË°åÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªìÊûúÂèØÁî®ÔºåÊ≠§ÊñπÊ≥ï‰ºöÈòªÂ°ûÁõ¥Âà∞ÂºÇÊ≠•ËÆ°ÁÆóÂÆåÊàê„ÄÇ V get() throws InterruptedException, ExecutionException; //Ëé∑ÂèñÂºÇÊ≠•ÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªìÊûúÂèØÁî®ÔºåÊ≠§ÊñπÊ≥ï‰ºöÈòªÂ°ûÔºå‰ΩÜÊòØ‰ºöÊúâÊó∂Èó¥ÈôêÂà∂Ôºå //Â¶ÇÊûúÈòªÂ°ûÊó∂Èó¥Ë∂ÖËøáËÆæÂÆöÁöÑtimeoutÊó∂Èó¥ÔºåËØ•ÊñπÊ≥ïÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException;&#125; CallableÂ£∞Êòé‰∫Ü‰∏Ä‰∏™ÂêçÁß∞‰∏∫call()ÁöÑÊñπÊ≥ïÔºåÂêåÊó∂Ëøô‰∏™ÊñπÊ≥ïÂèØ‰ª•ÊúâËøîÂõûÂÄºVÔºå‰πüÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏123public interface Callable&lt;V&gt; &#123; V call() throws Exception; &#125; ÂÖ≥‰∫éCallableÂíåFutureÁöÑ‰ΩøÁî®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÈÉΩÊòØÁªìÂêàÊàë‰ª¨ÁöÑÁ∫øÁ®ãÊ±†Êù•‰ΩøÁî®ÁöÑ„ÄÇ ExecutorExecutorÊé•Âè£ÊòØÁ∫øÁ®ãÊ±†ÂÆûÁé∞ÁöÑÈ°∂Á∫ßÊé•Âè£ÔºåÂÖ∂Âíåspring‰∏≠ÁöÑBeanFactoryÊâÄÊâøÊãÖÁöÑËßíËâ≤Â∑Æ‰∏çÂ§öÔºåÂ∞±ÊòØÊèê‰æõÈ°∂Á∫ßÁöÑÂäüËÉΩÁ∫¶ÊùüÔºåÂÖ∑‰ΩìÂÆûÁé∞‰∫§‰∫é‰∏çÂêåÂ≠êÁ±ªÊù•ÂÆåÊàê„ÄÇ12345678910111213public interface Executor &#123; /** * Executes the given command at some time in the future. The command * may execute in a new thread, in a pooled thread, or in the calling * thread, at the discretion of the &lt;tt&gt;Executor&lt;/tt&gt; implementation. * * @param command the runnable task * @throws RejectedExecutionException if this task cannot be * accepted for execution. * @throws NullPointerException if command is null */ void execute(Runnable command);&#125; ‰∏ãÈù¢ÊòØJUC‰∏≠ExecutorÊ°ÜÊû∂ÁöÑÊï¥‰ΩìÁªìÊûÑÔºö ExecutorService12345678910111213141516171819202122232425262728293031323334353637383940414243public interface ExecutorService extends Executor &#123; //ÂÖ≥Èó≠Á∫øÁ®ãÊ±† void shutdown(); List&lt;Runnable&gt; shutdownNow(); //ÊòØÂê¶‰∏∫ShutdownÁä∂ÊÄÅ boolean isShutdown(); //ÊòØÂê¶‰∏∫TerminatedÁä∂ÊÄÅ boolean isTerminated(); //Ë∂ÖËøáË∂ÖÊó∂Êó∂Èó¥Êó∂Ôºå‰ºöÁõëÊµãExecutorServiceÊòØÂê¶Â∑≤ÁªèÂÖ≥Èó≠ //Ëã•ÂÖ≥Èó≠ÂàôËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse„ÄÇ //‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰ºöÂíåshutdownÊñπÊ≥ïÁªÑÂêà‰ΩøÁî®„ÄÇ boolean awaitTermination(long timeout, TimeUnit unit) throws InterruptedException; //ËøîÂõû‰∏Ä‰∏™FutureÂØπË±°ÔºåÂèÇÊï∞Êé•Êî∂ÁöÑÊòØ‰∏Ä‰∏™CallableÁöÑÂÆûÁé∞ //CallableÊé•Âè£‰∏≠ÁöÑcall()ÊñπÊ≥ïÊúâ‰∏Ä‰∏™ËøîÂõûÂÄºÔºåÂèØ‰ª•ËøîÂõû‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú //Âå∫Âà´‰∫éRunnableÊé•Âè£‰∏≠ÁöÑrun()ÊñπÊ≥ïÔºàvoid‰øÆÈ•∞ÔºåÊ≤°ÊúâËøîÂõûÂÄºÔºâ„ÄÇ &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task); &lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result); //ËøîÂõû‰∏Ä‰∏™FutureÂØπË±°ÔºåÈÄöËøáËøîÂõûÁöÑFutureÂØπË±°ÔºåÊàë‰ª¨ÂèØ‰ª•Ê£ÄÊü•Êèê‰∫§ÁöÑ‰ªªÂä°ÊòØÂê¶ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇ Future&lt;?&gt; submit(Runnable task); //ËøîÂõû‰∏Ä‰∏™FutureÁöÑListÔºåÂÖ∂‰∏≠ÂØπÂ∫îÁùÄÊØè‰∏™Callable‰ªªÂä°ÊâßË°åÂêéÁöÑFutureÂØπË±°„ÄÇ &lt;T&gt; List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;? extends Callable&lt;T&gt;&gt; tasks) throws InterruptedException; //Â¢ûÂä†‰∫ÜË∂ÖÊó∂ÊéßÂà∂ &lt;T&gt; List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;? extends Callable&lt;T&gt;&gt; tasks, long timeout, TimeUnit unit) throws InterruptedException; //Êé•Êî∂ÂèÇÊï∞ÊòØ‰∏Ä‰∏™CallableÁöÑÈõÜÂêàÔºå //ËøîÂõûÁöÑÊòØÊâÄÊúâCallableÈõÜÂêà‰ªªÂä°‰∏≠Êüê‰∏Ä‰∏™‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú &lt;T&gt; T invokeAny(Collection&lt;? extends Callable&lt;T&gt;&gt; tasks) throws InterruptedException, ExecutionException; //Â¢ûÂä†‰∫ÜË∂ÖÊó∂ÊéßÂà∂ &lt;T&gt; T invokeAny(Collection&lt;? extends Callable&lt;T&gt;&gt; tasks, long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException;&#125; ExecutorService ÂÜçExecutorÊé•Âè£ÁöÑÂü∫Á°Ä‰∏äÊâ©Â±ï‰∫ÜÂØπÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÁöÑÊéßÂà∂‰ª•ÂèäÊèê‰∫§‰ªªÂä°ÊâßË°åÁöÑË∂ÖÊó∂ÊéßÂà∂„ÄÇÁ∫øÁ®ãÊ±†ÁöÑÂü∫Êú¨ÂäüËÉΩËøò‰∏çÂ§üÂÆåÂñÑÔºå‰∏çËÉΩÁúüÊ≠£ÁöÑÂÖ∑Â§áÂ§ÑÁêÜÂÖ∑‰Ωì‰∏öÂä°ÁöÑËÉΩÂäõÔºàÊØïÁ´üÊòØ‰∏™Êé•Âè£ÔºåO(‚à©_‚à©)OÂìàÂìà~Ôºâ„ÄÇ ÂºÄ‰∏™ÁØáÔºåÊÖ¢ÊÖ¢Â≠¶~]]></content>
      <categories>
        <category>JUC</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Á∫øÁ®ã</tag>
        <tag>thread</tag>
        <tag>Âπ∂ÂèëÁºñÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanWrapper]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase12%2F</url>
    <content type="text"><![CDATA[BeanWrapper ÊòØSpringÊèê‰æõÁöÑ‰∏Ä‰∏™Áî®Êù•Êìç‰ΩújavaBeanÂ±ûÊÄßÁöÑÂ∑•ÂÖ∑Ôºå‰ΩøÁî®ÂÆÉÂèØ‰ª•Áõ¥Êé•‰øÆÊîπ‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄß„ÄÇ ÂØπ‰∫ébeanÂ±ûÊÄßÁöÑÊìç‰ΩúÔºåÂ§ßÂÆ∂ÁÜüÁü•ÁöÑ‰∏ªË¶ÅÊúâ‰∏ãÈù¢Ëøô‰∫õÂ∑•ÂÖ∑Á±ªÔºö 1.ApacheÁöÑBeanUtilsÂíåPropertyUtils 2.cglibÁöÑBeanMapÂíåBeanCopier 3.springÁöÑBeanUtils Spring‰∏≠BeanWrapper ÁöÑ‰∏ªË¶ÅÂäüËÉΩÂú®‰∫éÔºö 1.ÊîØÊåÅËÆæÁΩÆÂµåÂ•óÂ±ûÊÄß 2.ÊîØÊåÅÂ±ûÊÄßÂÄºÁöÑÁ±ªÂûãËΩ¨Êç¢ÔºàËÆæÁΩÆConversionServiceÔºâ 3.Êèê‰æõÂàÜÊûêÂíåÊìç‰ΩúÊ†áÂáÜJavaBeanÁöÑÊìç‰ΩúÔºöËé∑ÂèñÂíåËÆæÁΩÆÂ±ûÊÄßÂÄºÔºàÂçïÁã¨ÊàñÊâπÈáèÔºâÔºåËé∑ÂèñÂ±ûÊÄßÊèèËø∞Á¨¶‰ª•ÂèäÊü•ËØ¢Â±ûÊÄßÁöÑÂèØËØªÊÄß/ÂèØÂÜôÊÄßÁöÑËÉΩÂäõ„ÄÇ BeanWrapperÊú¨Ë∫´ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÊï¥Â•óÂ§ÑÁêÜBeanÁöÑÊñπÊ≥ï„ÄÇÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314public interface BeanWrapper extends ConfigurablePropertyAccessor &#123; //‰∏∫Êï∞ÁªÑÂíåÈõÜÂêàËá™Âä®Â¢ûÈïøÊåáÂÆö‰∏Ä‰∏™ÈôêÂà∂„ÄÇÂú®ÊôÆÈÄöÁöÑBeanWrapper‰∏äÈªòËÆ§ÊòØÊó†ÈôêÁöÑ„ÄÇ void setAutoGrowCollectionLimit(int autoGrowCollectionLimit); //ËøîÂõûÊï∞ÁªÑÂíåÈõÜÂêàËá™Âä®Â¢ûÈïøÁöÑÈôêÂà∂„ÄÇ int getAutoGrowCollectionLimit(); //Â¶ÇÊûúÊúâÁöÑËØù,ËøîÂõûÁî±Ê≠§ÂØπË±°ÂåÖË£ÖÁöÑbeanÂÆû‰æã Object getWrappedInstance(); //ËøîÂõûË¢´ÂåÖË£ÖÁöÑJavaBeanÂØπË±°ÁöÑÁ±ªÂûã„ÄÇ Class&lt;?&gt; getWrappedClass(); //Ëé∑ÂèñÂåÖË£ÖÂØπË±°ÁöÑPropertyDescriptorsÔºàÁî±Ê†áÂáÜJavaBeansËá™ÁúÅÁ°ÆÂÆöÔºâ„ÄÇ PropertyDescriptor[] getPropertyDescriptors(); //Ëé∑ÂèñÂåÖË£ÖÂØπË±°ÁöÑÁâπÂÆöÂ±ûÊÄßÁöÑÂ±ûÊÄßÊèèËø∞Á¨¶„ÄÇ PropertyDescriptor getPropertyDescriptor(String propertyName) throws InvalidPropertyException;&#125; ‰∏äÈù¢ÁöÑBeanWrapperÊòØÂü∫‰∫é4.3.6ÁâàÊú¨ÁöÑÔºåËøô‰∏™Êé•Âè£Âú®4.1ÁâàÊú¨‰πãÂêéÁï•ÊúâÊîπÂä®„ÄÇBeanWrapperImplÊòØBeanWrapperÁöÑÂÆûÁé∞Á±ªÔºåBeanWrapperImplÁöÑÁà∂Á±ªÊòØAbstractNestablePropertyAccessorÔºåÈÄöËøáËøô‰∏™‰ΩøÂæóBeanWrapperÂÖ∑ÊúâÂ§ÑÁêÜÂ±ûÊÄßÁöÑËÉΩÂäõ„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®BeanWrapper ÂåÖË£ÖÂØπË±°ÁöÑ‰æãÂ≠êÔºö 1234567891011121314151617181920212223242526272829303132package com.glmapper.spring.test;import org.springframework.beans.BeanWrapper;import org.springframework.beans.PropertyAccessorFactory;import org.springframework.beans.PropertyValue;/** * BeanWrapper ÊµãËØïÁ±ª */public class BeanWrapperTest &#123; public static void main(String[] args) &#123; User user=new User(); //ÈÄöËøáPropertyAccessorFactoryÂ∞ÜuserÂØπË±°Â∞ÅË£ÖÊàêBeanWrapper BeanWrapper bw=PropertyAccessorFactory.forBeanPropertyAccess(user); //ÊñπÂºè‰∏ÄÔºöÁõ¥Êé•ÂØπÂ±ûÊÄßÂÄºËøõË°åËÆæÁΩÆ bw.setPropertyValue("userName", "Âº†‰∏â"); //ÊñπÂºè‰∫åÔºöÈÄöËøáPropertyValueËøõË°åËÆæÁΩÆ PropertyValue pv=new PropertyValue("userName","ÊùéÂõõ"); bw.setPropertyValue(pv); System.out.println(user.getUserName()); &#125;&#125;//‰∏Ä‰∏™UserÁ±ªclass User&#123; private String userName; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125;&#125; Âú®Spring‰∏≠ÔºåÊúâÂæàÂ§öBeanÂ±ûÊÄßÁöÑÊìç‰ΩúÈÉΩÊòØÈÄöËøáBeanWrapperÊù•ÂÆåÊàêÁöÑÔºåÊØîÂ¶ÇÂ∏∏ËßÅÁöÑHttpServletBeanÁöÑÂ±ûÊÄßËÆæÁΩÆÂ∞±ÊòØ„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•ÔºàÂõõÔºâ-ÊÄªÁªì]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase11%2F</url>
    <content type="text"><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏ÄÔºâgetBean SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∫åÔºâcreateBean SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏âÔºâ-Â±ûÊÄßÊ≥®ÂÖ• Âú®‰∏äÈù¢‰∏âÁØáÊñáÁ´†‰∏≠ÂØπ‰æùËµñÊ≥®ÂÖ•ÂÅö‰∫Ü‰∏Ä‰∏™Â§ßËá¥ÁöÑÊ¢≥ÁêÜÔºõÈáåÈù¢ÈÉΩÊòØÂ§ßÈáè‰ª£Á†ÅÁöÑÂàÜÊûêÔºåÊú¨ÊñáÂú®Ê≠§Âü∫Á°Ä‰∏äËøõË°å‰∏Ä‰∏™ÊÄªÁªìÂΩíÁ∫≥„ÄÇ ‰æùËµñÊ≥®ÂÖ•Ë∞ÉÁî®ËøáÁ®ã Â¶ÇÂâçÂá†ÁØáÊñáÁ´†ÊâÄËø∞Ôºå‰æùËµñÊ≥®ÂÖ•ÊòØÁî±getBeanÊù•Ëß¶ÂèëÁöÑÔºõÁÑ∂ÂêéÊ∂âÂèäÂà∞beanÂÆû‰æãÁöÑÂàõÂª∫„ÄÅ‰æùËµñÂÖ≥Á≥ªÁöÑÂª∫Á´ã„ÄÅÂ±ûÊÄßÊ≥®ÂÖ•Á≠âÂ≠êËøáÁ®ã„ÄÇ getBean ÊñπÊ≥ïËß¶Âèë‰æùËµñÊ≥®ÂÖ• doGetBean ‰ªéÂÆπÂô®‰∏≠Êü•ÊâæBeanÔºàBeanFactoryÈìæÔºåÂΩìÂâçÂÆπÂô®-&gt;Âèå‰∫≤ÂÆπÂô®-Âèå‰∫≤ÂÆπÂô®‚Ä¶Ôºâ ÂΩìÁÑ∂ÔºåÂú®Ëé∑ÂèñÂà∞Êüê‰∏™BeanÁöÑÊó∂ÂÄô‰πü‰ºöÈÄöËøáÈÄíÂΩíÁöÑÊñπÂºèÊù•‰æùËµñÊ≥®ÂÖ•‰æùËµñÁöÑbean createBeanInstance ÁîüÊàê‰∫ÜBeanÊâÄÂåÖÂê´ÁöÑJavaÂØπË±°ÔºåSpring‰∏≠Áî®SimpleInstantiationStrategyÁ±ªÊù•ÁîüÊàêBeanÂØπË±°ÁöÑÂÆû‰æãÔºåÂÆû‰æãÂåñJavaÂØπË±°ÁöÑÊñπÊ≥ïÊúâ‰∏§ÁßçÔºàCGlibÊòØÈªòËÆ§ÊñπÂºèÔºâÔºö ÈÄöËøáBeanUtilsÔºåÂÆÉ‰ΩøÁî®‰∫ÜJVMÁöÑÂèçÂ∞ÑÂäüËÉΩÊù•ÁîüÊàêJavaÂØπË±°ÂÆû‰æã Áî®CGLIBÊù•ÁîüÊàêÔºåCGLIBÊòØ‰∏ÄÁßçÂ∏∏Áî®ÁöÑÂ≠óËäÇÁ†ÅÁîüÊàêÂô®ÁöÑÁ±ªÂ∫ì populateBean ËÆæÁΩÆBeanÂØπË±°ÁöÑ‰æùËµñÂÖ≥Á≥ª resolveValueIfNecessary Ê≥®ÂÖ•Á±ªÂûãÁöÑÂ§ÑÁêÜÔºõËß£Êûê‰∏çÂêåÁ±ªÂûãÁöÑÂ±ûÊÄß setPropertyValues Â±ûÊÄßÊ≥®ÂÖ• ÂÖ≥‰∫élazy-initIocÂÆπÂô®ÁöÑÂàùÂßãÂåñËøáÁ®ã‰∏≠Ôºå‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂ∞±ÊòØÂØπBeanDefinitionÁöÑÂÆö‰Ωç„ÄÅËΩΩÂÖ•„ÄÅËß£ÊûêÂíåÊ≥®ÂÜåÔºõ‰ΩÜÊòØÂ∞±ÂÉè‰πãÂâçËØ¥ËøáÁöÑÔºåÊ≠§Êó∂‰æùËµñÊ≥®ÂÖ•ËøòÊ≤°ÊúâÂèëÁîü„ÄÇÂú®SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏ÄÔºâgetBeanÊñá‰∏≠ÊèêÂà∞Ôºå‰æùËµñÊ≥®ÂÖ•ÂèëÁîüÂú®Â∫îÁî®Á¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Ëé∑ÂèñBeanÁöÑÊó∂ÂÄôÔºõ‰πüÂ∞±ÊòØ‰∏äÈù¢ËØ¥Âà∞ÁöÑÈÄöËøágetBeanÊù•Ëß¶Âèë„ÄÇ ÂΩìÁÑ∂Ôºå‰æùËµñÊ≥®ÂÖ•‰πüÂèØ‰ª•Âú®ÂÆπÂô®ÂàùÂßãÂåñÁöÑËøáÁ®ã‰∏≠Â∞±ÂÆåÊàê„ÄÇËøô‰∏™Â∞±ÊòØlazy-initÂ±ûÊÄßÁöÑÂ≠òÂú®ÊÑè‰πâ‰∫Ü„ÄÇÂ∞±ÊòØËØ¥Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆBeanÁöÑlazy-initÂ±ûÊÄßÊù•ÊéßÂà∂È¢ÑÂÆû‰æãÂåñÁöÑËøáÁ®ã„ÄÇ È¢ÑÂÆû‰æãÂåñÔºöÂú®ÂàùÂßãÂåñÂÆπÂô®Êó∂ÂÆåÊàêBeanÁöÑ‰æùËµñÊ≥®ÂÖ• ËøôÁßçÂÅöÊ≥ïÁöÑÂ•ΩÂ§ÑÂú®‰∫éÊèêÈ´ò‰∫ÜÊàë‰ª¨Á¨¨‰∏ÄÊ¨°Ëé∑ÂèñBeanÁöÑÁöÑÊïàÁéáÔºå‰ΩÜÊòØÂÆÉ‰πüÈôç‰Ωé‰∫ÜÂÆπÂô®ÂàùÂßãÂåñÁöÑÈÄüÂ∫¶„ÄÇÔºàËøô‰∏™ÂÖ∂ÂÆûÂæàÂ•ΩÁêÜËß£ÁöÑÔºåÂõ†‰∏∫Á¨¨‰∏ÄÊ¨°Ëé∑ÂèñBeanÁöÑÊó∂ÂÄôÔºå‰æùËµñÊ≥®ÂÖ•Â∑≤ÁªèÂÆåÊàê‰∫ÜÔºåÁõ¥Êé•ÊãøËøáÊù•Áî®Â∞±Ë°åÔºâ ÂÖ≥‰∫élazy-initÂ±ûÊÄßÁöÑÂ§ÑÁêÜ‰πüÊòØÂú®wac.refreshËøô‰∏™ÊñπÊ≥ï‰∏≠ÂÆåÊàêÁöÑÔºåÂÖ∑‰ΩìÊòØÂú®finishBeanFactoryInitializationÊñπÊ≥ï‰∏≠„ÄÇÂ¶ÇÊûúÁªßÁª≠ËøΩÊ∫ØÁöÑËØùÔºåÊúÄÁªàÊòØ‰∫§ÁªôDefaultListableBeanFactoryÂÆπÂô®‰∏≠ÁöÑpreInstantiateSingletonsÊñπÊ≥ï‰∏≠ÂÆåÊàê„ÄÇ lazy-initËøôÁßçÂÆû‰æãÂåñÊñπÂºèÂ∞±ÊòØÈÄöËøáÂ∞Ü‰æùËµñÊ≥®ÂÖ•ÂßîÊâòÁªôÂÆπÂô®Êù•Â§ÑÁêÜÔºåËÄå‰∏çÊòØÂú®Áî®Êà∑Á¨¨‰∏ÄÂêëÂÆπÂô®Áî≥ËØ∑ÁöÑBeanÁöÑÊó∂ÂÄôÂÆåÊàê‰æùËµñÊ≥®ÂÖ•Ôºå‰∏çÂêåÁöÑÈò∂ÊÆµÔºå‰πüÊúâ‰∏çÂêåÁöÑ‰ºòÂä£„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏âÔºâ-Â±ûÊÄßÊ≥®ÂÖ•]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase10%2F</url>
    <content type="text"><![CDATA[ÂâçÈù¢ÊñáÁ´†‰∏≠ÂØπ‰æùËµñÊ≥®ÂÖ•ÁöÑËß¶ÂèëÂíåbeanÁöÑÂàõÂª∫ÂÅö‰∫ÜÂ≠¶‰π†ËÆ∞ÂΩïÔºåÊú¨ÊñáÂ∞ÜÊù•ËÆ∞ÂΩï‰∏Ä‰∏ãbeanÁöÑÂ±ûÊÄßÊ≥®ÂÖ•ËøáÁ®ã„ÄÇBeanÁöÑÂ±ûÊÄßÊ≥®ÂÖ•ÂèëÁîüÂú®BeanDefinitionValueResolverËøô‰∏™Á±ª‰∏≠ÔºåBeanDefinitionValueResolverËøôÁ±ªÊòØÁî®‰∫ébeanÂ∑•ÂéÇÂÆûÁé∞ÁöÑHelperÁ±ªÔºåËÅåË¥£Â∞±ÊòØÂ∞ÜbeanÂÆö‰πâÂØπË±°‰∏≠ÂåÖÂê´ÁöÑÂÄºËß£Êûê‰∏∫Â∫îÁî®‰∫éÁõÆÊ†ábeanÂÆû‰æãÁöÑÂÆûÈôÖÂÄº„ÄÇ BeanDefinitionValueResolverÁ±ª‰∏≠ÁöÑresolveValueIfNecessary()ÊñπÊ≥ïÂåÖÂê´‰∫ÜÂØπÊâÄÊúâÊ≥®ÂÖ•Á±ªÂûãÁöÑÂ§ÑÁêÜ„ÄÇÊâÄ‰ª•Êú¨Êñá‰∏ªË¶ÅÂõ¥ÁªïËøô‰∏™ÊñπÊ≥ïÂ±ïÂºÄÊù•ËØ¥„ÄÇ resolveValueIfNecessaryÊñπÊ≥ïresolveValueIfNecessary():ÁªôÂÆö‰∏Ä‰∏™PropertyValueÔºåËøîÂõû‰∏Ä‰∏™valueÔºåËß£ÊûêÂØπÂ∑•ÂéÇ‰∏≠ÂÖ∂‰ªñbeanÁöÑÂºïÁî®„ÄÇ valueÂèØËÉΩÊòØÔºö RuntimeBeanReference : Âú®Ëß£ÊûêÂà∞‰æùËµñÁöÑBeanÁöÑÊó∂‰æØÔºåËß£ÊûêÂô®‰ºö‰æùÊçÆ‰æùËµñbeanÁöÑnameÂàõÂª∫‰∏Ä‰∏™RuntimeBeanReferenceÂØπÂÉèÔºåÂ∞ÜËøô‰∏™ÂØπÂÉèÊîæÂÖ•BeanDefinitionÁöÑMutablePropertyValues‰∏≠„ÄÇ ManagedListÔºöÁî®Êù•‰øùÂ≠òÂÆÉÊâÄÁÆ°ÁêÜÁöÑListÂÖÉÁ¥†ÔºåÂÆÉÂèØ‰ª•ÂåÖÂê´ËøêË°åÊó∂ÊúüÁöÑbeanÂºïÁî®(Â∞ÜË¢´Ëß£Êûê‰∏∫beanÂØπË±°). ManagedSet ÔºöÁî®Êù•‰øùÂ≠òÂÆÉÊâÄÁÆ°ÁêÜÁöÑsetÂÄºÔºåÂÆÉÂèØ‰ª•ÂåÖÂê´ËøêË°åÊó∂ÊúüÁöÑbeanÂºïÁî®(Â∞ÜË¢´Ëß£Êûê‰∏∫beanÂØπË±°) ManagedMap ÔºöÁî®Êù•‰øùÂ≠òÂÆÉÊâÄÁÆ°ÁêÜÁöÑmapÂÄºÔºåÂÆÉÂèØ‰ª•ÂåÖÂê´ËøêË°åÊó∂ÊúüÁöÑbeanÂºïÁî®(Â∞ÜË¢´Ëß£Êûê‰∏∫beanÂØπË±°) 1„ÄÅÊñπÊ≥ïÁî≥Êòé argName Ôºö‰∏∫ÂÖ∂ÂÆö‰πâÁöÑÂèÇÊï∞ÁöÑÂêçÁß∞ value ÔºöË¶ÅËß£ÊûêÁöÑÂÄºÂØπË±°1public Object resolveValueIfNecessary(Object argName, Object value) 2„ÄÅRuntimeBeanReference ÂΩìÂú®beanfactory‰∏≠‰Ωú‰∏∫Âè¶Â§ñ‰∏Ä‰∏™beanÁöÑÂºïÁî®Êó∂Ôºå‰Ωú‰∏∫Â±ûÊÄßÂÄºÂØπË±°ÔºåÂ∞ÜÂú®ËøêË°åÊó∂ËøõË°åËß£Êûê„ÄÇ RuntimeBeanReferenceÊòØÂú®ÂØπBeanDefinitionËøõË°åËß£ÊûêÊó∂ÁîüÊàêÁöÑÊï∞ÊçÆÂØπË±°„ÄÇ1234if (value instanceof RuntimeBeanReference) &#123; RuntimeBeanReference ref = (RuntimeBeanReference) value; return resolveReference(argName, ref);&#125; 3„ÄÅRuntimeBeanNameReference ÂΩìÂú®beanfactory‰∏≠‰Ωú‰∏∫Âè¶Â§ñ‰∏Ä‰∏™beanÂêçÁß∞ÁöÑÂºïÁî®Êó∂Ôºå‰Ωú‰∏∫Â±ûÊÄßÂÄºÂØπË±°ÔºåÂ∞ÜÂú®ËøêË°åÊó∂ËøõË°åËß£Êûê„ÄÇ12345678else if (value instanceof RuntimeBeanNameReference) &#123; String refName = ((RuntimeBeanNameReference) value).getBeanName(); refName = String.valueOf(doEvaluate(refName)); if (!this.beanFactory.containsBean(refName)) &#123; //ÂºÇÂ∏∏ÔºöInvalid bean name '" + refName + "' in bean reference for " + argName &#125; return refName;&#125; 4„ÄÅBeanDefinitionHolder Ëß£ÊûêBeanDefinitionHolderÔºöÂåÖÂê´ÂÖ∑ÊúâÂêçÁß∞ÂíåÂà´ÂêçÁöÑBeanDefinition„ÄÇBeanDefinitionHolderÂ∞±ÊòØ‰ΩøÁî®ÂêçÁß∞ÊàñËÄÖÂà´ÂêçÊù•‰øùÂ≠òBeanDefinitionÁöÑ„ÄÇ1234else if (value instanceof BeanDefinitionHolder) &#123; BeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value; return resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition());&#125; 5„ÄÅBeanDefinition Ëß£ÊûêÁ∫ØÁ≤πÁöÑBeanDefinition1234567else if (value instanceof BeanDefinition) &#123; // Resolve plain BeanDefinition, without contained name: use dummy name. BeanDefinition bd = (BeanDefinition) value; String innerBeanName = "(inner bean)" + BeanFactoryUtils.GENERATED_BEAN_NAME_SEPARATOR + ObjectUtils.getIdentityHexString(bd); return resolveInnerBean(argName, innerBeanName, bd); &#125; 6„ÄÅManagedArray ÂåÖÂê´ËøêË°åÊó∂ÊúüÁöÑbeanÂºïÁî®(Â∞ÜË¢´Ëß£Êûê‰∏∫beanÂØπË±°)1234567891011121314151617181920212223else if (value instanceof ManagedArray) &#123; // May need to resolve contained runtime references. ManagedArray array = (ManagedArray) value; Class&lt;?&gt; elementType = array.resolvedElementType; if (elementType == null) &#123; String elementTypeName = array.getElementTypeName(); if (StringUtils.hasText(elementTypeName)) &#123; try &#123; elementType = ClassUtils.forName(elementTypeName, this.beanFactory.getBeanClassLoader()); array.resolvedElementType = elementType; &#125; catch (Throwable ex) &#123; // Improve the message by showing the context. //ÂºÇÂ∏∏ÔºöError resolving array type for " + argName &#125; &#125; else &#123; elementType = Object.class; &#125; &#125; return resolveManagedArray(argName, (List&lt;?&gt;) value, elementType);&#125; 7„ÄÅManagedListÔºåManagedSetÔºåManagedMap ÂåÖÂê´ËøêË°åÊó∂ÊúüÁöÑbeanÂºïÁî®(Â∞ÜË¢´Ëß£Êûê‰∏∫beanÂØπË±°)123456789101112//ÂØπManagedListËøõË°åËß£Êûêelse if (value instanceof ManagedList) &#123; return resolveManagedList(argName, (List&lt;?&gt;) value);&#125;//ÂØπManagedSetËøõË°åËß£Êûêelse if (value instanceof ManagedSet) &#123; return resolveManagedSet(argName, (Set&lt;?&gt;) value);&#125;//ÂØπManagedMapËøõË°åËß£Êûêelse if (value instanceof ManagedMap) &#123; return resolveManagedMap(argName, (Map&lt;?, ?&gt;) value);&#125; 8„ÄÅManagedProperties ManagedPropertiesË°®Á§∫ÁöÑÊòØ‰∏Ä‰∏™springÁÆ°ÁêÜÁöÑÂ±ûÊÄßÂÆû‰æãÔºåÂÆÉÊîØÊåÅÁà∂/Â≠ê definitionÁöÑÂêàÂπ∂„ÄÇ1234567891011121314151617//ÂØπManagedPropertiesËøõË°åËß£Êûêelse if (value instanceof ManagedProperties) &#123; Properties original = (Properties) value; Properties copy = new Properties(); for (Map.Entry&lt;Object, Object&gt; propEntry : original.entrySet()) &#123; Object propKey = propEntry.getKey(); Object propValue = propEntry.getValue(); if (propKey instanceof TypedStringValue) &#123; propKey = evaluate((TypedStringValue) propKey); &#125; if (propValue instanceof TypedStringValue) &#123; propValue = evaluate((TypedStringValue) propValue); &#125; copy.put(propKey, propValue); &#125; return copy;&#125; 9„ÄÅTypedStringValue TypedStringValue‰øùÂ≠òÁöÑÊòØ‰∏Ä‰∏™Á±ªÂûãÁöÑÂ±ûÊÄßÂÄº„ÄÇ1234567891011121314151617181920//ÂØπTypedStringValueËøõË°åËß£Êûêelse if (value instanceof TypedStringValue) &#123; // Convert value to target type here. TypedStringValue typedStringValue = (TypedStringValue) value; Object valueObject = evaluate(typedStringValue); try &#123; Class&lt;?&gt; resolvedTargetType = resolveTargetType(typedStringValue); if (resolvedTargetType != null) &#123; return this.typeConverter.convertIfNecessary(valueObject, resolvedTargetType); &#125; else &#123; return valueObject; &#125; &#125; catch (Throwable ex) &#123; // Improve the message by showing the context. throw new BeanCreationException( //ÂºÇÂ∏∏ÔºöError converting typed String value for " + argName &#125;&#125; 10„ÄÅ‰Ωú‰∏∫Ë°®ËææÂºèËøõË°åËØÑ‰º∞ Â∞ÜÁªôÂÆöÁöÑÂÄº‰Ωú‰∏∫Ë°®ËææÂºèËøõË°åËØÑ‰º∞„ÄÇ123else &#123; return evaluate(value);&#125; Âú®ÂÆåÊàê‰∏äËø∞Ëß£Êûê‰πãÂêéÔºåÂ∑≤Áªè‰∏∫Êàë‰ª¨ÁöÑ‰æùËµñÊ≥®ÂÖ•ÂÅöÂ•Ω‰∫ÜÂáÜÂ§á„ÄÇËøôÊòØÁúüÊ≠£ÊääBeanÂØπË±°ËÆæÁΩÆÂà∞ÂÆÉÊâÄ‰æùËµñÁöÑÂè¶‰∏Ä‰∏™BeanÁöÑÂ±ûÊÄß‰∏≠ÂéªÁöÑÂú∞ÊñπÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÂ§ÑÁêÜÁöÑÂ±ûÊÄß‰πüÊòØÂêÑÂºèÂêÑÊ†∑ÁöÑ„ÄÇÂÖ∑‰ΩìÂ±ûÊÄßÁöÑÊ≥®ÂÖ•ÊòØÂú®‰πãÂâçÊèêÂà∞ÁöÑBeanWrapperÊé•Âè£ÁöÑÂÆûÁé∞Á±ªBeanWrapperImplÁöÑsetPropertyValueÊñπÊ≥ïÊù•ÂÆåÊàê„ÄÇ setPropertyValueÊñπÊ≥ïa„ÄÅÊñπÊ≥ïÂ£∞ÊòéËøô‰∏™ÊñπÊ≥ïÊòØÁßÅÊúâÁöÑÔºåÊòØBeanWrapperImplÂÆûÈôÖÂ§ÑÁêÜÁöÑÊñπÊ≥ïÔºåÂÖ∂ÂØπÂ§ñ‰πüÊèê‰æõ‰∫ÜsetPropertyValueÁöÑÂÖ∂ÂÆÉÈáçËΩΩÊñπÊ≥ïÊù•Êèê‰æõÊúçÂä°„ÄÇ 12private void setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv) throws BeansException b„ÄÅPropertyTokenHolderÊòØBeanWrapperImplÁöÑÂÜÖÈÉ®Á±ª12345private static class PropertyTokenHolder &#123; public String canonicalName; public String actualName; public String[] keys;&#125; Âú®setPropertyValueÊñπÊ≥ï‰∏≠‰ºöÊ†πÊçÆtokensÂèòÈáèÊòØÂê¶‰∏∫null,Êúâ‰∏§‰∏™‰∏çÂêåÁöÑÂàÜÊîØ„ÄÇÂÖ∂‰∏≠ÂΩìtokens‰∏∫nullÊó∂ÔºåÂàô‰ºöÂØπÂ±ûÊÄßÂêçËøõË°åÈÄíÂΩíË∞ÉÁî®ÂàÜÊûêÂ§ÑÁêÜÔºåËøîÂõûÂàÜÊûêÂ§ÑÁêÜÂêéÁöÑBeanWrapImplÂØπË±°nestedBw„ÄÇÂ¶ÇÊûúnestedBw==this,Âàô‰ºöËÆæÁΩÆpvÁöÑresolvedTokensÂ±ûÊÄßÂÄºÔºåÊúÄÂêéÂ∞ÜË∞ÉÁî®nestedBwÂØπË±°ÁöÑËÆæÁΩÆÂ±ûÊÄßÂÄºÊñπÊ≥ïËÆæÁΩÆÂ±ûÊÄß„ÄÇÊù•ÂÖ∑‰ΩìÁúãÁúãÔºö c„ÄÅÂÖ∂‰∏≠ÂΩìtokens‰∏∫nullÊó∂ÔºåÂç≥ÂØπÈõÜÂêàÁ±ªÁöÑÂüüËøõË°åÊ≥®ÂÖ•1234567891011121314// ËÆæÁΩÆtokensÁöÑÁ¥¢ÂºïÂíåkeysPropertyTokenHolder getterTokens = new PropertyTokenHolder();getterTokens.canonicalName = tokens.canonicalName;getterTokens.actualName = tokens.actualName;getterTokens.keys = new String[tokens.keys.length - 1];System.arraycopy(tokens.keys, 0, getterTokens.keys, 0, tokens.keys.length - 1);Object propValue;//getPropertyValueÁî®Êù•Ëé∑ÂèñBean‰∏≠ÂØπÂØπË±°Ê≥®ÂÖ•ÁöÑÂºïÁî®Ôºõtry &#123; propValue = getPropertyValue(getterTokens);&#125;catch (NotReadablePropertyException ex) &#123;//ÂºÇÂ∏∏ÔºöCannot access indexed value in property referenced &#125; 1„ÄÅpropValue‰∏∫null propValue‰∏∫null12345678910111213if (propValue == null) &#123; // Á©∫ÂÄºÊò†Â∞ÑÁöÑÊÉÖÂÜµ if (this.autoGrowNestedPaths) &#123; // TODO: cleanup, this is pretty hacky int lastKeyIndex = tokens.canonicalName.lastIndexOf('['); getterTokens.canonicalName = tokens.canonicalName.substring(0, lastKeyIndex); propValue = setDefaultValue(getterTokens); &#125; else &#123; //ÂºÇÂ∏∏ÔºöCannot access indexed value in property referenced " + "in indexed property path '" + propertyName + "': returned null" &#125;&#125; 2„ÄÅÂØπarrayËøõË°åÊ≥®ÂÖ• ÂØπarrayËøõË°åÊ≥®ÂÖ•1234567891011121314151617if (propValue.getClass().isArray()) &#123; PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); Class requiredType = propValue.getClass().getComponentType(); int arrayIndex = Integer.parseInt(key); Object oldValue = null; try &#123; if (isExtractOldValueForEditor() &amp;&amp; arrayIndex &lt; Array.getLength(propValue)) &#123; oldValue = Array.get(propValue, arrayIndex); &#125; Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.getValue(), requiredType, TypeDescriptor.nested(property(pd), tokens.keys.length)); Array.set(propValue, arrayIndex, convertedValue); &#125; catch (IndexOutOfBoundsException ex) &#123; //ÂºÇÂ∏∏ÔºöInvalid array index in property path '" + propertyName &#125;&#125; 2„ÄÅÂØπlistËøõË°åÊ≥®ÂÖ• ÂØπlistËøõË°åÊ≥®ÂÖ•123456789101112131415161718192021222324252627282930313233else if (propValue instanceof List) &#123; PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); Class requiredType = GenericCollectionTypeResolver.getCollectionReturnType( pd.getReadMethod(), tokens.keys.length); List list = (List) propValue; int index = Integer.parseInt(key); Object oldValue = null; if (isExtractOldValueForEditor() &amp;&amp; index &lt; list.size()) &#123; oldValue = list.get(index); &#125; Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.getValue(), requiredType, TypeDescriptor.nested(property(pd), tokens.keys.length)); int size = list.size(); if (index &gt;= size &amp;&amp; index &lt; this.autoGrowCollectionLimit) &#123; for (int i = size; i &lt; index; i++) &#123; try &#123; list.add(null); &#125; catch (NullPointerException ex) &#123; //ÂºÇÂ∏∏ÔºöInvalidPropertyException &#125; &#125; list.add(convertedValue); &#125; else &#123; try &#123; list.set(index, convertedValue); &#125; catch (IndexOutOfBoundsException ex) &#123; //ÂºÇÂ∏∏ÔºöInvalid list index in property path '" + propertyName + "'" &#125; &#125;&#125; 2„ÄÅÂØπmapËøõË°åÊ≥®ÂÖ• ÂØπmapËøõË°åÊ≥®ÂÖ•1234567891011121314151617181920else if (propValue instanceof Map) &#123; PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); Class mapKeyType = GenericCollectionTypeResolver.getMapKeyReturnType( pd.getReadMethod(), tokens.keys.length); Class mapValueType = GenericCollectionTypeResolver.getMapValueReturnType( pd.getReadMethod(), tokens.keys.length); Map map = (Map) propValue; //ÈáçË¶ÅÊèêÁ§∫Ôºö‰∏çË¶ÅÂú®ËøôÈáå‰º†ÈÄíÂÆåÊï¥ÁöÑÂ±ûÊÄßÂêçÁß∞ TypeDescriptor typeDescriptor = (mapKeyType != null ? TypeDescriptor.valueOf(mapKeyType) : TypeDescriptor.valueOf(Object.class)); Object convertedMapKey = convertIfNecessary(null, null, key, mapKeyType, typeDescriptor); Object oldValue = null; if (isExtractOldValueForEditor()) &#123; oldValue = map.get(convertedMapKey); &#125; // Âú®ËøôÈáå‰º†ÈÄíÂÆåÊï¥ÁöÑÂ±ûÊÄßÂêçÁß∞ÂíåÊóßÂÄºÔºåÂõ†‰∏∫Â∏åÊúõÂØπmapÂÄºÊúâÂÆåÊï¥ÁöÑËΩ¨Êç¢ËÉΩÂäõ„ÄÇ Object convertedMapValue = convertIfNecessary(propertyName, oldValue, pv.getValue(), mapValueType, TypeDescriptor.nested(property(pd), tokens.keys.length)); map.put(convertedMapKey, convertedMapValue);&#125; ÂÖ∂‰∏≠ÂΩìtokens‰∏ç‰∏∫nullÊó∂ÔºåÂç≥ÂØπÈùûÈõÜÂêàÁ±ªÁöÑÂüüËøõË°åÊ≥®ÂÖ•ËøôÈáåÊòØÊ†∏ÂøÉÁöÑÂú∞ÊñπÔºåÂèñÂæóÊ≥®ÂÖ•Â±ûÊÄßÁöÑsetÊñπÊ≥ïÔºåÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ÔºåÊääÂØπË±°Ê≥®ÂÖ•ËøõÂéª„ÄÇ123final Method writeMethod = (pd instanceof GenericTypeAwarePropertyDescriptor ? ((GenericTypeAwarePropertyDescriptor) pd).getWriteMethodForActualAccess() : pd.getWriteMethod()); ÊÄªÁªìÈÄöËøá‰∏äÈù¢ÁöÑÂá†ÁØáÂàÜÊûêÊàë‰ª¨Â§ßÊ¶ÇÁöÑÁÜüÊÇâ‰∫ÜBeanÂàõÂª∫ÂíåÂØπË±°‰æùËµñÊ≥®ÂÖ•ÁöÑ‰∏Ä‰∏™ËøáÁ®ãÔºåÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåspringÈúÄË¶ÅÊ†πÊçÆBeandefinition‰∏≠ÁöÑ‰ø°ÊÅØÊù•ÈÄíÂΩíÂÆåÊàê‰æùËµñÊ≥®ÂÖ•„ÄÇÂπ∂‰∏îËøô‰∫õÈÄíÂΩíÁöÑÂÖ•Âè£ÈÉΩÊòØgetBeanËøô‰∏™ÊñπÊ≥ï„ÄÇ ‰∏Ä‰∏™ÈÄíÂΩíÊòØÂú®‰∏ä‰∏ãÊñá‰ΩìÁ≥ª‰∏≠Êü•ÊâæÈúÄË¶ÅÁöÑBeanÂíåÂàõÂª∫BeanÁöÑÈÄíÂΩíË∞ÉÁî®Ôºõ Âè¶‰∏Ä‰∏™ÈÄíÂΩíÊòØÂú®‰æùËµñÊ≥®ÂÖ•Êó∂ÈÄöËøáÈÄíÂΩíË∞ÉÁî®ÂÆπÂô®ÁöÑgetBeanÊñπÊ≥ïÔºåÂæóÂà∞ÂΩìÂâçBeanÁöÑ‰æùËµñBeanÔºåÂêåÊó∂‰πüËß¶ÂèëÂØπ‰æùËµñBeanÁöÑÂàõÂª∫ÂíåÊ≥®ÂÖ•„ÄÇ Âú®ÂØπBeanÁöÑÂ±ûÊÄßËøõË°å‰æùËµñÊ≥®ÂÖ•Êó∂Ëß£ÊûêÁöÑËøáÁ®ã‰πüÊòØ‰∏Ä‰∏™ÈÄíÂΩíÁöÑËøáÁ®ã„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•Ê†πÊçÆ‰æùËµñÂÖ≥Á≥ªÔºå‰∏ÄÂ±Ç‰∏ÄÂ±ÇÁöÑÂÆåÊàêBeanÁöÑÂàõÂª∫ÂíåÊ≥®ÂÖ•ÔºåÁõ¥Âà∞ÊúÄÂêéÂÆåÊàêÂΩìÂâçBeanÁöÑÂàõÂª∫„ÄÇ ÂèÇËÄÉ „ÄäSpringÊäÄÊúØÂÜÖÂπï„Äã https://www.cnblogs.com/davidwang456/p/4213652.html]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∫åÔºâcreateBean]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase9%2F</url>
    <content type="text"><![CDATA[Âú®SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏ÄÔºâÔºàAbstractBeanFactory-getBeanÔºâÊúÄÂêéËØ¥ÈÅìgetBeanÊòØ‰æùËµñÊ≥®ÂÖ•ÁöÑËµ∑ÁÇπÔºåbeanÁöÑÂàõÂª∫ÈÉΩÊòØÈÄöËøácreateBeanÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÂàõÂª∫ÁöÑ„ÄÇcreateBeanÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊòØÂú®AbstractAutowireCapableBeanFactory‰∏≠ÁöÑ„ÄÇÊú¨ÁØáÂ∞±Êçã‰∏ÄÊçãËøô‰∏™ÊñπÊ≥ïÁúã‰∏ãbeanÁöÑÂàõÂª∫ËøáÁ®ã„ÄÇ Ëøô‰∏™ÊñπÊ≥ïÊòØAbstractAutowireCapableBeanFactoryËøô‰∏™Á±ªÁöÑ‰∏≠ÂøÉÊñπÊ≥ïÔºåÂÖ∂‰ΩúÁî®Â∞±ÊòØÂàõÂª∫‰∏Ä‰∏™beanÂÆû‰æãÔºåÂ°´ÂÖÖbeanÂÆû‰æãÔºåÂêéÁΩÆÂ§ÑÁêÜÁ≠â„ÄÇ Âú®createBean‰∏≠‰∏ªË¶ÅÂÅö‰∫Ü‰∏â‰ª∂‰∫ãÔºö Âà§Êñ≠ÈúÄË¶ÅÂàõÂª∫ÁöÑBeanÊòØÂê¶ÂèØ‰ª•ÂÆû‰æãÂåñÔºåËøô‰∏™Á±ªÊòØÂê¶ÂèØ‰ª•ÈÄöËøáÁ±ªË£ÖËΩΩÂô®Êù•ËΩΩÂÖ• ÊòØÂê¶ÈÖçÁΩÆ‰∫ÜÂêéÁΩÆÂ§ÑÁêÜÂô®Áõ∏ÂÖ≥Â§ÑÁêÜÔºàÂ¶ÇÊûúÈÖçÁΩÆ‰∫ÜÂàôËøîÂõû‰∏Ä‰∏™‰ª£ÁêÜÔºâ ÂàõÂª∫Bean ÂÖ∑‰ΩìÊù•ÁúãÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142protected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException &#123; if (logger.isDebugEnabled()) &#123; logger.debug("Creating instance of bean '" + beanName + "'"); &#125; RootBeanDefinition mbdToUse = mbd; // Make sure bean class is actually resolved at this point, and // clone the bean definition in case of a dynamically resolved Class // which cannot be stored in the shared merged bean definition. //Âà§Êñ≠ÈúÄË¶ÅÂàõÂª∫ÁöÑBeanÊòØÂê¶ÂèØ‰ª•ÂÆû‰æãÂåñÔºåËøô‰∏™Á±ªÊòØÂê¶ÂèØ‰ª•ÈÄöËøáÁ±ªË£ÖËΩΩÂô®Êù•ËΩΩÂÖ• Class&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName); if (resolvedClass != null &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != null) &#123; mbdToUse = new RootBeanDefinition(mbd); mbdToUse.setBeanClass(resolvedClass); &#125; // Prepare method overrides. try &#123; mbdToUse.prepareMethodOverrides(); &#125; catch (BeanDefinitionValidationException ex) &#123; //ÂºÇÂ∏∏ÔºöValidation of method overrides failed &#125; try &#123; // Give BeanPostProcessors a chance to return a proxy instead of the target //bean instance. //ÊòØÂê¶ÈÖçÁΩÆ‰∫ÜÂêéÁΩÆÂ§ÑÁêÜÂô®Áõ∏ÂÖ≥Â§ÑÁêÜÔºàÂ¶ÇÊûúÈÖçÁΩÆ‰∫ÜÂàôËøîÂõû‰∏Ä‰∏™‰ª£ÁêÜÔºâ Object bean = resolveBeforeInstantiation(beanName, mbdToUse); if (bean != null) &#123; return bean; &#125; &#125; catch (Throwable ex) &#123; //ÂºÇÂ∏∏:BeanPostProcessor before instantiation of bean failed &#125; //ÂàõÂª∫Bean Object beanInstance = doCreateBean(beanName, mbdToUse, args); if (logger.isDebugEnabled()) &#123; logger.debug("Finished creating instance of bean '" + beanName + "'"); &#125; return beanInstance;&#125; ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÂàõÂª∫beanÊòØ‰∫§ÁªôdoCreateBeanÊñπÊ≥ïÊù•ÂàõÂª∫ÁöÑ„ÄÇÁªßÁª≠ÁúãdoCreateBeanËøô‰∏™ÊñπÊ≥ïÔºöÔºàËøôÈáåÈù¢Ê∂âÂèäÂà∞‰∏Ä‰∏™BeanWrapperËøô‰∏™Êé•Âè£ÔºåÂ∞è‰ºô‰º¥ÂèØ‰ª•ÁßªÊ≠•‰∫ÜËß£‰∏Ä‰∏ã„ÄäSpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanWrapper„ÄãÔºâ ‰ª£Á†Å 1Ôºö123456789101112131415// Áî®BeanWrapperÊù•ÊåÅÊúâÂàõÂª∫Âá∫Êù•ÁöÑBeanÂØπË±°BeanWrapper instanceWrapper = null;//Â¶ÇÊûúÊòØÂçï‰æãÁöÑËØùÔºåÂàôÂÖàÊääÁºìÂ≠ò‰∏≠ÁöÑÂêåÂêçbeanÊ∏ÖÈô§if (mbd.isSingleton()) &#123; instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);&#125;//ÂÆûÈôÖÂàõÂª∫ÁöÑ‰∫§ÁªôcreateBeanInstanceÊù•ÂÆåÊàêÔºå//beanÁöÑÁîüÊàêÔºåËøôÈáå‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÁ±ªÁîüÊàêÂô®ÔºåÂåÖË£ÖÊàêBeanWrapperImplÁ±ªÔºå//‰∏∫‰∫Ü‰∏ãÈù¢ÁöÑpopulateBeanÊñπÊ≥ïÁöÑÂ±ûÊÄßÊ≥®ÂÖ•ÂÅöÂáÜÂ§á if (instanceWrapper == null) &#123; instanceWrapper = createBeanInstance(beanName, mbd, args);&#125;final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null);Class&lt;?&gt; beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null);mbd.resolvedTargetType = beanType; ‰ª£Á†Å 2Ôºö ÂÖÅËÆ∏ÂêéÂ§ÑÁêÜÂô®‰øÆÊîπÂêàÂπ∂ÁöÑbeanÂÆö‰πâ„ÄÇ1234567891011synchronized (mbd.postProcessingLock) &#123; if (!mbd.postProcessed) &#123; try &#123; applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName); &#125; catch (Throwable ex) &#123; //ÂºÇÂ∏∏ÔºöPost-processing of merged bean definition failed &#125; mbd.postProcessed = true; &#125; &#125; ‰ª£Á†Å 3 Ôºö Âç≥‰ΩøË¢´BeanFactoryAwareÁ≠âÁîüÂëΩÂë®ÊúüÊé•Âè£Ëß¶ÂèëÔºå‰πüË¶ÅÂ∞ΩÂø´Âú∞ÁºìÂ≠òsingletons ‰ª•‰æøËÉΩÂ§üËß£ÊûêÂæ™ÁéØÂºïÁî®„ÄÇ1234567891011121314boolean earlySingletonExposure = (mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp; isSingletonCurrentlyInCreation(beanName));if (earlySingletonExposure) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Eagerly caching bean &apos;&quot; + beanName + &quot;&apos; to allow for resolving potential circular references&quot;); &#125; addSingletonFactory(beanName, new ObjectFactory&lt;Object&gt;() &#123; @Override public Object getObject() throws BeansException &#123; return getEarlyBeanReference(beanName, mbd, bean); &#125; &#125;);&#125; ‰ª£Á†Å 4: ËøôÈáåÊòØÂØπbeanÁöÑÂàùÂßãÂåñÁöÑÂú∞ÊñπÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰æùËµñÊ≥®ÂÖ•Â∞±Âú®ËøôÈáåÂèëÁîüÔºõËøô‰∏™exposedObjectÂèòÈáè‰øùÂ≠òÁöÑÊòØÂú®ÂàùÂßãÂåñÂ§ÑÁêÜÂÆå‰ª•ÂêéËøîÂõûÁöÑ‰Ωú‰∏∫‰æùËµñÊ≥®ÂÖ•ÂÆåÊàê‰πãÂêéÁöÑbean„ÄÇ123456789101112131415161718// Initialize the bean instance.Object exposedObject = bean;try &#123; populateBean(beanName, mbd, instanceWrapper); if (exposedObject != null) &#123; exposedObject = initializeBean(beanName, exposedObject, mbd); &#125;&#125;catch (Throwable ex) &#123; //ÊäõÂá∫ if (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123; throw (BeanCreationException) ex; &#125; else &#123; //ÂºÇÂ∏∏:Initialization of bean failed &#125;&#125; ‰ª£Á†Å 5: ËøôÈáåÊòØÊ≥®ÂÜåbean12345678try &#123; registerDisposableBeanIfNecessary(beanName, bean, mbd);&#125;catch (BeanDefinitionValidationException ex) &#123; //ÂºÇÂ∏∏Â§ÑÁêÜ&#125;//ËøîÂõûÁªìÊûúreturn exposedObject; ‰∏äÈù¢ÁöÑ5‰∏™‰ª£Á†ÅÊÆµÂùáÊòØdoCreateBean‰∏≠ÁöÑÂ§ÑÁêÜÈÄªËæëÔºåÊúâÂÖ¥Ë∂£ÁöÑÂ∞è‰ºô‰º¥ÂèØ‰ª•Ëá™Ë°åÊü•ÈòÖÊ∫êÁ†Å„ÄÇ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠Êàë‰ª¨‰æùÁÑ∂Ê≤°ÊúâÂæóÂà∞ÂÖ∑‰ΩìÂàõÂª∫ÁöÑËøáÁ®ãÔºåÂõ†‰∏∫Âú®doCreateBean‰∏≠Âèà‰æùËµñÔºöcreateBeanInstanceÂíåpopulateBean‰∏§‰∏™ÊñπÊ≥ï„ÄÇ Âú®createBeanInstance‰∏≠ÁîüÊàê‰∫ÜBeanÊâÄÂåÖÂê´ÁöÑjavaÂØπË±°„ÄÇÊù•ÁúãÊòØÊÄé‰πàÁîüÊàêÁöÑÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) &#123; // Á°Æ‰øùbeanÁ±ªÂÆûÈôÖ‰∏äÂ∑≤ÁªèËß£ÊûêËøá‰∫ÜÔºåÂèØ‰ª•ÂÆû‰æãÂåñ Class&lt;?&gt; beanClass = resolveBeanClass(mbd, beanName); if (beanClass != null &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123; //ÂºÇÂ∏∏ÔºöBean class isn't public, and non-public access not allowed:beanName &#125; //1. ‰ΩøÁî®Â∑•ÂéÇÊñπÊ≥ïÊù•ËøõË°åbeanÁöÑÂÆû‰æãÂåñ if (mbd.getFactoryMethodName() != null) &#123; return instantiateUsingFactoryMethod(beanName, mbd, args); &#125; // ÈáçÊñ∞ÂàõÂª∫Áõ∏ÂêåÁöÑbeanÊó∂Âø´Êç∑ÊñπÂºè... boolean resolved = false; boolean autowireNecessary = false; if (args == null) &#123; synchronized (mbd.constructorArgumentLock) &#123; if (mbd.resolvedConstructorOrFactoryMethod != null) &#123; resolved = true; autowireNecessary = mbd.constructorArgumentsResolved; &#125; &#125; &#125; if (resolved) &#123; if (autowireNecessary) &#123; return autowireConstructor(beanName, mbd, null, null); &#125; else &#123; return instantiateBean(beanName, mbd); &#125; &#125; // 2.ÈúÄË¶ÅÁ°ÆÂÆöÊûÑÈÄ†ÂáΩÊï∞...,‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ËøõË°åbeanÂÆû‰æãÂåñ Constructor&lt;?&gt;[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName); if (ctors != null || mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR || mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) &#123; return autowireConstructor(beanName, mbd, ctors, args); &#125; //3.Ê≤°ÊúâÁâπÊÆäÁöÑÂ§ÑÁêÜÔºöÂè™ÈúÄ‰ΩøÁî®Êó†ÂèÇÊï∞ÊûÑÈÄ†ÂáΩÊï∞„ÄÇÔºàÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºâ return instantiateBean(beanName, mbd);&#125; ‰ªé‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÂØπË±°ÁöÑÁîüÊàêÊúâËÆ∏Â§ö‰∏çÂêåÁöÑÊñπÂºèÔºåÊúâÈÄöËøáÂ∑•ÂéÇÁöÑÔºå‰πüÊúâÈÄöËøáÂÆπÂô®ÁöÑautowireÁâπÊÄßÁîüÊàêÁöÑ„ÄÇÂΩìÁÑ∂Ëøô‰∫õÁîüÊàêÊñπÂºèÈÉΩÊòØÁî±Áõ∏ÂÖ≥ÁöÑBeanDefinitionÊù•ÊåáÂÆöÁöÑ„ÄÇ Spring‰∏≠ÈÖçÁΩÆBeanÁöÑÊñπÂºèÊàë‰ª¨Â∏∏Áî®ÁöÑ‰∏ÄÁßçÊòØÈÄöËøáxmlÊñá‰ª∂Êù•ÈÖçÁΩÆÔºåËøòÊúâÂ∞±ÊòØÈÄöËøáÊ≥®Ëß£ÁöÑÊñπÂºèÊù•ÈÖçÁΩÆ„ÄÇ demo1 123&lt;bean id="user" class="com.glmapper.test.User"&gt; &lt;property name="name" value="glmapper"&gt;&lt;/property&gt; &lt;/bean&gt; ËøôÁßçÊñπÂºèÔºåÈÄöËøáclassÊèê‰æõÁöÑÊùÉÈôêÂÆöÂêçÔºåspringÂ∞±ÂèØ‰ª•Âà©Áî®ÂèçÂ∞ÑÊú∫Âà∂ÂàõÂª∫Ëøô‰∏™bean„ÄÇ demo2 123&lt;bean id="user" class="com.glmapper.test.UserFactory" factory-method="getUser"&gt; &lt;constructor-arg value="glmapper"&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; ËøôÁßçÊòØÂà©Áî®ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÊù•ÂàõÂª∫ÁöÑÔºåÊèê‰æõÁöÑclassÂπ∂ÈùûÊòØÁ±ªÁöÑÊùÉÈôêÂÆöÂêçÔºå ËÄåÊòØÈùôÊÄÅÂ∑•ÂéÇÁöÑÂÖ®Á±ªÂêçÔºõÈô§Ê≠§‰πãÂ§ñËøòÈúÄË¶ÅÊåáÂÆöËé∑ÂèñbeanÁöÑÊñπÊ≥ïÔºàÊ≠§Â§ÑÊòØgetUserÔºâÂíåÂèÇÊï∞ÔºàÂèÇÊï∞ÊòØglmapperÔºâ„ÄÇ demo3 123456789101112131415161718192021222324252627&lt;bean id=&quot;userFactory&quot; class=&quot;com.glmapper.test.UserInstanceFactory&quot;&gt; &lt;!--Áî®‰∏Ä‰∏™ÈõÜÂêàÊù•‰øùÂ≠òÊàëÂΩìÂâçÁöÑÂØπË±°ÂÆû‰æã--&gt; &lt;property name=&quot;map&quot;&gt; &lt;map&gt; &lt;entry key=&quot;user1&quot;&gt; &lt;bean class=&quot;com.glmapper.test.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;glmapper1&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;/entry&gt; &lt;entry key=&quot;user2&quot;&gt; &lt;bean class=&quot;com.glmapper.test.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;glmapper2&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; //ÂÆû‰æã1 &lt;bean id=&quot;user1&quot; factory-bean=&quot;userFactory&quot; factory-method=&quot;getUserInstance&quot;&gt; &lt;constructor-arg value=&quot;user1&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;//ÂÆû‰æã2 &lt;bean id=&quot;user2&quot; factory-bean=&quot;userFactory&quot; factory-method=&quot;getUserInstance&quot;&gt; &lt;constructor-arg value=&quot;user2&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean ËøôÁßçÊñπÂºèÂíåÈùôÊÄÅÂ∑•ÂéÇÁöÑÂå∫Âà´Âú®‰∫éÊàë‰ª¨ÈúÄË¶ÅÂÖàÂÆû‰æãÂåñ‰∏Ä‰∏™Â∑•ÂéÇÂØπË±°ÔºåÁÑ∂ÂêéÊâçËÉΩ‰ΩøÁî®Ëøô‰∏™Â∑•ÂéÇÂØπË±°Êù•ÂàõÂª∫Êàë‰ª¨ÁöÑbean„ÄÇgetUserInstanceÈÄöËøákeyÂÄºÊù•Ëé∑ÂèñÊàë‰ª¨Â∑≤ÁªèÂÆû‰æãÂåñÂ•ΩÁöÑÂØπË±°ÔºàÂΩìÁÑ∂ÊñπÂºèÊúâÂæàÂ§öÔºåÊ≠§Â§Ñ‰ª•mapÊù•‰∏æ‰∏™‰æãÂ≠êÔºâ„ÄÇÂÖ≥‰∫éÊ≥®Ëß£ÁöÑÂíå‰ΩøÁî®FactoryBeanÊé•Âè£ÁöÑËøôÈáåÂ∞±ÊöÇÊó∂‰∏çËØ¥ÔºåÂêéÊúüÂÜçËÅä OKÔºåÁªßÁª≠Êù•ÂàÜÈíüÔºå‰∏äÈù¢ËØ¥Âà∞ÁöÑÊòØ‰ª•Â∑•ÂéÇÊñπÊ≥ïÂàõÂª∫beanÔºåÂÖ∑‰ΩìÁöÑÊ∫êÁ†ÅÊúâÁÇπÈïøÔºåËøôÈáåÂ∞±‰∏çÊîæ‰∫ÜÔºåÂ§ßÊ¶ÇÊÄùË∑ØÂ∞±Â¶Ç‰∏äÈù¢ÊâÄÊèêÂà∞ÁöÑÈÇ£Âá†ÁßçÊñπÂºè„ÄÇÊé•‰∏ãÊù•Áúã‰∏ãÂ∏∏ËßÅÁöÑ‰ΩøÁî®instantiateBeanÊñπÂºèÔºà‰ΩøÁî®ÂÆÉÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºâÊù•ÊûÑÂª∫beanÁöÑ‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526protected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) &#123; try &#123; Object beanInstance; final BeanFactory parent = this; //Ëé∑ÂèñÁ≥ªÁªüÂÆâÂÖ®Êé•Âè£„ÄÇ //Â¶ÇÊûúÂ∑≤Áªè‰∏∫ÂΩìÂâçÂ∫îÁî®Á®ãÂ∫èÂª∫Á´ã‰∫ÜÂÆâÂÖ®ÁÆ°ÁêÜÂô®ÔºåÂàôËøîÂõûËØ•ÂÆâÂÖ®ÁÆ°ÁêÜÂô®; //Âê¶ÂàôÔºåËøîÂõûnull„ÄÇ if (System.getSecurityManager() != null) &#123; beanInstance = AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123; @Override public Object run() &#123; return getInstantiationStrategy().instantiate(mbd, beanName, parent); &#125; &#125;, getAccessControlContext()); &#125; else &#123; beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent); &#125; BeanWrapper bw = new BeanWrapperImpl(beanInstance); initBeanWrapper(bw); return bw; &#125; catch (Throwable ex) &#123; //ÂºÇÂ∏∏ÔºöInstantiation of bean failed &#125;&#125; ÂèØ‰ª•ÁúãÂá∫Ôºå‰∏äÈù¢ÁöÑÂàõÂª∫ÈÉΩÊòØÈÄöËøáÔºö 1getInstantiationStrategy().instantiate(mbd, beanName, parent); ËøôÊ†∑‰∏ÄÊÆµ‰ª£Á†ÅÊù•ÂÆåÊàêÁöÑÔºåÊòØÁöÑÔºåËøôÈáåÂ∑≤ÁªèÂø´Êé•ËøëÁúüÁõ∏‰∫Ü„ÄÇ‰ªéËØ≠‰πâ‰∏äÊù•ÂàÜÊûêÔºåÂÖàÊòØËé∑Âèñ‰∫Ü‰∏ÄÁßçÁ≠ñÁï•ÔºåÁÑ∂ÂêéÂà©Áî®ÂΩìÂâçËé∑ÂèñÁöÑÁ≠ñÁï•ÂÜçÂéªÊâßË°åÂÆû‰æãÂåñ„ÄÇOKÔºåÊàë‰ª¨Áúã‰∏ãgetInstantiationStrategy()ÊãøÂà∞ÁöÑÊòØ‰ªÄ‰πàÔºö 123456//ËøîÂõûÂÆû‰æãÂåñÁ≠ñÁï•Áî®‰∫éÂàõÂª∫beanÂÆû‰æã„ÄÇprotected InstantiationStrategy getInstantiationStrategy() &#123; return this.instantiationStrategy;&#125;//ÈªòËÆ§ÁöÑÂÆû‰æãÂåñÊµãËØïÊòØ‰ΩøÁî®CGLIB‰ª£ÁêÜprivate InstantiationStrategy instantiationStrategy = new CglibSubclassingInstantiationStrategy(); ÁúãÂà∞ËøôÈáåÊàë‰ª¨Ê∏ÖÊ•ö‰∫ÜÔºåÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®spring‰∏≠‰ºö‰ΩøÁî®CglibÊù•ËøõË°åbeanÁöÑÂÆû‰æãÂåñÔºàÂÖ≥‰∫écglibÊ≠§Â§Ñ‰∏çÂÜçËµòËø∞Ôºâ„ÄÇÊàë‰ª¨Áúã‰∏ãCglibSubclassingInstantiationStrategyËøô‰∏™Á±ªÁöÑÁî≥ÊòéÔºö 1public class CglibSubclassingInstantiationStrategy extends SimpleInstantiationStrategy ÂÆÉÁªßÊâøËá™SimpleInstantiationStrategy ÔºåËøô‰∏™ÂèàÊòØ‰ªÄ‰πàÈ¨ºÂë¢Ôºü SimpleInstantiationStrategyÊòØSpringÁî®Êù•ÁîüÊàêBeanÂØπË±°ÁöÑÈªòËÆ§Á±ªÔºåÂú®Ëøô‰∏™Á±ª‰∏≠Êèê‰æõ‰∫Ü‰∏§ÁßçÂÆû‰æãÂåñjavaÂØπË±°ÁöÑÊñπÊ≥ïÔºå‰∏ÄÁßçÊòØÂü∫‰∫éjavaËá™Ë∫´ÂèçÂ∞ÑÊú∫Âà∂ÁöÑBeanUtilsÔºåËøòÊúâ‰∏ÄÁßçÂ∞±ÊòØÂü∫‰∫éCglib„ÄÇ Â¶Ç‰ΩïÂàõÂª∫ÁöÑÂ∞±‰∏çËØ¥‰∫ÜÔºõÂà∞ËøôÈáåcreateBeanInstanceÂ∞±ËØ¥ÂÆå‰∫ÜÔºàBeanÂ∑≤ÁªèÂàõÂª∫‰∫ÜÔºâÔºõ‰ΩÜÊòØ‰ªÖ‰ªÖÊòØÂàõÂª∫ÔºåspringËøòÊ≤°ÊúâÂ§ÑÁêÜÂÆÉ‰ª¨ÔºåÊØîÂ¶ÇËØ¥beanÂØπË±°ÁöÑÂ±ûÊÄßÔºå‰æùËµñÂÖ≥Á≥ªÁ≠âÁ≠â„ÄÇËøô‰∫õÂ∞±ÊòØ‰∏äÈù¢ÊèêÂà∞ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÊñπÊ≥ïpopulateBeanÔºõ Ëøô‰∏™ÊñπÊ≥ïÂÖ∂ÂÆûÂ∞±ÂÅö‰∫Ü‰∏Ä‰ª∂‰∫ãÔºö‰ΩøÁî®beanÂÆö‰πâ‰∏≠ÁöÑÂ±ûÊÄßÂÄºÂú®ÁªôÂÆöÁöÑBeanWrapper‰∏≠Â°´ÂÖÖbeanÂÆû‰æã„ÄÇÂàÜÊÆµÊù•ÁúãÔºö‰∏ãÈù¢ËøôÊÆµ‰ª£Á†ÅÊòØÂÖàÂ∞ÜBeanDefinition‰∏≠ËÆæÁΩÆÁöÑpropertyÂÄºÂ∞ÅË£ÖÊàêPropertyValuesÔºåÁÑ∂ÂêéÊ£ÄÊµãÊàë‰ª¨ÁöÑBeanWrapperÊòØÂê¶‰∏∫NullÔºåÂ¶ÇÊûú‰∏∫nullÂàôÊäõÂá∫ÂºÇÂ∏∏ÊàñËÄÖË∑≥ËøáÂΩìÂâçÁ©∫ÂÆû‰æãËµãÂÄºÈò∂ÊÆµ1234567891011//Ëé∑ÂèñÂà∞BeanDefinition‰∏≠ËÆæÁΩÆÁöÑpropertyÂÄºÔºåÂ∞ÅË£ÖÊàêPropertyValuesPropertyValues pvs = mbd.getPropertyValues();if (bw == null) &#123; if (!pvs.isEmpty()) &#123; //ÂºÇÂ∏∏ÔºöCannot apply property values to null instance &#125; else &#123; // Skip property population phase for null instance. return; &#125;&#125; ‰∏ãÈù¢ËøôÊÆµ‰ª£Á†ÅÁöÑÊÑèÊÄùÊòØÁªô‰ªª‰ΩïInstantiationAwareBeanPostProcessorsÊèê‰æõÂú®ËÆæÁΩÆÂ±ûÊÄß‰πãÂâç‰øÆÊîπbeanÁä∂ÊÄÅÁöÑÊú∫‰ºö„ÄÇ12345678910111213141516boolean continueWithPropertyPopulation = true;if (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123; for (BeanPostProcessor bp : getBeanPostProcessors()) &#123; if (bp instanceof InstantiationAwareBeanPostProcessor) &#123; InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp; if (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123; continueWithPropertyPopulation = false; break; &#125; &#125; &#125;&#125;if (!continueWithPropertyPopulation) &#123; return;&#125; ‰∏ãÈù¢Â∞±ÊòØÂØπÂÖ∑‰ΩìÊ≥®ÂÖ•ÊñπÂºèÁöÑÂ§ÑÁêÜÔºö 1234567891011121314151617//Â§ÑÁêÜautowireÁöÑÊ≥®ÂÖ•ÔºõÂèØ‰ª•Ê†πÊçÆbeanÁöÑÂêçÁß∞ÂíåÁ±ªÂûãÊù•Ê≥®ÂÖ•if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME || mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; MutablePropertyValues newPvs = new MutablePropertyValues(pvs); // ÂàôÊ†πÊçÆÂêçÁß∞Ê∑ªÂä†Âü∫‰∫éËá™Âä®Ë£ÖÈÖçÁöÑÂ±ûÊÄßÂÄº„ÄÇ if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) &#123; autowireByName(beanName, mbd, bw, newPvs); &#125; // Ê†πÊçÆÁ±ªÂûãÊ∑ªÂä†Âü∫‰∫éËá™Âä®Ë£ÖÈÖçÁöÑÂ±ûÊÄßÂÄº„ÄÇ if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; autowireByType(beanName, mbd, bw, newPvs); &#125; pvs = newPvs;&#125; ‰∏§‰∏™Âà§Êñ≠Êù°‰ª∂ÔºåÂú®Êª°Ë∂≥ÁöÑÊÉÖÂÜµ‰∏ãÂÅöÁöÑÂ§ÑÁêÜÂàÜÂà´ÊòØÔºö Âú®Â∑•ÂéÇÂ∞ÜÁªôÂÆöÂ±ûÊÄßÂÄºÂ∫îÁî®Âà∞ÁªôÂÆöÁöÑbeanÂêéÔºåÂØπÂÖ∂ËøõË°åÂêéÂ§ÑÁêÜ„ÄÇ ÂÖÅËÆ∏Ê£ÄÊü•ÊâÄÊúâÁöÑ‰æùËµñÂÖ≥Á≥ªÊòØÂê¶Ë¢´Êª°Ë∂≥Ôºå‰æãÂ¶ÇÂü∫‰∫ébeanÂ±ûÊÄßËÆæÁΩÆÂô®‰∏äÁöÑ‚ÄúRequired‚ÄùÊ≥®Ëß£„ÄÇËøòÂÖÅËÆ∏ÊõøÊç¢Ë¶ÅÂ∫îÁî®ÁöÑÂ±ûÊÄßÂÄºÔºåÈÄöÂ∏∏ÈÄöËøáÂàõÂª∫Âü∫‰∫éÂéüÂßãPropertyValuesÁöÑÊñ∞MutablePropertyValuesÂÆû‰æãÔºåÊ∑ªÂä†ÊàñÂà†Èô§ÁâπÂÆöÂÄº„ÄÇ ÊâßË°å‰æùËµñÊÄßÊ£ÄÊü• 123456789101112131415161718192021222324//ËøîÂõûËøô‰∏™Â∑•ÂéÇÊòØÂê¶Êã•Êúâ‰∏Ä‰∏™InstantiationAwareBeanPostProcessorboolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();//ËøîÂõû‰æùËµñÊ£ÄÊü•‰ª£Á†Å„ÄÇboolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE);if (hasInstAwareBpps || needsDepCheck) &#123;//‰ªéÁªôÂÆöÁöÑBeanWrapper‰∏≠ÊèêÂèñ‰∏ÄÁªÑÂ∑≤ËøáÊª§ÁöÑPropertyDescriptorsÔºå//‰∏çÂåÖÊã¨Âú®Ë¢´ÂøΩÁï•ÁöÑ‰æùËµñÊÄßÊé•Âè£‰∏äÂÆö‰πâÁöÑË¢´ÂøΩÁï•ÁöÑ‰æùËµñÁ±ªÂûãÊàñÂ±ûÊÄßÔºàËØëÊ≥®Ôºâ„ÄÇ PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching); if (hasInstAwareBpps) &#123; for (BeanPostProcessor bp : getBeanPostProcessors()) &#123; if (bp instanceof InstantiationAwareBeanPostProcessor) &#123; InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp; pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName); if (pvs == null) &#123; return; &#125; &#125; &#125; &#125; if (needsDepCheck) &#123; checkDependencies(beanName, mbd, filteredPds, pvs); &#125;&#125; ÊúÄÂêéÊòØÂØπÂ±ûÊÄßËøõË°åÊ≥®ÂÖ•Ôºö 1applyPropertyValues(beanName, mbd, bw, pvs); Ëøô‰∏™ÊñπÊ≥ïÊèèËø∞ÁöÑÊòØÂØπÂ±ûÊÄßËøõË°åËß£ÊûêÁÑ∂ÂêéÊ≥®ÂÖ•ÁöÑËøáÁ®ãÔºõÂÖàÊù•ÂàÜÊûê‰∏ãapplyPropertyValuesÁöÑÁî≥ÊòéÔºö12protected void applyPropertyValues(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs) beanName beanÂêçÁß∞ mbd ÂêàÂπ∂ÁöÑbean definition bw ÂåÖË£ÖÁõÆÊ†áÂØπË±°ÁöÑBeanWrapper pvs Êñ∞ÁöÑÂ±ûÊÄßÂÄº ‰ª£Á†ÅÂàÜÊÆµÊù•ÁúãÔºö ÂèÇÊï∞È™åËØÅ 123if (pvs == null || pvs.isEmpty()) &#123; return;&#125; pvsÂèÇÊï∞Â§ÑÁêÜ 1234567891011121314151617if (pvs instanceof MutablePropertyValues) &#123; mpvs = (MutablePropertyValues) pvs; if (mpvs.isConverted()) &#123; // ‰ΩøÁî®È¢ÑÂÖàËΩ¨Êç¢ÂêéÁöÑÂÄº„ÄÇ try &#123; bw.setPropertyValues(mpvs); return; &#125; catch (BeansException ex) &#123; //ÂºÇÂ∏∏ÔºöError setting property values &#125; &#125; original = mpvs.getPropertyValueList(); &#125; else &#123; original = Arrays.asList(pvs.getPropertyValues()); &#125; valueResolverÊù•Ëß£ÊûêBeanDefinition 12BeanDefinitionValueResolver valueResolver = new BeanDefinitionValueResolver(this, beanName, mbd, converter); ‰∏∫Ëß£ÊûêÂÄºÂàõÂª∫‰∏Ä‰∏™ÂâØÊú¨ÔºåÊ≥®ÂÖ•Âà∞bean‰∏≠ÁöÑÊòØÂâØÊú¨ÁöÑÊï∞ÊçÆ 12// Create a deep copy, resolving any references for values.List&lt;PropertyValue&gt; deepCopy = new ArrayList&lt;PropertyValue&gt;(original.size()); ÈÅçÂéÜÂ§ÑÁêÜ 123456789101112131415161718192021222324252627282930313233343536boolean resolveNecessary = false;for (PropertyValue pv : original) &#123; //ËøîÂõûÊ≠§ÊåÅÊúâËÄÖÊòØÂê¶Â∑≤ÁªèÂåÖÂê´ËΩ¨Êç¢ÂêéÁöÑÂÄºÔºàtrueÔºâÔºåËøòÊòØÈúÄË¶ÅËΩ¨Êç¢ÂÄºÔºàfalseÔºâ„ÄÇ if (pv.isConverted()) &#123; deepCopy.add(pv); &#125; else &#123; String propertyName = pv.getName(); Object originalValue = pv.getValue(); //Áúã‰∏ãÈù¢ÁöÑÊ≥®ÈáäresolveValueIfNecessary Object resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue); Object convertedValue = resolvedValue; boolean convertible = bw.isWritableProperty(propertyName) &amp;&amp; !PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName); if (convertible) &#123; convertedValue = convertForProperty(resolvedValue, propertyName, bw, converter); &#125; // ÂèØËÉΩÂ∞ÜËΩ¨Êç¢ÁöÑÂÄºÂ≠òÂÇ®Âú®ÂêàÂπ∂ÁöÑbeanÂÆö‰πâ‰∏≠Ôºå‰ª•ÈÅøÂÖç‰∏∫ÊØè‰∏™ÂàõÂª∫ÁöÑbeanÂÆû‰æãÈáçÊñ∞ËΩ¨Êç¢„ÄÇ if (resolvedValue == originalValue) &#123; if (convertible) &#123; pv.setConvertedValue(convertedValue); &#125; deepCopy.add(pv); &#125; else if (convertible &amp;&amp; originalValue instanceof TypedStringValue &amp;&amp; !((TypedStringValue) originalValue).isDynamic() &amp;&amp; !(convertedValue instanceof Collection || ObjectUtils.isArray(convertedValue))) &#123; pv.setConvertedValue(convertedValue); deepCopy.add(pv); &#125; else &#123; resolveNecessary = true; deepCopy.add(new PropertyValue(pv, convertedValue)); &#125; &#125;&#125; resolveValueIfNecessary ÁªôÂÆö‰∏Ä‰∏™PropertyValueÔºåËøîÂõû‰∏Ä‰∏™valueÔºåÂøÖË¶ÅÊó∂Ëß£ÊûêÂØπÂ∑•ÂéÇ‰∏≠ÂÖ∂‰ªñbeanÁöÑÂºïÁî®„ÄÇvalueÂèØ‰ª•ÊòØÔºö ‰∏Ä‰∏™BeanDefinitionÔºåÂÆÉÂØºËá¥ÂàõÂª∫‰∏Ä‰∏™Áõ∏Â∫îÁöÑÊñ∞ÁöÑbeanÂÆû‰æã„ÄÇ SingletonÊ†áÂøóÂíåËøôÊ†∑ÁöÑ‚Äùinner beans‚ÄùÁöÑÂêçÂ≠óË¢´ÂøΩÁï•ÔºöÂÜÖÈÉ®beansÊòØÂåøÂêçÂéüÂûã„ÄÇ RuntimeBeanReference(ÂøÖÈ°ªËß£Êûê) ManagedList ManagedSet ManagedMap ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÂØπË±°ÊàñnullÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆÉÊòØÂ≠§Á´ãÁöÑ„ÄÇ ‰∏ãÈù¢ËøôÊÆµ‰ª£Á†ÅÊó∂‰æùËµñÊ≥®ÂÖ•ÂèëÁîüÁöÑÂú∞ÊñπÔºåÂÖ∂ÂÆûÈôÖ‰∏äÊòØÂú®BeanWrapperImpl‰∏≠Êù•ÂÆåÊàê„ÄÇ123456try &#123; bw.setPropertyValues(new MutablePropertyValues(deepCopy));&#125;catch (BeansException ex) &#123; //ÂºÇÂ∏∏ÔºöError setting property values&#125; ‰∏äÈù¢ËØ¥Âà∞springÊòØÈÄöËøáBeanDefinitionValueResolverÊù•Ëß£ÊûêBeanDefinitionÁöÑÔºåÁÑ∂ÂêéÂÜçÊ≥®ÂÖ•Âà∞property‰∏≠ÔºåÂÖ≥‰∫éËøô‰∏™ËøáÁ®ãÂú®‰∏ã‰∏ÄÁØá‰∏≠Êù•ËØ¥„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•Ôºà‰∏ÄÔºâgetBean]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase8%2F</url>
    <content type="text"><![CDATA[Âú®SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanFactoryÁöÑÂàõÂª∫ÊñáÁ´†‰∏≠Êàë‰ª¨Ë∞àÂà∞‰∫ÜBeanFactoryËøôÂÆπÂô®ÔºåËøô‰∏™ÈáåÈù¢Êèê‰æõ‰∫ÜÊ≥®ÂÖ•ÁöÑÂÆûÁé∞Êé•Âè£„ÄÇÂÖ∂ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ËøòÈúÄË¶Å‰ªéAbstractBeanFactoryÂíåDefaultListableBeanFactory‰∏≠Êù•Áúã„ÄÇ‰ªäÂ§©Â∞±ÂÖàÊí∏‰∏Ä‰∏ãAbstractBeanFactoryËøô‰∏™Á±ª‰∏≠ÁöÑgetBeanËøô‰∏™ÊñπÊ≥ï„ÄÇ 1„ÄÅgetBeanÊñπÊ≥ï getBeanÊèê‰æõ‰∫ÜÂõõ‰∏™ÈáçËΩΩÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö12345678910111213141516171819//ÈÄöËøánameËé∑ÂèñBean@Overridepublic Object getBean(String name) throws BeansException &#123; return doGetBean(name, null, null, false);&#125;//ÈÄöËøánameÂíåÁ±ªÂûãËé∑ÂèñBean@Overridepublic &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException &#123; return doGetBean(name, requiredType, null, false);&#125;//ÈÄöËøánameÂíåÂØπË±°ÂèÇÊï∞Ëé∑ÂèñBean@Overridepublic Object getBean(String name, Object... args) throws BeansException &#123; return doGetBean(name, null, args, false);&#125;//ÈÄöËøáname„ÄÅÁ±ªÂûãÂíåÂèÇÊï∞Ëé∑ÂèñBeanpublic &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType, Object... args) throws BeansException &#123; return doGetBean(name, requiredType, args, false);&#125; ‰ªéËøôÂõõ‰∏™ÈáçËΩΩÊñπÊ≥ïÁöÑÊñπÊ≥ï‰Ωì‰∏≠ÂèØ‰ª•ÁúãÂá∫Ôºå‰ªñ‰ª¨ÈÉΩÊòØÈÄöËøádoGetBeanÊù•ÂÆûÁé∞ÁöÑ„ÄÇÊâÄ‰ª•doGetBeanÂÖ∂ÂÆûÊâçÊòØÁúüÊ≠£Ëé∑ÂèñBeanÁöÑÂú∞ÊñπÔºå‰πüÊòØËß¶Âèë‰æùËµñÊ≥®ÂÖ•ÂèëÁîüÁöÑÂú∞Êñπ„ÄÇÔºàËøô‰∏™ÊñπÊ≥ïÊØîËæÉÈïøÔºåÂàÜÊÆµÊù•ËØ¥Ôºâ 2„ÄÅdoGetBean ÂÖàÊù•Áúã‰∏ãÊñπÊ≥ïÁöÑÂÆö‰πâÔºö 1234@SuppressWarnings("unchecked") protected &lt;T&gt; T doGetBean( final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly) throws BeansException &#123; name Ë¶ÅÊ£ÄÁ¥¢ÁöÑbeanÁöÑÂêçÁß∞ requiredType Ë¶ÅÊ£ÄÁ¥¢ÁöÑbeanÊâÄÈúÄÁöÑÁ±ªÂûã args ‰ΩøÁî®ÊòæÂºèÂèÇÊï∞ÂàõÂª∫beanÂÆû‰æãÊó∂‰ΩøÁî®ÁöÑÂèÇÊï∞Ôºà‰ªÖÂú®ÂàõÂª∫Êñ∞ÂÆû‰æãÊó∂Â∫îÁî®ÔºåËÄå‰∏çÊòØÂú®Ê£ÄÁ¥¢Áé∞ÊúâÂÆû‰æãÊó∂Â∫îÁî®Ôºâ typeCheckOnly ÊòØÂê¶‰∏∫Á±ªÂûãÊ£ÄÊü•ËÄåËé∑ÂæóÂÆû‰æãÔºåËÄå‰∏çÊòØÂÆûÈôÖ‰ΩøÁî® 12345678//ËøîÂõûbeanÂêçÁß∞ÔºåÂâ•Á¶ªÂ∑•ÂéÇÂºïÁî®ÂâçÁºÄÔºåÂπ∂Â∞ÜÂà´ÂêçËß£Êûê‰∏∫ËßÑËåÉÂêçÁß∞„ÄÇfinal String beanName = transformedBeanName(name);//Â£∞ÊòéÂΩìÂâçÈúÄË¶ÅËøîÂõûÁöÑbeanÂØπË±°Object bean;// ÂÖà‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñbeanÔºåÂ§ÑÁêÜÂ∑≤ÁªèË¢´ÂàõÂª∫ÁöÑÂçï‰æãÊ®°ÂºèÁöÑbeanÔºå//ÂØπ‰∫éÊ≠§Á±ªbeanÁöÑËØ∑Ê±Ç‰∏çÈúÄË¶ÅÈáçÂ§çÁöÑÂàõÂª∫(singleton)Object sharedInstance = getSingleton(beanName); Â¶ÇÊûúÂΩìÂâçËé∑ÂèñÂà∞ÁöÑsharedInstance‰∏ç‰∏∫nullÂπ∂‰∏îÂèÇÊï∞‰∏∫Á©∫ÔºåÂàôËøõË°åFactoryBeanÁöÑÁõ∏ÂÖ≥Â§ÑÁêÜÔºåÂπ∂Ëé∑ÂèñFactoryBeanÁöÑÂ§ÑÁêÜÁªìÊûú„ÄÇ1234567891011121314if (sharedInstance != null &amp;&amp; args == null) &#123; if (logger.isDebugEnabled()) &#123; //ËøîÂõûÊåáÂÆöÁöÑsingleton beanÊòØÂê¶Ê≠£Âú®ÂàõÂª∫ÔºàÂú®Êï¥‰∏™Â∑•ÂéÇÂÜÖÔºâ„ÄÇ if (isSingletonCurrentlyInCreation(beanName)) &#123; logger.debug("Returning eagerly cached instance of singleton bean '" + beanName +"' that is not fully initialized yet - a consequence of a circular reference"); &#125; else &#123; logger.debug("Returning cached instance of singleton bean '" + beanName + "'"); &#125; &#125; //ÂÆåÊàêFactoryBeanÁöÑÁõ∏ÂÖ≥Â§ÑÁêÜÔºåÂπ∂Áî®Êù•Ëé∑ÂèñFactoryBeanÁöÑÂ§ÑÁêÜÁªìÊûú bean = getObjectForBeanInstance(sharedInstance, name, beanName, null);&#125; Â¶ÇÊûúÂΩìÂâçËé∑ÂèñÂà∞ÁöÑsharedInstance‰∏∫nullÔºåÊàë‰ª¨ÂÜçÊù•Áúã‰∏ãÂÅö‰∫ÜÂì™‰∫õÂ§ÑÁêÜÔºà‰∏ãÈù¢ÁöÑÈÉΩÂú®‰∏Ä‰∏™Â§ßÁöÑelseÈáåÈù¢ÔºâÔºö 123else &#123; //ÂàÜËß£Âà∞‰∏ãÈù¢&#125; 1234//Âú®ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÔºåËøîÂõûÊåáÂÆöÁöÑprototype beanÊòØÂê¶Ê≠£Âú®ÂàõÂª∫„ÄÇif (isPrototypeCurrentlyInCreation(beanName)) &#123; throw new BeanCurrentlyInCreationException(beanName);&#125; ‰∏ãÈù¢ËøôÊÆµÁöÑ‰ΩúÁî®ÊòØÂØπIocÂÆπÂô®‰∏≠ÁöÑBeanDefinitionÊòØÂê¶Â≠òÂú®ËøõË°åÊ£ÄÊµãÔºåÂÖàÊòØÊ£ÄÊµãÂΩìÂâçBeanFactory‰∏≠ÊòØÂê¶ËÉΩÂ§üËé∑ÂèñÂà∞ÔºåÂ¶ÇÊûúÂèñ‰∏çÂà∞ÂàôÁªßÁª≠Âà∞Âèå‰∫≤ÂÆπÂô®‰∏≠ËøõË°åÂ∞ùËØïËé∑ÂèñÔºåÂ¶ÇÊûúÂèå‰∫≤ËøòÊòØÂèñ‰∏çÂà∞ÔºåÂàôÁªßÁª≠Âêë‰∏ä‰∏ÄÁ∫ßÁà∂ÂÆπÂô®‰∏≠Â∞ùËØïËé∑Âèñ„ÄÇ1234567891011121314// Ê£ÄÊü•ËØ•Â∑•ÂéÇÊòØÂê¶Â≠òÂú®beanÂÆö‰πâ„ÄÇBeanFactory parentBeanFactory = getParentBeanFactory();if (parentBeanFactory != null &amp;&amp; !containsBeanDefinition(beanName)) &#123; // Â¶ÇÊûúÊ≤°ÊúâÔºåÂàôÁªßÁª≠Ê£ÄÊü•Áà∂Á±ª String nameToLookup = originalBeanName(name); if (args != null) &#123; // Áî®ÊòéÁ°ÆÁöÑÂèÇÊï∞‰ª£Ë°®Áà∂È°π„ÄÇ return (T) parentBeanFactory.getBean(nameToLookup, args); &#125; else &#123; // Â¶ÇÊûúÊ≤°Êúâargs - &gt;ÂßîÊâòÁªôÊ†áÂáÜÁöÑgetBeanÊñπÊ≥ï„ÄÇ return parentBeanFactory.getBean(nameToLookup, requiredType); &#125;&#125; Â∞ÜÊåáÂÆöÁöÑbeanÊ†áËÆ∞‰∏∫Â∑≤ÁªèÂàõÂª∫ÔºàÊàñÂç≥Â∞ÜÂàõÂª∫ÔºâÔºõËøôÈáåÂÖÅËÆ∏beanÂ∑•ÂéÇ‰ºòÂåñÂÖ∂ÁºìÂ≠ò‰ª•ÈáçÂ§çÂàõÂª∫ÊåáÂÆöÁöÑbean„ÄÇ123if (!typeCheckOnly) &#123; markBeanAsCreated(beanName);&#125; ÂÖàÊ†πÊçÆbeanNameÊù•Ëé∑ÂèñBeanDefinitionÔºåÁÑ∂ÂêéËé∑ÂèñÂΩìÂâçbeanÁöÑÊâÄÊúâ‰æùËµñbeanÔºåËøôÈáåÊòØÈÄöËøáÈÄíÂΩíË∞ÉÁî®getBeanÊù•ÂÆåÊàêÔºåÁõ¥Âà∞Ê≤°Êúâ‰ªª‰Ωï‰æùËµñÁöÑbean‰∏∫Ê≠¢„ÄÇ12345678910111213141516final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);//Ê£ÄÊü•ÁªôÂÆöÁöÑÂêàÂπ∂beanÂÆö‰πâÔºåÂèØËÉΩÊäõÂá∫È™åËØÅÂºÇÂ∏∏„ÄÇcheckMergedBeanDefinition(mbd, beanName, args);// ‰øùËØÅÂΩìÂâçbean‰æùËµñÁöÑbeanÁöÑÂàùÂßãÂåñ„ÄÇString[] dependsOn = mbd.getDependsOn();if (dependsOn != null) &#123; for (String dep : dependsOn) &#123; if (isDependent(beanName, dep)) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "Circular depends-on relationship between '" + beanName + "' and '" + dep + "'"); &#125; registerDependentBean(dep, beanName); //ÈÄíÂΩíÂ§ÑÁêÜ‰æùËµñbean getBean(dep); &#125;&#125; ‰∏ãÈù¢ËøôÊÆµÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™beanÂÆû‰æãÔºõËøôÈáåÈÄöËøáË∞ÉÁî®getSingletonÊñπÊ≥ïÊù•ÂàõÂª∫‰∏Ä‰∏™Âçï‰æãbeanÂÆû‰æãÔºõ‰ªé‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºågetSingletonÁöÑË∞ÉÁî®ÊòØÈÄöËøágetObjectËøô‰∏™ÂõûË∞ÉÂáΩÊï∞Êù•Èó¥Êé•Ë∞ÉÁî®createBeanÂÆåÊàêÁöÑ„ÄÇ 12345678910111213141516171819if (mbd.isSingleton()) &#123; sharedInstance = getSingleton(beanName, new ObjectFactory&lt;Object&gt;() &#123; //ÂõûË∞ÉÂáΩÊï∞getObject @Override public Object getObject() throws BeansException &#123; try &#123; //ÂàõÂª∫bean return createBean(beanName, mbd, args); &#125; catch (BeansException ex) &#123; //ÂèëÁîüÂºÇÂ∏∏ÂàôÈîÄÊØÅ destroySingleton(beanName); throw ex; &#125; &#125; &#125;); //Ëé∑ÂèñÁªôÂÆöbeanÂÆû‰æãÁöÑÂØπË±°ÔºåÊó†ËÆ∫ÊòØbeanÂÆû‰æãÊú¨Ë∫´ÔºåËøòÊòØFactoryBeanÂàõÂª∫ÁöÑÂØπË±°„ÄÇ bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);&#125; ‰∏ãÈù¢ÊòØÂàõÂª∫prototype bean123456789101112else if (mbd.isPrototype()) &#123; Object prototypeInstance = null; try &#123; beforePrototypeCreation(beanName); //ÂàõÂª∫prototype bean prototypeInstance = createBean(beanName, mbd, args); &#125; finally &#123; afterPrototypeCreation(beanName); &#125; bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);&#125; ÊúÄÂêéÊòØÂØπÂàõÂª∫ÁöÑbeanËøõË°åÁ±ªÂûãÊ£ÄÊü•ÔºåÊ≤°ÊúâÈóÆÈ¢òÂ∞±ËøîÂõûÂ∑≤ÁªèÂàõÂª∫Â•ΩÁöÑbeanÔºõÊ≠§Êó∂Ëøô‰∏™beanÊòØÂåÖÂê´‰æùËµñÂÖ≥Á≥ªÁöÑbean 1234567891011121314if (requiredType != null &amp;&amp; bean != null &amp;&amp; !requiredType.isAssignableFrom(bean.getClass())) &#123; try &#123; return getTypeConverter().convertIfNecessary(bean, requiredType); &#125; catch (TypeMismatchException ex) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Failed to convert bean &apos;&quot; + name + &quot;&apos; to required type &apos;&quot; + ClassUtils.getQualifiedName(requiredType) + &quot;&apos;&quot;, ex); &#125; throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass()); &#125;&#125;//ËøîÂõûbeanreturn (T) bean; getBeanÊòØ‰æùËµñÊ≥®ÂÖ•ÁöÑËµ∑ÁÇπÔºå‰ªé‰∏äÈù¢ÁöÑÂàÜÊûêÂèØ‰ª•ÁúãÂá∫ÔºåbeanÁöÑÂàõÂª∫ÈÉΩÊòØÈÄöËøácreateBeanÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÂàõÂª∫ÁöÑ„ÄÇcreateBeanÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊòØÂú®AbstractAutowireCapableBeanFactory‰∏≠ÁöÑÔºåËøôÈáåcreateBean‰∏ç‰ªÖ‰ªÖË¥üË¥£ÂàõÂª∫beanÔºåËøòÈúÄË¶ÅÂÆåÊàêÂØπbeanÁöÑÂàùÂßãÂåñ„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºö‰æùËµñÊ≥®ÂÖ•-ÂºïË®Ä]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase7%2F</url>
    <content type="text"><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionÊ∫êÁ†ÅËß£Êûê SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ä) SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏≠) SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ã) Âú®‰∏äÈù¢ÂõõÁØáÊñáÁ´†‰∏≠Â§ßÊ¶ÇÂàÜÊûê‰∫Ü‰∏Ä‰∏ãBeanÁöÑËΩΩÂÖ•ÔºåÂÖ∂ÂÆûËøô‰∏™ËøáÁ®ãÂ∞±ÊòØÂú®IocÂÆπÂô®‰∏≠Âª∫Á´ãBeanDefinitionÁöÑÊï∞ÊçÆÊò†Â∞Ñ„ÄÇ‰ΩÜÊòØÂØπ‰∫éBeanÁöÑÂÆû‰æãÂåñÂπ∂Êú™Ê∂âÂèäÔºåÂú®‰πãÂâçÁöÑÂàÜÊûê‰∏≠‰πüÊèêÂà∞ÔºåbeanÁöÑÂÆû‰æãÂåñÊòØÂú®‰æùËµñÊ≥®ÂÖ•ÊòØÊâçÂÖ∑‰ΩìÂÆåÊàê„ÄÇ ÂÖ≥‰∫é‰æùËµñÊ≥®ÂÖ•ÂÖ≥‰∫éSpringÔºåÊàë‰ª¨ÊúÄÂÖàÊÉ≥Âà∞ÁöÑÂ∞±‰∏§‰∏™IocÂíåAopÔºõÁÑ∂ÂêéÂÖ≥‰∫éIocÊàë‰ª¨ÂèàËÉΩÁâµÊâØÂá∫‰∏§‰∏™ÔºöÊéßÂà∂ÂèçËΩ¨Âíå‰æùËµñÊ≥®ÂÖ•„ÄÇÊéßÂà∂ÂèçËΩ¨Âíå‰æùËµñÊ≥®ÂÖ•Âú®ÁΩë‰∏äË¢´Êó†Êï∞Â§ßÁ•û‰∫¶ÊàñËèúÈ∏üËß£ËØªËøáÔºåËøôÈáåÂ∞±‰∏çÁΩóÂàóÈÇ£‰∫õÊ¶ÇÂøµ‰∫ÜÔºåÁõ¥Êé•ÁúãÔºö ‰∏ç‰ΩøÁî®Spring1234567public class UserService &#123; //ÊâãÂä®new‰∏Ä‰∏™ UserDao userDao = new UserDaoImpl(); public int insertUser(String userName) &#123; return userDao.insertUser(userName); &#125;&#125; ‰ΩøÁî®Spring(‰ª•Ê≥®Ëß£ÊñπÂºè) 1234567public class UserService &#123; @Autowired private UserDao userDao; public int insertUser(String userName) &#123; return userDao.insertUser(userName); &#125;&#125; ÁúãËµ∑Êù•Ë≤å‰ººÊ≤°ÊúâÂï•ÂæàÂ§ßÁöÑÊîπÂèòÔºåÂå∫Âà´Âë¢Ôºü Êàë‰ª¨ÂÖàÊù•ÂàÜÊûê‰∏ãÂú®‰∏Ä‰∏™Á±ª‰∏≠Ëøô‰∏§ÁßçÁî≥ÊòéÁöÑÂå∫Âà´Ôºö UserDao userDao; userDaoÊòØUserDaoÁ±ªÂûãÁöÑÂºïÁî®ÂêçÁß∞„ÄÇ‰ªÖ‰ªÖÊòØÂ£∞Êòé‰∫Ü‰∏Ä‰∏™ÂèòÈáèÂºïÁî®ÂêçÁß∞„ÄÇÂπ∂Ê≤°ÊúâÂÅöÂÆû‰æãÂåñÔºåuserDaoÁöÑÂÆû‰æãÂåñÂèØ‰ª•ÈÄöËøásetÊñπÊ≥ïËøõË°åËÆæÁΩÆÔºàSpring‰∏≠‰πãÂâçÂ∏∏Áî®ÁöÑÂ∞±ÊòØsetÊñπÊ≥ïÊ≥®ÂÖ•ÔºâÔºõÂΩìÊàë‰ª¨ÂàùÂßãÂåñÊåÅÊúâuserDaoÁöÑËøô‰∏™Á±ªÊó∂Êàë‰ª¨Ëøò‰∏çÁü•ÈÅìuserDaoÂà∞Â∫ïÂÖ∑‰ΩìÊåáÂêëÂì™‰∏™Â†Ü‰∏≠ÁöÑÂØπË±°Âú∞ÂùÄ„ÄÇ UserDao userDao = new UserDaoImpl(); ËÄåËøô‰∏™ÔºåÁî≥Êòé‰∏Ä‰∏™ÂèòÈáèÂêçÁß∞ÔºåÂπ∂Â∞ÜuserDaoÁõ¥Êé•ÊåáÂêënew UserDaoImpl()ÂàõÂª∫ÁöÑÂØπË±°„ÄÇ Êàë‰ª¨Êù•ÁúãSpring‰∏≠ÂÖ≥‰∫éÊ≥®ÂÖ•‰πãÂêéÂØπË±°Âú∞ÂùÄ‰ª•Âèä‰∏ç‰ΩøÁî®Ê≥®ÂÖ•ÊñπÂºèÂØπË±°ÁöÑÂú∞ÂùÄÔºö 1„ÄÅÁõ¥Êé•Ê≥®ÂÖ•2„ÄÅÊ≥®ÂÖ•Ë¶ÜÁõñ‰∫ÜÊàëËá™Â∑±ÁöÑÂØπË±°3„ÄÅËá™Â∑±ÊâãÂä®new ÈÄöËøá‰∏äÈù¢‰∏âÂπÖÂõæÂèØ‰ª•ÊòéÊòæÁöÑÁúãÂá∫ÔºåËá™Â∑±ÊâãÂä®newÁöÑÂØπË±°Ê≤°Êúâ‰ΩøÁî®‰ª£ÁêÜÁöÑÊñπÂºèÔºåËÄåÊâòÁÆ°ÁªôSpringÊ≥®ÂÖ•ÁöÑÂØπË±°ÂùáÊòØÈÄöËøáÂä®ÊÄÅ‰ª£ÁêÜÊù•ÂÆåÊàêÁöÑ„ÄÇ ÂÖ≥‰∫éÂä®ÊÄÅ‰ª£ÁêÜÔºö„ÄäÁå™ÂºüÊã±Java„ÄãËøûËΩΩÁï™Â§ñÁØáÔºöJava‰ª£ÁêÜÔºà‰∏≠Ôºâ ÊÄªÁªìÔºöÂΩìÊüê‰∏™ËßíËâ≤(ÂèØËÉΩÊòØ‰∏Ä‰∏™JavaÂÆû‰æãÔºåË∞ÉÁî®ËÄÖ)ÈúÄË¶ÅÂè¶‰∏Ä‰∏™ËßíËâ≤(Âè¶‰∏Ä‰∏™JavaÂÆû‰æãÔºåË¢´Ë∞ÉÁî®ËÄÖ)ÁöÑÂçèÂä©Êó∂ÔºåÂú®Êú™‰ΩøÁî®SpringÊù•ÁÆ°ÁêÜBeanÁöÑÁ®ãÂ∫èËÆæËÆ°ËøáÁ®ã‰∏≠ÔºåÈÄöÂ∏∏Áî±Ë∞ÉÁî®ËÄÖÊù•ÂàõÂª∫Ë¢´Ë∞ÉÁî®ËÄÖÁöÑÂÆû‰æã„ÄÇ‰ΩÜÂú®SpringÈáåÔºåÂàõÂª∫Ë¢´Ë∞ÉÁî®ËÄÖÁöÑÂ∑•‰Ωú‰∏çÂÜçÁî±Ë∞ÉÁî®ËÄÖÊù•ÂÆåÊàêÔºåÂõ†Ê≠§Áß∞‰∏∫ÊéßÂà∂ÂèçËΩ¨;ÂàõÂª∫Ë¢´Ë∞ÉÁî®ËÄÖÂÆû‰æãÁöÑÂ∑•‰ΩúÈÄöÂ∏∏Áî±SpringÂÆπÂô®Êù•ÂÆåÊàêÔºåÁÑ∂ÂêéÊ≥®ÂÖ•Ë∞ÉÁî®ËÄÖÔºåÂõ†Ê≠§‰πüÁß∞‰∏∫‰æùËµñÊ≥®ÂÖ•„ÄÇ ‰∏â‰∏™ÈóÆÈ¢òÈÇ£‰πàÁé∞Âú®Ë¶ÅËÄÉËôëÈóÆÈ¢òÂ∞±ÊòØÔºå‰ªÄ‰πàÊó∂ÂÄô‰ºöËß¶ÂèëÊàë‰ª¨ÁöÑ‰æùËµñÊ≥®ÂÖ•Âë¢ÔºüBeanÁöÑÂÆû‰æãÂåñÊòØÂê¶ÂøÖÈ°ªÂú®‰æùËµñÊ≥®ÂÖ•Êó∂ÊâçËÉΩÂÆåÊàêÂë¢ÔºüÂú®Spring‰∏≠ÂèàÊòØÈÄöËøáÂì™‰∫õÁ±ªÊù•ÂÆåÊàêÊ≥®ÂÖ•Â∑•‰ΩúÁöÑÂë¢Ôºü 1„ÄÅ‰ªÄ‰πàÊó∂ÂÄô‰ºöËß¶ÂèëÊàë‰ª¨ÁöÑ‰æùËµñÊ≥®ÂÖ• Á≠îÔºöÁî®Êà∑Á¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Ëé∑ÂèñBeanÁöÑÊó∂ÂÄôÂá∫Âèë„ÄÇ 2„ÄÅBeanÁöÑÂÆû‰æãÂåñÊòØÂê¶ÂøÖÈ°ªÂú®‰æùËµñÊ≥®ÂÖ•Êó∂ÊâçËÉΩÂÆåÊàê Ëøô‰∏™ÂÖ∂ÂÆû‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂí±‰ª¨ÈÉΩÁü•ÈÅìBeanDefinition‰∏≠Êúâlazy-initËøôÊ†∑‰∏Ä‰∏™Â±ûÊÄßÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊéßÂà∂Ëøô‰∏™Â±ûÊÄßÁöÑËÆæÁΩÆÊù•ËÆ©ÂÆπÂô®ÂÆåÊàêÂØπBeanÁöÑÈ¢ÑÂÆû‰æãÂåñ„ÄÇÈ¢ÑÂÆû‰æãÂåñÂ∞±ÊòØËØ¥ÂÆÉÁöÑ‰æùËµñÊ≥®ÂÖ•ÊòØÂú®ÂÆû‰æãÂåñËøáÁ®ã‰∏≠ÂÆåÊàêÁöÑ„ÄÇ Á¨¨‰∏ÄÂíåÁ¨¨‰∫å‰∏™ÈóÆÈ¢òÂ∞Ü‰ºöÂú®ÂàÜÊûêÁ¨¨‰∏â‰∏™ÈóÆÈ¢òÁöÑÊó∂ÂÄôÊÖ¢ÊÖ¢ÁöÑÁªÜÂåñÂàÜÊûê„ÄÇÊâÄ‰ª•Á¨¨‰∏â‰∏™ÈóÆÈ¢òÂÖ∂ÂÆûÊ≤°Âï•È∏üÁî®Ôºå‰ΩÜ‰πüÊòØÊúÄÊúÄÊúÄÊ†∏ÂøÉÁöÑÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÂºïÂá∫ÂêéÈù¢ÂÖ≥‰∫é‰∏Ä‰∫õÂÖ∑‰ΩìÁ±ªÁöÑÂàÜÊûêÁöÑ„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöSpringÁöÑÁâàÊú¨ÂèòÊõ¥]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase0%2F</url>
    <content type="text"><![CDATA[SpringÊòØ‰∏Ä‰∏™ÂºÄÊîæÊ∫ê‰ª£Á†ÅÁöÑËÆæËÆ°Â±ÇÈù¢Ê°ÜÊû∂ÔºåÂÆÉËß£ÂÜ≥ÁöÑÊòØ‰∏öÂä°ÈÄªËæëÂ±ÇÂíåÂÖ∂‰ªñÂêÑÂ±ÇÁöÑÊùæËÄ¶ÂêàÈóÆÈ¢òÔºåÂõ†Ê≠§ÂÆÉÂ∞ÜÈù¢ÂêëÊé•Âè£ÁöÑÁºñÁ®ãÊÄùÊÉ≥Ë¥ØÁ©øÊï¥‰∏™Á≥ªÁªüÂ∫îÁî®„ÄÇSpringÊòØ‰∫é2003 Âπ¥ÂÖ¥Ëµ∑ÁöÑ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑJava ÂºÄÂèëÊ°ÜÊû∂ÔºåÁî±Rod JohnsonÂàõÂª∫„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåSpringÊòØ‰∏Ä‰∏™ÂàÜÂ±ÇÁöÑJavaSE/EEfull-stack(‰∏ÄÁ´ôÂºè) ËΩªÈáèÁ∫ßÂºÄÊ∫êÊ°ÜÊû∂„ÄêÊù•Ëá™ÁôæÂ∫¶ÁôæÁßë„Äë„ÄÇ ÁõÆÂâçSpringÂ∑≤ÁªèÂèëÂ±ïÂà∞5.0.4 ÁâàÊú¨‰∫ÜÔºå‰ªäÂ§©Âí±‰ª¨Â∞±Êù•ËÅä‰∏ÄËÅäspringÂêÑ‰∏™ÁâàÊú¨ÈÉΩÊèê‰æõ‰∫ÜÂì™‰∫õÊñ∞ÁöÑÁâπÊÄß„ÄÇ spring 2.xspringÁöÑ2.xÂåÖÊã¨‰∏ãÈù¢‰∏§‰∏™Ôºö 2.0.0-2.0.8 2.5.0-2.5.6Ê≠§Êó∂ÁöÑspringËøòÊòØÂæàÂπ¥ËΩªÁöÑÔºåÊâÄÂåÖÂê´ÁöÑÊ®°Âùó‰πü‰∏çÊòØÂæàÂ§ö„ÄÇÂ¶Ç‰∏ãÂõæÔºö 2.0 Êñ∞ÁâπÊÄß XML SchemaÁöÑÊñ∞XMLÈÖçÁΩÆËØ≠Ê≥ïÁöÑÂá∫Áé∞ Êñ∞ÁöÑBeanÁöÑ‰ΩúÁî®Âüü ‰ª•ÂâçÁöÑSpringÁâàÊú¨ÂØπIoCÂÆπÂô®Á∫ßÊîØÊåÅ‰∏§‰∏™‰∏çÂêåÁöÑbean‰ΩúÁî®ÂüüÔºàsingletonÂíåprototypeÔºâ„ÄÇSpring 2.0Âú®ËøôÊñπÈù¢ËøõË°å‰∫ÜÊîπËøõÔºå‰∏ç‰ªÖÊ†πÊçÆÈÉ®ÁΩ≤SpringÁöÑÁéØÂ¢ÉÔºà‰æãÂ¶ÇWebÁéØÂ¢É‰∏≠ÁöÑËØ∑Ê±ÇÂíå‰ºöËØù‰ΩúÁî®ÂüüBeanÔºâÊèê‰æõ‰∫Ü‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ΩúÁî®ÂüüÔºåËøòÊèê‰æõ‰∫Ü‚ÄúÊåÇÈí©‚ÄùÔºâÔºå‰ΩøSpringÁî®Êà∑ÂèØ‰ª•ÂàõÂª∫Ëá™Â∑±ÁöÑËåÉÂõ¥„ÄÇ Â∫îËØ•Ê≥®ÊÑèÁöÑÊòØÔºåËôΩÁÑ∂singletonÂíåprototype‰ΩúÁî®ÂüübeanÁöÑÂ∫ïÂ±ÇÔºàÂíåÂÜÖÈÉ®ÔºâÂÆûÁé∞Â∑≤ÁªèÊîπÂèòÔºå‰ΩÜÊòØÊâÄËø∞ÊîπÂèòÂØπ‰∫éÊúÄÁªàÁî®Êà∑ÊòØÂÆåÂÖ®ÈÄèÊòéÁöÑ‚Ä¶‰∏çÈúÄË¶ÅÊîπÂèòÁé∞ÊúâÁöÑÈÖçÁΩÆÔºåÂπ∂‰∏î‰∏çÂ≠òÂú®Áé∞ÊúâÁöÑÈÖçÁΩÆÂ∞Ü‰ºö‰∏≠Êñ≠„ÄÇ ÂèØÊâ©Â±ïÁöÑXML ÊîØÊåÅ@AspectJÊñπÈù¢ Êõ¥Âä†ÁÆÄÂçïXMLÈÖçÁΩÆ(aop&amp;‰∫ãÂä°) ÂºÇÊ≠•JMS Spring MVCÁöÑË°®ÂçïÊ†áÁ≠æÂ∫ì Java 5ÔºàTigerÔºâÊîØÊåÅ Spring 2.0Áé∞Âú®ÊîØÊåÅÁî®Java‰ª•Â§ñÁöÑËØ≠Ë®ÄÁºñÂÜôÁöÑbeanÔºåÁõÆÂâçÊîØÊåÅÁöÑÂä®ÊÄÅËØ≠Ë®ÄÊòØJRubyÔºåGroovyÂíåBeanShell Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖ≥‰∫é‰ªªÂä°Ë∞ÉÂ∫¶ÁöÑÊäΩË±°Ê¶ÇÂøµ ÂºïÂÖ•‰∫ÜÂØπÂêÑÁßçÊ≥®ÈáäÁöÑÊîØÊåÅÔºåÁî®‰∫éÈÖçÁΩÆÁõÆÁöÑÔºå‰æãÂ¶Ç@ TransactionalÔºå @RequiredÂíå@PersistenceContext / @PersistenceUnit„ÄÇ 2.5 Êñ∞ÁâπÊÄß Âú®Spring 2.0Âú®Êï¥‰∏™Ê°ÜÊû∂‰∏≠ÂØπJava 5ÁöÑÊ∑±ÂÖ•ÊîØÊåÅ‰πãÂêéÔºåSpring 2.5ÂºïÂÖ•‰∫ÜÂØπJava 6ÁöÑ‰∏ìÈó®ÊîØÊåÅ„ÄÇ @AutowiredÁªìÂêàÂØπJSR-250Ê≥®Èáä@ResourceÔºå@ PostConstructÂíå@PreDestroyÁöÑÊîØÊåÅ „ÄÇ Âú®Á±ªË∑ØÂæÑ‰∏≠Ëá™Âä®Ê£ÄÊµãÁªÑ‰ª∂ Spring 2.5ÂºïÂÖ•‰∫ÜÊîØÊåÅÁªÑ‰ª∂Êâ´ÊèèÔºöÂú®Á±ªË∑ØÂæÑ‰∏≠Ëá™Âä®Ê£ÄÊµãÂ∏¶Ê≥®ÈáäÁöÑÁªÑ‰ª∂„ÄÇÂÖ∏ÂûãÂú∞ÔºåËøôÊ†∑ÁöÑÁªÑ‰ª∂Á±ªÂ∞Ü‰∏éÂÆöÂûãÂ¶ÇËøõË°åÊ≥®Èáä@ComponentÔºå @RepositoryÔºå@ServiceÔºå @Controller„ÄÇÊ†πÊçÆÂ∫îÁî®Á®ãÂ∫èÁöÑ‰∏ä‰∏ãÊñáÈÖçÁΩÆÔºåËøô‰∫õÁªÑ‰ª∂Á±ªÂ∞ÜË¢´Ëá™Âä®Ê£ÄÊµãÂπ∂ËΩ¨Êç¢‰∏∫Spring beanÂÆö‰πâÔºåËÄå‰∏çÈúÄË¶Å‰∏∫ÊØè‰∏™ËøôÊ†∑ÁöÑbeanÊòæÂºèÈÖçÁΩÆ„ÄÇ ÊîØÊåÅbeanÂêçÁß∞ÂàáÂÖ•ÁÇπÂÖÉÁ¥† Spring 2.5ÂºïÂÖ•‰∫ÜÂØπbeanÔºà‚Ä¶Ôºâ pointcutÂÖÉÁ¥†ÁöÑÊîØÊåÅÔºåÊ†πÊçÆSpringÂÆö‰πâÁöÑbeanÂêçÁß∞ÂåπÈÖçÁâπÂÆöÁöÑÂëΩÂêçbean ÊîØÊåÅAspectJÂä†ËΩΩÊó∂ÁªáÂÖ• Spring 2.5ÊòæÁùÄÊâ©Â±ï‰∫ÜSimpleJdbcTemplateÁöÑÂäüËÉΩÔºå Âπ∂ÂºïÂÖ•‰∫Ü SimpleJdbcCallÂíåSimpleJdbcInsert Êìç‰ΩúÂØπË±°„ÄÇ Âü∫‰∫éÊ≥®ÈáäÁöÑÊéßÂà∂Âô®„ÄÇ Spring 2.5‰∏∫MVCÊéßÂà∂Âô®ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Âü∫‰∫éÊ≥®ÈáäÁöÑÁºñÁ®ãÊ®°ÂûãÔºå‰ΩøÁî®@ RequestMappingÔºå@ RequestParamÔºå@ ModelAttributeÁ≠âÊ≥®Ëß£„ÄÇËøô‰∏™Ê≥®Ëß£ÊîØÊåÅÂèØÁî®‰∫éServlet MVCÂíåPortlet MVC„ÄÇ‰ª•ËøôÁßçÈ£éÊ†ºÂÆûÁé∞ÁöÑÊéßÂà∂Âô®‰∏çÂøÖÊâ©Â±ïÁâπÂÆöÁöÑÂü∫Á±ªÊàñÂÆûÁé∞ÁâπÂÆöÁöÑÊé•Âè£„ÄÇÊ≠§Â§ñÔºå‰ªñ‰ª¨ÈÄöÂ∏∏‰∏çÁõ¥Êé•‰æùËµñ‰∫éServletÊàñPortlet APIÔºåÂ∞ΩÁÆ°‰ªñ‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÂú∞ËÆøÈóÆServletÊàñPortletËÆæÊñΩ„ÄÇ ÂºïÂÖ•‰∫ÜSpring TestContextÊ°ÜÊû∂ Spring 3.xspring 3.xÂåÖÊã¨‰ª•‰∏ãÂá†‰∏™Á≥ªÂàóÔºö 3.0.0-3.0.7 3.1.0-3.1.4 3.2.0-3.2.18 Âú®2.xÁöÑÊ®°Âùó‰∏äÈ°µÊãìÂ±ï‰∫ÜÊñ∞ÁöÑÊ®°Âùó 3.0.x Êñ∞ÁâπÊÄß ÈíàÂØπJava 5Êõ¥Êñ∞ÁöÑÊ†∏ÂøÉAPI spring Ë°®ËææËØ≠Ë®Ä Âü∫‰∫éJavaÁöÑbeanÂÖÉÊï∞ÊçÆÂíåÂú®ÁªÑ‰ª∂‰∏≠ÂÆö‰πâbeanÂÖÉÊï∞ÊçÆ ÈÄöÁî®ÂûãËΩ¨Êç¢Á≥ªÁªüÂíåÁé∞Âú∫Ê†ºÂºèÂåñÁ≥ªÁªü ÂÖ®Èù¢ÁöÑRESTÊîØÊåÅ Â£∞ÊòéÂºèÊ®°ÂûãÈ™åËØÅ Êó©ÊúüÊîØÊåÅJava EE 6 ÊîØÊåÅÂµåÂÖ•ÂºèÊï∞ÊçÆÂ∫ì 3.1.x Êñ∞ÁâπÊÄß ÁºìÂ≠òÊäΩË±° BeanÂÆö‰πâÈÖçÁΩÆÊñá‰ª∂ ÁéØÂ¢ÉÊäΩË±° PropertySourceÊäΩË±° SpringÁöÑXMLÂêçÁß∞Á©∫Èó¥ÁöÑ‰ª£Á†ÅÁ≠â‰ª∑Áâ© ÊîØÊåÅHibernate 4.x TestContextÊ°ÜÊû∂ÊîØÊåÅ@ConfigurationÁ±ªÂíåbeanÂÆö‰πâÈÖçÁΩÆÊñá‰ª∂ Êõ¥ÁÆÄÊ¥ÅÁöÑÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•ÁöÑÂëΩÂêçÁ©∫Èó¥ ÊîØÊåÅÈíàÂØπÈùûÊ†áÂáÜJavaBeansËÆæÁΩÆÂô®ÁöÑÊ≥®ÂÖ• ÊîØÊåÅServlet 3Âü∫‰∫é‰ª£Á†ÅÁöÑServlet ContainerÈÖçÁΩÆ ÊîØÊåÅServlet 3 MultipartResolver Ê≤°Êúâpersistence.xmlÁöÑJPA EntityManagerFactoryÂºïÂØº Áî®‰∫éÊ≥®ÈáäÁöÑÊéßÂà∂Âô®Â§ÑÁêÜÁöÑÊñ∞ÁöÑÂü∫‰∫éHandlerMethodÁöÑÊîØÊåÅÁ±ª FlashÂ±ûÊÄßÂíåRedirectAttributes(ËØ∑Ê±ÇÈáçÂÆöÂêëÂèÇÊï∞ÁöÑÊîØÊåÅ) ‚Äúconsumes‚Äù and ‚Äúproduces‚Äù conditions in @RequestMapping ÊîπËøõ‰∫ÜÂØπÈÄöËøá‚ÄôContent-Type‚ÄôÊ†áÈ¢òÊåáÂÆöÊñπÊ≥ïÊ∂àËÄóÁöÑÂ™í‰ΩìÁ±ªÂûã‰ª•ÂèäÈÄöËøáÊ†áÈ¢òÊåáÂÆöÁöÑÂèØÁîüÊàêÁ±ªÂûãÁöÑÊîØÊåÅ‚ÄôAccept‚Äô URIÊ®°ÊùøÂèòÈáèÂ¢ûÂº∫ @Valid on @RequestBodyÊéßÂà∂Âô®ÊñπÊ≥ïÂèÇÊï∞ ÊéßÂà∂Âô®ÊñπÊ≥ïÂèÇÊï∞‰∏äÁöÑ@RequestPartÊ≥®Èáä UriComponentsBuilderÂíåUriComponents 3.2.x Êñ∞ÁâπÊÄß ÊîØÊåÅÂü∫‰∫éServlet 3ÁöÑÂºÇÊ≠•ËØ∑Ê±ÇÂ§ÑÁêÜ Spring MVCÊµãËØïÊ°ÜÊû∂ @ControllerAdviceÊ≥®Ëß£ Âü∫‰∫é‰ª£Á†ÅÁöÑServlet 3+ÂÆπÂô®ÂàùÂßãÂåñÁöÑÊäΩË±°Âü∫Á±ª ResponseEntityExceptionHandlerÁ±ªÂºïÂÖ• Âú®RestTemplateÂíå‰∏≠ÁöÑ @RequestBodyÂèÇÊï∞ÊîØÊåÅÊ≥õÂûãÁ±ªÂûã JackJSON 2ÂíåÁõ∏ÂÖ≥ÁöÑÊîπËøõ @RequestBodyÊîπËøõ HTTP PATCHÊñπÊ≥ï ‰ΩøÁî®Ê≥®ÈáäÁÇπÂíåbeanÂÆö‰πâÊñπÊ≥ïÁöÑÂÖÉÊ≥®Èáä ÂàùÊ≠•ÊîØÊåÅJCache 0.5 ÂÖ®ÁêÉÊó•ÊúüÂíåÊó∂Èó¥Ê†ºÂºè Êï¥‰∏™Ê°ÜÊû∂ÁöÑÂπ∂Âèë‰ºòÂåñ Êñ∞ÁöÑÂü∫‰∫éGradleÁöÑÊûÑÂª∫ÂíåÁßªÂä®Âà∞GitHub Á≤æÁÇºÁöÑJava SE 7 / OpenJDK 7ÊîØÊåÅ Spring 4.xspring 4ÂåÖÊã¨‰ª•‰∏ãÁ≥ªÂàóÁâàÊú¨Ôºö 4.0.0-4.0.9 4.1.0-4.1.9 4.2.0-4.2.9 4.3.0-4.3.13 spring 4.0.x Êñ∞ÁâπÊÄß Âà†Èô§ÂºÉÁî®ÁöÑËΩØ‰ª∂ÂåÖÂíåÊñπÊ≥ï ÂèØÈÄâÁöÑÁ¨¨‰∏âÊñπ‰æùËµñÂ∑≤Ë¢´ÊèêÂçáÂà∞2010/2011ÊúÄ‰ΩéÔºàÂç≥Spring 4ÈÄöÂ∏∏Âè™ÊîØÊåÅ2010Âπ¥Êú´Êàñ‰πãÂêéÂèëÂ∏ÉÁöÑÁâàÊú¨ÔºâÔºöÁâπÂà´ÊòØÔºåHibernate 3.6+ÔºåEhCache 2.1+ÔºåQuartz 1.8+ÔºåGroovy 1.8+ÂíåJoda-Time 2.0+„ÄÇ‰Ωú‰∏∫ËßÑÂàôÁöÑ‰∏Ä‰∏™‰æãÂ§ñÔºåSpring 4ÈúÄË¶ÅÊúÄËøëÁöÑHibernate Validator 4.3+ÔºåÂπ∂‰∏îÂØπJacksonÁöÑÊîØÊåÅÂ∑≤ÁªèÈõÜ‰∏≠Âú®2.0+‰ª•‰∏äÔºàÂΩìÂâçSpring 3.2Â∑≤Áªè‰øùÁïô‰∫ÜÂØπJackson 1.8 / 1.9ÁöÑÊîØÊåÅ;Áé∞Âú®Âè™ÊòØÂºÉÁî®‰∫ÜÂΩ¢ÊàêÔºâ„ÄÇ Java 8Ôºà‰ª•Âèä6Âíå7Ôºâ ÂèØ‰ª•‰ΩøÁî®SpringÁöÑÂõûË∞ÉÊé•Âè£‰ΩøÁî® lambdaË°®ËææÂºèÂíåÊñπÊ≥ïÂºïÁî® Java EE 6Âíå7 Java EE 6ÊàñÊõ¥È´òÁâàÊú¨Áé∞Âú®Ë¢´ËÆ§‰∏∫ÊòØSpring Framework 4ÁöÑÂü∫ÂáÜÔºåJPA 2.0ÂíåServlet 3.0ËßÑËåÉÁâπÂà´Áõ∏ÂÖ≥„ÄÇ‰∏∫‰∫Ü‰∏éGoogle App EngineÂíåËæÉÊó©ÁöÑÂ∫îÁî®Á®ãÂ∫èÊúçÂä°Âô®‰øùÊåÅÂÖºÂÆπÔºåÂèØ‰ª•Â∞ÜSpring 4Â∫îÁî®Á®ãÂ∫èÈÉ®ÁΩ≤Âà∞Servlet 2.5ÁéØÂ¢É‰∏≠„ÄÇ‰∏çËøáÔºåÂº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®Servlet 3.0+ÔºåËøôÊòØSpringÂºÄÂèëÁéØÂ¢É‰∏≠ÊµãËØïËÆæÁΩÆÁöÑÊµãËØïÂíåÊ®°ÊãüÂåÖ‰∏≠ÁöÑÂÖàÂÜ≥Êù°‰ª∂„ÄÇ Groovy BeanÂÆö‰πâDSL Ê†∏ÂøÉÂÆπÂô®ÊîπËøõ SpringÁé∞Âú®Â∞ÜÊ≥õÂûãÁ±ªÂûã‰Ωú‰∏∫Ê≥®ÂÖ•BeansÊó∂ÈôêÂÆöÁ¨¶ÁöÑÂΩ¢Âºè „ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊÇ®Ê≠£Âú®‰ΩøÁî®Spring Data RepositoryÔºåÂàôÁé∞Âú®ÂèØ‰ª•ËΩªÊùæÊ≥®ÂÖ•‰∏Ä‰∏™ÁâπÂÆöÁöÑÂÆûÁé∞Ôºö @Autowired Repository customerRepository„ÄÇ Â¶ÇÊûúÊÇ®‰ΩøÁî®SpringÁöÑÂÖÉÊ≥®ÈáäÊîØÊåÅÔºåÁé∞Âú®ÂèØ‰ª•ÂºÄÂèëËá™ÂÆö‰πâÊ≥®ÈáäÊù• ÊòæÁ§∫Ê∫êÊ≥®Èáä‰∏≠ÁöÑÁâπÂÆöÂ±ûÊÄß„ÄÇ beanÁé∞Âú®ÂèØ‰ª•Âú®Ëá™Âä®Ë£ÖÈÖçÂà∞ÂàóË°®ÂíåÊï∞ÁªÑ‰∏≠Êó∂ËøõË°åÊéíÂ∫è„ÄÇÊó†ËÆ∫ÊòØÊ†áÊ≥®ÂíåÊé•Âè£ÁöÑÊîØÊåÅ„ÄÇ @OrderOrdered ËØ•@LazyÊ≥®ÈáäÁé∞Âú®ÂèØ‰ª•Âú®Ê≥®ÂÖ•ÁÇπ‰ΩøÁî®Ôºå‰ª•ÂèäÂØπ@Bean ÂÆö‰πâ„ÄÇ ËØ•@DescriptionÊâπÊ≥®Â∑≤ÁªèÊé®Âá∫‰∫Ü‰ΩøÁî®Âü∫‰∫éJavaÁöÑÈÖçÁΩÆÂºÄÂèë„ÄÇ Â∑≤ÁªèÈÄöËøáÊ≥®ÈáäÊ∑ªÂä† ‰∫ÜÊúâÊù°‰ª∂Âú∞ËøáÊª§beanÁöÑÈÄöÁî®Ê®°Âûã@Conditional„ÄÇËøô‰∏é@ProfileÊîØÊåÅÁ±ª‰ººÔºå‰ΩÜÂÖÅËÆ∏‰ª•ÁºñÁ®ãÊñπÂºèÂºÄÂèëÁî®Êà∑ÂÆö‰πâÁöÑÁ≠ñÁï•„ÄÇ Âü∫‰∫éCGLIBÁöÑ‰ª£ÁêÜÁ±ª‰∏çÂÜçÈúÄË¶ÅÈªòËÆ§ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÊîØÊåÅÈÄöËøáÊèê‰æõobjenesis ÂÖ∂ÈáçÊñ∞ÊâìÂåÖÂ∫ìÂú®Á∫øÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫SpringÊ°ÜÊû∂ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊúâ‰∫ÜËøô‰∏™Á≠ñÁï•ÔºåÊâÄÊúâÁöÑÊûÑÈÄ†ÂáΩÊï∞ÈÉΩ‰∏çÂÜçË¢´Ë∞ÉÁî®‰ª£ÁêÜÂÆû‰æã„ÄÇ Êï¥‰∏™Ê°ÜÊû∂Áé∞Âú®ÈÉΩÊúâÁÆ°ÁêÜÊó∂Âå∫ÁöÑÊîØÊåÅÔºå‰æãÂ¶ÇLocaleContext„ÄÇ web Ê®°ÂùóÊîØÊåÅ ÂèØ‰ª•Âú®Spring MVCÂ∫îÁî®Á®ãÂ∫è‰∏≠‰ΩøÁî®Êñ∞ÁöÑ@RestControllerÊ≥®ÈáäÔºå‰∏çÈúÄË¶ÅÊ∑ªÂä†@ResponseBodyÂà∞ÊØè‰∏™ @RequestMappingÊñπÊ≥ï‰∏≠„ÄÇ ËØ•AsyncRestTemplateÂ∑≤Ê∑ªÂä†ÔºåÂÖÅËÆ∏ÂºÇÊ≠•ÈùûÈòªÂ°ûÊîØÊåÅÂºÄÂèëRESTÂÆ¢Êà∑Á´ØÊó∂„ÄÇ ÂºÄÂèëSpring MVCÂ∫îÁî®Á®ãÂ∫èÊó∂Êèê‰æõ‰∫ÜÂÖ®Èù¢ÁöÑÊó∂Âå∫ÊîØÊåÅ„ÄÇ ÊµãËØïÊîπËøõ WebSocketÔºåSockJSÂíåSTOMPÊ∂àÊÅØ‰º†ÈÄí spring 4.1.x Êñ∞ÁâπÊÄß JMSÊîπËøõ ÁºìÂ≠òÊîπËøõ ÁΩëÁªúÊîπËøõ WebSocketÊ∂àÊÅØ‰º†ÈÄíÊîπËøõ ÊµãËØïÊîπËøõ spring 4.2.x Êñ∞ÁâπÊÄß Spring 4 ÂÆòÊñπÊñáÊ°£ Ê†∏ÂøÉÂÆπÂô®ÊîπËøõ Êï∞ÊçÆËÆøÈóÆÊîπËøõ spring 4.3.x Êñ∞ÁâπÊÄß ÊîØÊåÅÊñ∞ÁöÑÂåÖÂíåÊúçÂä° Áõ∏ÂÖ≥ÊîπËøõ ÁõÆÂâçËøòÊ≤°ÊúâÁî®Ëøáspring5ÔºåÊÄª‰ºöÊúâÊÜßÊÜ¨„ÄÇÂΩìÊàë‰ª¨‰ΩøÁî®springË∂äÊù•Ë∂äÁÆÄÂçïÊó∂ÔºåÂç±Êú∫‰πüÂú®‰∏ÄÊ≠•Ê≠•ÈÄºËøëÔºõÁúãÂà∞Ë°®Ë±°ÔºåËøõ‰∏ÄÊ≠•ÔºåÂÜçËøõ‰∏ÄÊ≠•ÔºÅ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ã)]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase5%2F</url>
    <content type="text"><![CDATA[Âú®SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ä)‰∏≠Â∑≤ÁªèÂ§ßÊ¶ÇÊçã‰∫Ü‰∏Ä‰∏ãËß£ÊûêËøáÁ®ãÔºåÊú¨ÁØáÂ∞ÜËÆ∞ÂΩï‰∏Ä‰∏ãbeanÁöÑÊ≥®ÂÜåËøáÁ®ã„ÄÇbeanÁöÑÊ≥®ÂÜåÂ∞±ÊòØDefaultListableBeanFactory‰∏≠registerBeanDefinitionÊñπÊ≥ïÊù•ÂÆåÊàêÁöÑ„ÄÇÈÇ£ÊàëÂ∞±Êù•ÁúãregisterBeanDefinitionËøô‰∏™ÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÈÄªËæë„ÄÇ1„ÄÅbeanDefinitionÁ±ªÂûãÂà§Êñ≠ÂíåÈ™åËØÅËøôÈáåÁöÑÈ™åËØÅ‰∏ªË¶ÅÊòØÈ™åËØÅ‰∏çËÉΩÂ∞ÜÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï‰∏éÊñπÊ≥ïÈáçÂÜôÁõ∏ÁªìÂêà(ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÂøÖÈ°ªÂàõÂª∫ÂÆû‰æã);if (beanDefinition instanceof AbstractBeanDefinition) { try { ((AbstractBeanDefinition) beanDefinition).validate(); } catch (BeanDefinitionValidationException ex) { throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName,‚ÄúValidation of bean definition failed‚Äù, ex); }}2„ÄÅÂ∞ùËØï‰ªébeanDefinitionMap‰∏≠Ëé∑ÂèñËÄÅÁöÑbeanËøôÈáåÂ∞±ÊòØÂÖàÊ†πÊçÆbeanName‰ªébeanDefinitionMapÂéªÂèñBeanDefinitionÔºåÂπ∂Â∞ÜÁªìÊûúÁªôoldBeanDefinition„ÄÇBeanDefinition oldBeanDefinition;oldBeanDefinition = this.beanDefinitionMap.get(beanName);3„ÄÅbeanDefinitionMap‰∏≠Â∑≤ÁªèÂ≠òÂú®Âêç‰∏∫beanNameÁöÑBeandefinitionÂ¶ÇÊûúÂΩìÂâçbeanDefinitionMap‰∏≠Â∑≤ÁªèÂ≠òÂú®Âêç‰∏∫beanNameÁöÑBeandefinition‰∫Ü(Âç≥Ê£ÄÊü•ÊòØÂê¶ÊúâÁõ∏ÂêåÂêçÁß∞ÁöÑbeanDefinitionÂ∑≤ÁªèÂú®IocÂÆπÂô®‰∏≠Ê≥®ÂÜåËøá‰∫Ü)„ÄÇÔºåÂ¶ÇÊûúÊúâÔºåÂàôËøõË°å‰ª•‰∏ãÂÖ∑‰ΩìÁ≠ñÁï•ÔºöÂ¶ÇÊûú‰∏çÂÖÅËÆ∏beanË¢´Ë¶ÜÁõñÔºåÂàôÁõ¥Êé•ÊäõÂá∫‰∏çËÉΩÈáçÊñ∞Ê≥®ÂÜåÔºåbeanÂ∑≤ÁªèÂ≠òÂú®ËøôÊ†∑ÁöÑÂºÇÂ∏∏‰ø°ÊÅØ‰ΩøÁî®Ê°ÜÊû∂ÁîüÊàêÁöÑBeanÊù•‰ª£ÊõøÁî®Êà∑Ëá™ÂÆö‰πâÁöÑbeanË¶ÜÁõñÂéüÊúâÁöÑBeandefinitionif (oldBeanDefinition != null) { if (!isAllowBeanDefinitionOverriding()) { //ÁúÅÁï•ÂºÇÂ∏∏‰ª£Á†Å } else if (oldBeanDefinition.getRole() &lt; beanDefinition.getRole()) { //ÁúÅÁï•ÂºÇÂ∏∏‰ª£Á†Å } else if (!beanDefinition.equals(oldBeanDefinition)) { //ÊèêÁ§∫Ë¶ÜÁõñlog‰ø°ÊÅØ } else { //ÊèêÁ§∫Ë¶ÜÁõñlog‰ø°ÊÅØ } //Ë¶ÜÁõñÂéüÊúâÁöÑBeandefinition this.beanDefinitionMap.put(beanName, beanDefinition);}4„ÄÅbeanDefinitionMap‰∏çÂ≠òÂú®Âêç‰∏∫beanNameÁöÑBeandefinition//Ê£ÄÊü•beanÁöÑÂàõÂª∫Èò∂ÊÆµÊòØÂê¶Â∑≤ÁªèÂºÄÂßãÔºå‰πüÂ∞±ÊòØËØ¥ÊòØÂê¶Â∑≤ÁªèÂàõÂª∫‰∫Üif (hasBeanCreationStarted()) { //Cannot modify startup-time collection elements anymore (for stable iteration) // Êó†Ê≥ï‰øÆÊîπÂêØÂä®Êó∂Èó¥Êî∂ÈõÜÂÖÉÁ¥†ÔºàÁî®‰∫éÁ®≥ÂÆöËø≠‰ª£ÔºâÔºàËØëÊ≥®Ôºâ //Ê≥®ÂÜåËøáÁ®ãÈúÄË¶Å‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÔºåÊâÄÊúâÈúÄË¶ÅÂä†ÈîÅÂêåÊ≠• synchronized (this.beanDefinitionMap) { //Ê≥®ÂÜåÂà∞beanDefinitionMap‰∏≠ this.beanDefinitionMap.put(beanName, beanDefinition); //‰∏ãÈù¢Â∞±ÊòØÂ∞ÜÂΩìÂâçbeanNameÂ≠òÊîæÂà∞beanDefinitionNames‰∏≠ List&lt;String&gt; updatedDefinitions = new ArrayList&lt;String&gt;( this.beanDefinitionNames.size() + 1); updatedDefinitions.addAll(this.beanDefinitionNames); updatedDefinitions.add(beanName); this.beanDefinitionNames = updatedDefinitions; //Â¶ÇÊûúÂçï‰æãÊ®°ÂºèÁöÑbeanÂêçÂçï‰∏≠ÊúâËØ•beanÁöÑnameÔºåÈÇ£‰πàÁßªÈô§ÊéâÂÆÉ„ÄÇ //‰πüÂ∞±ÊòØËØ¥ÁùÄÔºåÂ∞Ü‰∏Ä‰∏™ÂéüÊú¨ÊòØÂçï‰æãÊ®°ÂºèÁöÑbeanÈáçÊñ∞Ê≥®ÂÜåÊàê‰∏Ä‰∏™ÊôÆÈÄöÁöÑbean if (this.manualSingletonNames.contains(beanName)) { Set&lt;String&gt; updatedSingletons = new LinkedHashSet&lt;String&gt;(this.manualSingletonNames); updatedSingletons.remove(beanName); this.manualSingletonNames = updatedSingletons; } }}// ‰ªçÂ§Ñ‰∫éÂêØÂä®Èò∂ÊÆµÔºåbeanËøòÊ≤°ÊúâÂºÄÂßãÊ≥®ÂÜåelse { // Still in startup registration phase this.beanDefinitionMap.put(beanName, beanDefinition); this.beanDefinitionNames.add(beanName); this.manualSingletonNames.remove(beanName);}this.frozenBeanDefinitionNames = null;5„ÄÅÊâßË°åÁºìÂ≠òÊ∏ÖÈô§1ÔºöoldBeanDefinitionÂ¶ÇÊûúÂ≠òÂú®Ôºå‰∏îÊâßË°åÂà∞‰∫ÜËøôÈáå‰πüÊ≤°ÊúâÊäõÂá∫ÂºÇÂ∏∏ÔºåËØ¥ÊòéËØ•BeanDefinitionÂ∑≤ÁªèË¢´Ë¶ÜÁõñÔºåÁºìÂ≠òÈúÄË¶ÅÊõ¥Êñ∞„ÄÇ2ÔºöÂ¶ÇÊûúÊòØÂçï‰æãÊ®°ÂºèÁöÑbeanÂØπË±°ÂàôSet‰∏≠ÂåÖÂê´ËØ•beanNameÔºåÊâßË°åÂà∞ËøôÈáåËØ¥ÊòéËØ•BeanDefinitionÂ∑≤Áªè‰ªé‰∏Ä‰∏™Âçï‰æãÊ®°ÂºèÁöÑbeanÂèò‰∏∫‰∫Ü‰∏Ä‰∏™ÊôÆÈÄöÁöÑbeanÔºåÊâÄ‰ª•ÁºìÂ≠ò‰πüÈúÄË¶ÅÊõ¥Êñ∞„ÄÇif (oldBeanDefinition != null || containsSingleton(beanName)) { resetBeanDefinition(beanName);}OKÔºåÊàë‰ª¨Êù•Áúã‰∏ãresetBeanDefinitionËøô‰∏™ÊñπÊ≥ï:Ëøô‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®Â∞±ÊòØÈáçÁΩÆÁªôÂÆöbeanÁöÑÊâÄÊúâbeanÂÆö‰πâÁºìÂ≠òÔºåÂåÖÊã¨‰ªéÂÆÉÊ¥æÁîüÁöÑbeanÁöÑÁºìÂ≠ò„ÄÇprotected void resetBeanDefinition(String beanName) { // Â¶ÇÊûúÂ∑≤ÁªèÂàõÂª∫ÔºåÂàôÂà†Èô§ÁªôÂÆöbeanÁöÑÂêàÂπ∂beanÂÆö‰πâ„ÄÇ clearMergedBeanDefinition(beanName); // Â¶ÇÊûúÊúâÁöÑËØùÔºå‰ªésingleton È´òÈÄüÁºìÂ≠ò‰∏≠Âà†Èô§Áõ∏Â∫îÁöÑbean„ÄÇ //‰ΩÜÊòØËøô‰πü‰∏çÊòØÂøÖÈ°ªÁöÑÔºåËÄåÂè™ÊòØ‰∏∫‰∫ÜË¶ÜÁõñ‰∏ä‰∏ãÊñáÁöÑÈªòËÆ§bean //ÔºàÂ∞±ÊòØ‰ªémanualSingletonNames‰∏≠ÁßªÈô§Ôºâ destroySingleton(beanName); //ÈÄíÂΩíÁöÑÊñπÂºèÊù• ÈáçÁΩÆÂÖ∑ÊúâÁªôÂÆöbean‰Ωú‰∏∫Áà∂È°πÁöÑÊâÄÊúâbeanÂÆö‰πâ„ÄÇ for (String bdName : this.beanDefinitionNames) { if (!beanName.equals(bdName)) { BeanDefinition bd = this.beanDefinitionMap.get(bdName); if (beanName.equals(bd.getParentName())) { resetBeanDefinition(bdName); } } }}BeanÁöÑÊ≥®ÂÜåÂ∞±Âà∞ËøôÈáå‰∫ÜÔºå‰∏ã‰∏ÄÁØáÂ≠¶‰π†ÁöÑÊòØDefaultListableBeanFactoryËøô‰∏™ÈõÜÂ§ßÊàêËÄÖÂÆπÂô®„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•Ôºà‰∏≠Ôºâ]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase6%2F</url>
    <content type="text"><![CDATA[‰∏ä‰∏ÄÁØáÊòØÂ∞ÜBeanÁöÑËß£ÊûêÊ≥®ÂÜåÊµÅÁ®ãËøõË°å‰∫ÜÊ¢≥ÁêÜÔºåÂØπ‰∫é‰∏Ä‰∫õÁªÜËäÇÈóÆÈ¢òÊ≤°ÊúâËøõË°åÁªÜÁ©∂ÔºåÊØîÂ¶ÇËØ¥ÂÖÉÁ¥†Â±ûÊÄßÂÄºÁöÑÂ§ÑÁêÜÔºåÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂ§ÑÁêÜÁ≠âÁ≠â„ÄÇÊú¨ÁØáÂ∞±Â≠¶‰π†ËÆ∞ÂΩï‰∏Ä‰∏ãÁõ∏ÂÖ≥ÁÇπ„ÄÇ È¶ñÂÖàÊù•Áúã‰∏ãÊòØÂú®Âì™‰∏™Âú∞ÊñπÂÖ∑‰ΩìÁîüÊàêBeanDefinitiondÁöÑ„ÄÇ‰∏ãÈù¢ÊòØÊñπÊ≥ïËØ∑Ê±ÇÁöÑÈ°∫Â∫è„ÄÇ DefaultBeanDefinitionDocumentReader.parseDefaultElement DefaultBeanDefinitionDocumentReader.processBeanDefinition BeanDefinitionParserDelegate.parseBeanDefinitionElement ÂÖ≥‰∫éÂÖÉÁ¥†ÁöÑËß£ÊûêÁªùÂ§ßÂ§öÊï∞ÈÉΩÊòØÂú®BeanDefinitionParserDelegateÂèäÂÖ∂Â≠êÁ±ª‰∏≠ÂÆåÊàêÁöÑ„ÄÇOKÔºåÊù•Áúã‰∏ãparseBeanDefinitionElementËøô‰∏™ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public AbstractBeanDefinition parseBeanDefinitionElement( Element ele, String beanName, BeanDefinition containingBean) &#123; this.parseState.push(new BeanEntry(beanName)); String className = null; //Âú®ËøôÈáåÊòØËØªÂèñ&lt;bean&gt;ÁöÑclassÂêçÂ≠óÔºåÁÑ∂ÂêéËΩΩÂÖ•Âà∞BeanDefinition‰∏≠ÔºåÂπ∂Êú™ÂÅöÂÆû‰æãÂåñ if (ele.hasAttribute(CLASS_ATTRIBUTE)) &#123; className = ele.getAttribute(CLASS_ATTRIBUTE).trim(); &#125; try &#123; String parent = null; if (ele.hasAttribute(PARENT_ATTRIBUTE)) &#123; parent = ele.getAttribute(PARENT_ATTRIBUTE); &#125; //ÁîüÊàêBeanDefinitionÂØπË±° AbstractBeanDefinition bd = createBeanDefinition(className, parent); //Ëß£ÊûêÂΩìÂâçbeanÁöÑÂ±ûÊÄß parseBeanDefinitionAttributes(ele, beanName, containingBean, bd); //ËÆæÁΩÆdescription‰ø°ÊÅØ bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT)); //ÂØπbeanÁöÑÂÖÉÁ¥†‰ø°ÊÅØËøõË°åËß£Êûê parseMetaElements(ele, bd); parseLookupOverrideSubElements(ele, bd.getMethodOverrides()); parseReplacedMethodSubElements(ele, bd.getMethodOverrides()); //Ëß£ÊûêbeanÁöÑÊûÑÈÄ†ÂáΩÊï∞ËÆæÁΩÆ parseConstructorArgElements(ele, bd); //Ëß£ÊûêpropertyËÆæÁΩÆ parsePropertyElements(ele, bd); parseQualifierElements(ele, bd); bd.setResource(this.readerContext.getResource()); bd.setSource(extractSource(ele)); return bd; &#125; //ÂºÇÂ∏∏1ÔºöClassNotFoundException catch (ClassNotFoundException ex) &#123; error("Bean class [" + className + "] not found", ele, ex); &#125; //ÂºÇÂ∏∏2ÔºöNoClassDefFoundError catch (NoClassDefFoundError err) &#123; error("Class that bean class [" + className + "] depends on not found", ele, err); &#125; //ÂÖ∂‰ªñÊú™Áü•ÈîôËØØ catch (Throwable ex) &#123; error("Unexpected failure during bean definition parsing", ele, ex); &#125; finally &#123; this.parseState.pop(); &#125; return null;&#125; Ê≠§Â§ÑÊàë‰ª¨‰ª•Ëß£Êûêproperty‰∏∫‰æãÔºåÁúã‰∏ãÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜÁªÜËäÇÔºö 12345678910111213//Ëß£ÊûêÁªôÂÆöbeanÂÖÉÁ¥†ÁöÑÂ±ûÊÄßÂ≠êÂÖÉÁ¥†„ÄÇpublic void parsePropertyElements(Element beanEle, BeanDefinition bd) &#123; //Ëé∑ÂèñÂ≠êÂÖÉÁ¥†ËäÇÁÇπ NodeList nl = beanEle.getChildNodes(); //ÈÅçÂéÜ for (int i = 0; i &lt; nl.getLength(); i++) &#123; Node node = nl.item(i); //ÊòØÂê¶ÂåÖÂê´propertyÊ†áËØÜ if (isCandidateElement(node) &amp;&amp; nodeNameEquals(node, PROPERTY_ELEMENT)) &#123; parsePropertyElement((Element) node, bd); &#125; &#125;&#125; Êé•ÁùÄÊòØÊâßË°åÂÖ∑‰Ωìproperty,Âú®parsePropertyElement‰∏≠ÂÆåÊàêÔºö 12345678910111213141516171819202122232425262728//Ëß£Êûê‰∏Ä‰∏™propertyÂÖÉÁ¥†„ÄÇpublic void parsePropertyElement(Element ele, BeanDefinition bd) &#123; //È¶ñÂÖàËé∑ÂèñÂà∞propertyÁöÑÂêçÁß∞ String propertyName = ele.getAttribute(NAME_ATTRIBUTE); //Ê£ÄÊü•ÊòØÂê¶Êúâname if (!StringUtils.hasLength(propertyName)) &#123; error("Tag 'property' must have a 'name' attribute", ele); return; &#125; this.parseState.push(new PropertyEntry(propertyName)); try &#123; //È™åËØÅÂú®Âêå‰∏Ä‰∏™bean‰∏≠Â≠òÂú®ÂêåÂêçÁöÑpropertyÔºåÂ≠òÂú®ÁöÑËØùÂ∞±‰∏çËß£Êûê‰∫ÜÔºåÁõ¥Êé•ËøîÂõû if (bd.getPropertyValues().contains(propertyName)) &#123; error("Multiple 'property' definitions for property '" + propertyName + "'", ele); return; &#125; //Ëß£ÊûêÂá∫propertyÁöÑÂÄº Object val = parsePropertyValue(ele, bd, propertyName); //Â∞ÅË£ÖÊàêPropertyValueÂØπË±° PropertyValue pv = new PropertyValue(propertyName, val); parseMetaElements(ele, pv); pv.setSource(extractSource(ele)); bd.getPropertyValues().addPropertyValue(pv); &#125; finally &#123; this.parseState.pop(); &#125;&#125; Âú®parsePropertyValue‰∏≠ÔºåÊòØÂØπÊâÄÊúâÁöÑpropertyÂ≠êÂÖÉÁ¥†ËøõË°åÂÖ∑‰ΩìËß£ÊûêÁöÑ„ÄÇÊàë‰ª¨Áü•ÈÅìproperty‰∏≠Èô§‰∫ÜÂçïÂÄº‰πãÂ§ñÔºåËøò‰ºöÂåÖÊã¨Â¶ÇÔºölistÔºåsetÔºåmapÔºåpropÁ≠âÈõÜÂêàÂÖÉÁ¥†ÔºõËøô‰∫õÈÉΩ‰ºöË¢´Â∞ÅË£ÖÊàêÂØπÂ∫îÁöÑManagerdÂØπË±°„ÄÇÊØîÂ¶ÇÔºöManagedListÁ≠â„ÄÇ‰∏çÂêåÁöÑÈõÜÂêàÁ±ªÂûãÈ°µÂêåÊ†∑ÂØπÂ∫î‰∏ÄÁßçËß£ÊûêÊñπÊ≥ïÔºåÊØîÂ¶ÇËß£ÊûêlistÁöÑÊòØ‰ΩøÁî®parseListElement„ÄÇËøô‰∫õËß£ÊûêÈÉΩÊòØÂú®BeanDefinitionParserDelegateÁ±ª‰∏≠ÂÆåÊàêÁöÑ„ÄÇËøô‰∏™ÂêéÈù¢Êàë‰ºöÊäΩ‰∏ÄÁØáÊù•Â≠¶‰π†BeanDefinitionParserDelegateËøô‰∏™Á±ª„ÄÇ BeanÁöÑËΩΩÂÖ•ËøáÁ®ãÂ∞±ÊòØËøôÊ†∑ÈÄöËøáÂ±ÇÂ±ÇËß£ÊûêÊù•ÂÆåÊàêÁöÑÔºå‰ΩÜÊòØÂØπ‰∫éÁõÆÂâçÁöÑIocÂÆπÂô®Êù•ËØ¥Ôºå‰ªÖ‰ªÖÊòØÂÆåÊàê‰∫ÜÂØπBeanÂØπË±°ÁÆ°ÁêÜÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÂáÜÂ§áÂ∑•‰ΩúÔºå‰πüÂ∞±ÊòØÂàùÂßãÂåñÂ∑•‰ΩúÔºåÁõÆÂâçÁöÑBeanDefginiton‰∏≠ÂåÖÂê´ÁöÑÂ∞±ÊòØ‰∏Ä‰∫õÈùôÊÄÅÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåBeanÁöÑÂÆû‰æãÂåñËøòÊ≤°ÊúâËøõË°åÔºåËøô‰∏™ÂÆû‰æãÂåñÁöÑËøáÁ®ãÊòØÂú®‰æùËµñÊ≥®ÂÖ•Êó∂ÂÄôÂÆåÊàêÁöÑ„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ä)]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase4%2F</url>
    <content type="text"><![CDATA[Áªß‰∏ä‰∏ÄÁØáBeanFactoryÁöÑÂàõÂª∫‰πãÂêéÔºåÂÖ∂ÂÆûÂ∞±ÊòØBeanDefinitionËΩΩÂÖ•‰∫Ü„ÄÇÂêåÊ†∑‰πüÊòØÂú®AbstractRefreshableApplicationContextÁ±ªÁöÑrefreshBeanFactoryÊñπÊ≥ï‰∏≠ÂÆåÊàêÔºö//ÂàõÂª∫ÈªòËÆ§ÁöÑDefaultListableBeanFactoryÂ∑•ÂéÇDefaultListableBeanFactory beanFactory = createBeanFactory();//ËÆæÁΩÆIdbeanFactory.setSerializationId(getId());//Ëøô‰∏™ÊñπÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØËÆæÁΩÆ‰∫ÜallowBeanDefinitionOverridingÂíåallowCircularReferences‰∏§‰∏™Â±ûÊÄßcustomizeBeanFactory(beanFactory);//Ë∞ÉÁî®Â≠êÁ±ªÁöÑÂä†ËΩΩbeanÂÆö‰πâÊñπÊ≥ïÔºåËøôÈáå‰ºöË∞ÉÁî®XmlWebApplicationContextÂ≠êÁ±ªÁöÑÂ§çÂÜôÊñπÊ≥ïloadBeanDefinitions(beanFactory);ËøôÈáåÁöÑloadBeanDefinitions‰πüÊòØ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÔºåAbstractRefreshableApplicationContextÁ±ª‰∏≠Âπ∂Ê≤°ÊúâÁªôÂá∫ÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ôºå‰∫åÊòØÈÄöËøáÂ≠êÁ±ªXmlWebApplicationContextÁöÑloadBeanDefinitionsÂÆåÊàêÂÖ∑‰ΩìÂÆûÁé∞„ÄÇprotected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException { //ÂàõÂª∫XmlBeanDefinitionReaderÔºåÂπ∂ÈÄöËøáÂõûË∞ÉËÆæÁΩÆÂà∞BeanFactory‰∏≠ XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory); //‰∏∫XmlBeanDefinitionReaderÈÖçÁΩÆEnvironment beanDefinitionReader.setEnvironment(getEnvironment()); //‰∏∫XmlBeanDefinitionReaderÈÖçÁΩÆResourceLoaderÔºå //Âõ†‰∏∫DefaultResourceLoaderÊòØÁà∂Á±ªÔºåÊâÄ‰ª•thisÂèØ‰ª•Áõ¥Êé•Ë¢´‰ΩøÁî® beanDefinitionReader.setResourceLoader(this); beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this)); // ÂÖÅËÆ∏Â≠êÁ±ªÊèê‰æõreaderÁöÑËá™ÂÆö‰πâÂàùÂßãÂåñÔºåÁÑ∂ÂêéÁªßÁª≠ÂÆûÈôÖÂä†ËΩΩbeanÂÆö‰πâ„ÄÇ initBeanDefinitionReader(beanDefinitionReader); loadBeanDefinitions(beanDefinitionReader);}initBeanDefinitionReaderÂàùÂßãÂåñÁî®‰∫éÂä†ËΩΩÊ≠§‰∏ä‰∏ãÊñáÁöÑbeanÂÆö‰πâÁöÑbeanÂÆö‰πâËØªÂèñÂô®ÔºõÈªòËÆ§ÂÆûÁé∞ÊòØÁ©∫ÁöÑ„ÄÇÁÑ∂Âêé‰∏ãÈù¢ÈÄöËøáÈáçËΩΩÁöÑloadBeanDefinitionsÊù•ÂÅöÂÖ∑‰ΩìÁöÑbeanËß£ÊûêÔºàËøôÈáåÁî®Âà∞ÁöÑÊòØXmlBeanDefinitionReaderËøô‰∏™Ëß£ÊûêÂô®ÔºâÔºõ‰ΩøÁî®ÁªôÂÆöÁöÑXmlBeanDefinitionReaderÂä†ËΩΩbean definitions„ÄÇprotected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws IOException { String[] configLocations = getConfigLocations(); //ÈÅçÂéÜxmlÊñá‰ª∂ if (configLocations != null) { for (String configLocation : configLocations) { reader.loadBeanDefinitions(configLocation); } }}Ê≠§Êó∂‰ºöÂ∞ÜÊàë‰ª¨ÁöÑapplicationContext.xmlËØªÂÖ•ÔºàÂΩìÁÑ∂Â¶Ç‰ΩïËøòÊúâÂÖ∂‰ªñÁöÑspringÈÖçÁΩÆÊñá‰ª∂ÔºåÂêåÊ†∑‰ºö‰∏ÄÂùóÊãøÂà∞Ë∑ØÂæÑÔºâÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºöÁÑ∂ÂêéÁªßÁª≠ÈÄöËøáloadBeanDefinitionsÁöÑÈáçËΩΩÊñπÊ≥ïÁªßÁª≠ÂßîÊâòË∞ÉÁî®„ÄÇÊúÄÂêé‰∫§ÁªôAbstractBeanDefinitionReaderÁöÑloadBeanDefinitionsÊù•ÂÆåÊàêÔºõËøô‰∏™‰ª£Á†ÅÊØîËæÉÈïøÔºåÊãÜÂºÄ‰∏ÄÊ≠•‰∏ÄÊ≠•Êù•ËØ¥ÔºåÂÖàÁúã‰∏ãÊï¥‰ΩìÁöÑÔºöpublic int loadBeanDefinitions(String location, Set&lt;Resource&gt; actualResources) throws BeanDefinitionStoreException { //Ëé∑ÂèñResourceLoaderËµÑÊ∫êÂÆö‰ΩçÂô® ResourceLoader resourceLoader = getResourceLoader(); //Â¶ÇÊûúÂÆö‰ΩçÂô®‰∏∫nullÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ if (resourceLoader == null) { throw new BeanDefinitionStoreException( ‚ÄúCannot import bean definitions from location [‚Äú + location + ‚Äú]: no ResourceLoader available‚Äù); } //ÊòØÂê¶ÊòØResourcePatternResolverÁ±ªÂûãÁöÑÂÆö‰ΩçÂô® if (resourceLoader instanceof ResourcePatternResolver) { // Resource pattern matching available. try { Resource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location); int loadCount = loadBeanDefinitions(resources); if (actualResources != null) { for (Resource resource : resources) { actualResources.add(resource); } } if (logger.isDebugEnabled()) { logger.debug(‚ÄúLoaded ‚Äú + loadCount + ‚Äú bean definitions from location pattern [‚Äú + location + ‚Äú]‚Äù); } return loadCount; } catch (IOException ex) { throw new BeanDefinitionStoreException( ‚ÄúCould not resolve bean definition resource pattern [‚Äú + location + ‚Äú]‚Äù, ex); } } //ÈùûResourcePatternResolverÁ±ªÂûãÁöÑ else { // Can only load single resources by absolute URL. Resource resource = resourceLoader.getResource(location); int loadCount = loadBeanDefinitions(resource); if (actualResources != null) { actualResources.add(resource); } if (logger.isDebugEnabled()) { logger.debug(‚ÄúLoaded ‚Äú + loadCount + ‚Äú bean definitions from location [‚Äú + location + ‚Äú]‚Äù); } return loadCount; }}‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÈúÄË¶ÅËØ¥Êòé‰∏ã‰∏∫‰ªÄ‰πàË¶ÅÂà§Êñ≠ÂΩìÂâçresourceLoaderÊòØÂê¶ÊòØResourcePatternResolverÁ±ªÂûãÁöÑÔºåÂõ†‰∏∫ResourceLoaderÂè™ÊòØÊèê‰æõ‰∫ÜÂØπclasspathÂâçÁºÄÁöÑÊîØÊåÅ„ÄÇËÄåResourcePatternResolverÊèê‰æõ‰∫ÜÂØπclasspathÂâçÁºÄÁöÑÊîØÊåÅ„ÄÇ‰πüÂ∞±ÊòØËØ¥ResourceLoaderÊèê‰æõclasspath‰∏ãÂçïËµÑÊ∫êÊñá‰ª∂ÁöÑËΩΩÂÖ•ÔºåËÄåResourcePatternResolverÊèê‰æõÂ§öËµÑÊ∫êÊñá‰ª∂ÁöÑËΩΩÂÖ•„ÄÇÂÖàÁúã‰∏ãÂÅáÂ¶ÇÊòØResourcePatternResolverÁ±ªÂûãÁöÑÔºàÁï•Âéª‰∫ÜÈÉ®ÂàÜlog‰ª£Á†ÅÔºâÔºötry { //ÂÖàÂæóÂà∞Êàë‰ª¨ÁöÑresources Resource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location); //Ëß£ÊûêÂπ∂ËøîÂõûbeanDefinitionÁöÑÊï∞Èáè int loadCount = loadBeanDefinitions(resources); //Âä†ËΩΩËøáÁ®ã‰∏≠Â∑≤ÁªèË¢´Ëß£ÊûêËøáÁöÑÂÆûÈôÖÁöÑResourceÁöÑÂ°´ÂÖÖÈõÜÂêà if (actualResources != null) { for (Resource resource : resources) { actualResources.add(resource); } } return loadCount;}catch (IOException ex) { throw new BeanDefinitionStoreException( ‚ÄúCould not resolve bean definition resource pattern [‚Äú + location + ‚Äú]‚Äù, ex);}ÈùûResourcePatternResolverÁ±ªÂûãÊÉÖÂÜµÔºö// Can only load single resources by absolute URL.//Âè™ËÉΩÈÄöËøáÁªùÂØπURLÂä†ËΩΩÂçï‰∏™ËµÑÊ∫êResource resource = resourceLoader.getResource(location);//Ëß£ÊûêÂπ∂ËøîÂõûbeanDefinitionÁöÑÊï∞Èáèint loadCount = loadBeanDefinitions(resource);if (actualResources != null) { actualResources.add(resource);}return loadCount;ÁÑ∂ÂêéÁªßÁª≠ÈÄöËøáÈáçËΩΩÊñπÊ≥ïloadBeanDefinitions(Resource‚Ä¶ resources)Êù•Ëß£ÊûêÔºàAbstractBeanDefinitionReaderÁ±ª‰∏≠Ôºâpublic int loadBeanDefinitions(Resource‚Ä¶ resources) throws BeanDefinitionStoreException { Assert.notNull(resources, ‚ÄúResource array must not be null‚Äù); //ÂàùÂßãÂåñbeanDefiniton‰∏™Êï∞ int counter = 0; //ÈÅçÂéÜÂΩìÂâçËµÑÊ∫êÊï∞ÁªÑ for (Resource resource : resources) { //Ëß£ÊûêÂÖ∑‰Ωìresource‰∏≠ÁöÑbean counter += loadBeanDefinitions(resource); } return counter;}ÁÑ∂Âêé‰∫§ÁªôÂ≠êÁ±ªXmlBeanDefinitionReader‰∏≠ÁöÑloadBeanDefinitions(Resource resource)ÊñπÊ≥ïÔºöpublic int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException { return loadBeanDefinitions(new EncodedResource(resource));}ÁªßÁª≠ÈÄöËøáÈáçËΩΩÊñπÊ≥ïloadBeanDefinitions(EncodedResource encodedResource)ÊâßË°åÔºåËøô‰∏™ÊñπÊ≥ïÊàë‰ª¨Âè™ÂÖ≥Ê≥®ÊúÄÊ†∏ÂøÉÁöÑ‰ª£Á†ÅÔºö//Ëé∑ÂèñËæìÂÖ•ÊµÅInputStream inputStream = encodedResource.getResource().getInputStream();try { //ËµÑÊ∫êËØªÂèñinputSource InputSource inputSource = new InputSource(inputStream); if (encodedResource.getEncoding() != null) { inputSource.setEncoding(encodedResource.getEncoding()); } //ÂßîÊâòÁªôdoLoadBeanDefinitionsÊù•ÂÆåÊàê return doLoadBeanDefinitions(inputSource, encodedResource.getResource());}finally { inputStream.close();}doLoadBeanDefinitionsÊòØXmlBeanDefinitionReader‰∏≠ÁöÑÊñπÊ≥ïÔºåÊù•ÁúãÊ†∏ÂøÉ‰ª£Á†ÅÔºö//Ëß£ÊûêÊàêÁ¨¶Âêàw3cÊ†áÂáÜÁöÑDocumentDocument doc = doLoadDocument(inputSource, resource);//ÁªßÁª≠‰∫§ÁªôregisterBeanDefinitionsÊù•Â§ÑÁêÜreturn registerBeanDefinitions(doc, resource);Ëøô‰∏™Êó∂ÂÄôÂ∑≤ÁªèÂ∞ÜloadBeanDefinitionsÊç¢ÊàêregisterBeanDefinitions‰∫ÜÔºå‰πüÂ∞±ÊòØËΩΩÂÖ•Âπ∂Ê≥®ÂÜåÔºõregisterBeanDefinitionsÂêåÊ†∑‰πüÊòØXmlBeanDefinitionReader‰∏≠ÁöÑÊñπÊ≥ïÔºöpublic int registerBeanDefinitions(Document doc, Resource resource) throwsBeanDefinitionStoreException { //ÂæóÂà∞documentReaderÁî®Êù•ËØªÂèñdocumentÊñáÊ°£ BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader(); //Ê≥®ÂÜå‰πãÂâçÁöÑbean‰∏™Êï∞ int countBefore = getRegistry().getBeanDefinitionCount(); //Ëß£ÊûêÂπ∂Ê≥®ÂÜåbean documentReader.registerBeanDefinitions(doc, createReaderContext(resource)); return getRegistry().getBeanDefinitionCount() - countBefore;}‰ªçÁÑ∂Ê≤°ÊúâÂ§ÑÁêÜÔºåÁªßÁª≠‰∫§ÁªôBeanDefinitionDocumentReaderÁöÑregisterBeanDefinitionsÊñπÊ≥ïÊù•ÂÆåÊàêÔºö//Ëøô‰∏™ÂÆûÁé∞Ê†πÊçÆ‚Äúspring-beans‚ÄùXSDÔºàÊàñDTDÔºâËß£ÊûêbeanÂÆö‰πâ„ÄÇpublic void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) { this.readerContext = readerContext; logger.debug(‚ÄúLoading bean definitions‚Äù); Element root = doc.getDocumentElement(); doRegisterBeanDefinitions(root);}ËøòÊòØÊ≤°Â§ÑÁêÜÔºåÂèàÁªÜÂåñ‰∏ÄÊ≠•Ôºå‰∫§ÁªôDefaultBeanDefinitionDocumentReaderÁöÑdoRegisterBeanDefinitions(Element root)ÊñπÊ≥ïÔºöprotected void doRegisterBeanDefinitions(Element root) { BeanDefinitionParserDelegate parent = this.delegate; this.delegate = createDelegate(getReaderContext(), root, parent); if (this.delegate.isDefaultNamespace(root)) { String profileSpec = root.getAttribute(PROFILE_ATTRIBUTE); if (StringUtils.hasText(profileSpec)) { String[] specifiedProfiles = StringUtils.tokenizeToStringArray( profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS); if (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) { if (logger.isInfoEnabled()) { logger.info(‚ÄúSkipped XML bean definition file due to specified profiles [‚Äú + profileSpec + ‚Äú] not matching: ‚Äú + getReaderContext().getResource()); } return; } } } preProcessXml(root); parseBeanDefinitions(root, this.delegate); postProcessXml(root); this.delegate = parent;}‰ªª‰ΩïÂµåÂ•óÁöÑ&lt;beans&gt;ÂÖÉÁ¥†ÈÉΩÂ∞ÜÂØºËá¥Ê≠§ÊñπÊ≥ïÁöÑÈÄíÂΩí„ÄÇ ‰∏∫‰∫ÜÊ≠£Á°Æ‰º†Êí≠Âíå‰øùÂ≠ò&lt;beans&gt; default- Â±ûÊÄßÔºåËØ∑Ë∑üË∏™ÂΩìÂâçÔºàÁà∂ÔºâÂßîÊâòÔºåËØ•ÂßîÊâòÂèØËÉΩ‰∏∫null„ÄÇ ‰∏∫‰∫ÜÂõûÈÄÄÁöÑÁõÆÁöÑÔºåÂàõÂª∫‰∏Ä‰∏™ÂºïÁî®Áà∂ÂØπË±°ÁöÑÊñ∞ÔºàÂ≠êÔºâÂßîÊâòÔºåÁÑ∂ÂêéÊúÄÁªàÈáçÁΩÆthis.delegateÂõûÂà∞ÂÆÉÁöÑÂéüÂßãÔºàÁà∂ÔºâÂºïÁî®„ÄÇËøô‰∏™Ë°å‰∏∫Ê®°‰ªø‰∫Ü‰∏ÄÂ†ÜÂßîÊâòÔºåËÄåÂÆûÈôÖ‰∏äÂπ∂‰∏çÈúÄË¶Å‰∏Ä‰∏™ÂßîÊâò„ÄÇÔºàÁøªËØëÁöÑÊúâÁÇπËπ©ËÑöÔºåÂ§ßÊ¶ÇÊÑèÊÄùÂ∞±ÊòØËøôÔºâÊâÄ‰ª•ËØ¥DefaultBeanDefinitionDocumentReaderËá™Â∑±‰πüÊ≤°Âπ≤Ëøô‰∫ãÔºåÂèàÁªô‰∫ÜBeanDefinitionParserDelegateÔºåÁÑ∂ÂêéÂ∞±ÊòØpreProcessXml()„ÄÅparseBeanDefinitions()„ÄÅpostProcessXml()ÊñπÊ≥ïÔºõÂÖ∂‰∏≠preProcessXml()ÂíåpostProcessXml()ÈªòËÆ§ÊòØÁ©∫ÊñπÊ≥ïÔºåËá™Â∑±Ê≤°ÊúâÂÆûÁé∞„ÄÇÂÖ∑‰ΩìËß£ÊûêÂú®parseBeanDefinitions(root, this.delegate)‰∏≠ÂÆåÊàê„ÄÇBeanDefinitionParserDelegateÁî®‰∫éÂ∞Ü Document ÁöÑÂÜÖÂÆπËΩ¨Êàê BeanDefinitionÂÆû‰æãÔºõBeanDefinitionDocumentReader Êú¨Ë∫´‰∏çÂÖ∑Â§áËØ•ÂäüËÉΩËÄåÊòØ‰∫§Áªô‰∫ÜËØ•Á±ªÊù•ÂÆåÊàê„ÄÇprotected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) { //Êü•ÁúãÂÆö‰πâÁöÑÂëΩÂêçÁ©∫Èó¥ÊòØÂê¶‰∏∫ÈªòËÆ§ÁöÑÂëΩÂêçÁ©∫Èó¥ if (delegate.isDefaultNamespace(root)) { NodeList nl = root.getChildNodes(); for (int i = 0; i &lt; nl.getLength(); i++) { Node node = nl.item(i); if (node instanceof Element) { Element ele = (Element) node; if (delegate.isDefaultNamespace(ele)) { parseDefaultElement(ele, delegate); } else { delegate.parseCustomElement(ele); } } } } else { delegate.parseCustomElement(root); }}Ëøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØËß£ÊûêÊñáÊ°£‰∏≠Ê†πÁõÆÂΩï‰∏ãÁöÑÂÖÉÁ¥†Ôºö‚Äúimport‚ÄùÔºå‚Äúalias‚ÄùÔºå‚Äúbean‚Äù„ÄÇprivate void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) { //Ëß£Êûê‰∏Ä‰∏™‚Äúimport‚ÄùÂÖÉÁ¥†ÔºåÂπ∂Â∞ÜÁªôÂÆöËµÑÊ∫êÁöÑbeanÂÆö‰πâÂä†ËΩΩÂà∞beanÂ∑•ÂéÇ‰∏≠„ÄÇ if (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) { importBeanDefinitionResource(ele); } //Â§ÑÁêÜÁªôÂÆöÁöÑÂà´ÂêçÂÖÉÁ¥†ÔºåÂêëÊ≥®ÂÜåË°®Ê≥®ÂÜåÂà´Âêç„ÄÇ else if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) { processAliasRegistration(ele); } //Â§ÑÁêÜÁªôÂÆöÁöÑbeanÂÖÉÁ¥†ÔºåËß£ÊûêbeanÂÆö‰πâÂπ∂Â∞ÜÂÖ∂Ê≥®ÂÜåÂà∞Ê≥®ÂÜåË°®‰∏≠„ÄÇ else if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) { processBeanDefinition(ele, delegate); } //Âú®ÁªôÂÆöÁöÑÊ†π&lt;beans /&gt;ÂÖÉÁ¥†ÂÜÖÊ≥®ÂÜåÊØè‰∏™beanÂÆö‰πâ„ÄÇ else if (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) { // recurse doRegisterBeanDefinitions(ele); }}ÂÖàÊù•ÁúãprocessBeanDefinitionËøô‰∏™ÊñπÊ≥ïÔºõBeanDefinitionHolderÊòØ‰∏Ä‰∏™BeanDefinitionÁöÑÊåÅÊúâËÄÖÔºåÂÖ∂ÂÆö‰πâ‰∫Ü‰∏Ä‰∏ãÂèòÈáèÔºåÂπ∂ÂØπ‰ª•‰∏ãÂèòÈáèÊèê‰æõgetÂíåsetÊìç‰Ωú„ÄÇËøô‰∏™Âú®ÂêéÈù¢ÁöÑËØ¥ÈÅìBeanDefinition‰ΩìÁ≥ªÁöÑÊó∂ÂÄôÂÜçËÅä„ÄÇprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) { //Ëé∑Âèñ‰∏Ä‰∏™BeanDefinitionHolder BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele); if (bdHolder != null) { //È¶ñÂÖàÊ†πÊçÆËá™ÂÆö‰πâÂ±ûÊÄßËøõË°åË£ÖÈ•∞„ÄÇ //Âü∫‰∫éËá™ÂÆö‰πâÂµåÂ•óÂÖÉÁ¥†ËøõË°åË£ÖÈ•∞„ÄÇ bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder); try { // Ê≥®ÂÜåÊúÄÁªàË£ÖÈ•∞ÁöÑÂÆû‰æã„ÄÇ BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry()); } catch (BeanDefinitionStoreException ex) { getReaderContext().error(‚ÄúFailed to register bean definition with name ‚Äò‚Äú + bdHolder.getBeanName() + ‚Äú‚Äò‚Äú, ele, ex); } // ÂèëÈÄÅÊ≥®ÂÜå‰∫ã‰ª∂„ÄÇ getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder)); }}Êé•ÁùÄÁúãregisterBeanDefinitionËøô‰∏™ÊñπÊ≥ïÔºöÈÄöËøáÁªôÂÆöÁöÑbeanÂ∑•ÂéÇÊ≥®ÂÜåÁªôÂÆöÁöÑbean definition „ÄÇpublic static void registerBeanDefinition( BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry) throws BeanDefinitionStoreException { // Âú®‰∏ªÂêçÁß∞‰∏ãÊ≥®ÂÜåbeanÂÆö‰πâ„ÄÇ String beanName = definitionHolder.getBeanName(); registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition()); // Â¶ÇÊûúÊúâÁöÑËØùÔºåÊ≥®ÂÜåbeanÂêçÁß∞ÁöÑÂà´ÂêçÔºå String[] aliases = definitionHolder.getAliases(); if (aliases != null) { for (String alias : aliases) { registry.registerAlias(beanName, alias); } }}registerBeanDefinitionÈáåÈù¢ÂèàÈÄöËøáË∞ÉÁî®BeanDefinitionRegistryÊé•Âè£ÁöÑÂÆûÁé∞DefaultListableBeanFactoryÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÊ≥®ÂÜåËøáÁ®ã„ÄÇÂÖ≥‰∫éDefaultListableBeanFactory‰∏≠registerBeanDefinitionÊñπÊ≥ïÁöÑËß£ÊûêÈÄªËæëÂ∞ÜÂú®SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinitionËΩΩÂÖ•(‰∏ã)‰∏≠Êù•ËØ¥.Ê¨¢ËøéÂÖ≥Ê≥®ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanFactoryÁöÑÂàõÂª∫]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase3%2F</url>
    <content type="text"><![CDATA[SpringÁöÑIocÂÆπÂô®ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™beanÁöÑÂÖ≥Á≥ªÁΩëÔºå‰æùËµñ‰∫écoreÔºåbeanÔºåcontext‰∏â‰∏™ÁªÑ‰ª∂Êù•ÊûÑÂª∫ÁöÑ„ÄÇÂú®spring‰∏≠ÊúÄÊ†∏ÂøÉÁöÑÂ∞±ÊòØÂØπ‰∫ébeanÁöÑÁÆ°ÁêÜ„ÄÇËÄåbeanÂèà‰æùÊâò‰∫éÊàë‰ª¨ÁöÑÂÆπÂô®„ÄÇÊú¨ÊñáÂ∞Ü‰ªéÈ°∂Â±ÇÂàÜÊûê‰∏Ä‰∏ãspring‰∏≠beanFactoryÁöÑÂÖ∑‰ΩìÂàõÂª∫ËøáÁ®ãÔºå‰∏∫ÂêéÁª≠ÁöÑbeanÁöÑÁîüÂëΩÂë®ÊúüÊèê‰æõ‰∏Ä‰∏™Âü∫Á°Ä„ÄÇ BeanFactoryÁöÑÁªßÊâø‰ΩìÁ≥ª ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂà∞ÔºåBeanFactoryÊúâ‰∏â‰∏™Â≠êÁ±ªÔºö ListableBeanFactory HierarchicalBeanFactory AutowireCapableBeanFactory Ôºà‰∏äËø∞‰∏â‰∏™Á±ªÁöÑÂ≠êÁ±ª‰ΩìÁ≥ªÂ∞è‰ºô‰º¥‰ª¨ÂèØ‰ª•Ëá™Â∑±ÂØπÁùÄÊ∫êÁ†ÅÁúã‰∏ãÔºåÂÆûÂú®Â§™Â§öÔºâ Áúã‰∏ã‰∏äÂõæ‰∏≠ÊúÄÂ∫ïÂ±ÇÁöÑDefaultListableBeanFactoryÁ±ªÁöÑÂÆö‰πâÔºö12public class DefaultListableBeanFactory extends AbstractAutowireCapableBeanFactory implements ConfigurableListableBeanFactory, BeanDefinitionRegistry, Serializable Ëøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØBeanFactoryÁöÑÈªòËÆ§ÂÆûÁé∞Á±ªÔºåÂÆÉÁõ¥Êé•ÊàñËÄÖÈó¥Êé•ÁöÑÂÆûÁé∞‰∫ÜÊâÄÊúâÁöÑÊé•Âè£„ÄÇÂÖ∂ÂÆûÂú®ÁúãspringÊ∫êÁ†ÅÁöÑÊó∂ÂÄôÈÉΩ‰ºöÈÅáÂà∞Á±ª‰ººÁöÑËÆæËÆ°Ê®°ÂºèÔºåÂØπ‰∫éÊüê‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂäüËÉΩÔºåÈÄöÂ∏∏ÈÉΩ‰ºöÂÆö‰πâÂæàÂ§öÂ±ÇÁöÑÊé•Âè£ÔºåÂ±ÇÂ±ÇÂåÖË£ÖÔºåÂ±ÇÂ±ÇÂßîÊâò„ÄÇËøôÁßçÂÅöÊ≥ïÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÔºåÂØπ‰∫é‰∏çÂêåÁöÑÂú∫ÂêàÈÉΩ‰ºöÊúâÁâπÂÆöÁöÑÊé•Âè£ÔºõËøôÊ†∑‰∏ÄÊù•Â∞±ÂèØ‰ª•Âú®springÂÜÖÈÉ®ÂØπÂØπË±°ÁöÑ‰º†ÈÄíÂíåËΩ¨ÂåñÊìç‰ΩúÈÉΩ‰ºöÊúâ‰∏Ä‰∫õËÆøÈóÆÈôêÂà∂„ÄÇ ‰æãÂ¶ÇListableBeanFactoryÊé•Âè£Ë°®Á§∫Ëøô‰∫õBeanÊòØÂèØÂàóË°®ÁöÑÔºåËÄåHierarchicalBeanFactoryË°®Á§∫ÁöÑÊòØËøô‰∫õBeanÊòØÊúâÁªßÊâøÂÖ≥Á≥ªÁöÑÔºå‰πüÂ∞±ÊòØÊØè‰∏™BeanÊúâÂèØËÉΩÊúâÁà∂Bean„ÄÇAutowireCapableBeanFactoryÊé•Âè£ÂÆö‰πâBeanÁöÑËá™Âä®Ë£ÖÈÖçËßÑÂàô„ÄÇËøôÂõõ‰∏™Êé•Âè£ÂÖ±ÂêåÂÆö‰πâ‰∫ÜBeanÁöÑÈõÜÂêà„ÄÅBean‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÅ‰ª•ÂèäBeanË°å‰∏∫„ÄÇ BeanFactoryÁöÑÂàõÂª∫ Âú®‰πãÂâçÁöÑÊñáÁ´†‰∏≠ËØ¥Ëøá‰∫ÜÂÆπÂô®ÁöÑÂà∑Êñ∞ËøáÁ®ã„ÄÇBeanFactoryÁöÑÂàõÂª∫‰πüÂú®wac.refresh()ÊñπÊ≥ï‰∏≠„ÄÇÂÖ∑‰ΩìÁúã‰∏ãÂà∞Â∫ïÊòØÈÄöËøáÂì™‰∫õÂ≠êÁ±ªÊù•ÂÆåÊàêÁöÑÔºö 12// ÈÄöÁü•Â≠êÁ±ªÂà∑Êñ∞ÂÜÖÈÉ®ÁöÑbeanÂ∑•ÂéÇ„ÄÇConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); 1.AbstractApplicationContext‰∏≠ÁöÑobtainFreshBeanFactory ‰∏ãÈù¢ÊòØobtainFreshBeanFactoryÁöÑÊñπÊ≥ïÈÄªËæëÔºö12345678910protected ConfigurableListableBeanFactory obtainFreshBeanFactory() &#123; //Ëøô‰∏™ÊòØÂÖ∑‰ΩìÂàõÂª∫ÁöÑÊñπÊ≥ïÔºåÁî±Â≠êÁ±ªÂÆûÁé∞ refreshBeanFactory(); //Ëé∑ÂèñBeanFactoryÂÆû‰æãÂØπË±°ÔºàConfigurableListableBeanFactoryÁ±ªÂûãÁöÑÔºâ ConfigurableListableBeanFactory beanFactory = getBeanFactory(); if (logger.isDebugEnabled()) &#123; logger.debug("Bean factory for " + getDisplayName() + ": " + beanFactory); &#125; return beanFactory;&#125; refreshBeanFactoryÂπ∂Êú™ÊúâÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÈÄªËæëÔºåËøô‰∏™ÊñπÊ≥ï‰∏ªË¶ÅÊòØÈÄöËøáÂßîÊâòÁªôÂ≠êÁ±ªÁöÑrefreshBeanFactoryÊñπÊ≥ïÊù•ÂÆûÁé∞ÔºåÂú®AbstractApplicationContext‰∏≠refreshBeanFactoryÊòØ‰∏Ä‰∏™ÊäΩË±°Ê®°ÊùøÊñπÊ≥ïÔºö 1protected abstract void refreshBeanFactory() throws BeansException, IllegalStateException; 2.refreshBeanFactoryÊñπÊ≥ï(AbstractRefreshableApplicationContextÁ±ª‰∏≠)Ôºö ‰∏ãÈù¢Âè™Ê≥®Èáä‰∏ébeanFactoryÂàõÂª∫Áõ∏ÂÖ≥ÁöÑ‰ª£Á†Å 1234567891011121314151617181920212223protected final void refreshBeanFactory() throws BeansException &#123; //ÊòØÂê¶Â∑≤ÁªèÊúâBeanFactory‰∫Ü if (hasBeanFactory()) &#123; //ÈîÄÊØÅÂéüÊúâÁöÑBean destroyBeans(); //ÂÖ≥Èó≠Â∑•ÂéÇ closeBeanFactory(); &#125; try &#123; //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑbeanFactory DefaultListableBeanFactory beanFactory = createBeanFactory(); beanFactory.setSerializationId(getId()); customizeBeanFactory(beanFactory); loadBeanDefinitions(beanFactory); synchronized (this.beanFactoryMonitor) &#123; this.beanFactory = beanFactory; &#125; &#125; catch (IOException ex) &#123; throw new ApplicationContextException("I/O error parsing bean definition source for " + getDisplayName(), ex); &#125;&#125; Ëøô‰∏™ÊñπÊ≥ïÊòØÂÆûÁé∞ÊâßË°åËøô‰∏™‰∏ä‰∏ãÊñáÁöÑÂ∫ïÂ±ÇbeanÂ∑•ÂéÇÁöÑÂÆûÈôÖÂà∑Êñ∞ÔºåÂ¶ÇÊûúÊúâÁöÑËØù‰πãÂâçÊúâBeanFactoryÂ≠òÂú®ÔºåÂàôÂÖ≥Èó≠‰ª•ÂâçÁöÑbeanÂ∑•ÂéÇ„ÄÇÂπ∂‰∏∫‰∏ä‰∏ãÊñáÁîüÂëΩÂë®ÊúüÁöÑ‰∏ã‰∏Ä‰∏™Èò∂ÊÆµÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞È≤úÁöÑbeanÂ∑•ÂéÇ„ÄÇ 3.createBeanFactory(AbstractRefreshableApplicationContextÁ±ª‰∏≠) 123protected DefaultListableBeanFactory createBeanFactory() &#123; return new DefaultListableBeanFactory(getInternalParentBeanFactory());&#125; Ëøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØ‰∏∫ÂΩìÂâç‰∏ä‰∏ãÊñáÂàõÂª∫‰∏Ä‰∏™ÂÜÖÈÉ®ÁöÑbeanÂ∑•ÂéÇ„ÄÇÊØèÊ¨°Ë∞ÉÁî®refresh()ÊñπÊ≥ïÊòØÈÉΩ‰ºöÂàõÂª∫Â∞ùËØïÂàõÂª∫„ÄÇÈªòËÆ§ÂÆûÁé∞ÊòØÂàõÂª∫‰∏Ä‰∏™DefaultListableBeanFactory„ÄÇÂπ∂ÈÄöËøágetInternalParentBeanFactoryÔºàÔºâËé∑ÂèñÂÜÖÈÉ®beanÂ∑•ÂéÇÊù•‰Ωú‰∏∫Áà∂Á∫ßbeanÂ∑•ÂéÇ„ÄÇÂèØ‰ª•Âú®Â≠êÁ±ª‰∏≠ÈáçÂÜôÔºå‰æãÂ¶ÇËá™ÂÆö‰πâDefaultListableBeanFactoryÁöÑËÆæÁΩÆ„ÄÇ getInternalParentBeanFactoryÔºàAbstractApplicationContextÁ±ª‰∏≠Ôºâ 1234protected BeanFactory getInternalParentBeanFactory() &#123; return (getParent() instanceof ConfigurableApplicationContext) ? ((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent();&#125; 4.DefaultListableBeanFactoryÁöÑÊûÑÈÄ†ÂáΩÊï∞ 1234567/** * ÈÄöËøáÁªôÂÆöÁöÑÁà∂Á±ªÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑDefaultListableBeanFactoryÂÆπÂô® * @param parentBeanFactory the parent BeanFactory */public DefaultListableBeanFactory(BeanFactory parentBeanFactory) &#123; super(parentBeanFactory);&#125; super(parentBeanFactory)Ë∞ÉÁî®ÁöÑÊòØAbstractAutowireCapableBeanFactoryÁöÑÊûÑÈÄ†ÂáΩÊï∞123456789/** * ÈÄöËøáÁªôÂÆöÁöÑÁà∂Á±ªÊûÑÂª∫Êñ∞ÁöÑAbstractAutowireCapableBeanFactory * @param parentBeanFactory parent bean factory, or &#123;@code null&#125; if none */public AbstractAutowireCapableBeanFactory(BeanFactory parentBeanFactory) &#123; this(); //ËÆæÁΩÆÁà∂Â∑•ÂéÇ setParentBeanFactory(parentBeanFactory);&#125; this(),ËøòÊòØAbstractAutowireCapableBeanFactoryÁöÑÊûÑÈÄ†ÂáΩÊï∞Ôºö123456789/** * ÊûÑÂª∫‰∏Ä‰∏™Êñ∞ÁöÑAbstractAutowireCapableBeanFactory. */public AbstractAutowireCapableBeanFactory() &#123; super(); ignoreDependencyInterface(BeanNameAware.class); ignoreDependencyInterface(BeanFactoryAware.class); ignoreDependencyInterface(BeanClassLoaderAware.class);&#125; super() ; AbstractBeanFactoryÁöÑÊûÑÈÄ†ÂáΩÊï∞ 12345/** * ÊûÑÂª∫‰∏Ä‰∏™Êñ∞ÁöÑAbstractBeanFactory. */public AbstractBeanFactory() &#123;&#125;]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöBeanDefinition Ê∫êÁ†ÅËß£Êûê]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase2%2F</url>
    <content type="text"><![CDATA[BeanÁöÑÂÆö‰πâ‰∏ªË¶ÅÁî±BeanDefinitionÊù•ÊèèËø∞ÁöÑ„ÄÇ‰Ωú‰∏∫Spring‰∏≠Áî®‰∫éÂåÖË£ÖBeanÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰ªäÂ§©Â∞±Êù•ÁúãÁúãÂÆÉÁöÑÈù¢Á∫±‰∏ãÁöÑÁúüÂÆπÂêß„ÄÇ È¶ñÂÖàÂ∞±ÊòØBeanDefinitionÁöÑÁ±ªÂÆö‰πâÔºö1public interface BeanDefinition extends AttributeAccessor, BeanMetadataElement ÂØπÔºåÊ≤°ÈîôÔºåËøôË¥ßÊòØ‰∏™Êé•Âè£ÔºåËÄå‰∏çÊòØÁ±ªÔºåÊòØ‰∏çÊòØÊúâÁÇπËé´ÂêçÂ•áÂ¶ôÂë¢ÔºüÊàë‰ª¨ÈÉΩÁü•ÈÅìÂú®JAVA‰∏≠ÔºåÊé•Âè£ÊòØ‰∏çËÉΩÁî®Êù•newÂá∫Êñ∞ÁöÑÂØπË±°ÁöÑÔºåÈÇ£‰πàÂú®Spring‰∏≠ÔºåÂà∞Â∫ïÂ∞ÜXMLËß£ÊûêÂá∫Êù•ÁöÑBeanÂåÖË£ÖÊàê‰∫Ü‰ªÄ‰πàÂë¢ÔºüÔºàËøô‰∏™ÂØÜÁ≠â‰∏ãÊè≠ÂºÄÔºâ ÂÖàÊù•ÁúãÁúãBeanDefinition‰∏Ä‰∏™ÁªßÊâøÁªìÊûÑÂêßÔºàÂùáÊòØ‰∏éBeanDefinitionÊúâÁõ¥Êé•ÂÖ≥ËÅîÁöÑÁ±ªÊàñËÄÖÊé•Âè£ÔºâÔºÅ ‰ªéÁ±ªÂõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåBeanDefinitionÁªßÊâø‰∫ÜAttributeAccessorÂíåBeanMetadataElement‰∏§‰∏™Êé•Âè£Ôºõ‰∏Ä‰∏™‰∏Ä‰∏™Áúã„ÄÇ AttributeAccessor AttributeAccessorÊé•Âè£ÂÆö‰πâ‰∫ÜÊúÄÂü∫Êú¨ÁöÑÂØπ‰ªªÊÑèÂØπË±°ÁöÑÂÖÉÊï∞ÊçÆÁöÑ‰øÆÊîπÊàñËÄÖËé∑ÂèñÔºå‰∏ªË¶ÅÊñπÊ≥ïÊúâÔºö1234567891011//Â∞ÜnameÂÆö‰πâÁöÑÂ±ûÊÄßËÆæÁΩÆ‰∏∫Êèê‰æõÁöÑvalueÂÄº„ÄÇÂ¶ÇÊûúvalueÁöÑÂÄº‰∏∫nullÔºåÂàôËØ•Â±ûÊÄß‰∏∫&#123;@link #removeAttribute removed&#125;„ÄÇ//ÈÄöÂ∏∏ÔºåÁî®Êà∑Â∫îËØ•Ê≥®ÊÑèÈÄöËøá‰ΩøÁî®ÂÆåÂÖ®ÈôêÂÆöÁöÑÂêçÁß∞ÔºàÂèØËÉΩ‰ΩøÁî®Á±ªÊàñÂåÖÂêçÁß∞‰Ωú‰∏∫ÂâçÁºÄÔºâÊù•Èò≤Ê≠¢‰∏éÂÖ∂‰ªñÂÖÉÊï∞ÊçÆÂ±ûÊÄßÈáçÂè†„ÄÇvoid setAttribute(String name, Object value);//Ëé∑ÂèñÊ†áËØÜ‰∏∫nameÁöÑÂ±ûÊÄßÁöÑÂÄº„ÄÇObject getAttribute(String name);//Âà†Èô§Ê†áËØÜ‰∏∫nameÁöÑÂ±ûÊÄßÔºåÂπ∂ËøîÂõûÂ±ûÊÄßÂÄºObject removeAttribute(String name);//Â¶ÇÊûúÂêç‰∏∫nameÁöÑÂ±ûÊÄßÊòØÂê¶Â≠òÂú®ÔºåÂ≠òÂú®ËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse„ÄÇboolean hasAttribute(String name);//ËøîÂõûÊâÄÊúâÂ±ûÊÄßÁöÑÂêçÁß∞„ÄÇString[] attributeNames(); BeanMetadataElement BeanMetadataElementÊé•Âè£Êèê‰æõ‰∫Ü‰∏Ä‰∏™getResource()ÊñπÊ≥ï,Áî®Êù•‰º†Ëæì‰∏Ä‰∏™ÂèØÈÖçÁΩÆÁöÑÊ∫êÂØπË±°„ÄÇ 12//ËøîÂõûÊ≠§ÂÖÉÊï∞ÊçÆÂÖÉÁ¥†ÁöÑÈÖçÁΩÆÊ∫êÂØπË±°ÔºàÂèØËÉΩ‰∏∫nullÔºâ„ÄÇObject getSource(); BeanDifinitionÊ∫êÁ†ÅÂàÜÊûê‰∏Ä‰∏™BeanDefinitionÊèèËø∞‰∫Ü‰∏Ä‰∏™beanÁöÑÂÆû‰æãÔºåÂåÖÊã¨Â±ûÊÄßÂÄºÔºåÊûÑÈÄ†ÊñπÊ≥ïÂèÇÊï∞ÂÄºÂíåÁªßÊâøËá™ÂÆÉÁöÑÁ±ªÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇBeanDefinition‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÊé•Âè£Ôºå‰∏ªË¶ÅÂäüËÉΩÊòØÂÖÅËÆ∏BeanFactoryPostProcessor ‰æãÂ¶ÇPropertyPlaceHolderConfigure ËÉΩÂ§üÊ£ÄÁ¥¢Âπ∂‰øÆÊîπÂ±ûÊÄßÂÄºÂíåÂà´ÁöÑbeanÁöÑÂÖÉÊï∞ÊçÆÔºàËØëÊ≥®Ôºâ„ÄÇ 123//Ê†áÂáÜÂçï‰æã‰ΩúÁî®ÂüüÁöÑ‰ΩúÁî®ÂüüÊ†áËØÜÁ¨¶Ôºö‚Äúsingleton‚Äù„ÄÇ//ÂØπ‰∫éÊâ©Â±ïÁöÑbeanÂ∑•ÂéÇÂèØËÉΩÊîØÊåÅÊõ¥Â§öÁöÑ‰ΩúÁî®Âüü„ÄÇString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON; 123//Ê†áÂáÜÂéüÂûã‰ΩúÁî®ÂüüÁöÑËåÉÂõ¥Ê†áËØÜÁ¨¶Ôºö‚Äúprototype‚Äù„ÄÇ//ÂØπ‰∫éÊâ©Â±ïÁöÑbeanÂ∑•ÂéÇÂèØËÉΩÊîØÊåÅÊõ¥Â§öÁöÑ‰ΩúÁî®Âüü„ÄÇString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE; 12//Ë°®Á§∫BeanDefinitionÊòØÂ∫îÁî®Á®ãÂ∫è‰∏ªË¶ÅÈÉ®ÂàÜÁöÑËßíËâ≤ÊèêÁ§∫„ÄÇ ÈÄöÂ∏∏ÂØπÂ∫î‰∫éÁî®Êà∑ÂÆö‰πâÁöÑbean„ÄÇint ROLE_APPLICATION = 0; ROLE_SUPPORT =1ÂÆûÈôÖ‰∏äÂ∞±ÊòØËØ¥ÔºåÊàëËøô‰∏™BeanÊòØÁî®Êà∑ÁöÑÔºåÊòØ‰ªéÈÖçÁΩÆÊñá‰ª∂‰∏≠ËøáÊù•ÁöÑ„ÄÇ1234//Ë°®Á§∫BeanDefinitionÊòØÊüê‰∫õÂ§ßÂûãÈÖçÁΩÆÁöÑÊîØÊåÅÈÉ®ÂàÜÁöÑËßíËâ≤ÊèêÁ§∫ÔºåÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™Â§ñÈÉ®ComponentDefinition„ÄÇ//ÂΩìÊü•ÁúãÊüê‰∏™ÁâπÂÆöÁöÑComponentDefinitionÊó∂ÔºåËÆ§‰∏∫beanÈùûÂ∏∏ÈáçË¶ÅÔºå//‰ª•‰æøÂú®Êü•ÁúãÂ∫îÁî®Á®ãÂ∫èÁöÑÊï¥‰ΩìÈÖçÁΩÆÊó∂ËÉΩÂ§üÊÑèËØÜÂà∞Ëøô‰∏ÄÁÇπ„ÄÇint ROLE_SUPPORT = 1; ROLE_INFRASTRUCTURE = 2Â∞±ÊòØÊàëËøôBeanÊòØSpringËá™Â∑±ÁöÑÔºåÂíå‰Ω†Áî®Êà∑Ê≤°Êúâ‰∏ÄÊØõÈí±ÂÖ≥Á≥ª„ÄÇ123//ËßíËâ≤ÊèêÁ§∫Ë°®Êòé‰∏Ä‰∏™BeanDefinitionÊòØÊèê‰æõ‰∏Ä‰∏™ÂÆåÂÖ®ËÉåÊôØÁöÑËßíËâ≤ÔºåÂπ∂‰∏î‰∏éÊúÄÁªàÁî®Êà∑Ê≤°ÊúâÂÖ≥Á≥ª„ÄÇ//Ëøô‰∏™ÊèêÁ§∫Áî®‰∫éÊ≥®ÂÜåÂÆåÂÖ®ÊòØComponentDefinitionÂÜÖÈÉ®Â∑•‰ΩúÁöÑ‰∏ÄÈÉ®ÂàÜÁöÑbeanint ROLE_INFRASTRUCTURE = 2; ‰∏äÈù¢ÊòØBeanDifinitionÁöÑ‰∏Ä‰∫õÂü∫Êú¨Â±ûÊÄß‰ø°ÊÅØÔºå‰∏Ä‰∏™Â∞±ÊòØÊ†áËØÜ‰∏ãÂΩìÂâçBeanÁöÑ‰ΩúÁî®ÂüüÔºåÂè¶Â§ñÂ∞±ÊòØÊ†áËØÜ‰∏Ä‰∏ãËøô‰∏™BeanÊòØÂÜÖÈÉ®ÁöÑËøòÊòØÂ§ñÈÉ®ÁöÑ„ÄÇ‰∏ãÈù¢Êù•ÁúãËøô‰∏™Êé•Âè£‰∏∫ÂÖ∂Â≠êÁ±ªÈÉΩÊèê‰æõ‰∫ÜÂì™‰∫õÂÖ∑‰ΩìÁöÑË°å‰∏∫ÊñπÊ≥ïÔºö 1.ÂΩìÂâçBeanÁà∂Á±ªÂêçÁß∞get&amp;setÊñπÊ≥ï1234//Â¶ÇÊûúÁà∂Á±ªÂ≠òÂú®ÔºåËÆæÁΩÆËøô‰∏™beanÂÆö‰πâÁöÑÁà∂ÂÆö‰πâÁöÑÂêçÁß∞„ÄÇvoid setParentName(String parentName);//Â¶ÇÊûúÁà∂Á±ªÂ≠òÂú®ÔºåÂàôËøîÂõûÂΩìÂâçBeanÁöÑÁà∂Á±ªÁöÑÂêçÁß∞String getParentName(); 2.ÂΩìÂâçBeanÁöÑclassName get&amp;setÊñπÊ≥ï123456789//ÊåáÂÆöÊ≠§beanÂÆö‰πâÁöÑbeanÁ±ªÂêçÁß∞„ÄÇ//Á±ªÂêçÁß∞ÂèØ‰ª•Âú®bean factoryÂêéÊúüÂ§ÑÁêÜ‰∏≠‰øÆÊîπÔºåÈÄöÂ∏∏Áî®ÂÆÉÁöÑËß£ÊûêÂèò‰ΩìÊõøÊç¢ÂéüÊù•ÁöÑÁ±ªÂêçÁß∞„ÄÇvoid setBeanClassName(String beanClassName);//ËøîÂõûÊ≠§beanÂÆö‰πâÁöÑÂΩìÂâçbeanÁ±ªÂêçÁß∞„ÄÇ//ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËøô‰∏ç‰∏ÄÂÆöÊòØÂú®ËøêË°åÊó∂‰ΩøÁî®ÁöÑÂÆûÈôÖÁ±ªÂêçÔºå‰ª•Èò≤Â≠êÁ±ªÂÆö‰πâË¶ÜÁõñ/ÁªßÊâøÂÖ∂Áà∂Á±ªÁöÑÁ±ªÂêç„ÄÇ//Ê≠§Â§ñÔºåËøôÂèØËÉΩÂè™ÊòØË∞ÉÁî®Â∑•ÂéÇÊñπÊ≥ïÁöÑÁ±ªÔºåÊàñËÄÖÂÆÉ Âú®Ë∞ÉÁî®ÊñπÊ≥ïÁöÑÂ∑•ÂéÇbeanÂºïÁî®ÁöÑÊÉÖÂÜµ‰∏ãÁîöËá≥ÂèØËÉΩÊòØÁ©∫ÁöÑ„ÄÇ//Âõ†Ê≠§Ôºå‰∏çË¶ÅËÆ§‰∏∫ËøôÊòØÂú®ËøêË°åÊó∂ÂÆö‰πâÁöÑbeanÁ±ªÂûãÔºåËÄåÂè™ÊòØÂ∞ÜÂÖ∂Áî®‰∫éÂú®ÂçïÁã¨ÁöÑbeanÂÆö‰πâÁ∫ßÂà´ËøõË°åËß£Êûê„ÄÇString getBeanClassName(); 3.BeanÁöÑ‰ΩúÁî®Âüüget&amp;setÊñπÊ≥ï1234//Ë¶ÜÁõñÊ≠§beanÁöÑÁõÆÊ†áËåÉÂõ¥ÔºåÊåáÂÆö‰∏Ä‰∏™Êñ∞ÁöÑËåÉÂõ¥ÂêçÁß∞„ÄÇvoid setScope(String scope);//ËøîÂõûÊ≠§beanÁöÑÂΩìÂâçÁõÆÊ†á‰ΩúÁî®ÂüüÁöÑÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ°ÆÂÆöÔºåËøîÂõûnullString getScope(); 4.ÊáíÂä†ËΩΩÁöÑget&amp;setÊñπÊ≥ï 123456//ËÆæÁΩÆËøô‰∏™beanÊòØÂê¶Â∫îËØ•Ë¢´Âª∂ËøüÂàùÂßãÂåñ„ÄÇÂ¶ÇÊûú&#123;false&#125;ÔºåÈÇ£‰πàËøô‰∏™beanÂ∞ÜÂú®ÂêØÂä®Êó∂Áî±beanÂ∑•ÂéÇÂÆû‰æãÂåñÔºå//Ëøô‰∫õÂ∑•ÂéÇÊâßË°åÂçï‰æãÁöÑÁ´ãÂç≥ÂàùÂßãÂåñ„ÄÇ//ÊáíÂä†ËΩΩ &lt;bean lazy-init="true/false"&gt;void setLazyInit(boolean lazyInit);//ËøîÂõûËøô‰∏™beanÊòØÂê¶Â∫îËØ•Ë¢´Âª∂ËøüÂàùÂßãÂåñÔºåÂç≥‰∏çÊòØÂú®ÂêØÂä®Êó∂Á´ãÂç≥ÂÆû‰æãÂåñ„ÄÇÂè™ÈÄÇÁî®‰∫éÂçï‰æãbean„ÄÇboolean isLazyInit(); 5.‰æùËµñÂÖ≥Á≥ªËÆæÁΩÆ12345//ËÆæÁΩÆËøô‰∏™bean‰æùËµñË¢´ÂàùÂßãÂåñÁöÑbeanÁöÑÂêçÂ≠ó„ÄÇ beanÂ∑•ÂéÇÂ∞Ü‰øùËØÅËøô‰∫õbeanÈ¶ñÂÖàË¢´ÂàùÂßãÂåñ„ÄÇ//&lt;bean depends-on=""&gt;void setDependsOn(String... dependsOn);//ËøîÂõûËøô‰∏™bean‰æùËµñÁöÑbeanÂêçÁß∞„ÄÇString[] getDependsOn(); 6.ÊòØÂê¶ÊòØËá™Âä®ËΩ¨ÈÖçËÆæÁΩÆ123456789//ËÆæÁΩÆËøô‰∏™beanÊòØÂê¶ÊòØËé∑ÂæóËá™Âä®Ë£ÖÈÖçÂà∞ÂÖ∂‰ªñbeanÁöÑÂÄôÈÄâ‰∫∫„ÄÇ//ÈúÄË¶ÅÊ≥®ÊÑèÊòØÔºåÊ≠§Ê†áÂøóÊó®Âú®‰ªÖÂΩ±ÂìçÂü∫‰∫éÁ±ªÂûãÁöÑËá™Âä®Ë£ÖÈÖç„ÄÇ//ÂÆÉ‰∏ç‰ºöÂΩ±ÂìçÊåâÂêçÁß∞ÁöÑÊòæÂºèÂºïÁî®ÔºåÂç≥‰ΩøÊåáÂÆöÁöÑbeanÊ≤°ÊúâÊ†áËÆ∞‰∏∫autowireÂÄôÈÄâÔºå‰πüÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ//Âõ†Ê≠§ÔºåÂ¶ÇÊûúÂêçÁß∞ÂåπÈÖçÔºåÈÄöËøáÂêçÁß∞ÁöÑËá™Âä®Ë£ÖÈÖçÂ∞ÜÊ≥®ÂÖ•‰∏Ä‰∏™bean„ÄÇvoid setAutowireCandidate(boolean autowireCandidate);//ËøîÂõûËøô‰∏™beanÊòØÂê¶ÊòØËá™Âä®Ë£ÖÈÖçÂà∞ÂÖ∂‰ªñbeanÁöÑÂÄôÈÄâËÄÖ„ÄÇÂ∞±ÊòØÊòØÂê¶Âú®ÂÖ∂‰ªñÁ±ª‰∏≠‰ΩøÁî®autowiredÊù•Ê≥®ÂÖ•ÂΩìÂâçBeanÁöÑ//ÊòØÂê¶‰∏∫Ë¢´Ëá™Âä®Ë£ÖÈÖç &lt;bean autowire-candidate="true/false"&gt;boolean isAutowireCandidate(); 7.‰∏ªÂÄôÈÄâBean1234//ÊòØÂê¶‰∏∫‰∏ªÂÄôÈÄâbean ‰ΩøÁî®Ê≥®Ëß£Ôºö@Primaryvoid setPrimary(boolean primary);//ËøîÂõûËøô‰∏™beanÊòØÂê¶ÊòØ‰∏ªË¶ÅÁöÑautowireÂÄôÈÄâËÄÖ„ÄÇboolean isPrimary(); 8.ÂÆö‰πâÂàõÂª∫ËØ•BeanÂØπË±°ÁöÑÂ∑•ÂéÇÁ±ª1234//ÊåáÂÆöË¶Å‰ΩøÁî®ÁöÑÂ∑•ÂéÇbeanÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ„ÄÇ ËøôÊòØË∞ÉÁî®ÊåáÂÆöÁöÑÂ∑•ÂéÇÊñπÊ≥ïÁöÑbeanÁöÑÂêçÁß∞„ÄÇvoid setFactoryBeanName(String factoryBeanName);//ËøîÂõûÂ∑•ÂéÇbeanÁöÑÂêçÂ≠óÔºåÂ¶ÇÊûúÊúâÁöÑËØù„ÄÇString getFactoryBeanName(); 9.ÂàõÂª∫ËØ•BeanÂØπË±°ÁöÑÂ∑•ÂéÇÊñπÊ≥ï 123456//Â¶ÇÊûúÊúâÁöÑËØùÔºåÊåáÂÆöÂ∑•ÂéÇÊñπÊ≥ï„ÄÇ//Ëøô‰∏™ÊñπÊ≥ïÂÖàÂ∞ÜÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞Ë¢´Ë∞ÉÁî®ÔºåÊàñËÄÖÂ¶ÇÊûúÂèÇÊï∞ÔºåÂ∞ÜË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÊó†ÂèÇÊï∞ÊûÑÈÄ†„ÄÇ//ÊñπÊ≥ïÂ∞ÜÂú®ÊåáÂÆöÁöÑÂ∑•ÂéÇbeanÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ‰∏äË¢´Ë∞ÉÁî®ÔºåÊàñËÄÖ‰Ωú‰∏∫Êú¨Âú∞beanÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ïË¢´Ë∞ÉÁî®„ÄÇvoid setFactoryMethodName(String factoryMethodName);//Â¶ÇÊûúÂ≠òÂú®ÔºåËøîÂõûÂ∑•ÂéÇÊñπÊ≥ïÂêçString getFactoryMethodName(); 10.ËøîÂõûÊ≠§beanÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂÄº„ÄÇ12//ËøîÂõûÊ≠§beanÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂÄº„ÄÇConstructorArgumentValues getConstructorArgumentValues(); 11.Ëé∑ÂèñÊôÆÈÄöÂ±ûÊÄßÈõÜÂêà12//Ëé∑ÂèñÊôÆÈÄöÂ±ûÊÄßÈõÜÂêàMutablePropertyValues getPropertyValues(); 12.ÂΩìÂâçBeanÁöÑÂü∫Êú¨ÁâπÊÄß123456//ÊòØÂê¶ÊòØÂçï‰æãÁöÑboolean isSingleton();//ÊòØÂê¶ÊòØÂ§ö‰æãÁöÑboolean isPrototype();//ÊòØÂê¶ÊòØÊäΩË±°Á±ªboolean isAbstract(); 13.ÂΩìÂâçBeanÁöÑÂ∫îÁî®12//Ëé∑ÂèñËøô‰∏™beanÁöÑÂ∫îÁî®int getRole(); 13.ÂèØËØªÊèèËø∞12//ËøîÂõûÂØπbeanÂÆö‰πâÁöÑÂèØËØªÊèèËø∞„ÄÇString getDescription(); 12//ËøîÂõûËØ•beanÂÆö‰πâÊù•Ëá™ÁöÑËµÑÊ∫êÁöÑÊèèËø∞String getResourceDescription(); 123//ËøîÂõûÂéüÂßãÁöÑBeanDefinition;Â¶ÇÊûúÊ≤°ÊúâÔºåÂàôËøîÂõûnull„ÄÇÂÖÅËÆ∏Ê£ÄÁ¥¢Ë£ÖÈ•∞ÁöÑbeanÂÆö‰πâÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ„ÄÇ//Ê≥®ÊÑèÔºåËøô‰∏™ÊñπÊ≥ïËøîÂõûÁõ¥Êé•ÁöÑÂèëËµ∑ËÄÖ„ÄÇ Ëø≠‰ª£ÂéüÂßãÈìæÔºåÊâæÂà∞Áî®Êà∑ÂÆö‰πâÁöÑÂéüÂßãBeanDefinition„ÄÇBeanDefinition getOriginatingBeanDefinition(); ‰ªé‰∏äÈù¢ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÂàÜÊûêÂèØ‰ª•ÁúãÂá∫ÔºåBeanDefinitionÂØπ‰∫é‰∏Ä‰∏™BeanÁöÑÊèèËø∞ÂÅö‰∫ÜËæÉ‰∏∫ÂÆåÊï¥ÁöÑ‰∏ÄÂ•óÁ∫¶Êùü„ÄÇËøô‰∏∫ÂêéÁª≠ÁöÑÂ≠êÁ±ªÊèê‰æõÁöÑÊúÄÂü∫Êú¨ÁöÑËÅåË¥£ÂíåÂ±ûÊÄß„ÄÇ Ê¨¢ËøéÂÖ≥Ê≥®glmapperÂ∑•‰ΩúÂÆ§ÂÖ¨‰ºóÂè∑]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVCÁ≥ªÂàóÊ∫êÁ†ÅÔºöDispatcherServlet]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-webmvc3%2F</url>
    <content type="text"><![CDATA[ÂâçÈù¢‰∏§ÁØáÊñáÁ´†Áõ¥Êé•ÂØπSpringMVCÈáåÈù¢ÁöÑÁªÑ‰ª∂ËøõË°å‰∫ÜÊ∫êÁ†ÅÂàÜÊûêÔºåÂèØËÉΩÂæàÂ§öÂ∞è‰ºô‰º¥ÈÉΩ‰ºöËßâÂæóÊúâÁÇπÊë∏‰∏çÁùÄÂ§¥ËÑë„ÄÇÊâÄ‰ª•‰ªäÂ§©ÂÜçÂ≤îÂõûÊù•ËØ¥‰∏ÄËØ¥SpringMVCÁöÑÊ†∏ÂøÉÊéßÂà∂Âô®Ôºå‰ª•Ê≠§‰∏∫ËΩ¥ÂøÉÊù•Â≠¶‰π†Êï¥‰∏™SpringMVCÁöÑÁü•ËØÜ‰ΩìÁ≥ª„ÄÇ SpringMVCÂú®È°πÁõÆ‰∏≠Â¶Ç‰Ωï‰ΩøÁî®ÁöÑÔºüÂâçÈù¢Âú®„ÄäÈ°πÁõÆÂºÄÂèëÊ°ÜÊû∂-SSM„Äã‰∏ÄÁØáÊñáÁ´†‰∏≠Â∑≤ÁªèËØ¶ÁªÜÁöÑ‰ªãÁªçËøá‰∫ÜSSMÈ°πÁõÆ‰∏≠ÂÖ≥‰∫éSpringÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÊñá‰ª∂ÔºåÂØπ‰∫é‰∏Ä‰∏™SpringÂ∫îÁî®ÔºåÂøÖ‰∏çÂèØÂ∞ëÁöÑÊòØÔºö 12345678910&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;!-- &lt;param-value&gt;classpath*:config/applicationContext.xml&lt;/param-value&gt; --&gt; &lt;param-value&gt;classpath:spring/applicationContext.xml&lt;/param-value&gt;&lt;/context-param&gt;&lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™ÁõëÂê¨Âô®Â∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªô SpringÊ°ÜÊû∂ --&gt;&lt;!-- SpringÁõëÂê¨Âô® --&gt;&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;&lt;/listener&gt; ÈÄöËøáContextLoadListenerÊù•ÂÆåÊàêSpringÂÆπÂô®ÁöÑÂàùÂßãÂåñ‰ª•ÂèäBeanÁöÑË£ÖËΩΩ„ÄäSpringÊäÄÊúØÂÜÖÂπïÂ≠¶‰π†ÔºöSpringÁöÑÂêØÂä®ËøáÁ®ã„Äã„ÄÇÈÇ£‰πàÂ¶ÇÊûúÂú®Êàë‰ª¨ÈúÄË¶ÅÊèê‰æõWEBÂäüËÉΩÔºåÂàôËøòÈúÄË¶ÅÂè¶Â§ñ‰∏Ä‰∏™ÔºåÈÇ£Â∞±ÊòØSpringMVC,ÂΩìÁÑ∂Êàë‰ª¨ÂêåÊ†∑ÈúÄË¶Å‰∏Ä‰∏™Áî®Êù•ÂàùÂßãÂåñSpringMVCÁöÑÈÖçÁΩÆÔºàÂàùÂßãÂåñ9Â§ßÁªÑ‰ª∂ÁöÑËøáÁ®ãÔºöÂâçÈù¢‰∏§ÁØá„ÄäSpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöHandlerMapping„ÄãÂíå„ÄäSpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöAbstractHandlerMapping„ÄãÊòØÂÖ≥‰∫éHnadlerMappingÁöÑÔºåÂΩìÁÑ∂‰∏ç‰ªÖ‰ªÖËøô‰∏§‰∏™ÔºåËøòÊúâÂÖ∂‰ªñÂá†‰∏™ÈáçË¶ÅÁöÑÂ≠êÁ±ªÔºåÂêéÁª≠‰ºöÊåÅÁª≠Êõ¥Êñ∞ÔºâÔºö 1234567891011121314151617&lt;servlet&gt; &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- ÈÖçÁΩÆspringMVCÈúÄË¶ÅÂä†ËΩΩÁöÑÈÖçÁΩÆÊñá‰ª∂ spring-dao.xml,spring-service.xml,spring-web.xml MybatisÔºàÂ¶ÇÊûúÊúâÔºâ - &gt; spring -&gt; springmvc --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt; &lt;!-- ÈªòËÆ§ÂåπÈÖçÊâÄÊúâÁöÑËØ∑Ê±Ç --&gt; &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; ÂΩìÊàë‰ª¨Âú®web.xml‰∏≠ÈÖçÁΩÆÂ•Ω‰∏äËø∞ÂÜÖÂÆπÔºàÂΩìÁÑ∂ËøòÂæó‰øùËØÅÂí±‰ª¨ÁöÑSpringÁöÑÈÖçÁΩÆ‰ª•ÂèäSpringMVCÁöÑÈÖçÁΩÆÊñá‰ª∂Ê≤°ÊúâÈóÆÈ¢òÁöÑÊÉÖÂÜµ‰∏ãÔºâÔºåÂêØÂä®webÂÆπÂô®ÔºàÂ¶ÇjettyÔºâÔºåÂ∞±ÂèØ‰ª•ÈÄöËøáÂú®ÊµèËßàÂô®ËæìÂÖ•ËØ∏Â¶ÇÔºöhttp://localhost:80/myproject/index.do ÁöÑÊñπÂºèÊù•ËÆøÈóÆÊàë‰ª¨ÁöÑÂ∫îÁî®‰∫Ü„ÄÇ ‰øóËØùËØ¥Áü•ÂÖ∂ÁÑ∂Ôºå‰πãÊ∞îÊâÄ‰ª•ÁÑ∂ÔºõÈÇ£‰πà‰∏∫‰ªÄ‰πàÂú®ÈÖçÁΩÆÂ•ΩÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆÊñá‰ª∂‰πãÂêéÔºåÊàë‰ª¨Â∞±ËÉΩËÆøÈóÆÊàë‰ª¨ÁöÑSSMÈ°πÁõÆ‰∫ÜÂë¢Ôºü‰ªéÂèëÈÄÅ‰∏ÄÊù°ÈÇ£Ê†∑ÁöÑËØ∑Ê±ÇÔºàhttp://localhost:80/myproject/index.doÔºâÂ±ïÁ§∫Âá∫ÊúÄÂêéÁöÑÁïåÈù¢ÔºåËøô‰∏™ËøáÁ®ãÂú®ÔºåSpringÂ∏ÆÊàë‰ª¨ÂÅö‰∫ÜÂì™‰∫õ‰∫ãÊÉÖÂë¢ÔºüÔºàSpringIOCÂÆπÂô®ÁöÑÂàùÂßãÂåñÂú®„Ää[SpringÊäÄÊúØÂÜÖÂπï-ÂÆπÂô®Âà∑Êñ∞Ôºöwac.refresh](https://juejin.im/post/5a3f5b43f265da432e5c37ea)„ÄãÊñá‰∏≠Â∑≤ÁªèÂ§ßÊ¶ÇÁöÑËØ¥‰∫Ü‰∏ãÂ§ßÂÆ∂ÂèØ‰ª•ÂèÇËÄÉ‰∏Ä‰∏ãÔºâ SpringMVCÂ§ÑÁêÜËØ∑Ê±ÇÁöÑËøáÁ®ãÂÖàÈÄöËøá‰∏ãÈù¢ËøôÂº†ÂõæÊù•Êï¥‰∏™‰∫ÜËß£‰∏ãSpringMVCËØ∑Ê±ÇÂ§ÑÁêÜÁöÑËøáÁ®ãÔºõÂõæ‰∏≠‰ªé1-13ÔºåÂ§ß‰Ωì‰∏äÊèèËø∞‰∫ÜËØ∑Ê±Ç‰ªéÂèëÈÄÅÂà∞ÁïåÈù¢Â±ïÁ§∫ÁöÑËøôÊ†∑‰∏Ä‰∏™ËøáÁ®ã„ÄÇ‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÊòéÊòæÁöÑÁúãÂà∞Êúâ‰∏Ä‰∏™DispatcherServletËøôÊ†∑‰∏Ä‰∏™Á±ªÔºåÂ§Ñ‰∫éÂêÑ‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜËøáÁ®ã‰∏≠ÁöÑÂàÜÂèëÁ´ô„ÄÇÂÆûÈôÖ‰∏äÔºåÂú®SpringMVC‰∏≠ÔºåÊï¥‰∏™Â§ÑÁêÜËøáÁ®ãÁöÑÈ°∂Â±ÇËÆæËÆ°ÈÉΩÂú®ËøôÈáåÈù¢„ÄÇÈÄöÂ∏∏Êàë‰ª¨Â∞ÜDispatcherServletÁß∞‰∏∫SpringMVCÁöÑÂâçÁ´ØÊéßÂà∂Âô®ÔºåÂÆÉÊòØSpringMVC‰∏≠ÊúÄÊ†∏ÂøÉÁöÑÁ±ª„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•Êè≠ÂºÄDispatcherServletÁöÑÈù¢Á∫±ÂêßÔºÅ DispatcherServletOKÔºåÊàë‰ª¨Áõ¥Êé•Êù•ÁúãDispatcherServletÁöÑÁ±ªÂÆö‰πâÔºö1public class DispatcherServlet extends FrameworkServlet DispatcherServletÁªßÊâøËá™FrameworkServletÔºåÂ∞±ËøôÊ†∑Ôºü‰∏ãÈù¢ÊâçÊòØ‰ªñÂÆ∂ÁöÑÊóèË∞±Ôºö È¶ñÂÖà‰∏∫‰ªÄ‰πàË¶ÅÊúâÁªøËâ≤ÁöÑÈÉ®Èó®ÔºåÊúâÁöÑÂêåÂ≠¶ÂèØËÉΩÂ∑≤ÁªèÊÉ≥Âà∞‰∫ÜÔºåÁªøËâ≤ÈÉ®ÂàÜ‰∏çÊòØSpringÁöÑÔºåËÄåÊòØjavaËá™Â∑±ÁöÑÔºõSpringÈÄöËøáHttpServletBeanËøô‰ΩçÂπ¥ËΩª‰∫∫ÊàêÂäüÁöÑÊã•Êúâ‰∫ÜJAVA WEB Ë°ÄÁªüÔºàÊú¨Êù•SpringÂ∞±ÊòØÁî®JAVAÂÜôÁöÑÔºåÂìàÂìàÔºâ„ÄÇÂÖ≥‰∫éServletËøô‰∏™Â∞è‰ºô‰º¥ÂèØ‰ª•Áúã‰∏ãÊàë‰πãÂâçÁöÑÊñáÁ´†ÔºåÊúâÁÆÄÂçïÁöÑ‰ªãÁªç‰∫ÜËøô‰∏™Êé•Âè£„ÄÇ ËØùËØ¥ÂõûÊù•ÔºåÊó¢ÁÑ∂DispatcherServletÂΩíÊ†πÊè≠Â∫ïÊòØ‰∏Ä‰∏™ServletÔºåÈÇ£‰πàÂ∞±ËÇØÂÆöÂÖ∑ÊúâServletÂäüËÉΩË°å‰∏∫„ÄÇ Êï≤ÈªëÊùøÔºÅÔºÅÔºÅServletÁöÑÁîüÂëΩÂë®ÊúüÊòØÂï•Ôºàinit-&gt;service-&gt;destroy Ôºö Âä†ËΩΩ-&gt;ÂÆû‰æãÂåñ-&gt;ÊúçÂä°-&gt;ÈîÄÊØÅÔºâ„ÄÇ ÂÖ∂ÂÆûËøôÈáåÊàëÊÉ≥ËØ¥ÁöÑÂ∞±ÊòØserviceËøô‰∏™ÊñπÊ≥ïÔºåÂΩìÁÑ∂ÔºåÂú®DispatcherServlet‰∏≠Âπ∂Ê≤°ÊúâserviceÊñπÊ≥ïÔºå‰ΩÜÊòØÂÆÉÊúâ‰∏Ä‰∏™doServiceÊñπÊ≥ïÔºÅÔºàÂºïÁöÑÂ•ΩÈöæ‚Ä¶Ôºâ doServiceÊòØDispatcherServletÁöÑÂÖ•Âè£ÔºåÊàë‰ª¨Êù•Áúã‰∏ãËøô‰∏™ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748protected void doService(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; if (logger.isDebugEnabled()) &#123; String resumed = WebAsyncUtils.getAsyncManager(request).hasConcurrentResult() ? " resumed" : ""; logger.debug("DispatcherServlet with name '" + getServletName() + "'" + resumed + " processing " + request.getMethod() + " request for [" + getRequestUri(request) + "]"); &#125; // Âú®includeÁöÑÊÉÖÂÜµ‰∏ã‰øùÁïôËØ∑Ê±ÇÂ±ûÊÄßÁöÑÂø´ÁÖßÔºå‰ª•‰æøËÉΩÂ§üÂú®include‰πãÂêéÊÅ¢Â§çÂéüÂßãÂ±ûÊÄß„ÄÇ Map&lt;String, Object&gt; attributesSnapshot = null; //Á°ÆÂÆöÁªôÂÆöÁöÑËØ∑Ê±ÇÊòØÂê¶ÊòØÂåÖÂê´ËØ∑Ê±ÇÔºåÂç≥‰∏çÊòØ‰ªéÂ§ñÈÉ®ËøõÂÖ•ÁöÑÈ°∂Á∫ßHTTPËØ∑Ê±Ç„ÄÇ //Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®‚Äújavax.servlet.include.request_uri‚ÄùËØ∑Ê±ÇÂ±ûÊÄß„ÄÇ ÂèØ‰ª•Ê£ÄÊü•Âè™ÂåÖÂê´ËØ∑Ê±Ç‰∏≠ÁöÑ‰ªª‰ΩïËØ∑Ê±ÇÂ±ûÊÄß„ÄÇ //(ÂèØ‰ª•Áúã‰∏ãÈù¢ÂÖ≥‰∫éisIncludeRequestËß£Èáä) if (WebUtils.isIncludeRequest(request)) &#123; attributesSnapshot = new HashMap&lt;String, Object&gt;(); Enumeration&lt;?&gt; attrNames = request.getAttributeNames(); while (attrNames.hasMoreElements()) &#123; String attrName = (String) attrNames.nextElement(); if (this.cleanupAfterInclude || attrName.startsWith("org.springframework.web.servlet")) &#123; attributesSnapshot.put(attrName, request.getAttribute(attrName)); &#125; &#125; &#125; // ‰ΩøÊ°ÜÊû∂ÂèØÁî®‰∫éhandlerÂíåviewÂØπË±°„ÄÇ request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext()); request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, this.localeResolver); request.setAttribute(THEME_RESOLVER_ATTRIBUTE, this.themeResolver); request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource()); //FlashMapÁî®‰∫é‰øùÂ≠òËΩ¨ÂèëËØ∑Ê±ÇÁöÑÂèÇÊï∞ÁöÑ FlashMap inputFlashMap = this.flashMapManager.retrieveAndUpdate(request, response); if (inputFlashMap != null) &#123; request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap)); &#125; request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap()); request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager); try &#123; doDispatch(request, response); &#125; finally &#123; if (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123; // Restore the original attribute snapshot, in case of an include. if (attributesSnapshot != null) &#123; restoreAttributesAfterInclude(request, attributesSnapshot); &#125; &#125; &#125;&#125; PSÔºö‚Äújavax.servlet.include.request_uri‚ÄùÊòØINCLUDE_REQUEST_URI_ATTRIBUTEÂ∏∏ÈáèÁöÑÂÄº„ÄÇisIncludeRequest(request)ÊñπÊ≥ïÁöÑ‰ΩúÁî®Êàë‰ª¨ÂèØ‰ª•ÂÄüÂä©‰∏ÄÊù°JSPÁöÑÊåá‰ª§Êù•ÁêÜËß£Ôºö 1&lt;jsp:incluede page="index.jsp"/&gt; ËøôÊù°Êåá‰ª§ÊòØÊåáÂú®‰∏Ä‰∏™È°µÈù¢‰∏≠ÂµåÂ•ó‰∫ÜÂè¶‰∏Ä‰∏™È°µÈù¢ÔºåÈÇ£‰πàÊàë‰ª¨Áü•ÈÅìJSPÂú®ËøêË°åÊúüÈó¥ÊòØ‰ºöË¢´ÁºñËØëÊàêÁõ∏Â∫îÁöÑServletÁ±ªÊù•ËøêË°åÁöÑÔºåÊâÄ‰ª•Âú®Servlet‰∏≠‰πü‰ºöÊúâÁ±ª‰ººÁöÑÂäüËÉΩÂíåË∞ÉÁî®ËØ≠Ê≥ïÔºåËøôÂ∞±ÊòØRequestDispatch.include()ÊñπÊ≥ï„ÄÇ ÈÇ£‰πàÂú®‰∏Ä‰∏™Ë¢´Âà´ÁöÑservlet‰ΩøÁî®RequestDispatcherÁöÑincludeÊñπÊ≥ïË∞ÉÁî®ËøáÁöÑservlet‰∏≠ÔºåÂ¶ÇÊûúÂÆÉÊÉ≥Áü•ÈÅìÈÇ£‰∏™Ë∞ÉÁî®ÂÆÉÁöÑservletÁöÑ‰∏ä‰∏ãÊñá‰ø°ÊÅØËØ•ÊÄé‰πàÂäûÂë¢ÔºåÈÇ£Â∞±ÂèØ‰ª•ÈÄöËøárequest‰∏≠ÁöÑattribute‰∏≠ÁöÑÂ¶Ç‰∏ãÂ±ûÊÄßËé∑ÂèñÔºö 12345javax.servlet.include.request_urijavax.servlet.include.context_pathjavax.servlet.include.servlet_pathjavax.servlet.include.path_infojavax.servlet.include.query_string Âú®doService‰∏≠Ôºå‰∏ãÈù¢ÁöÑtryÂùó‰∏≠ÂèØ‰ª•ÁúãÂà∞Ôºö 123try &#123; doDispatch(request, response);&#125; doServiceÂπ∂Ê≤°ÊúâÁõ¥Êé•ËøõË°åÂ§ÑÁêÜÔºå‰∫åÊòØÂ∞ÜËØ∑Ê±Ç‰∫§Áªô‰∫ÜdoDispatchËøõË°åÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜ„ÄÇÂΩìÁÑ∂Âú®Ë∞ÉÁî®doDispatch‰πãÂâçÔºådoService‰πüÊòØÂÅö‰∫Ü‰∏Ä‰∫õ‰∫ãÊÉÖÁöÑÔºåÊØîÂ¶ÇËØ¥Âà§Êñ≠ËØ∑Ê±ÇÊòØ‰∏çÊòØincldeËØ∑Ê±ÇÔºåËÆæÁΩÆ‰∏Ä‰∫õrequestÂ±ûÊÄßÁ≠â„ÄÇ FlashMapÊîØÊíëÁöÑRedirectÂèÇÊï∞‰º†ÈÄíÈóÆÈ¢òÂú®doService‰∏≠Èô§‰∫ÜwebApplicationContext„ÄÅlocaleResolver„ÄÅthemeResolveÂíåthemeSourceÂõõ‰∏™Êèê‰æõÁªôhandlerÂíåview‰ΩøÁî®ÁöÑÂõõ‰∏™ÂèÇÊï∞Â§ñÔºåÂêéÈù¢ÁöÑ‰∏â‰∏™ÈÉΩÊòØÂíåFlashMapÊúâÂÖ≥ÁöÑÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö1234567//FlashMapÁî®‰∫é‰øùÂ≠òËΩ¨ÂèëËØ∑Ê±ÇÁöÑÂèÇÊï∞ÁöÑFlashMap inputFlashMap = this.flashMapManager.retrieveAndUpdate(request, response);if (inputFlashMap != null) &#123; request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));&#125;request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap());request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager); Ê≥®Èáä‰∏≠ÊèêÂà∞ÔºåFlashMap‰∏ªË¶ÅÁî®‰∫éRedirectËΩ¨ÂèëÊó∂ÂèÇÊï∞ÁöÑ‰º†ÈÄíÔºõ Â∞±ÊãøË°®ÂçïÈáçÂ§çÊèê‰∫§Ëøô‰∏™ÈóÆÈ¢òÊù•ËØ¥,‰∏ÄÁßçÊñπÊ°àÂ∞±ÊòØÔºöÂú®Â§ÑÁêÜÂÆåpostËØ∑Ê±Ç‰πãÂêéÔºåÁÑ∂ÂêéRedirectÂà∞‰∏Ä‰∏™getÁöÑËØ∑Ê±ÇÔºåËøôÊ†∑Âç≥‰ΩøÁî®Êà∑Âà∑Êñ∞‰πü‰∏ç‰ºöÊúâÈáçÂ§çÊèê‰∫§ÁöÑÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÈóÆÈ¢òÂú®‰∫é,ÂâçÈù¢ÁöÑpostËØ∑Ê±ÇÊó∂Êèê‰∫§ËÆ¢ÂçïÔºåÊèê‰∫§ÂÆåÂêéredirectÂà∞‰∏Ä‰∏™ÊòæÁ§∫ËÆ¢ÂçïÁöÑÈ°µÈù¢ÔºåÊòæÁÑ∂Âú®ÊòæÁ§∫ËÆ¢ÂçïÁöÑÈ°µÈù¢Êàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìËÆ¢ÂçïÁöÑ‰ø°ÊÅØÔºå‰ΩÜÊòØredirectÊú¨Ë∫´ÊòØÊ≤°ÊúâÂèÇÊï∞‰º†ÈÄíÂäüËÉΩÁöÑÔºåÊåâÁÖßÊôÆÈÄöÁöÑÊ®°ÂºèÂ¶ÇÊûúÊÉ≥‰º†ÈÄíÂèÇÊï∞ÔºåÂ∞±Âè™ËÉΩÂ∞ÜÂèÇÊï∞ÊãºÊé•Âú®url‰∏≠Ôºå‰ΩÜÊòØurlÂú®getËØ∑Ê±Ç‰∏ãÂèàÊòØÊúâÈïøÂ∫¶ÈôêÂà∂ÁöÑÔºõÂè¶Â§ñÔºåÂØπ‰∫é‰∏Ä‰∫õÂú∫ÊôØ‰∏ãÔºåÊàë‰ª¨‰πü‰∏çÂ∏åÊúõËá™Â∑±ÁöÑÂèÇÊï∞Êö¥Èú≤Âú®url‰∏≠„ÄÇ ÂØπ‰∫é‰∏äËø∞ÈóÆÈ¢òÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Áî®FlashMapÊù•ËøõË°åÂèÇÊï∞‰º†ÈÄí‰∫ÜÔºõÊàë‰ª¨ÈúÄË¶ÅÂú®redirect‰πãÂâçÂ∞ÜÈúÄË¶ÅÁöÑÂèÇÊï∞ÂÜôÂÖ•OUTPUT_FLASH_MAP_ATTRIBUTEÔºå‰æãÂ¶ÇÔºö 1234ServletRequestAttributes SRAttributes = (ServletRequestAttributes)(RequestContextHolder.getRequestAttributes());HttpServletRequest req = SRAttributes.getRequest();FlashMap flashMap = (FlashMap)(req.getAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE));flashMap.put("myname","glmapper_2018"); ËøôÊ†∑Âú®redirect‰πãÂêéÁöÑhandler‰∏≠springÂ∞±‰ºöËá™Âä®Â∞ÜÂÖ∂ËÆæÁΩÆÂà∞modelÈáåÈù¢„ÄÇ‰ΩÜÊòØÂ¶ÇÊûú‰ªÖ‰ªÖÊòØËøôÊ†∑ÔºåÊØèÊ¨°redirectÊó∂ÈÉΩÂÜô‰∏äÈù¢ÈÇ£Ê†∑‰∏ÄÊÆµ‰ª£Á†ÅÊòØ‰∏çÊòØÂèàÊòæÂæóÂæàÈ∏°ËÇãÂë¢ÔºüÂΩìÁÑ∂Ôºåspring‰πü‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÊõ¥Âä†Êñπ‰æøÁöÑÁî®Ê≥ïÔºåÂç≥Âú®Êàë‰ª¨ÁöÑhandlerÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏≠‰ΩøÁî®RedirectAttributesÁ±ªÂûãÂèòÈáèÂç≥ÂèØÔºàÂâçÊÆµÊó∂Èó¥Áî®Âà∞Ëøô‰∏™ÔºåÊú¨Êù•ÊòØÊÉ≥ÂçïÁã¨ÂÜô‰∏ÄÁØáÂÖ≥‰∫éÂèÇÊï∞‰º†ÈÄíÈóÆÈ¢òÁöÑÔºåÂÄüÊ≠§Êú∫‰ºöÂ∞±ÁúÅÁï•‰∏ÄÁØáÂêßÔºåÂêºÂêº‚Ä¶ÔºâÔºåÊù•Áúã‰∏ÄÊÆµ‰ª£Á†ÅÔºö 123456789101112131415161718@RequestMapping("/detail/&#123;productId&#125;")public ModelAndView detail(HttpServletRequest request,HttpServletResponse response,RedirectAttributes attributes, @PathVariable String productId) &#123; if (StringUtils.isNotBlank(productId)) &#123; logger.info("[‰∫ßÂìÅËØ¶ÊÉÖ]:detail = &#123;&#125;",JSONObject.toJSONString(map)); mv.addObject("detail",JSONObject.toJSONString(getDetail(productId))); mv.addObject("title", "ËØ¶ÊÉÖ"); mv.setViewName("detail.ftl");&#125;//Â¶ÇÊûúÊ≤°ÊúâËé∑ÂèñÂà∞productIdelse&#123; attributes.addFlashAttribute("msg", "‰∫ßÂìÅ‰∏çÂ≠òÂú®"); attributes.addFlashAttribute("productName", productName); attributes.addFlashAttribute("title", "ÊúâÁÇπÈóÆÈ¢òÔºÅ"); mv.setViewName("redirect:"/error/fail.htm");&#125;return mv;&#125; ËøôÊÆµ‰ª£Á†ÅÊó∂ÊàëÂâçÊÆµÊó∂Èó¥ÂÅöÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜÊ®°ÂùóÊó∂ÂØπÂéüÊúâ‰∏öÂä°ÈÄªËæëÈîôËØØËøîÂõûÁöÑ‰∏Ä‰∏™ÊäΩË±°ÔºåÂõ†‰∏∫Ë¶ÅÂ∞ÜÈîôËØØÁªü‰∏ÄÂ§ÑÁêÜÔºåÂ∞±‰∏çÂèØËÉΩÂú®ÂÖ∑‰ΩìÁöÑhandler‰∏≠Áõ¥Êé•ËøîÂõûÂà∞ÈîôËØØÁïåÈù¢ÔºåÊâÄ‰ª•Â∞±Â∞ÜÊâÄÊúâÁöÑÈîôËØØÂ§ÑÁêÜÈÉΩredirectÂà∞error/fail.htmËøô‰∏™handler method‰∏≠Â§ÑÁêÜ„ÄÇredirectÁöÑÂèÇÊï∞ÈóÆÈ¢ò‰∏äÈù¢Â∑≤ÁªèÊèèËø∞Ëøá‰∫ÜÔºåËøôÈáåÂ∞±‰∏çÂú®ÁªÜËØ¥ÔºåÂ∞±ÊòØÁÆÄÂçïÁöÑ‰æãÂ≠êÂíåËÉåÊôØÔºåÁü•ÈÅìÊÄé‰πàÂéª‰ΩøÁî®RedirectAttributes„ÄÇ RedirectAttributesËøô‰∏™ÂéüÁêÜ‰πüÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÁõ∏ÂΩì‰∫éÂ≠òÂú®‰∫Ü‰∏Ä‰∏™session‰∏≠Ôºå‰ΩÜÊòØËøô‰∏™sessionÂú®Áî®Ëøá‰∏ÄÊ¨°‰πãÂêéÂ∞±ÈîÄÊØÅ‰∫ÜÔºåÂç≥Âú®fail.htmËøô‰∏™ÊñπÊ≥ï‰∏≠Ëé∑Âèñ‰πãÂêéÂ¶ÇÊûúÂÜçËøõË°åredirectÔºåÂèÇÊï∞Ëøò‰ºö‰∏¢Â§±ÔºåÈÇ£‰πàÂ∞±Âú®fail.htm‰∏≠ÁªßÁª≠‰ΩøÁî®RedirectAttributesÊù•Â≠òÂÇ®ÂèÇÊï∞ÂÜç‰º†ÈÄíÂà∞‰∏ã‰∏Ä‰∏™handler„ÄÇ doDispatchÊñπÊ≥ï‰∏∫‰∫ÜÂÅ∑ÊáíÔºå‰∏äÈù¢Âº∫Ë°åÊèíÂÖ•‰∫ÜÂØπSpring‰∏≠redirectÂèÇÊï∞‰º†ÈÄíÈóÆÈ¢òÁöÑËß£Èáä„ÄÇÂõûÂΩíÂà∞Âí±‰ª¨ÁöÑdoDispatchÊñπÊ≥ï„ÄÇ ‰ΩúÁî®ÔºöÂ§ÑÁêÜÂÆûÈôÖÁöÑË∞ÉÂ∫¶Âà∞handler„ÄÇhandlerÂ∞ÜÈÄöËøáÊåâÈ°∫Â∫èÂ∫îÁî®servletÁöÑHandlerMappingsÊù•Ëé∑Âæó„ÄÇHandlerAdapterÂ∞ÜÈÄöËøáÊü•ËØ¢servletÂ∑≤ÂÆâË£ÖÁöÑHandlerAdapterÊù•Êü•ÊâæÊîØÊåÅÂ§ÑÁêÜÁ®ãÂ∫èÁ±ªÁöÑÁ¨¨‰∏Ä‰∏™HandlerAdapter„ÄÇÊâÄÊúâÁöÑHTTPÊñπÊ≥ïÈÉΩÁî±Ëøô‰∏™ÊñπÊ≥ïÂ§ÑÁêÜ„ÄÇËøôÂèñÂÜ≥‰∫éHandlerAdapterÊàñÂ§ÑÁêÜÁ®ãÂ∫èËá™Â∑±ÂÜ≥ÂÆöÂì™‰∫õÊñπÊ≥ïÊòØÂèØ‰ª•Êé•ÂèóÁöÑ„ÄÇ ÂÖ∂ÂÆûÂú®doDispatch‰∏≠ÊúÄÊ†∏ÂøÉÁöÑ‰ª£Á†ÅÂ∞±4Ë°åÔºåÊàë‰ª¨Êù•Áúã‰∏ãÔºö Ê†πÊçÆrequestÊâæÂà∞Êàë‰ª¨ÁöÑhandler 12// Determine handler for the current request. mappedHandler = getHandler(processedRequest); Ê†πÊçÆhandlerÊâæÂà∞ÂØπÂ∫îÁöÑHandlerAdapter 12// Determine handler adapter for the current request. HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler()); HandlerAdapterÂ§ÑÁêÜhandler 12// Actually invoke the handler. mv = ha.handle(processedRequest, response, mappedHandler.getHandler()); Ë∞ÉÁî®processDispatchResultÊñπÊ≥ïÂ§ÑÁêÜ‰∏äËø∞ËøáÁ®ã‰∏≠ÂæóÁªìÊûúÁªºÂêàÔºåÂΩìÁÑ∂‰πüÂåÖÊã¨ÊâæÂà∞viewÂπ∂‰∏îÊ∏≤ÊüìËæìÂá∫ÁªôÁî®Êà∑1processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException); Êàë‰ª¨‰ª•‰∏äËø∞‰∏∫ËΩ¥ÂøÉÔºåÊù•Áúã‰∏ãÂÆÉÁöÑÊï¥‰∏™Ê∫êÁ†Å(ÂÖ∑‰Ωì‰ª£Á†ÅÂê´‰πâÂú®‰ª£Á†Å‰∏≠Ê†áÊ≥®)Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; //ÂΩìÂâçËØ∑Ê±Çrequest HttpServletRequest processedRequest = request; //Â§ÑÁêÜÂô®ÈìæÔºàhandlerÂíåÊã¶Êà™Âô®Ôºâ HandlerExecutionChain mappedHandler = null; //Áî®Êà∑Ê†áËØÜmultipartRequestÔºàÊñá‰ª∂‰∏ä‰º†ËØ∑Ê±ÇÔºâ boolean multipartRequestParsed = false; WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); try &#123; //ÂæàÁÜüÊÇâÂêßÔºåËøô‰∏™Â∞±ÊòØÊàë‰ª¨ËøîÂõûÁªôÁî®Êà∑ÁöÑÂåÖË£ÖËßÜÂõæ ModelAndView mv = null; //Â§ÑÁêÜËØ∑Ê±ÇËøáÁ®ã‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏„ÄÇËøô‰∏™ÂºÇÂ∏∏ÊòØ‰∏çÂåÖÊã¨Ê∏≤ÊüìËøáÁ®ã‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏ÁöÑ Exception dispatchException = null; try &#123; //Ê£ÄÊü•ÊòØ‰∏çÊòØ‰∏ä‰º†ËØ∑Ê±Ç processedRequest = checkMultipart(request); multipartRequestParsed = (processedRequest != request); // ÈÄöËøáÂΩìÂâçËØ∑Ê±ÇÁ°ÆÂÆöÁõ∏Â∫îÁöÑhandler mappedHandler = getHandler(processedRequest); //Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÔºöÂ∞±‰ºöÊä•ÂºÇÂ∏∏ÔºåËøô‰∏™ÂºÇÂ∏∏Êàë‰ª¨Âú®Êê≠Âª∫SpringMVCÂ∫îÁî®Êó∂‰ºöÁªèÂ∏∏ÈÅáÂà∞Ôºö //No mapping found for HTTP request with URI XXX in //DispatcherServlet with name XXX if (mappedHandler == null || mappedHandler.getHandler() == null) &#123; noHandlerFound(processedRequest, response); return; &#125; // Ê†πÊçÆhandlerÊâæÂà∞HandlerAdapter HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler()); //Â§ÑÁêÜGETÂíåHeadËØ∑Ê±ÇÁöÑLast-Modified //Ëé∑ÂèñËØ∑Ê±ÇÊñπÊ≥ï String method = request.getMethod(); //Ëøô‰∏™ÊñπÊ≥ïÊòØ‰∏çÊòØGETÊñπÊ≥ï boolean isGet = "GET".equals(method); if (isGet || "HEAD".equals(method)) &#123; long lastModified = ha.getLastModified(request, mappedHandler.getHandler()); if (logger.isDebugEnabled()) &#123; logger.debug("Last-Modified value for [" + getRequestUri(request) + "] is: " + lastModified); &#125; if (new ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123; return; &#125; &#125; //ËøôÈáåÂ∞±ÊòØÊàë‰ª¨SpringMVCÊã¶Êà™Âô®ÁöÑpreHandleÊñπÊ≥ïÁöÑÂ§ÑÁêÜ if (!mappedHandler.applyPreHandle(processedRequest, response)) &#123; return; &#125; // Ë∞ÉÁî®ÂÖ∑‰ΩìÁöÑHandlerÔºåÂπ∂‰∏îËøîÂõûÊàë‰ª¨ÁöÑmvÂØπË±°. mv = ha.handle(processedRequest, response, mappedHandler.getHandler()); //Â¶ÇÊûúÈúÄË¶ÅÂºÇÊ≠•Â§ÑÁêÜÁöÑËØùÂ∞±Áõ¥Êé•ËøîÂõû if (asyncManager.isConcurrentHandlingStarted()) &#123; return; &#125; //Ëøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØÂ§ÑÁêÜËßÜÂõæÔºàviewÔºâ‰∏∫Á©∫ÁöÑÊÉÖÂÜµÔºå‰ºöÊ†πÊçÆrequestËÆæÁΩÆÈªòËÆ§ÁöÑview applyDefaultViewName(processedRequest, mv); //ËøôÈáåÂ∞±ÊòØÊàë‰ª¨SpringMVCÊã¶Êà™Âô®ÁöÑpostHandleÊñπÊ≥ïÁöÑÂ§ÑÁêÜ mappedHandler.applyPostHandle(processedRequest, response, mv); &#125; catch (Exception ex) &#123; dispatchException = ex; &#125; catch (Throwable err) &#123; // As of 4.3, we're processing Errors thrown from handler methods as well, // making them available for @ExceptionHandler methods and other scenarios. dispatchException = new NestedServletException("Handler dispatch failed", err); &#125; //Â§ÑÁêÜËøîÂõûÁªìÊûúÔºõÔºàÂºÇÂ∏∏Â§ÑÁêÜ„ÄÅÈ°µÈù¢Ê∏≤Êüì„ÄÅÊã¶Êà™Âô®ÁöÑafterCompletionËß¶ÂèëÁ≠âÔºâ processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException); &#125; catch (Exception ex) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, ex); &#125; catch (Throwable err) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException("Handler processing failed", err)); &#125; finally &#123; //Âà§Êñ≠ÊòØÂê¶ÊâßË°åÂºÇÊ≠•ËØ∑Ê±Ç if (asyncManager.isConcurrentHandlingStarted()) &#123; // Â¶ÇÊûúÊòØÁöÑËØùÔºåÂ∞±Êõø‰ª£Êã¶Êà™Âô®ÁöÑpostHandle Âíå afterCompletionÊñπÊ≥ïÊâßË°å if (mappedHandler != null) &#123; mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response); &#125; &#125; else &#123; // Âà†Èô§‰∏ä‰º†ËØ∑Ê±ÇÁöÑËµÑÊ∫ê if (multipartRequestParsed) &#123; cleanupMultipart(processedRequest); &#125; &#125; &#125;&#125; Êï¥‰ΩìÊù•ÁúãÔºådoDispatchÂÅö‰∫Ü‰∏§‰ª∂‰∫ãÊÉÖÔºö Â§ÑÁêÜËØ∑Ê±Ç È°µÈù¢Ê∏≤Êüì doDispatchÂ§ÑÁêÜËøáÁ®ãÊµÅÁ®ãÂõæ ÈÇ£‰∏äÈù¢Â∞±ÊòØÊï¥‰∏™DispatcherServletÁöÑ‰∏Ä‰∏™Â§ßÊ¶ÇÂÜÖÂÆπ‰∫ÜÔºåÂÖ≥‰∫éSpringMVCÂÆπÂô®ÁöÑÂàùÂßãÂåñÔºåÊàë‰ª¨Âú®ÂÖàÊääDispatcherServlet‰∏≠Ê∂âÂèäÂà∞ÁöÑ‰πùÂ§ßÁªÑ‰ª∂Êí∏ÂÆå‰πãÂêéÂÜçÂõûÂ§¥Êù•Â≠¶‰π†„ÄÇÂÖ≥‰∫é‰πùÂ§ßÁªÑ‰ª∂ÁõÆÂâçÂ∑≤ÁªèÊúâËøá‰∏§ÁØáÊòØÂÖ≥‰∫éHandlerMappingÁöÑ‰∫ÜÔºåÁî±‰∫éÊàë‰ª¨ÊâìÁÆóÂØπ‰∫éÊï¥‰∏™SpringMVC‰ΩìÁ≥ªÁªìÊûÑÈÉΩËøõË°å‰∏ÄÊ¨°Ê¢≥ÁêÜÔºåÂõ†Ê≠§Ôºå‰ºöÂ∞Ü‰πùÂ§ßÁªÑ‰ª∂‰ªéÊé•Âè£ËÆæËÆ°‰ª•ÂèäÂ≠êÁ±ªÈÉΩ‰ºöÈÄöËøáÊ∫êÁ†ÅÁöÑÊñπÂºèÊù•ÂëàÁé∞„ÄÇ Â§ßÂÆ∂Â¶ÇÊûúÊúâ‰ªÄ‰πàÊÑèËßÅÊàñËÄÖÂª∫ËÆÆÂèØ‰ª•Âú®‰∏ãÊñπËØÑËÆ∫Âå∫ÁïôË®ÄÔºå‰πüÂèØ‰ª•ÁªôÊàë‰ª¨ÂèëÈÇÆ‰ª∂Ôºàglmapper_2018@163.comÔºâ!Ê¨¢ËøéÂ∞è‰ºô‰º¥‰∏éÊàë‰ª¨‰∏ÄËµ∑‰∫§ÊµÅÔºå‰∏ÄËµ∑ÊàêÈïø„ÄÇ]]></content>
      <categories>
        <category>spring mvc</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>mvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöAbstractHandlerMapping]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-webmvc2%2F</url>
    <content type="text"><![CDATA[AbstractHandlerMappingÊòØÂÆûÁé∞HandlerMappingÊé•Âè£ÁöÑ‰∏Ä‰∏™ÊäΩË±°Âü∫Á±ª„ÄÇÊîØÊåÅÊéíÂ∫èÔºåÈªòËÆ§Â§ÑÁêÜÁ®ãÂ∫èÔºåÂ§ÑÁêÜÁ®ãÂ∫èÊã¶Êà™Âô®ÔºåÂåÖÊã¨Áî±Ë∑ØÂæÑÊ®°ÂºèÊò†Â∞ÑÁöÑÂ§ÑÁêÜÁ®ãÂ∫èÊã¶Êà™Âô®„ÄÇÊâÄÊúâÁöÑHandlerMappingÈÉΩÁªßÊâøËá™AbstractHandlerMapping„ÄÇÂè¶Â§ñÔºåÊ≠§Âü∫Á±ª‰∏çÊîØÊåÅPATH_WITHIN_HANDLER_MAPPING_ATTRIBUTEÁöÑÊö¥Èú≤ÔºåÊ≠§Â±ûÊÄßÁöÑÊîØÊåÅÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÂ≠êÁ±ªÔºåÈÄöÂ∏∏Âü∫‰∫éËØ∑Ê±ÇURLÊò†Â∞Ñ„ÄÇ ÂâçÈù¢ËØ¥Âà∞ÔºåHandlerMappingÁöÑ‰ΩúÁî®Â∞±ÊòØÈÄöËøárequestÊü•ÊâæHandlerÂíåInterceptors„ÄÇÂÖ∑‰ΩìÁöÑËé∑ÂèñÂùáÊòØÈÄöËøáÂ≠êÁ±ªÊù•ÂÆûÁé∞ÁöÑ„ÄÇ 1.AbstractHandlerMapping ÁöÑÁ±ªÂÆö‰πâ12public abstract class AbstractHandlerMapping extends WebApplicationObjectSupport implements HandlerMapping, Ordered &#123; AbstractHandlerMappingÁªßÊâø‰∫ÜWebApplicationObjectSupportÔºåÂàùÂßãÂåñÊó∂‰ºöËá™Âä®Ë∞ÉÁî®Ê®°ÊùøÊñπÊ≥ïinitApplicationContextÔºõAbstractHandlerMappingÁöÑÂàõÂª∫‰πüÂ∞±ÊòØÂú®Ëøô‰∏™ÊñπÊ≥ïÈáåÈù¢ÂÆåÊàêÁöÑ„ÄÇÂêåÊó∂ÂÆûÁé∞‰∫ÜHandlerMappingÂíåOrderedÊé•Âè£ÔºåËøô‰πüÂ∞±ÊòØ‰∏äÈù¢ÊèêÂà∞ÁöÑÊîØÊåÅÊéíÂ∫èÁöÑÂéüÂõ†„ÄÇ 2.AbstractHandlerMappingÂ±ûÊÄßÂàÜÊûê ÊéíÂ∫èÂÄº order ÈªòËÆ§ÂÄº‰∏∫IntegerÁöÑÊúÄÂ§ßÂÄºÔºåÂêéÈù¢Ê≥®ÈáäÁöÑÊÑèÊÄùÊòØÂíåÊ≤°ÊúâÊéíÂ∫èÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂõ†‰∏∫Âè™ÊúâÁêÜËÆ∫‰∏äÊâçÂèØËÉΩË∂ÖËøáInteger.MAX_VALUE„ÄÇ 1private int order = Integer.MAX_VALUE; // default: same as non-Ordered ÈªòËÆ§Â§ÑÁêÜÂô® defaultHandler 1private Object defaultHandler; SpringÂ∑•ÂÖ∑Á±ª urlPathHelper HelperÁ±ªÁî®‰∫éURLË∑ØÂæÑÂåπÈÖç„ÄÇÊèê‰æõÂØπRequestDispatcher‰∏≠URLË∑ØÂæÑÁöÑÊîØÊåÅÔºåÂåÖÊã¨Âπ∂ÊîØÊåÅ‰∏ÄËá¥ÁöÑURLËß£Á†Å„ÄÇ 1private UrlPathHelper urlPathHelper = new UrlPathHelper(); springÂ∑•ÂÖ∑Á±ª PathMatcher(AntPathMatcher) Áî®‰∫éÂü∫‰∫éÂ≠óÁ¨¶‰∏≤ÁöÑË∑ØÂæÑÂåπÈÖçÁöÑÁ≠ñÁï•Êé•Âè£„ÄÇ 1private PathMatcher pathMatcher = new AntPathMatcher(); Êã¶Êà™Âô®ÂàóË°® interceptors Áî®‰∫éÈÖçÁΩÆSpringMVCÁöÑÊã¶Êà™Âô®ÔºåÈÖçÁΩÆÊñπÂºèÁî±‰∏§ÁßçÔºö 1.Ê≥®ÂÜåHandlerMappingÊó∂ÈÄöËøáÂ±ûÊÄßËÆæÁΩÆ 2.ÈÄöËøáÂ≠êÁ±ªÁöÑextendInterceptorsÈí©Â≠êÊñπÊ≥ïËøõË°åËÆæÁΩÆÔºàextendInterceptorsÊñπÊ≥ïÊòØÂú®initApplicationContext‰∏≠Ë∞ÉÁî®ÁöÑÔºâ interceptorsÂπ∂‰∏ç‰ºöÁõ¥Êé•‰ΩøÁî®Ôºå‰∫åÊòØÈÄöËøáinitInterceptorsÊñπÊ≥ïÊåâÁÖßÁ±ªÂûãÂàÜÈÖçÂà∞mappedInterceptorsÂíåadaptedInterceptors‰∏≠ËøõË°å‰ΩøÁî®ÔºåinterceptorsÂè™Áî®‰∫éÈÖçÁΩÆ„ÄÇ 1private final List&lt;Object&gt; interceptors = new ArrayList&lt;Object&gt;(); adaptedInterceptors Ë¢´ÂàÜÈÖçÂà∞adaptedInterceptors‰∏≠ÁöÑÁ±ªÂûãÁöÑÊã¶Êà™Âô®‰∏çÈúÄË¶ÅËøõË°åÂåπÈÖçÔºåÂú®getHandler‰∏≠‰ºöÂÖ®ÈÉ®Ê∑ªÂä†Âà∞ËøîÂõûÂÄºHandlerExecutionChainÈáåÈù¢„ÄÇ‰ªñ Âè™ËÉΩ‰ªé interceptors‰∏≠Ëé∑Âèñ„ÄÇ 1private final List&lt;HandlerInterceptor&gt; adaptedInterceptors = new ArrayList&lt;HandlerInterceptor&gt;(); corsProcessor CorsProcessor‰ΩúÁî®ÊòØÊé•ÂèóËØ∑Ê±ÇÂíåCorsConfigurationÂπ∂Êõ¥Êñ∞ÂìçÂ∫îÁöÑÁ≠ñÁï•„ÄÇ Ê≠§ÁªÑ‰ª∂‰∏çÂÖ≥ÂøÉÂ¶Ç‰ΩïÈÄâÊã©CorsConfigurationÔºåËÄåÊòØÈááÂèñÂêéÁª≠Êìç‰ΩúÔºå‰æãÂ¶ÇÂ∫îÁî®CORSÈ™åËØÅÊ£ÄÊü•ÔºåÂπ∂ÊãíÁªùÂìçÂ∫îÊàñÂ∞ÜCORSÂ§¥Ê∑ªÂä†Âà∞ÂìçÂ∫î‰∏≠„ÄÇ 1private CorsProcessor corsProcessor = new DefaultCorsProcessor(); corsConfigSource Ê†πÊçÆË∑ØÂæÑÊ®°Âºè‰∏äÊò†Â∞ÑÁöÑCorsConfigurationÈõÜÂêàÊèê‰æõÊØè‰∏™ËØ∑Ê±ÇÁöÑCorsConfigurationÂÆû‰æã„ÄÇÊîØÊåÅÁ≤æÁ°ÆÁöÑË∑ØÂæÑÊò†Â∞ÑURIÔºàÂ¶Ç‚Äú/ admin‚ÄùÔºâ‰ª•ÂèäAntÊ†∑ÂºèÁöÑË∑ØÂæÑÊ®°ÂºèÔºàÂ¶Ç‚Äú/ admin / **‚ÄùÔºâ 12private final UrlBasedCorsConfigurationSource corsConfigSource = new UrlBasedCorsConfigurationSource(); Ë∑®ÂüüÁõ∏ÂÖ≥ÈóÆÈ¢ò CorsConfiguration ÂÖ∑‰ΩìÂ∞ÅË£ÖË∑®ÂüüÈÖçÁΩÆ‰ø°ÊÅØÁöÑpojoCorsConfigurationSource request‰∏éË∑®ÂüüÈÖçÁΩÆ‰ø°ÊÅØÊò†Â∞ÑÁöÑÂÆπÂô®CorsProcessor ÂÖ∑‰ΩìËøõË°åË∑®ÂüüÊìç‰ΩúÁöÑÁ±ª 3.AbstractHandlerMapping ‰∏≠ÁöÑget&amp;setÊñπÊ≥ï3.1 setOrderÊåáÂÆöÊ≠§HandlerMapping beanÁöÑÊéíÂ∫èÂÄº„ÄÇ123public final void setOrder(int order) &#123; this.order = order;&#125; 3.2 setDefaultHandlerÊåáÂÆöÊ≠§HandlerMapping beanÁöÑÊéíÂ∫èÂÄº„ÄÇËÆæÁΩÆÊ≠§Â§ÑÁêÜÁ®ãÂ∫èÊò†Â∞ÑÁöÑÈªòËÆ§Â§ÑÁêÜÁ®ãÂ∫è„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÁâπÂÆöÁöÑÊò†Â∞ÑÔºåËøô‰∏™Â§ÑÁêÜÁ®ãÂ∫èÂ∞ÜË¢´ËøîÂõû„ÄÇÁº∫ÁúÅÂÄº‰∏∫nullÔºåË°®Á§∫Ê≤°ÊúâÈªòËÆ§Â§ÑÁêÜÁ®ãÂ∫è„ÄÇ123public void setDefaultHandler(Object defaultHandler) &#123; this.defaultHandler = defaultHandler;&#125; 3.3 getDefaultHandlerËøîÂõûÊ≠§Â§ÑÁêÜÁ®ãÂ∫èÊò†Â∞ÑÁöÑÈªòËÆ§Â§ÑÁêÜÁ®ãÂ∫èÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂàôËøîÂõûnull„ÄÇ123public Object getDefaultHandler() &#123; return this.defaultHandler;&#125; 3.4 setAlwaysUseFullPathÂ¶ÇÊûúURLÊü•ÊâæÂßãÁªà‰ΩøÁî®ÂΩìÂâçservlet‰∏ä‰∏ãÊñá‰∏≠ÁöÑÂÆåÊï¥Ë∑ØÂæÑÔºåËØ∑ËøõË°åËÆæÁΩÆ„ÄÇ Âê¶ÂàôÔºåÂ¶ÇÊûúÈÄÇÁî®ÔºåÂàô‰ΩøÁî®ÂΩìÂâçservletÊò†Â∞Ñ‰∏≠ÁöÑË∑ØÂæÑÔºàÂç≥ÔºåÂú®web.xml‰∏≠‚Äú‚Ä¶ / *‚ÄùservletÊò†Â∞ÑÁöÑÊÉÖÂÜµ‰∏ãÔºâ„ÄÇÈªòËÆ§ÊòØ‚Äúfalse‚Äù„ÄÇsetAlwaysUseFullPath‰∏≠ÁöÑÂÆûÁé∞ÂÖ∑‰ΩìÊòØÂßîÊâòÁªôurlPathHelperÂíåcorsConfigSourceÊù•ÂÆåÊàêÁöÑ„ÄÇ1234public void setAlwaysUseFullPath(boolean alwaysUseFullPath) &#123; this.urlPathHelper.setAlwaysUseFullPath(alwaysUseFullPath); this.corsConfigSource.setAlwaysUseFullPath(alwaysUseFullPath);&#125; 3.5 setUrlDecodeÂ¶ÇÊûú‰∏ä‰∏ãÊñáË∑ØÂæÑÂíåËØ∑Ê±ÇURIÂ∫îËØ•Ë¢´URLËß£Á†ÅÔºåÂàôËÆæÁΩÆ„ÄÇ‰∏§ËÄÖÈÉΩÊòØÁî±Servlet APIËøîÂõû‚Äúundecoded‚ÄùÔºå‰∏éservletË∑ØÂæÑÁõ∏Âèç„ÄÇÊ†πÊçÆServletËßÑËåÉÔºàISO-8859-1Ôºâ‰ΩøÁî®ËØ∑Ê±ÇÁºñÁ†ÅÊàñÈªòËÆ§ÁºñÁ†Å„ÄÇsetUrlDecode‰∏≠ÁöÑÂÆûÁé∞ÂÖ∑‰ΩìÊòØÂßîÊâòÁªôurlPathHelperÂíåcorsConfigSourceÊù•ÂÆåÊàêÁöÑ„ÄÇ1234public void setUrlDecode(boolean urlDecode) &#123; this.urlPathHelper.setUrlDecode(urlDecode); this.corsConfigSource.setUrlDecode(urlDecode);&#125; 3.6 setRemoveSemicolonContentÂ¶ÇÊûú‚Äú;‚Äù ÔºàÂàÜÂè∑ÔºâÂÜÖÂÆπÂ∫îËØ•‰ªéËØ∑Ê±ÇURI‰∏≠ÂéªÈô§,ÂàôËÆæÁΩÆ„ÄÇÈªòËÆ§ÂÄºÊòØtrue„ÄÇsetRemoveSemicolonContent‰∏≠ÁöÑÂÆûÁé∞ÂÖ∑‰ΩìÊòØÂßîÊâòÁªôurlPathHelperÂíåcorsConfigSourceÊù•ÂÆåÊàêÁöÑ„ÄÇ1234public void setRemoveSemicolonContent(boolean removeSemicolonContent) &#123; this.urlPathHelper.setRemoveSemicolonContent(removeSemicolonContent); this.corsConfigSource.setRemoveSemicolonContent(removeSemicolonContent);&#125; 3.7 setUrlPathHelperËÆæÁΩÆUrlPathHelper‰ª•Áî®‰∫éËß£ÊûêÊü•ÊâæË∑ØÂæÑ„ÄÇ‰ΩøÁî®ÂÆÉÂèØ‰ª•Áî®Ëá™ÂÆö‰πâÂ≠êÁ±ªË¶ÜÁõñÈªòËÆ§ÁöÑUrlPathHelperÔºåÊàñËÄÖË∑®Â§ö‰∏™HandlerMappingsÂíåMethodNameResolversÂÖ±‰∫´ÈÄöÁî®ÁöÑUrlPathHelperËÆæÁΩÆ„ÄÇ12345public void setUrlPathHelper(UrlPathHelper urlPathHelper) &#123; Assert.notNull(urlPathHelper, &quot;UrlPathHelper must not be null&quot;); this.urlPathHelper = urlPathHelper; this.corsConfigSource.setUrlPathHelper(urlPathHelper);&#125; 3.8 getUrlPathHelperËøîÂõûUrlPathHelperÂÆûÁé∞‰ª•Áî®‰∫éËß£ÊûêÊü•ÊâæË∑ØÂæÑ„ÄÇ123public UrlPathHelper getUrlPathHelper() &#123; return urlPathHelper;&#125; 3.9 setPathMatcherÂ∞ÜPathMatcherÂÆûÁé∞ËÆæÁΩÆ‰∏∫Áî®‰∫éÂåπÈÖçÊ≥®ÂÜåÁöÑURLÊ®°ÂºèÁöÑURLË∑ØÂæÑ„ÄÇ ÈªòËÆ§ÊòØAntPathMatcher„ÄÇ12345public void setPathMatcher(PathMatcher pathMatcher) &#123; Assert.notNull(pathMatcher, &quot;PathMatcher must not be null&quot;); this.pathMatcher = pathMatcher; this.corsConfigSource.setPathMatcher(pathMatcher);&#125; 3.10 setInterceptorsËÆæÁΩÆÊã¶Êà™Âô®‰ª•Â∫îÁî®Ê≠§Â§ÑÁêÜÁ®ãÂ∫èÊò†Â∞ÑÊò†Â∞ÑÁöÑÊâÄÊúâÂ§ÑÁêÜÁ®ãÂ∫è„ÄÇÊîØÊåÅÁöÑÊã¶Êà™Âô®Á±ªÂûãÊòØHandlerInterceptorÔºåWebRequestInterceptorÂíåMappedInterceptor„ÄÇÊò†Â∞ÑÊã¶Êà™Âô®‰ªÖÈÄÇÁî®‰∫éËØ∑Ê±Ç‰∏éÂÖ∂Ë∑ØÂæÑÊ®°ÂºèÁõ∏ÂåπÈÖçÁöÑURL„ÄÇÊò†Â∞ÑÁöÑÊã¶Êà™Âô®BeanÂú®ÂàùÂßãÂåñÊúüÈó¥‰πü‰ºöÊåâÁ±ªÂûãÊ£ÄÊµãÂà∞„ÄÇ123ublic void setInterceptors(Object... interceptors) &#123; this.interceptors.addAll(Arrays.asList(interceptors));&#125; ÂÖ∂‰ªñÂá†‰∏™get&amp;setÊñπÊ≥ïÂ∞±‰∏çÂàóÂá∫Êù•‰∫ÜÔºåÊúâÂÖ¥Ë∂£ÁöÑÂ∞è‰ºô‰º¥ÂèØ‰ª•Ëá™Ë°åÈòÖËØª... 4. AbstractHandlerMappingÁöÑÂàõÂª∫Âõ†‰∏∫AbstractHandlerMappingÁªßÊâø‰∫ÜWebApplicationObjectSupportÁ±ªÔºåÂõ†Ê≠§AbstractHandlerMappingÁöÑÂàõÂª∫Â∞±ÊòØ‰æùÊâò‰∫éÊ®°ÊùøÊñπÊ≥ïinitApplicationContextÊù•ÂÆåÊàêÁöÑ„ÄÇ123456@Overrideprotected void initApplicationContext() throws BeansException &#123; extendInterceptors(this.interceptors); detectMappedInterceptors(this.adaptedInterceptors); initInterceptors();&#125; ‰ªéÊñπÊ≥ïÁªìÊûÑÂèØ‰ª•‰∫ÜËß£Âà∞ÔºåinitApplicationContext‰∏≠ÂåÖÊã¨‰∏â‰∏™Â≠êÂ§ÑÁêÜÊñπÊ≥ï„ÄÇ extendInterceptorsÔºöËøô‰πüÊòØ‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ïÔºåÂú®AbstractHandlerMapping‰∏≠Âπ∂Ê≤°ÊúâÂÖ∑‰ΩìÂÆûÁé∞ÔºàÊñπÊ≥ï‰ΩìÊòØÁ©∫ÁöÑÔºâÔºå‰∏ªË¶ÅÊòØÁî®‰∫éÁªôÂ≠êÁ±ªÊèê‰æõ‰∏Ä‰∏™Ê∑ªÂä†Ôºà‰øÆÊîπÔºâInterceptorsÁöÑÂÖ•Âè£ÔºàÁé∞ÊúâÁöÑSpringMVCÂÆûÁé∞‰∏≠ÂùáÊú™‰ΩøÁî®Ôºâ„ÄÇ detectMappedInterceptorsÔºöÁî®‰∫éÂ∞ÜSpringMVCÂÆπÂô®ÂèäÁà∂ÂÆπÂô®‰∏≠ÁöÑÊâÄÊúâMappedInterceptorÁ±ªÂûãÁöÑBeanÊ∑ªÂä†Âà∞MappedInterceptorsÂ±ûÊÄß‰∏≠„ÄÇ Ê£ÄÊµãMappedInterceptorÁ±ªÂûãÁöÑbeanÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨Ê∑ªÂä†Âà∞Êò†Â∞ÑÁöÑÊã¶Êà™Âô®ÂàóË°®‰∏≠„ÄÇ Èô§‰∫ÜÂèØËÉΩÈÄöËøásetInterceptorsÊèê‰æõÁöÑ‰ªª‰ΩïMappedInterceptors‰πãÂ§ñÔºåËøò‰ºöË∞ÉÁî®Ê≠§ÊñπÊ≥ïÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂ∞Ü‰ªéÂΩìÂâç‰∏ä‰∏ãÊñáÂèäÂÖ∂Á•ñÂÖà‰∏≠Ê∑ªÂä†ÊâÄÊúâMappedInterceptorÁ±ªÂûãÁöÑBean„ÄÇÂ≠êÁ±ªÂèØ‰ª•Ë¶ÜÁõñÂíå‰ºòÂåñËøô‰∏™Á≠ñÁï•„ÄÇ 12345protected void detectMappedInterceptors(List&lt;HandlerInterceptor&gt; mappedInterceptors) &#123; mappedInterceptors.addAll( BeanFactoryUtils.beansOfTypeIncludingAncestors( getApplicationContext(), MappedInterceptor.class, true, false).values());&#125; initInterceptorsÔºöÂàùÂßãÂåñÊåáÂÆöÁöÑÊã¶Êà™Âô®ÔºåÊ£ÄÊü•MappedInterceptorsÂπ∂Ê†πÊçÆÈúÄË¶ÅË∞ÉÊï¥HandlerInterceptorsÂíåWebRequestInterceptors„ÄÇÔºàÂΩìÂâçSpringÁâàÊú¨Êó∂4.3.6Ôºâ 1234567891011protected void initInterceptors() &#123; if (!this.interceptors.isEmpty()) &#123; for (int i = 0; i &lt; this.interceptors.size(); i++) &#123; Object interceptor = this.interceptors.get(i); if (interceptor == null) &#123; throw new IllegalArgumentException(&quot;Entry number &quot; + i + &quot; in interceptors array is null&quot;); &#125; this.adaptedInterceptors.add(adaptInterceptor(interceptor)); &#125; &#125;&#125; Ëøô‰∏™ÊòØ4.1.5ÁâàÊú¨ÁöÑinitInterceptorsÊñπÊ≥ïÔºö 12345678910111213141516protected void initInterceptors() &#123; if (!this.interceptors.isEmpty()) &#123; for (int i = 0; i &lt; this.interceptors.size(); i++) &#123; Object interceptor = this.interceptors.get(i); if (interceptor == null) &#123; throw new IllegalArgumentException(&quot;Entry number &quot; + i + &quot; in interceptors array is null&quot;); &#125; if (interceptor instanceof MappedInterceptor) &#123; this.mappedInterceptors.add((MappedInterceptor) interceptor); &#125; else &#123; this.adaptedInterceptors.add(adaptInterceptor(interceptor)); &#125; &#125; &#125; &#125; Âú®4.1.5‰∏≠ÁâàÊú¨‰∏≠ÔºåinitInterceptorsÁöÑÂ∑•‰ΩúÊòØÂ∞ÜinterceptorsÂ±ûÊÄßÈáåÈù¢ÊâÄÂåÖÂê´ÁöÑÂØπË±°ÊåâÁÖßÁ±ªÂûãÊ∑ªÂä†Âà∞adaptedInterceptorsÊàñËÄÖmappedInterceptors‰∏≠„ÄÇÂú®4.1.5ÁâàÊú¨‰∏≠mappedInterceptorsÊòØAbstractHandlerMappingÁöÑÂ±ûÊÄß‰πã‰∏Ä„ÄÇ‰∏ªË¶ÅÂéüÂõ†ÊòØÂõ†‰∏∫ÔºåspringMVCËá™4.2ÂºÄÂßãÊ∑ªÂä†‰∫ÜË∑®ÂüüÁöÑÊîØÊåÅÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢Â±ûÊÄß‰∏≠ÁöÑÂêé‰∏§‰∏™„ÄÇPSÔºöÂú®ÈòÖËØªSpringÁõ∏ÂÖ≥Ê∫êÁ†ÅÊó∂ÈúÄË¶ÅÂÖ≥Ê≥®‰∏çÂêåÁâàÊú¨ÁöÑÂèòÊõ¥ÂèäÂå∫Âà´Ôºå‰∏çË¶ÅÂè™ÂÖ≥Ê≥®Êüê‰∏Ä‰∏™ÁâàÊú¨ÔºåÂè¶Â§ñÂ∞±ÊòØ‰∏™‰∫∫ËßâÂæóÈòÖËØªÊ∫êÁ†ÅÁöÑÂÖ≥Ê≥®ÁÇπÂ∫îËØ•Âú®ÁºñÁ†ÅÊñπÂºè„ÄÅËÆæËÆ°Ê®°Âºè‰ΩøÁî®„ÄÅËÆæËÆ°ÊÄùÊÉ≥ÂèäÁêÜÂøµÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØÁü•ÈÅì‰ªñÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ„Äë ËøôÈáåÈ°∫‰æøËØ¥‰∏ãmappedInterceptorsÁöÑ‰ΩúÁî®ÔºömappedInterceptors‰∏≠ÁöÑÊã¶Êà™Âô®Âú®‰ΩøÁî®Êó∂ÈúÄË¶Å‰∏éËØ∑Ê±ÇÁöÑurlËøõË°åÂåπÈÖçÔºåÂè™ÊúâÂåπÈÖçÊàêÂäüÂêéÊâç‰ºöÊ∑ªÂä†Âà∞getHandlerÁöÑËøîÂõûÂÄºHandlerExecytionChainÈáå„ÄÇ adaptInterceptorÊñπÊ≥ï: ‰ΩøÁªôÂÆöÁöÑÊã¶Êà™Âô®ÂØπË±°ÈÄÇÈÖçHandlerInterceptorÊé•Âè£„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊîØÊåÅÁöÑÊã¶Êà™Âô®Á±ªÂûãÊòØHandlerInterceptorÂíåWebRequestInterceptor„ÄÇÊØè‰∏™ÁªôÂÆöÁöÑWebRequestInterceptorÂ∞ÜË¢´Â∞ÅË£ÖÂú®WebRequestHandlerInterceptorAdapter‰∏≠„ÄÇÂèØ‰ª•Âú®Â≠êÁ±ª‰∏≠ÈáçÂÜô„ÄÇ1234567891011protected HandlerInterceptor adaptInterceptor(Object interceptor) &#123; if (interceptor instanceof HandlerInterceptor) &#123; return (HandlerInterceptor) interceptor; &#125; else if (interceptor instanceof WebRequestInterceptor) &#123; return new WebRequestHandlerInterceptorAdapter((WebRequestInterceptor) interceptor); &#125; else &#123; throw new IllegalArgumentException(&quot;Interceptor type not supported: &quot; + interceptor.getClass().getName()); &#125;&#125; 5.HandlerÂíåInterceptorÁöÑËé∑ÂèñHandlerMappingÊòØÈÄöËøágetHandlerÊñπÊ≥ïÊù•Ëé∑ÂèñHandlerÂíåInterceptorÁöÑ„ÄÇÂõ†Ê≠§Âú®ÊäΩË±°Âü∫Á±ªAbstractHandlerMapping‰∏≠Êèê‰æõ‰∫ÜÂÖ∑‰ΩìÁöÑÂÆûÁé∞„ÄÇÂπ∂‰∏îÂú®AbstractHandlerMapping‰∏≠ÔºågetHandler‰ΩøÁî®finalÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂ≠êÁ±ª‰∏çËÉΩÂÜçËøõË°åÂØπÊ≠§ÊñπÊ≥ïËøõË°åË¶ÜÁõñÈáçÂÜô‰∫Ü„ÄÇ getHandlerÁöÑ‰ΩúÁî®Â∞±ÊòØÊü•ÊâæÁªôÂÆöËØ∑Ê±ÇÁöÑhandlerÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÁâπÂÆöËØ∑Ê±ÇÔºåÂàôËøîÂõûÂà∞ÈªòËÆ§handler„ÄÇ123456789101112131415161718192021222324252627282930@Overridepublic final HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception &#123; //ÈÄöËøágetHandlerInternalÊñπÊ≥ïÊù•Ëé∑Âèñhandler Object handler = getHandlerInternal(request); //Â¶ÇÊûúÂâç‰∏Ä‰∏™ÊñπÊ≥ïÊ≤°ÊúâËé∑ÂèñÂà∞ÔºåÂàô‰ΩøÁî®ÈªòËÆ§ÁöÑhandler if (handler == null) &#123; //ÈªòËÆ§ÁöÑHandlerÂ∞±ÊòØAbstractHandlerMapping‰∏≠ÁöÑhandlerÂ±ûÊÄßÈÄöËøásetÂæóÂà∞ÁöÑÂÄº handler = getDefaultHandler(); &#125; //Â¶ÇÊûúËøòÊòØÊ≤°ÊúâÊâæÂà∞HanderÔºåÂàôÁõ¥Êé•ËøîÂõûNull if (handler == null) &#123; return null; &#125; // Bean name or resolved handler? //Â¶ÇÊûúÊâæÂà∞ÁöÑhandlerÊòØStringÁ±ªÂûãÁöÑÔºå if (handler instanceof String) &#123; //Âàô‰ª•ÂÆÉ‰∏∫ÂêçÂà∞spring MvcÁöÑÂÆπÂô®‰∏≠Êü•ÊâæÁõ∏Â∫îÁöÑBean String handlerName = (String) handler; handler = getApplicationContext().getBean(handlerName); &#125; //ÂÖàÊ†πÊçÆhandlerÂíårequestÂàõÂª∫‰∏Ä‰∏™HandlerExecutionChainÂØπË±°Ôºå HandlerExecutionChain executionChain = getHandlerExecutionChain(handler, request); if (CorsUtils.isCorsRequest(request)) &#123; CorsConfiguration globalConfig = this.corsConfigSource.getCorsConfiguration(request); CorsConfiguration handlerConfig = getCorsConfiguration(handler, request); CorsConfiguration config = (globalConfig != null ? globalConfig.combine(handlerConfig) : handlerConfig); executionChain = getCorsHandlerExecutionChain(request, executionChain, config); &#125; return executionChain;&#125; getHandlerInternalÔºö 1protected abstract Object getHandlerInternal(HttpServletRequest request) throws Exception; Êü•ÊâæÁªôÂÆöËØ∑Ê±ÇÁöÑhandlerÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÁâπÂÆöËØ∑Ê±ÇÔºåÂàôËøîÂõûnull„ÄÇ Ëøô‰∏™ÊñπÊ≥ïË¢´getHandlerË∞ÉÁî®; Â¶ÇÊûúËÆæÁΩÆ‰∫ÜnullËøîÂõûÂÄºÔºåÂ∞ÜÂØºËá¥ÈªòËÆ§handler„ÄÇÂú®CORS pre-flightËØ∑Ê±Ç‰∏äÔºåËøô‰∏™ÊñπÊ≥ïÂ∫îËØ•ËøîÂõû‰∏Ä‰∏™‰∏çÂåπÈÖçÈ£ûË°åÂâçËØ∑Ê±ÇÁöÑÂåπÈÖçÈ°πÔºåËÄåÊòØÊ†πÊçÆURLË∑ØÂæÑÔºå‚ÄúAccess-Control-Request-Method‚ÄùÂ§¥‰∏≠ÁöÑHTTPÊñπÊ≥ïÂíåÂ§¥Êñá‰ª∂ ‰ªé‚ÄúAccess-Control-Request-Headers‚ÄùÂ§¥ÈÉ®Ëé∑ÂæóÔºå‰ªéËÄåÂÖÅËÆ∏CORSÈÖçÁΩÆÈÄöËøágetCorsConfigurationsËé∑ÂæóÔºåÊ≥®ÊÑèÔºöËøô‰∏™ÊñπÊ≥ï‰πüÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™È¢ÑÂÖàÊûÑÂª∫ÁöÑHandlerExecutionChainÔºåÂ∞Ü‰∏Ä‰∏™Â§ÑÁêÜÁ®ãÂ∫èÂØπË±°‰∏éÂä®ÊÄÅÁ°ÆÂÆöÁöÑÊã¶Êà™Âô®ÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇÁä∂ÊÄÅÊåáÂÆöÁöÑÊã¶Êà™Âô®Â∞ÜË¢´ÂêàÂπ∂Âà∞Ëøô‰∏™Áé∞ÊúâÁöÑÈìæ‰∏≠„ÄÇ getHandlerExecutionChainÔºö getLookupPathForRequest:ËøîÂõûÁªôÂÆöËØ∑Ê±ÇÁöÑÊò†Â∞ÑÊü•ÊâæË∑ØÂæÑÔºåÂ¶ÇÊûúÈÄÇÁî®ÁöÑËØùÔºåÂú®ÂΩìÂâçÁöÑservletÊò†Â∞Ñ‰∏≠ÔºåÊàñËÄÖÂú®webÂ∫îÁî®Á®ãÂ∫è‰∏≠ËøîÂõû„ÄÇÂ¶ÇÊûúÂú®RequestDispatcher‰∏≠Ë∞ÉÁî®includeËØ∑Ê±ÇÔºåÂàôÊ£ÄÊµãÂåÖÂê´ËØ∑Ê±ÇURL„ÄÇ1234567891011121314151617181920212223protected HandlerExecutionChain getHandlerExecutionChain(Object handler, HttpServletRequest request) &#123; //Â¶ÇÊûúhandlerÊòØHandlerExecutionChainÁ±ªÂûãÂàôÁõ¥Êé•Âº∫ËΩ¨‰∏∫HandlerExecutionChainÁ±ªÂûãÔºå //Â¶ÇÊûú‰∏çÊòØÂàôÊ†πÊçÆhandlerÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑHandlerExecutionChainÂÆû‰æãÂØπË±° HandlerExecutionChain chain = (handler instanceof HandlerExecutionChain ? (HandlerExecutionChain) handler : new HandlerExecutionChain(handler)); //ËøîÂõûÁªôÂÆöËØ∑Ê±ÇÁöÑÊò†Â∞ÑÊü•ÊâæË∑ØÂæÑ String lookupPath = this.urlPathHelper.getLookupPathForRequest(request); //ÈÅçÂéÜÂΩìÂâçadaptedInterceptorsÈìæË°® for (HandlerInterceptor interceptor : this.adaptedInterceptors) &#123; //Â¶ÇÊûúÊòØMappedInterceptorÁ±ªÂûãÂàô if (interceptor instanceof MappedInterceptor) &#123; MappedInterceptor mappedInterceptor = (MappedInterceptor) interceptor; //Êã¶Êà™Âô®ÊòØÂê¶Â∫îÁî®‰∫éÁªôÂÆöÁöÑËØ∑Ê±ÇË∑ØÂæÑÔºåÂ¶ÇÊûúÊòØÂàôËøîÂõûtrue if (mappedInterceptor.matches(lookupPath, this.pathMatcher)) &#123; chain.addInterceptor(mappedInterceptor.getInterceptor()); &#125; &#125; else &#123; chain.addInterceptor(interceptor); &#125; &#125; return chain;&#125; ‰∏∫ÁªôÂÆöÁöÑhandlerÊûÑÂª∫‰∏Ä‰∏™HandlerExecutionChainÔºåÂåÖÊã¨ÂèØÁî®ÁöÑÊã¶Êà™Âô®„ÄÇÈªòËÆ§ÂÆûÁé∞Áî®ÁªôÂÆöÁöÑhandlerÔºåhandlerÊò†Â∞ÑÁöÑÈÄöÁî®Êã¶Êà™Âô®‰ª•Âèä‰∏éÂΩìÂâçËØ∑Ê±ÇURLÁõ∏ÂåπÈÖçÁöÑ‰ªª‰ΩïMappedInterceptorsÊûÑÂª∫Ê†áÂáÜÁöÑHandlerExecutionChain„ÄÇÊã¶Êà™Âô®ÊåâÁÖß‰ªñ‰ª¨Ê≥®ÂÜåÁöÑÈ°∫Â∫èÊ∑ªÂä†„ÄÇ‰∏∫‰∫ÜÊâ©Â±ï/ÈáçÊñ∞ÊéíÂàóÊã¶Êà™Âô®ÂàóË°®ÔºåÂ≠êÁ±ªÂèØ‰ª•Ë¶ÜÁõñÂÆÉ„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰º†ÂÖ•ÁöÑhandlerÂØπË±°ÂèØËÉΩÊòØÂéüÂßãhandlerÊàñÈ¢ÑÊûÑÂª∫ÁöÑHandlerExecutionChain„ÄÇËøô‰∏™ÊñπÊ≥ïÂ∫îËØ•ÊòéÁ°ÆÂú∞Â§ÑÁêÜËøô‰∏§ÁßçÊÉÖÂÜµÔºåÂª∫Á´ã‰∏Ä‰∏™Êñ∞ÁöÑHandlerExecutionChainÊàñËÄÖÊâ©Â±ïÁé∞ÊúâÁöÑÈìæ„ÄÇ‰∏∫‰∫ÜÁÆÄÂçïÂú∞Âú®Ëá™ÂÆö‰πâÂ≠êÁ±ª‰∏≠Ê∑ªÂä†Êã¶Êà™Âô®ÔºåÂèØ‰ª•ËÄÉËôëË∞ÉÁî®super.getHandlerExecutionChainÔºàhandlerÔºårequestÔºâÂπ∂Âú®ËøîÂõûÁöÑÈìæÂØπË±°‰∏äË∞ÉÁî®HandlerExecutionChainÔºÉaddInterceptor„ÄÇ getCorsHandlerExecutionChainÔºö 1234567891011121314protected HandlerExecutionChain getCorsHandlerExecutionChain(HttpServletRequest request, HandlerExecutionChain chain, CorsConfiguration config) &#123; //ÈÄöËøáËØ∑Ê±ÇÂ§¥ÁöÑhttpÊñπÊ≥ïÊòØÂê¶optionsÂà§Êñ≠ÊòØÂê¶È¢ÑËØ∑Ê±ÇÔºå if (CorsUtils.isPreFlightRequest(request)) &#123; HandlerInterceptor[] interceptors = chain.getInterceptors(); //Â¶ÇÊûúÊòØ‰ΩøÁî®PreFlightRequestÊõøÊç¢Â§ÑÁêÜÂô® chain = new HandlerExecutionChain(new PreFlightHandler(config), interceptors); &#125; else &#123; //Â¶ÇÊûúÊòØÊôÆÈÄöËØ∑Ê±ÇÔºåÊ∑ªÂä†‰∏Ä‰∏™Êã¶Êà™Âô®CorsInterceptor„ÄÇ chain.addInterceptor(new CorsInterceptor(config)); &#125; return chain;&#125; Êõ¥Êñ∞HandlerExecutionChainËøõË°å‰∏éCORSÔºàHTTPËÆøÈóÆÊéßÂà∂ÔºöË∑®ÂüüËµÑÊ∫êÂÖ±‰∫´ÔºâÁõ∏ÂÖ≥ÁöÑÂ§ÑÁêÜ„ÄÇ ÂØπ‰∫épre-flightËØ∑Ê±ÇÔºåÈªòËÆ§ÂÆûÁé∞Áî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑHttpRequestHandlerÊù•ÊõøÊç¢ÈÄâÊã©ÁöÑhandlerÔºåËØ•HttpRequestHandlerË∞ÉÁî®Â∑≤ÈÖçÁΩÆÁöÑsetCorsProcessor„ÄÇÔºàÂ∞ÜÂ§ÑÁêÜÂô®ÊõøÊç¢‰∏∫ÂÜÖÈÉ®Á±ªPreFlightHandlerÔºâ ÂØπ‰∫éÊôÆÈÄöÁöÑËØ∑Ê±ÇÔºåÈªòËÆ§ÂÆûÁé∞ÊèíÂÖ•‰∏Ä‰∏™HandlerInterceptorÔºåÂÆÉÊâßË°å‰∏éCORSÊúâÂÖ≥ÁöÑÊ£ÄÊü•Âπ∂Ê∑ªÂä†CORSÂ§¥„ÄÇÔºàÊ∑ªÂä†CorsInterceptorÊã¶Êà™Âô®Ôºâ AbstractHandlerMapping‰∏≠ÁöÑ‰∏§‰∏™ÂÜÖÈÉ®Á±ªËøô‰∏§‰∏™ÂÜÖÈÉ®Á±ªÂ∞±ÊòØÁî®Êù•Ê†°È™årequestÊòØÂê¶corsÔºåÂπ∂Â∞ÅË£ÖÂØπÂ∫îÁöÑAdapterÁöÑ„ÄÇ PreFlightRequestÊòØCorsProcessorÂØπ‰∫éHttpRequestHandlerÁöÑ‰∏Ä‰∏™ÈÄÇÈÖçÂô®„ÄÇËøôÊ†∑HandlerAdapterÁõ¥Êé•‰ΩøÁî®HttpRequestHandlerAdapterÂ§ÑÁêÜ„ÄÇ CorsInterceptor ÊòØCorsProcessorÂØπ‰∫éHandlerInterceptorAdapterÁöÑÈÄÇÈÖçÂô®„ÄÇ ÂÖ∑‰ΩìÁöÑÁ±ª‰ø°ÊÅØÂ¶Ç‰∏ãÔºö PreFlightHandler123456789101112131415161718private class PreFlightHandler implements HttpRequestHandler, CorsConfigurationSource &#123; private final CorsConfiguration config; public PreFlightHandler(CorsConfiguration config) &#123; this.config = config; &#125; @Override public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; corsProcessor.processRequest(this.config, request, response); &#125; @Override public CorsConfiguration getCorsConfiguration(HttpServletRequest request) &#123; return this.config; &#125;&#125; CorsInterceptor1234567891011121314151617181920private class CorsInterceptor extends HandlerInterceptorAdapter implements CorsConfigurationSource &#123; private final CorsConfiguration config; public CorsInterceptor(CorsConfiguration config) &#123; this.config = config; &#125; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; return corsProcessor.processRequest(this.config, request, response); &#125; @Override public CorsConfiguration getCorsConfiguration(HttpServletRequest request) &#123; return this.config; &#125;&#125; Ëá≥Ê≠§AbstractHandlerMapping‰∏≠ÁöÑ‰∏Ä‰∫õÊ∫êÁ†ÅÂ∞±ÁªìÊùü‰∫ÜÔºåAbstractHandlerMapping‰∏∫HandlerMappingÁöÑÂäüËÉΩÊèê‰æõÁöÑ‰∏Ä‰∫õÂÖ∑‰ΩìÁöÑÊ®°ÊùøÊèèËø∞Ôºå‰ΩÜÊòØÂÖ∑‰ΩìÁöÑÁªÜËäÇÂÆûÁé∞ËøòÈúÄË¶Å‰ªéÂÖ∂Â≠êÁ±ª‰∏≠Êù•ÊÖ¢ÊÖ¢ÂàÜÊûê„ÄÇÂÖ≥‰∫éËøôÈÉ®ÂàÜ‰∏≠Ê∂âÂèäÂà∞ÁöÑÂ¶ÇHandlerExecutionChainÔºåcorsË∑®ÂüüÁ≠âÈóÆÈ¢òÔºåÂêéÈù¢‰ºöÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂè¶ÂºÄÁØáÂπÖÊù•Â≠¶‰π†„ÄÇ Â§ßÂÆ∂Â¶ÇÊûúÊúâ‰ªÄ‰πàÊÑèËßÅÊàñËÄÖÂª∫ËÆÆÂèØ‰ª•Âú®‰∏ãÊñπËØÑËÆ∫Âå∫ÁïôË®ÄÔºå‰πüÂèØ‰ª•ÁªôÊàë‰ª¨ÂèëÈÇÆ‰ª∂Ôºàglmapper_2018@163.comÔºâ!Ê¨¢ËøéÂ∞è‰ºô‰º¥‰∏éÊàë‰ª¨‰∏ÄËµ∑‰∫§ÊµÅÔºå‰∏ÄËµ∑ÊàêÈïø„ÄÇ]]></content>
      <categories>
        <category>spring mvc</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>mvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVCÊ∫êÁ†ÅÁ≥ªÂàóÔºöHandlerMapping]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-webmvc1%2F</url>
    <content type="text"><![CDATA[HandlerMappingÊé•Âè£ÊòØÁî®Êù•Êü•ÊâæHandlerÁöÑ„ÄÇÂú®SpringMvc‰∏≠ÔºåDispatcherServletÂ§ÑÁêÜÂàÜÂèëÂæàÂ§öËØ∑Ê±ÇÔºåËÄåÊØè‰∏™ËØ∑Ê±ÇÈÉΩÈúÄË¶Å‰∏Ä‰∏™HandlerÊù•Â§ÑÁêÜÔºåÂÖ∑‰ΩìÊé•ÂèóÂà∞‰∏Ä‰∏™ËØ∑Ê±ÇÂêé‰ΩøÁî®Âì™‰∏™HandlerÊù•Â§ÑÁêÜÂë¢ÔºüËøôÂ∞±ÊòØHandlerË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇÂõ†Ê≠§ÔºåHandlerMappingÁöÑ‰ΩúÁî®Â∞±ÊòØÊ†πÊçÆrequestÊâæÂà∞Áõ∏Â∫îÁöÑÂ§ÑÁêÜÂô®HandlerÂíåInterceptors„ÄÇ ‰∏ãÈù¢ÊòØSpring‰∏≠ÂØπHandlerMappingÊé•Âè£ÁöÑËØ¥ÊòéÔºö This class can be implemented by application developers, although this is not necessary, as BeanNameUrlHandlerMapping and DefaultAnnotationHandlerMapping are included in the framework. The former is the default if no HandlerMapping bean is registered in the application context.Ëøô‰∏™Á±ªÂèØ‰ª•Áî±Â∫îÁî®Á®ãÂ∫èÂºÄÂèë‰∫∫ÂëòÂÆûÁé∞ÔºåÂ∞ΩÁÆ°Ëøô‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂõ†‰∏∫BeanNameUrlHandlerMappingÂíåDefaultAnnotationHandlerMappingÂ∑≤ÁªèÂåÖÂê´Âú®Ê°ÜÊû∂‰∏≠Ôºå‰Ωú‰∏∫HandlerMappingÁöÑÈªòËÆ§ÂÆûÁé∞„ÄÇ Â¶ÇÊûúÂú®Â∫îÁî®Á®ãÂ∫è‰∏ä‰∏ãÊñá‰∏≠Ê≤°ÊúâÊ≥®ÂÜåHandlerMapping beanÔºåBeanNameUrlHandlerMappingÊòØÈªòËÆ§ÂÄº„ÄÇ HandlerMapping implementations can support mapped interceptors but do not have to. A handler will always be wrapped in a HandlerExecutionChain instance, optionally accompanied by some HandlerInterceptor instances.The DispatcherServlet will first call each HandlerInterceptor&#39;s preHandle method in the given order, finally invoking the handler itself if all preHandle methods have returned trueHandlerMappingÂÆûÁé∞ÂèØ‰ª•ÊîØÊåÅÊò†Â∞ÑÁöÑÊã¶Êà™Âô®Ôºå‰ΩÜ‰∏çÂøÖÂ¶ÇÊ≠§ÔºõhandlerÂ∞ÜÂßãÁªàË¢´Â∞ÅË£ÖÂú®HandlerExecutionChainÂÆû‰æã‰∏≠ÔºåÂπ∂ÂèØÁî±‰∏Ä‰∫õHandlerInterceptorÂÆû‰æãÊâßË°å„ÄÇÂú®ÁªôÂÆöÁöÑÈ°∫Â∫è‰∏≠ÔºåDispatcherServletÂ∞ÜÈ¶ñÂÖàË∞ÉÁî®ÊØè‰∏™HandlerInterceptorÁöÑpreHandleÊñπÊ≥ïÔºåÂ¶ÇÊûúÊâÄÊúâÁöÑpreHandleÊñπÊ≥ïÈÉΩËøîÂõûtrueÔºåÈÇ£‰πàÊúÄÂêéË∞ÉÁî®handlerÊú¨Ë∫´„ÄÇ The ability to parameterize this mapping is a powerful and unusual capability of this MVC framework. For example, it is possible to write a custom mapping based on session state, cookie state or many other variables. No other MVC framework seems to be equally flexible.ÂèÇÊï∞ÂåñËøô‰∏™Êò†Â∞ÑÁöÑËÉΩÂäõÊòØËøô‰∏™MVCÊ°ÜÊû∂ÁöÑ‰∏Ä‰∏™Âº∫Â§ß‰∏î‰∏çÂêåÂØªÂ∏∏ÁöÑËÉΩÂäõ„ÄÇ ‰æãÂ¶ÇÔºåÂèØ‰ª•Ê†πÊçÆ‰ºöËØùÁä∂ÊÄÅÔºåcookieÁä∂ÊÄÅÊàñËÆ∏Â§öÂÖ∂‰ªñÂèòÈáèÁºñÂÜôËá™ÂÆö‰πâÊò†Â∞Ñ„ÄÇ Ê≤°ÊúâÂÖ∂‰ªñMVCÊ°ÜÊû∂‰ºº‰πéÂêåÊ†∑ÁÅµÊ¥ª„ÄÇ Note: Implementations can implement the Ordered interface to be able to specify a sorting order and thus a priority for getting applied by DispatcherServlet. Non-Ordered instances get treated as lowest priority.Ê≥®ÔºöÂÆûÁé∞ÂèØ‰ª•ÂÆûÁé∞OrderedÊé•Âè£Ôºå‰ª•‰æøËÉΩÂ§üÊåáÂÆöÊéíÂ∫èÈ°∫Â∫èÔºå‰ªéËÄåÊåáÂÆöÁî±DispatcherServletÂ∫îÁî®ÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ Êó†Â∫èÂÆû‰æãË¢´ËßÜ‰∏∫ÊúÄ‰Ωé‰ºòÂÖàÁ∫ß„ÄÇ 1.Êé•Âè£Â∏∏Èáè1.1„ÄÅPATH_WITHIN_HANDLER_MAPPING_ATTRIBUTEHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞ÔºåÂÆÉÂåÖÂê´Â§ÑÁêÜÁ®ãÂ∫èÊò†Â∞Ñ‰∏≠ÁöÑË∑ØÂæÑÔºåÊØîÂ¶ÇÊ®°ÂºèÂåπÈÖçÔºåÊàñËÄÖÂÆåÂÖ®Áõ∏ÂÖ≥ÁöÑURI(ÈÄöÂ∏∏Âú®DispatcherServletÁöÑÊò†Â∞Ñ‰∏≠)„ÄÇÊ≠§Â±ûÊÄß‰∏çÈúÄË¶ÅÊâÄÊúâHandlerMappingÂÆûÁé∞ÊîØÊåÅ„ÄÇÂü∫‰∫éurlÁöÑHandlerMappingsÈÄöÂ∏∏‰ºöÊîØÊåÅÂÆÉÔºå‰ΩÜÊòØÂ§ÑÁêÜÁ®ãÂ∫è‰∏çÂ∫îËØ•ÊúüÊúõËøô‰∏™ËØ∑Ê±ÇÂ±ûÊÄßÂú®ÊâÄÊúâÂú∫ÊôØ‰∏≠ÈÉΩÂ≠òÂú®„ÄÇ12345678910/** * Name of the &#123;@link HttpServletRequest&#125; attribute that contains the path * within the handler mapping, in case of a pattern match, or the full * relevant URI (typically within the DispatcherServlet&apos;s mapping) else. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations. URL-based HandlerMappings will * typically support it, but handlers should not necessarily expect * this request attribute to be present in all scenarios. */String PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.pathWithinHandlerMapping&quot;; 1.2„ÄÅBEST_MATCHING_PATTERN_ATTRIBUTEHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞ÔºåÂåÖÊã¨Â§ÑÁêÜÁ®ãÂ∫èÊò†Â∞Ñ‰∏≠ÁöÑÊúÄ‰Ω≥ÂåπÈÖçÊ®°Âºè123456789/** * Name of the &#123;@link HttpServletRequest&#125; attribute that contains the * best matching pattern within the handler mapping. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations. URL-based HandlerMappings will * typically support it, but handlers should not necessarily expect * this request attribute to be present in all scenarios. */String BEST_MATCHING_PATTERN_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.bestMatchingPattern&quot;; 1.3„ÄÅINTROSPECT_TYPE_LEVEL_MAPPINGHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞ÔºåÊåáÁ§∫ÊòØÂê¶Â∫îËØ•Ê£ÄÊü•Á±ªÂûãÁ∫ßÂà´ÁöÑÊò†Â∞Ñ„ÄÇ 1234567/** * Name of the boolean &#123;@link HttpServletRequest&#125; attribute that indicates * whether type-level mappings should be inspected. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations. */String INTROSPECT_TYPE_LEVEL_MAPPING = HandlerMapping.class.getName() + &quot;.introspectTypeLevelMapping&quot;; 1.4„ÄÅURI_TEMPLATE_VARIABLES_ATTRIBUTEÂåÖÂê´URIÊ®°ÊùøÊò†Â∞ÑÁöÑHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞ÔºåÂ∞ÜÂèòÈáèÂêçÁß∞Êò†Â∞ÑÂà∞ÂÄº„ÄÇ123456789/** * Name of the &#123;@link HttpServletRequest&#125; attribute that contains the URI * templates map, mapping variable names to values. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations. URL-based HandlerMappings will * typically support it, but handlers should not necessarily expect * this request attribute to be present in all scenarios. */String URI_TEMPLATE_VARIABLES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.uriTemplateVariables&quot;; 1.5„ÄÅMATRIX_VARIABLES_ATTRIBUTEÂåÖÂê´Â∏¶ÊúâURIÁü©ÈòµÂèòÈáèÁöÑÊò†Â∞ÑÁöÑHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞„ÄÇÊ≠§Â±ûÊÄß‰∏çÈúÄË¶ÅÊâÄÊúâHandlerMappingÂÆûÁé∞ÊîØÊåÅÔºå‰πüÂèØËÉΩ‰∏çÂ≠òÂú®ÔºåËøôÂèñÂÜ≥‰∫éHandlerMappingÊòØÂê¶Ë¢´ÈÖçÁΩÆ‰∏∫Âú®ËØ∑Ê±ÇURI‰∏≠‰øùÁïôÁü©ÈòµÂèòÈáèÂÜÖÂÆπ„ÄÇ 123456789/** * Name of the &#123;@link HttpServletRequest&#125; attribute that contains a map with * URI matrix variables. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations and may also not be present depending on * whether the HandlerMapping is configured to keep matrix variable content * in the request URI. */String MATRIX_VARIABLES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.matrixVariables&quot;; 1.6„ÄÅPRODUCIBLE_MEDIA_TYPES_ATTRIBUTEHttpServletRequestÂ±ûÊÄßÁöÑÂêçÁß∞ÔºåËØ•Â±ûÊÄßÂåÖÂê´ÂèØÁî®‰∫éÊò†Â∞ÑÂ§ÑÁêÜÁ®ãÂ∫èÁöÑÂèØÁîüÊàêÁöÑMediaTypesÈõÜÂêà„ÄÇ 12345678/** * Name of the &#123;@link HttpServletRequest&#125; attribute that contains the set of * producible MediaTypes applicable to the mapped handler. * &lt;p&gt;Note: This attribute is not required to be supported by all * HandlerMapping implementations. Handlers should not necessarily expect * this request attribute to be present in all scenarios. */String PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.producibleMediaTypes&quot;; 2.Ê†∏ÂøÉÊñπÊ≥ïHandlerMappingÊé•Âè£‰∏≠Âè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö1HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception; ‰ªéÊñπÊ≥ïÂÆö‰πâÂèØ‰ª•ÁúãÂá∫ÔºågetHandlerÊñπÊ≥ïÂ∞±ÊòØÈÄöËøárequestÊù•Ëé∑Âèñ‰∏Ä‰∏™HandlerExecutionChainÔºõËØ•ÊñπÊ≥ïÂú®‰∏çÂêåÁöÑÂ≠êÁ±ª‰∏≠ÈÉΩÊúâÂÆûÁé∞ÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂêéÈù¢ËØ¥Â≠êÁ±ªÁöÑÊó∂ÂÄôÂú®ËØ¶ÁªÜÂàÜÊûê„ÄÇ 3.HandlerMappingÁöÑÂ≠êÁ±ªÂõæ‰∏≠ÈªÑËâ≤ÈÉ®ÂàÜË°®Á§∫Â∑≤ÁªèËøáÊó∂ÁöÑÁ±ªÔºåÊó∂Èó¥ÂºÄÂèë‰∏≠‰∏çÂª∫ËÆÆÂÜç‰ΩøÁî®„ÄÇ Âú®HandlerMappingÁöÑ‰ΩìÁ≥ª‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåHandlerMapping‰∏ãÂ±ûÂ≠êÁ±ªÂèØÂàÜ‰∏∫‰∏§‰∏™ÂàÜÊîØÔºõ AbstractHandlerMethodMapping AbstractUrlHandlerMapping ‰∏äËø∞‰∏§‰∏™ÊäΩË±°Á±ªÂèàÂùáÊòØAbstractHandlerMappingÁöÑÂ≠êÁ±ª„ÄÇÂÖ≥‰∫éAbstractHandlerMappingÊàë‰ª¨‰∏ãÁØáÊñáÁ´†Êù•Â≠¶‰π†„ÄÇ Â§ßÂÆ∂Â¶ÇÊûúÊúâ‰ªÄ‰πàÊÑèËßÅÊàñËÄÖÂª∫ËÆÆÂèØ‰ª•Âú®‰∏ãÊñπËØÑËÆ∫Âå∫ÁïôË®ÄÔºå‰πüÂèØ‰ª•ÁªôÊàë‰ª¨ÂèëÈÇÆ‰ª∂Ôºàglmapper_2018@163.comÔºâ!Ê¨¢ËøéÂ∞è‰ºô‰º¥‰∏éÊàë‰ª¨‰∏ÄËµ∑‰∫§ÊµÅÔºå‰∏ÄËµ∑ÊàêÈïø„ÄÇ]]></content>
      <categories>
        <category>spring mvc</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>mvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Builder Âª∫ÈÄ†ËÄÖÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-builder%2F</url>
    <content type="text"><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑÂõõÂ§ßÂü∫Á°ÄÁâπÊÄßËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â§öÊÄÅ„ÄÅÊé•Âè£ÂíåÊäΩË±°Á±ªËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑ6ÁßçËÆæËÆ°ÂéüÂàôËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Âçï‰æãÊ®°ÂºèËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â∑•ÂéÇÊ®°Âºè Âª∫ÈÄ†ËÄÖÊ®°Âºè‰πüÊòØÂàõÂª∫Âûã‰∏≠ÁöÑ‰∏ÄÁßçÔºåÁî®‰∫éË¥üË¥£ÂàõÂª∫ÂØπË±°„ÄÇÂª∫ÈÄ†ËÄÖÊ®°ÂºèÂèØ‰ª•Â∞Ü‰∏Ä‰∏™‰∫ßÂìÅÁöÑÂÜÖÈÉ®Ë°®Ë±°‰∏é‰∫ßÂìÅÁöÑÁîüÊàêËøáÁ®ãÂàÜÂâ≤ÂºÄÊù•Ôºå‰ªéËÄåÂèØ‰ª•‰Ωø‰∏Ä‰∏™Âª∫ÈÄ†ËøáÁ®ãÁîüÊàêÂÖ∑Êúâ‰∏çÂêåÁöÑÂÜÖÈÉ®Ë°®Ë±°ÁöÑ‰∫ßÂìÅÂØπË±°„ÄÇ ‰ªÄ‰πàÊòØ‰∫ßÂìÅÁöÑÂÜÖÈÉ®Ë°®Ë±°Ôºü‰∏Ä‰∏™‰∫ßÂìÅÂ∏∏Êúâ‰∏çÁî®ÁöÑÁªÑÊàêÊàêÂàÜ‰Ωú‰∏∫‰∫ßÂìÅÁöÑÈõ∂‰ª∂ÔºåËøô‰∫õÈõ∂‰ª∂ÊúâÂèØËÉΩÊòØÂØπË±°Ôºå‰πüÊúâÂèØËÉΩ‰∏çÊòØÂØπË±°Ôºå‰ªñ‰ª¨ÈÄöÂ∏∏ÂèàÂè´ÂÅö‰∫ßÂìÅÁöÑÂÜÖÈÉ®Ë°®Ë±°„ÄÇ‰∏çÂêåÁöÑ‰∫ßÂìÅÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÂÜÖÈÉ®Ë°®Ë±°Ôºå‰πüÂ∞±ÊòØÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÈõ∂‰ª∂„ÄÇ‰ΩøÁî®Âª∫ÈÄ†ËÄÖÊ®°ÂºèÂèØ‰ª•‰ΩøÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÁü•ÈÅìÊâÄÁîüÊàêÁöÑ‰∫ßÂìÅÂØπË±°ÊúâÂì™‰∫õÈõ∂‰ª∂ÔºåÊØè‰∏™‰∫ßÂìÅÁöÑÂØπÂ∫îÈõ∂‰ª∂ÂΩºÊ≠§Êúâ‰Ωï‰∏çÂêåÔºåÊòØÊÄé‰πàÂª∫ÈÄ†Âá∫Êù•ÁöÑÔºå‰ª•ÂèäÊÄéÊ†∑ÁªÑÊàê‰∫ßÂìÅ„ÄÇ Â∑•ÂéÇÊ®°Âºè‰∏éÂª∫ÈÄ†ËÄÖÊ®°Âºè‰∏ä‰∏ÄÁØáÊàë‰ª¨ËÆ®ËÆ∫‰∫ÜÂ∑•ÂéÇÊ®°ÂºèÔºåÊàë‰ª¨Áü•ÈÅìÂ∑•ÂéÇÊ®°Âºè‰∏ÄËà¨ÈÉΩÊòØÂàõÂª∫‰∏Ä‰∏™‰∫ßÂìÅÔºåÊ≥®ÈáçÁöÑÊòØÊääËøô‰∏™‰∫ßÂìÅÂàõÂª∫Âá∫Êù•Â∞±Ë°åÔºåÂè™Ë¶ÅÂàõÂª∫Âá∫Êù•Ôºå‰∏çÂÖ≥ÂøÉËøô‰∏™‰∫ßÂìÅÁöÑÁªÑÊàêÈÉ®ÂàÜ„ÄÇ‰ªé‰ª£Á†Å‰∏äÁúãÔºåÂ∑•ÂéÇÊ®°ÂºèÂ∞±ÊòØ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÁî®Ëøô‰∏™ÊñπÊ≥ïÂ∞±ËÉΩÁîü‰∫ßÂá∫‰∫ßÂìÅ„ÄÇÈÇ£‰πàÂØπ‰∫éÂª∫ÈÄ†ËÄÖÊ®°ÂºèÂë¢ÔºüÂª∫ÈÄ†ËÄÖÊ®°Âºè‰πüÊòØÂàõÂª∫‰∏Ä‰∏™‰∫ßÂìÅÔºå‰ΩÜÊòØ‰∏ç‰ªÖË¶ÅÊääËøô‰∏™‰∫ßÂìÅÂàõÂª∫Âá∫Êù•ÔºåËøòË¶ÅÂÖ≥Á≥ªËøô‰∏™‰∫ßÂìÅÁöÑÁªÑÊàêÁªÜËäÇÔºå ÁªÑÊàêËøáÁ®ã„ÄÇ‰ªé‰ª£Á†Å‰∏äÁúãÔºà‰∏ãÈù¢ÁªôÂá∫ÔºâÔºåÂª∫ÈÄ†ËÄÖÊ®°ÂºèÂú®Âª∫ÈÄ†‰∫ßÂìÅÊó∂ÔºåËøô‰∏™‰∫ßÂìÅÊúâÂæàÂ§öÊñπÊ≥ïÔºåÂª∫ÈÄ†ËÄÖÊ®°Âºè‰ºöÊ†πÊçÆËøô‰∫õÁõ∏ÂêåÊñπÊ≥ï‰ΩÜÊòØ‰∏çÂêåÊâßË°åÈ°∫Â∫èÂª∫ÈÄ†Âá∫‰∏çÂêåÁªÑÊàêÁªÜËäÇÁöÑ‰∫ßÂìÅ„ÄÇ Âª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑÁªìÊûÑÁªìÊûÑÁªÑ‰ª∂ËßíËâ≤ËØ¥ÊòéÔºö ÊäΩË±°Âª∫ÈÄ†ËÄÖÔºàBuilderÔºâ:ÊäΩË±°Á±ªÔºå ËßÑËåÉ‰∫ßÂìÅÁöÑÁªÑÂª∫Ôºå‰∏ÄËà¨ÊòØÁî±Â≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁöÑÁªÑ‰ª∂ËøáÁ®ã ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºàConcreteBuilder ÔºâÔºöÂÖ∑‰ΩìÁöÑÊûÑÂª∫Âô® ÂØºÊºîËÄÖÔºàDirectorÔºâ : Áªü‰∏ÄÁªÑË£ÖËøáÁ®ã(ÂèØÁúÅÁï•) ‰∫ßÂìÅÔºàProductÔºâ:‰∫ßÂìÅÁöÑÊäΩË±°Á±ª DirectorËßíËâ≤ÊòØ‰∏éÂÆ¢Êà∑Á´ØÊâì‰∫§ÈÅìÁöÑËßíËâ≤„ÄÇDirectorÂ∞ÜÂÆ¢Êà∑Á´ØÂàõÂª∫‰∫ßÂìÅÁöÑËØ∑Ê±ÇÂàíÂàÜ‰∏∫ÂØπÂêÑ‰∏™Èõ∂‰ª∂ÁöÑÂª∫ÈÄ†ËØ∑Ê±ÇÔºåÂÜçÂ∞ÜËøô‰∫õËØ∑Ê±ÇÂßîÊ¥æÁªôÂÖ∑‰ΩìÁöÑConcreteBuilderËßíËâ≤„ÄÇConcreteBuilderÊòØÂÅöÂÖ∑‰ΩìÂª∫ÈÄ†Â∑•‰ΩúÁöÑÔºå‰ΩÜÊòØÂØπÂÆ¢Êà∑Á´ØÊòØÈÄèÊòéÁöÑ„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÊØèÊúâ‰∏Ä‰∏™‰∫ßÂìÅÁ±ªÔºåÂ∞±Êúâ‰∏Ä‰∏™Áõ∏Â∫îÁöÑÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÁ±ª„ÄÇËøô‰∫õ‰∫ßÂìÅÂ∫îÂΩìÊúâ‰∏ÄÊ†∑Êï∞ÁõÆÁöÑÈõ∂‰ª∂ÔºåËÄåÊØèÊúâ‰∏Ä‰∏™Èõ∂‰ª∂Â∞±Áõ∏Â∫îÁöÑÂú®ÊâÄÊúâÁöÑÂª∫ÈÄ†ËÄÖËßíËâ≤ÈáåÊúâ‰∏Ä‰∏™Âª∫ÈÄ†ÊñπÊ≥ï„ÄÇ Âª∫ÈÄ†‰∏ÄÂ∞ÅÈÇÆ‰ª∂ÈÄöËøá‰ª£Á†ÅÊù•Áúã‰∏ãÂêÑ‰∏™ËßíËâ≤ÁöÑËÅåË¥£Ôºö Director 123456789101112131415161718192021222324package com.glmapper.model.builder;/** * * ÂØºÊºîËÄÖÁ±ª * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏äÂçà11:33:26 * @version glmapper_v1.0 * */public class Director &#123; private Builder builder; /** * ‰∫ßÂìÅÊûÑÈÄ†ÊñπÊ≥ïÔºåË¥üË¥£Ë∞ÉÁî®ÂêÑ‰∏™Èõ∂‰ª∂Âª∫ÈÄ†ÊñπÊ≥ï */ public EmailProduct construct()&#123; builder = new ConcreteBuilder(); builder.buildFromAddress(); builder.buildToAddress(); builder.buildSubject(); builder.buildContent(); builder.buildSupplement(); return builder.returnEmailProduct(); &#125;&#125; Builder 1234567891011121314151617181920212223242526272829303132333435package com.glmapper.model.builder;/** * ÊäΩË±°Âª∫ÈÄ†ËÄÖ Êèê‰æõ‰∏çÂêåÁöÑÊûÑÂª∫ÁªÑ‰ª∂ÊñπÊ≥ï * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏äÂçà11:31:34 * @version glmapper_v1.0 * */public interface Builder &#123; /** * ÊûÑÂª∫Âèë‰ª∂‰∫∫‰ø°ÊÅØ */ public void buildFromAddress(); /** * ÊûÑÂª∫Êî∂‰ª∂‰∫∫‰ø°ÊÅØ */ public void buildToAddress(); /** * ÊûÑÂª∫ÈÇÆ‰ª∂ÂÜÖÂÆπ */ public void buildContent(); /** * ÊûÑÂª∫ÈÇÆ‰ª∂ÈôÑ‰ª∂ */ public void buildSupplement(); /** * ÊûÑÂª∫ÈÇÆ‰ª∂‰∏ªÈ¢ò */ public void buildSubject(); /** * ËøîÂõûÊûÑÂª∫ÁöÑ‰∫ßÂìÅ */ public EmailProduct returnEmailProduct(); &#125; ConcreteBuilder 1234567891011121314151617181920212223242526272829303132333435363738package com.glmapper.model.builder;/** * * ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂª∫ÈÄ†Âô® * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏äÂçà11:31:11 * @version glmapper_v1.0 * */public class ConcreteBuilder implements Builder&#123; private EmailProduct emailProduct = new EmailProduct(); public void buildFromAddress() &#123; emailProduct.setFromAddress(&quot;00001111@glmapper.com&quot;); &#125; public void buildToAddress() &#123; emailProduct.setToAddress(&quot;00001112@glmapper.com&quot;); &#125; public void buildContent() &#123; emailProduct.setContent(&quot;ÊàëÂÜô‰∫Ü‰∏Ä‰∏™Âª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑ‰æãÂ≠êÔºåÂ∏åÊúõÂ§ß‰Ω¨ÁªôÁÇπÊÑèËßÅ&quot;); &#125; public void buildSupplement() &#123; emailProduct.setSupplement(&quot;ÈôÑ‰ª∂ÔºöBuilderDemo.rar&quot;); &#125; public void buildSubject() &#123; emailProduct.setSubject(&quot;ÁªôÂ§ß‰Ω¨ÁöÑ‰∏ÄÂ∞ÅÂª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑDemo&quot;); &#125; public EmailProduct returnEmailProduct() &#123; System.out.println(emailProduct.toString()); return emailProduct; &#125;&#125; Product 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package com.glmapper.model.builder;/** * ‰∫ßÂìÅÁ±ªÔºà‰∫ßÂìÅÁ±ª‰∏≠ÂåÖÊã¨‰∏çÂêåÁªÑ‰ª∂ÔºöÊ≠§Â§Ñ‰ΩøÁî®Â≠óÊÆµÊñπÂºèÊ®°ÂºèÁªÑ‰ª∂Ôºâ * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏äÂçà11:30:13 * @version glmapper_v1.0 * */public class EmailProduct &#123; /** * Âèë‰ª∂Âú∞ÂùÄ */ private String fromAddress; /** * Êî∂‰ª∂Âú∞ÂùÄ */ private String toAddress; /** * ÈÇÆ‰ª∂‰∏ªÈ¢ò */ private String subject; /** * ÈÇÆ‰ª∂ÂÜÖÂÆπ */ private String content; /** * ÈÇÆ‰ª∂ÈôÑ‰ª∂ */ private String supplement; public String getFromAddress() &#123; return fromAddress; &#125; public void setFromAddress(String fromAddress) &#123; this.fromAddress = fromAddress; &#125; public String getToAddress() &#123; return toAddress; &#125; public void setToAddress(String toAddress) &#123; this.toAddress = toAddress; &#125; public String getSubject() &#123; return subject; &#125; public void setSubject(String subject) &#123; this.subject = subject; &#125; public String getContent() &#123; return content; &#125; public void setContent(String content) &#123; this.content = content; &#125; public String getSupplement() &#123; return supplement; &#125; public void setSupplement(String supplement) &#123; this.supplement = supplement; &#125; @Override public String toString() &#123; return &quot;EmailProduct [fromAddress=&quot; + fromAddress + &quot;, toAddress=&quot; + toAddress + &quot;, subject=&quot; + subject + &quot;, content=&quot; + content + &quot;, supplement=&quot; + supplement + &quot;]&quot;; &#125;&#125; ÂÆ¢Êà∑Á´Ø 12345678910111213package com.glmapper.model.builder;/** * ÂÆ¢Êà∑Á´Ø * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏äÂçà11:45:53 * @version glmapper_v1.0 * */public class MainTest &#123; public static void main(String[] args) &#123; new Director().construct(); &#125;&#125; ÁªìÊûú 1234567891011121314Âª∫ÈÄ†Âèë‰ª∂‰∫∫‰ø°ÊÅØÁªÑ‰ª∂...Âª∫ÈÄ†Êî∂‰ª∂‰∫∫‰ø°ÊÅØÁªÑ‰ª∂...Âª∫ÈÄ†ÈÇÆ‰ª∂‰∏ªÈ¢ò‰ø°ÊÅØÁªÑ‰ª∂...Âª∫ÈÄ†ÈÇÆ‰ª∂ÂÜÖÂÆπ‰ø°ÊÅØÁªÑ‰ª∂...Âª∫ÈÄ†ÈÇÆ‰ª∂ÈôÑ‰ª∂‰ø°ÊÅØÁªÑ‰ª∂...Ôºà‰∏∫‰∫ÜÊñπ‰æøÁúãÔºåËøôÈáåÊääÁªìÊûúÁöÑÊòæÁ§∫ÂÅö‰∫ÜË∞ÉÊï¥ÔºâEmailProduct Ôºö[ fromAddress=00001111@glmapper.com, toAddress=00001112@glmapper.com, subject=ÁªôÂ§ß‰Ω¨ÁöÑ‰∏ÄÂ∞ÅÂª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑDemo, content=ÊàëÂÜô‰∫Ü‰∏Ä‰∏™Âª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑ‰æãÂ≠êÔºåÂ∏åÊúõÂ§ß‰Ω¨ÁªôÁÇπÊÑèËßÅ, supplement=ÈôÑ‰ª∂ÔºöBuilderDemo.rar] Âª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑÂÖ≥Ê≥®ÁÇπÊúâ‰∫õÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™ÂØπË±°‰ºöÊúâ‰∏Ä‰∫õÈáçË¶ÅÁöÑÊÄßË¥®ÔºåÂú®‰ªñ‰ª¨Ê≤°ÊúâÊÅ∞ÂΩìÁöÑÂÄº‰πãÂâçÔºåÂØπË±°‰∏çËÉΩ‰Ωú‰∏∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ‰∫ßÂìÅÊù•‰ΩøÁî®„ÄÇÂ∞±Â¶Ç‰∏äÈù¢ÂèëÈÄÅ‰∏Ä‰∏™ÁîµÂ≠êÈÇÆ‰ª∂ÊâÄÁ§∫ÔºåÁîµÂ≠êÈÇÆ‰ª∂ÊúâÂèë‰ª∂‰∫∫Âú∞ÂùÄ„ÄÅÊî∂‰ª∂‰∫∫Âú∞ÂùÄ„ÄÅ‰∏ªÈ¢ò„ÄÅÂÜÖÂÆπ„ÄÅÈôÑÂΩïÁ≠âÈÉ®ÂàÜÔºåËÄåÂú®Êî∂‰ª∂‰∫∫Âú∞ÂùÄÊ≤°ÊúâËµãÂÄº‰πãÂâçÔºåËøô‰∏™ÁîµÂ≠êÈÇÆ‰ª∂ÊòØ‰∏çËÉΩÂèëÈÄÅÁöÑ„ÄÇÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™ÂØπË±°ÁöÑ‰∏Ä‰∫õÊÄßË¥®ÂøÖÈ°ªÊåâÁÖßÊüê‰∏™È°∫Â∫èËµãÂÄºÊâçÊúâÊÑè‰πâÔºåÂú®Êüê‰∏™ÊÄßË¥®Ê≤°ÊúâËµãÂÄº‰πãÂâçÔºåÂè¶‰∏Ä‰∏™ÊÄßË¥®ÂàôÊó†Ê≥ïËµãÂÄº„ÄÇËøô‰∫õÊÉÖÂÜµ‰ΩøÂæóÊÄßË¥®Êú¨Ë∫´ÁöÑÂª∫ÈÄ†Ê∂âÂèäÂà∞Â§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæë„ÄÇ ËÄåÊ≠§Êó∂ÔºåÂØπË±°Áõ∏ÂΩì‰∫é‰∏Ä‰∏™ÊúâÂæÖÂª∫ÈÄ†ÁöÑ‰∫ßÂìÅÔºåËÄåÂØπË±°ÁöÑËøô‰∫õÊÄßË¥®Áõ∏ÂΩì‰∫é‰∫ßÂìÅÁöÑÈõ∂‰ª∂ÔºåÂª∫ÈÄ†‰∫ßÂìÅÁöÑËøáÁ®ãÊòØÂª∫ÈÄ†Èõ∂‰ª∂ÁöÑËøáÁ®ã„ÄÇÁî±‰∫éÂª∫ÈÄ†Èõ∂‰ª∂ÁöÑËøáÁ®ãÂæàÂ§çÊùÇÔºåÂõ†Ê≠§ÔºåËøô‰∫õÈõ∂‰ª∂ÁöÑÂÅ•Âú®ËøáÁ®ãÂæÄÂæÄ‰ºöË¢´‚ÄúÂ§ñÈÉ®Âåñ‚ÄùÂà∞Âè¶‰∏Ä‰∏™Áß∞‰Ωú‰∏∫Âª∫ÈÄ†ËÄÖÁöÑÂØπË±°ÈáåÔºåÂª∫ÈÄ†ËÄÖÂØπË±°ËøîÂõûÁªôÂÆ¢Êà∑Á´ØÁöÑÊòØ‰∏Ä‰∏™ÂÖ®ÈÉ®Èõ∂‰ª∂ÈÉΩÂª∫ÈÄ†ÂÆåÊØïÁöÑ‰∫ßÂìÅÂØπË±°„ÄÇ Âú®ÂÆûÈôÖÁöÑÂ∫îÁî®ËøáÁ®ã‰∏≠ÔºåÂª∫ÈÄ†ËÄÖÊ®°Âºè‰πüÊúâ‰∏çÂêåÁöÑÂèòÁßçÔºåÊØîÂ¶ÇËØ¥ÁúÅÁï•ÊäΩË±°Âª∫ÈÄ†ËÄÖËßíËâ≤ÊàñËÄÖÁúÅÁï•ÂØºÊºîËÄÖËßíËâ≤Á≠âÁ≠âÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂª∫ÈÄ†ËÄÖÊ®°ÂºèÂèØ‰ª•ÈÄöËøáÁúÅÁï•Êüê‰∫õËßíËâ≤Êù•ËææÂà∞ËøáÂ∫¶Âà∞Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè„ÄÇ OKÔºåÂÖ≥‰∫éÂª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑÂÖ∂‰ªñÂèòÁßçËøôÈáåÂ∞±‰∏çËÆ®ËÆ∫‰∫ÜÔºåÁïô‰∏Ä‰∏™ÊÉ≥Ë±°Á©∫Èó¥ÔºÅÔºàËøôÊÆµÂ≠ó‰ª£Ë°®‰∏Ä‰∏™ÂæÆÁ¨ëÁöÑË°®ÊÉÖ(*Ôø£Ô∏∂Ôø£)Ôºâ java‰∏≠Âª∫ÈÄ†ËÄÖÊ®°ÂºèÔºöJavaMailJavaMailÊòØ‰∏ÄÁªÑJ2SEÁöÑÊâ©Â±ïAPIÁöÑ‰∏Ä‰∏™Á±ªÂ∫ìÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™APIÊù•ÂºÄÂèë‰∏Ä‰∏™ÂäüËÉΩÂÆåÂ§áÁöÑÁîµÂ≠êÈÇÆ‰ª∂ÂÆ¢Êà∑Á´ØËΩØ‰ª∂„ÄÇÂú®JavaMail‰∏≠Â∞±‰∏ªË¶Å‰ΩøÁî®‰∫ÜÂª∫ÈÄ†ËÄÖÊ®°ÂºèÔºåÂΩìÁÑ∂ËøòÊúâÊàë‰ª¨‰∏ä‰∏ÄÁØá‰∏≠ËØ¥ÈÅìÁöÑÊäΩË±°Â∑•ÂéÇÊ®°Âºè„ÄÇ Âª∫ÈÄ†ËÄÖÊ®°ÂºèÂú®JavaMail‰∏≠ÁöÑ‰ΩøÁî®1234567891011121314151617181920212223242526272829303132333435363738394041package com.glmapper.model.builder;import java.util.Properties;import javax.mail.Message;import javax.mail.Session;import javax.mail.Transport;import javax.mail.internet.InternetAddress;import javax.mail.internet.MimeMessage;/** * ÈÇÆ‰ª∂ÂèëÈÄÅ-Âª∫ÈÄ†ËÄÖÊ®°Âºè * @author glmapper * @time 2017Âπ¥12Êúà30Êó•‰∏ãÂçà2:04:46 * @version glmapper_v1.0 * */public class MailSender &#123; private static MimeMessage message; public static void main(String[] args) &#123; //Âü∫Êú¨Â±ûÊÄß String smptHost = &quot;smpt.xxx.com&quot;; String fromAddress = &quot;00001111@glmapper.com&quot;; String toAddress = &quot;00001112@glmapper.com&quot;; Properties p= new Properties(); p.put(&quot;mail.smtp.host&quot;, smptHost); Session session = Session.getDefaultInstance(p); try &#123; InternetAddress to = new InternetAddress(toAddress); InternetAddress from = new InternetAddress(fromAddress); //ÂàõÂª∫messageÂØπË±° message = new MimeMessage(session); //‰∏ãÈù¢Â∞±ÊòØÁªÑË£ÖÈõ∂‰ª∂ÁöÑËøáÁ®ã message.setFrom(from); message.setRecipient(Message.RecipientType.TO, to); message.setSubject(&quot;hello builder&quot;); message.setText(&quot;ÊàëÂÜô‰∫Ü‰∏Ä‰∏™Âª∫ÈÄ†ËÄÖÊ®°ÂºèÁöÑ‰æãÂ≠êÔºåÂ∏åÊúõÂ§ß‰Ω¨ÁªôÁÇπÊÑèËßÅ&quot;); Transport.send(message); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; OK,Âª∫ÈÄ†ËÄÖÊ®°ÂºèÂ∞±Âà∞ËøôÈáå‰∫Ü!]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàó-ÂÆπÂô®Âà∑Êñ∞]]></title>
    <url>%2F2018%2F11%2F10%2Fspring-base-context-refresh%2F</url>
    <content type="text"><![CDATA[SpringÂØπ‰∫éÁ®ãÂ∫èÂëòËØ¥Êù•ËØ¥ÈÉΩ‰∏çÈôåÁîüÔºõ‰Ωú‰∏∫‰∏Ä‰∏™Âº∫Â§ßÁöÑÂºÄÊ∫êÊäÄÊúØÔºåÂ∏ÆÂä©Êàë‰ª¨ËÉΩÂ§üÊõ¥Â•ΩÁöÑËøõË°åÈ°πÁõÆÁöÑÂºÄÂèë‰∏éÁª¥Êä§„ÄÇ ‰∏äÊ¨°Âú®SpringÁöÑÂêØÂä®ËøáÁ®ãÊñáÁ´†‰∏≠ÂØπSpringÁöÑÂêØÂä®ËøáÁ®ãÂÅö‰∫Ü‰∏Ä‰∏™ËæÉ‰∏∫ËØ¶ÁªÜÁöÑËØ¥ÊòéÂíåÂàÜÊûê„ÄÇÈÇ£‰πàÂú®ÂÆûÈôÖÁöÑËøáÁ®ã‰∏≠ÔºåSpringÁöÑÂêØÂä®ÂÆûÈôÖ‰∏äÂ∞±ÊòØSpringÂÆπÂô®ÁöÑÂàùÂßãÂåñËøáÁ®ã„ÄÇÊú¨ÊñáÂ∞Ü‰ªéÊ∫êÁ†ÅÁöÑËßíÂ∫¶ÁªìÂêàËá™Â∑±Êñ≠ÁÇπÊâßË°åËøáÁ®ã‰∏≠‰øùÁïôÁöÑÁé∞Âú∫Êù•ÂàÜÊûê‰∏Ä‰∏ãÂÆπÂô®ÁöÑÂà∑Êñ∞ËøáÁ®ãÔºà‰∏ªË¶ÅÂàÜÊûêÂâçÂá†‰∏™ÊñπÊ≥ïÔºåÂêéÈù¢Âá†‰∏™‰ºöÂàÜÂºÄÊù•ËØ¥Ôºâ„ÄÇ SpringÁöÑÂêØÂä®ÊòØÈÄöËøáContextLoaderListenerÊù•ËøõË°åÁöÑÔºåÂú®ContextLoaderListener‰∏≠ÈÄöËøáÂßîÊâòÁà∂Á±ªContextLoaderÁöÑinitWebApplicationContextÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÂàùÂßãÂåñËøáÁ®ã„ÄÇÂÖ∑‰ΩìÁöÑÂêØÂä®ËøáÁ®ãÂèØ‰ª•Áúã‰∏ã‰πãÂâçÁöÑÈÇ£ÁØáÊñáÁ´†„ÄÇ Âú®initWebApplicationContextÊñπÊ≥ïÊòØÁî®Êù•ÂàõÂª∫ÂÆπÂô®ÁöÑÔºåÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö ‰ªäÂ§©‰∏ªË¶ÅÊù•ÁúãconfigureAndRefreshWebApplicationContextÊñπÊ≥ï‰∏≠ÊúÄÂêéÁöÑwac.refresh()Âà∞Â∫ïÂèëÁîü‰∫ÜÂì™‰∫õ‰∫ã; 1„ÄÅobtainFreshBeanFactoryÔºöBeanFactoryÁöÑÂà∑Êñ∞ÂíåÂàõÂª∫refresh()ÊñπÊ≥ï‰∏ªË¶Å‰∏∫IoCÂÆπÂô®BeanÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÊèê‰æõÊù°‰ª∂ÔºåSpring IoCÂÆπÂô®ËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰ªéÂÖ∂Â≠êÁ±ªÂÆπÂô®ÁöÑrefreshBeanFactory()ÊñπÊ≥ïÂêØÂä®ÔºåÊâÄ‰ª•Êï¥‰∏™refresh()‰∏≠‚ÄúConfigurableListableBeanFactory beanFactory =obtainFreshBeanFactory();‚ÄùËøôÂè•‰ª•Âêé‰ª£Á†ÅÁöÑÈÉΩÊòØÊ≥®ÂÜåÂÆπÂô®ÁöÑ‰ø°ÊÅØÊ∫êÂíåÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ÔºåËΩΩÂÖ•ËøáÁ®ãÂ∞±ÊòØ‰ªéËøôÂè•‰ª£Á†ÅÂêØÂä®„ÄÇAbstractApplicationContextÁöÑobtainFreshBeanFactory()ÊñπÊ≥ïË∞ÉÁî®Â≠êÁ±ªÂÆπÂô®ÁöÑrefreshBeanFactory()ÊñπÊ≥ïÔºåÂêØÂä®ÂÆπÂô®ËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑËøáÁ®ã„ÄÇrefresh()ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÔºöÂú®ÂàõÂª∫IoCÂÆπÂô®ÂâçÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊúâÂÆπÂô®Â≠òÂú®ÔºåÂàôÈúÄË¶ÅÊääÂ∑≤ÊúâÁöÑÂÆπÂô®ÈîÄÊØÅÂíåÂÖ≥Èó≠Ôºå‰ª•‰øùËØÅÂú®refresh‰πãÂêé‰ΩøÁî®ÁöÑÊòØÊñ∞Âª∫Á´ãËµ∑Êù•ÁöÑIoCÂÆπÂô®„ÄÇrefreshÁöÑ‰ΩúÁî®Á±ª‰ºº‰∫éÂØπIoCÂÆπÂô®ÁöÑÈáçÂêØÔºåÂú®Êñ∞Âª∫Á´ãÂ•ΩÁöÑÂÆπÂô®‰∏≠ÂØπÂÆπÂô®ËøõË°åÂàùÂßãÂåñÔºåÂØπBeanÂÆö‰πâËµÑÊ∫êËøõË°åËΩΩÂÖ•„ÄÇÂíårefreshBeanFactoryÊñπÊ≥ïÁ±ª‰ººÔºåËΩΩÂÖ•BeanÂÆö‰πâÁöÑÊñπÊ≥ïloadBeanDefinitions‰πü‰ΩøÁî®‰∫ÜÂßîÊ¥æÊ®°ÂºèÔºåÂú®AbstractRefreshableApplicationContextÁ±ª‰∏≠Âè™ÂÆö‰πâ‰∫ÜÊäΩË±°ÊñπÊ≥ïÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ë∞ÉÁî®Â≠êÁ±ªÂÆπÂô®‰∏≠ÁöÑÊñπÊ≥ïÂÆûÁé∞„ÄÇ //ÈÄöÁü•Â≠êÁ±ªÂéªÂà∑Êñ∞ÂÜÖÈÉ®bean Â∑•ÂéÇ ÂÜçÊù•ÁúãrefreshBeanFactory Ê≠§ÂÆûÁé∞ÊâßË°åËØ•‰∏ä‰∏ãÊñáÁöÑÂ∫ïÂ±ÇbeanÂ∑•ÂéÇÁöÑÂÆûÈôÖÂà∑Êñ∞ÔºåÂÖ≥Èó≠‰ª•ÂâçÁöÑbeanÂ∑•ÂéÇÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâÔºåÂπ∂‰∏∫‰∏ä‰∏ãÊñáÁîüÂëΩÂë®ÊúüÁöÑ‰∏ã‰∏ÄÈò∂ÊÆµÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞ÁöÑbeanÂ∑•ÂéÇ„ÄÇ customizeBeanFactory(DefaultListableBeanFactory beanFactory) 1234567891011121314151617181920212223/** //ÈÄöËøáÂΩìÂâç‰∏ä‰∏ãÊñáÊù•Ëá™ÂÆö‰πâÂÜÖÈÉ®beanÂ∑•ÂéÇ&lt;br&gt; * Customize the internal bean factory used by this context. * Called for each &#123;@link #refresh()&#125; attempt. * &lt;p&gt;The default implementation applies this context&apos;s * &#123;@linkplain #setAllowBeanDefinitionOverriding &quot;allowBeanDefinitionOverriding&quot;&#125; * and &#123;@linkplain #setAllowCircularReferences &quot;allowCircularReferences&quot;&#125; settings, * if specified. Can be overridden in subclasses to customize any of * &#123;@link DefaultListableBeanFactory&#125;&apos;s settings. * @param beanFactory the newly created bean factory for this context * @see DefaultListableBeanFactory#setAllowBeanDefinitionOverriding * @see DefaultListableBeanFactory#setAllowCircularReferences * @see DefaultListableBeanFactory#setAllowRawInjectionDespiteWrapping * @see DefaultListableBeanFactory#setAllowEagerClassLoading */ protected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) &#123; if (this.allowBeanDefinitionOverriding != null) &#123; beanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding); &#125; if (this.allowCircularReferences != null) &#123; beanFactory.setAllowCircularReferences(this.allowCircularReferences); &#125; &#125; XmlWebApplicationContextÁ±ª‰∏≠loadBeanDefinitionsÔºàbeanFactoryÔºâ12345678910111213141516@Override protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException &#123; // Create a new XmlBeanDefinitionReader for the given BeanFactory. XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory); // Configure the bean definition reader with this context&apos;s // resource loading environment. beanDefinitionReader.setEnvironment(getEnvironment()); beanDefinitionReader.setResourceLoader(this); beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this)); // Allow a subclass to provide custom initialization of the reader, // then proceed with actually loading the bean definitions. initBeanDefinitionReader(beanDefinitionReader); loadBeanDefinitions(beanDefinitionReader); &#125; AbstractApplicationContextË∞ÉÁî®loadBeanDefinitions(DefaultListableBeanFactory beanFactory) ÔºåÊ≠§ÊñπÊ≥ïÊ†πÊçÆÈ¶ñÂÖàÂàõÂª∫XmlBeanDefinitionReaderÂØπË±°ÔºåÁÑ∂ÂêéÈÖçÁΩÆËØ•ÂØπË±°ÁöÑ‰∏ä‰∏ãÊñáÂíåËµÑÊ∫êÂä†ËΩΩÁéØÂ¢ÉÔºåÂêåÊó∂Ë∞ÉÁî®Â≠êÁ±ªÂÆûÁé∞ÁöÑinitBeanDefinitionReaderÂØπXmlBeanDefinitionReaderËøõË°å‰∏™ÊÄßÂåñÈÖçÁΩÆÔºåÊúÄËøëÂêéÂÖ•Âà∞initBeanDefinitionReader(beanDefinitionReader)ÁöÑË∞ÉÁî®Ôºö ÊçÆÁªôÂÆöÁöÑBeanFactoryÂàõÂª∫XmlBeanDefinitionReader ÂØπË±° ÈÖçÁΩÆbeanDefinitionReaderÁöÑ‰∏ä‰∏ãÊñáÂíåËµÑÊ∫êÂä†ËΩΩÁéØÂ¢É Áî®Â≠êÁ±ªÂÆûÁé∞ÁöÑinitBeanDefinitionReaderÂØπXmlBeanDefinitionReaderËøõË°å‰∏™ÊÄßÂåñÈÖçÁΩÆinitBeanDefinitionReader(beanDefinitionReader); Ë∞ÉÁî®ËΩΩÂÖ•BeanÂÆö‰πâÁöÑÊñπÊ≥ïÔºåÂú®ÂΩìÂâçÁ±ª‰∏≠Âè™ÂÆö‰πâ‰∫ÜÊäΩË±°ÁöÑloadBeanDefinitionsÊñπÊ≥ïÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ë∞ÉÁî®Â≠êÁ±ªÂÆπÂô® Ë£ÖËΩΩbeanÂÆö‰πâÈÄöËøáXmlBeanDefinitionReader„ÄÇ 123456789101112// Create a new XmlBeanDefinitionReader for the given BeanFactory. ÈÄöËøáÁªôÂÆöÁöÑbeanÂ∑•ÂéÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑXmlBeanDefinitionReader1.XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);2.‰ΩøÁî®‰∏ä‰∏ãÊñáÁöÑËµÑÊ∫êÂä†ËΩΩÁéØÂ¢ÉÈÖçÁΩÆbeanÂÆö‰πâËØªÂèñÂô®„ÄÇ beanDefinitionReader.setEnvironment(getEnvironment()); beanDefinitionReader.setResourceLoader(this); beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));3.ÂÖÅËÆ∏Â≠êÁ±ªÊèê‰æõreaderÁöÑËá™ÂÆö‰πâÂàùÂßãÂåñÔºåÁÑ∂ÂêéÁªßÁª≠ÂÆûÈôÖÂä†ËΩΩbeanÂÆö‰πâ„ÄÇ //ÈÄöËøáÂà∂ÂÆöÁöÑXmlBeanDefinitionReaderÊù•ËΩΩÂÖ•beandefinitionReader initBeanDefinitionReader(beanDefinitionReader) // ÈÄöËøáÂà∂ÂÆöÁöÑXmlBeanDefinitionReaderÊù•ËΩΩÂÖ•bean definitions loadBeanDefinitions(beanDefinitionReader) AbstractApplicationContextË∞ÉÁî®loadBeanDefinitions(beanDefinitionReader)ÔºåËøô‰∏™ÊñπÊ≥ïÊòØÂèñÂæóËµÑÊ∫êÊàñËµÑÊ∫êË∑ØÂæÑÁÑ∂ÂêéÈÄöËøá‰º†ÂÖ•ÁöÑreaderÂéªÂä†ËΩΩBeanDefinitions„ÄÇ 2„ÄÅloadBeanDefinitionsÁõÆÂâç‰ΩøÁî®SpringÁöÑÈÖçÁΩÆÈÉΩÊòØÂü∫‰∫éXMLÁöÑÔºåÂõ†Ê≠§‰ΩøÁî®XmlBeanDefinitionReader ‰∏≠ÁöÑloadBeanDefinitionsÊñπÊ≥ï„ÄÇ ÁúãdoLoadBeanDefinitions,Ëøô‰∏™Â∞±ÊòØÂÖ∑‰ΩìÁöÑËØªÂèñÊñá‰ª∂ÈÖçÁΩÆÔºåÁÑ∂ÂêéÊ≥®ÂÜåÊàêBean 3„ÄÅprepareBeanFactoryÈÖçÁΩÆÂ∑•ÂéÇÁöÑÊ†áÂáÜ‰∏ä‰∏ãÊñáÁâπÊÄßÔºåÂ¶Ç‰∏ä‰∏ãÊñáÁöÑÁ±ªË£ÖËΩΩÂô®ÂíåÂêéÂ§ÑÁêÜÂô®„ÄÇ ÂëäËØâÂÜÖÈÉ®beanÂ∑•ÂéÇ‰ΩøÁî®‰∏ä‰∏ãÊñáÁöÑÁ±ªË£ÖÂÖ•Âô®Á≠â„ÄÇ ‰∏ä‰∏ãÊñáÂõûË∞ÉÈÖçÁΩÆbeanÂ∑•ÂéÇ„ÄÇ BeanFactoryÊé•Âè£Êú™ÁôªËÆ∞‰∏∫ÊôÆÈÄöÂ∑•ÂéÇÁöÑËß£ÊûêÂºè„ÄÇMessageSourceÁôªËÆ∞Ôºà‰∏∫Ëá™Âä®Ë£ÖÈÖçÂàõÂª∫Ôºâ‰Ωú‰∏∫‰∏Ä‰∏™Bean Â¶ÇÊûúÂàõÂª∫ÔºõÂ∞±ÂéªÂØªÊâæLoadTimeWeaverÔºåÁÑ∂ÂêéÂáÜÂ§áÁªÑÁªá Ê≥®ÂÜåÈªòËÆ§ÁéØÂ¢Ébean„ÄÇ ÈÄöËøáÊñ≠ÁÇπÊù•Áúã‰∏ãÂΩìÂâçÁöÑbeanFactory ÁªßÁª≠ÊâßË°å‚Ä¶ beanDefinitionMap manualSingletonNames 4„ÄÅpostProcessBeanFactoryÊ≥®ÂÜåwebÁâπÊÄßÁöÑÂÖ®Â±ÄÂüü 1).registerWebApplicationScopesÊ≥®ÂÜåÂÖ∑ÊúâwebÁâπÊÄßÁöÑÂüüÔºõÂåÖÊã¨Ôºö‚Äùrequest‚Äù, ‚Äúsession‚Äù, ‚ÄúglobalSession‚Äù, ‚Äúapplication‚Äù Áúã‰∏ãÂ≠òÂÇ®ÁªìÊûÑÔºöregisterScopeÊñπÊ≥ï2).registerEnvironmentBeans Ê≥®ÂÜåwebÁâπÊÄß ÁéØÂ¢ÉbeanÔºà‚Äúcontextparameters‚Äù„ÄÅ‚ÄúContextAttribute‚ÄùÔºâ‰∏éÁªôÂÆöÁöÑWebApplicationContext‰ΩøÁî®BeanFactory„ÄÇ 1.servletContext2.servletConfig3.registerSingleton ËøôÈáåÊòØÊâæÂà∞‰∫ÜÊàë‰ª¨ÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂ÂèÇÊï∞ÔºöbeanName=contextParameters ÊúÄÂêéÊòØÂ∞ÜcontextAttributesÊîæÂÖ•ÔºõcontextAttributes‰∏≠ÂåÖÂê´ÁöÑÂ±ûÊÄßÂÄºÊØîËæÉÂ§öÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÈù¢ÊâÄÁ§∫Ôºö ‰∏ªË¶ÅÂåÖÊã¨Ôºöjavax.servlet.context.tempdir,org.apache.catalina.resources, org.springframework.web.context.support.ServletContextScope, org.apache.tomcat.util.scan.MergedWebXml,org.apache.tomcat.InstanceManager,org.apache.catalina.jsp_classpath,javax.websocket.server.ServerContainer,org.apache.tomcat.JarScanner ËøôÈáåÊòØÊääÈúÄË¶ÅÁöÑ‰∏úË•øÂÖ®ÈÉ®ËΩΩÂÖ•ËøõÊù•‰∫ÜÔºåÊúâÂæàÂ§ö„ÄÇÂ∞±‰∏çË¥¥‰∫Ü(mime-mapping)‚Ä¶. 5„ÄÅinvokeBeanFactoryPostProcessorsBeanDefinitionRegistryPostProcessorÂÆû‰æãÂåñÔºöÊ†áÂáÜBeanFactoryPostProcessorÁöÑÊâ©Â±ïÔºåBeanFactoryPostProcessorÁöÑ‰ΩúÁî®ÊòØÁî®Êù•Ëøõ‰∏ÄÊ≠•ÂÆö‰πâÊ≥®ÂÜåÁöÑBeanDefinitionÔºåIoCÂÆπÂô®Êú¨Ë¥®Â∞±ÊòØBeanÁÆ°ÁêÜÔºåÊâÄ‰ª•BeanFactoryPostProcessorÊú¨Ë∫´‰πüÊòØBeanÔºåË¶ÅÂØπBeanFactoryPostProcessorÁöÑBeanDefinitionËøõ‰∏ÄÊ≠•ÂÆö‰πâÂ∞±ÈÄöËøáBeanDefinitionRegistryPostProcessorËøõË°åÊ≥®ÂÜåÔºåBeanDefinitionRegistryPostProcessorÂèäÂÖ∂Â≠êÁ±ªÊòØIocÂÆπÂô®ÊúÄÂÆû‰æãÂåñÁöÑ‰∏ÄÁ±ªBean„ÄÇÂÆÉ‰ª¨Âú®ConfigurableApplicationContextÔºàApplicationContextÂ≠êÊé•Âè£ÔºâÂÆûÁé∞Á±ªË∞ÉÁî®refresh()ÊñπÊ≥ïË∞ÉÁî®invokeBeanFactoryPostProcessors(beanFactory);ÊñπÊ≥ïÊó∂Â∞±Ë¢´ÂÆû‰æãÂåñ„ÄÇ OKÔºå‰ªäÂ§©ÂÖ≥‰∫éËøôÈÉ®ÂàÜÁöÑÂàÜÊûêÂ∞±Âà∞Ê≠§ÁªìÊùü‰∫ÜÔºåÂêéÈù¢ÁöÑËøáÁ®ã‰ºöÂú®‰∏ã‰∏ÄÁØáSpringÁ≥ªÂàóÊñáÁ´†‰∏≠ÁªßÁª≠Êù•ËÆ≤refresh‰∏≠ÁöÑËøáÁ®ã„ÄÇ Â¶ÇÊûúÊÇ®ÂØπÁ≥ªÂàóÊñáÁ´†Êúâ‰ªª‰ΩïÊÑèËßÅÔºåÂèØ‰ª•ÁªôÊàëÁïôË®ÄÔºåÊÑüË∞¢Â§ßÂÆ∂„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â∑•ÂéÇÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-factory%2F</url>
    <content type="text"><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑÂõõÂ§ßÂü∫Á°ÄÁâπÊÄßËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â§öÊÄÅ„ÄÅÊé•Âè£ÂíåÊäΩË±°Á±ªËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑ6ÁßçËÆæËÆ°ÂéüÂàôËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Âçï‰æãÊ®°Âºè ‰∏ä‰∏ÄÁØáÊàë‰ª¨Â∑≤ÁªèÂØπÂàõÂª∫ÂûãÊ®°Âºè‰∏≠ÁöÑÂçï‰æãÊ®°ÂºèËøõË°å‰∫ÜÂ≠¶‰π†Ôºå‰ªäÂ§©Êù•Â≠¶‰π†Âè¶Â§ñ‰∏Ä‰∏™ÊØîËæÉÈáçË¶ÅÂπ∂‰∏îÁªèÂ∏∏‰ΩøÁî®ÁöÑÊ®°Âºè-Â∑•ÂéÇÊ®°ÂºèÔºõÂ∑•ÂéÇÊ®°Âºè‰∏ìÈó®Ë¥üË¥£Â∞ÜÂ§ßÈáèÊúâÂÖ±ÂêåÊé•Âè£ÁöÑÁ±ªÂÆû‰æãÂåñ„ÄÇÂÖ∂ÂèØ‰ª•Âä®ÊÄÅÁöÑÂÜ≥ÂÆöÂ∞ÜÂì™‰∏Ä‰∏™Á±ªÂÆû‰æãÂåñÔºå‰∏çÂøÖ‰∫ãÂÖàÁü•ÈÅìÊØèÊ¨°Ë¶ÅÂÆû‰æãÂåñÂì™‰∏Ä‰∏™Á±ª„ÄÇ Â∑•ÂéÇÊ®°ÂºèÂÖ∑Êúâ‰ª•‰∏ã‰∏âÁßçÂΩ¢ÊÄÅÔºö ÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÔºöÂèàÁß∞ÈùôÊÄÅÂ∑•ÂéÇÊ®°Âºè Â∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÔºöÂèàÁß∞Â§öÊÄÅÊÄßÂ∑•ÂéÇÊ®°ÂºèÊàñËÄÖËôöÊãüÊûÑÈÄ†Â≠êÊ®°Âºè ÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÔºöÂèàÁß∞Â∑•ÂÖ∑ÁÆ±Ê®°Âºè Êú¨ÁØáÊñáÁ´†Â∞ÜÂØπËøô‰∏âÁßçÂΩ¢ÊÄÅÁöÑÂ∑•ÂéÇÊ®°ÂºèËøõË°å‰∏Ä‰∫õÂü∫Êú¨ÁöÑÂ≠¶‰π†ÔºåÂπ∂ÈÄöËøá‰æãÂ≠êÊù•Áõ¥ËßÇÁöÑÊÑüÂèó‰∏ã‰∏çÂêåÂΩ¢ÊÄÅÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊñπÂºè„ÄÇÊúÄÂêéÂÜçÂàÜÊûê‰∏ãJAVA‰ª•ÂèäSpring‰∏≠ÊòØÂ¶Ç‰Ωï‰ΩøÁî®ÁöÑ„ÄÇ 1„ÄÅÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÊ∂âÂèäÂà∞Â∑•ÂéÇËßíËâ≤„ÄÅÊäΩË±°‰∫ßÂìÅËßíËâ≤‰ª•ÂèäÂÖ∑‰Ωì‰∫ßÂìÅËßíËâ≤Á≠â‰∏â‰∏™ËßíËâ≤„ÄÇÂêÑËßíËâ≤ËÅåËÉΩÂ¶Ç‰∏ãÔºö Â∑•ÂéÇÁ±ªÔºöÊãÖ‰ªªËøô‰∏™ËßíËâ≤ÁöÑÊòØÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÁöÑÊ†∏ÂøÉÔºåÂê´Êúâ‰∏éÂ∫îÁî®Á¥ßÂØÜÁõ∏ÂÖ≥ÁöÑÂÖ∑‰Ωì‰∏öÂä°ÈÄªËæë„ÄÇÂ∑•ÂéÇÁ±ªÂú®ÂÆ¢Êà∑Á´ØÁöÑÁõ¥Êé•Ë∞ÉÁî®‰∏ãÂàõÂª∫‰∫ßÂìÅÂØπË±°ÔºåÂÆÉÂæÄÂæÄÁî±‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑjavaÁ±ªÂÆûÁé∞ ÊäΩË±°‰∫ßÂìÅÔºöÊãÖ‰ªªËøô‰∏™ËßíËâ≤ÁöÑÁ±ªÊòØÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÊâÄÂàõÂª∫ÁöÑÂØπË±°ÁöÑÁà∂Á±ªÔºåÊàñÂÆÉ‰ª¨ÂÖ±ÂêåÊã•ÊúâÁöÑÊé•Âè£„ÄÇÊäΩË±°‰∫ßÂìÅËßíËâ≤ÂèØ‰ª•Áî®‰∏Ä‰∏™javaÊé•Âè£ÊàñËÄÖÊäΩË±°Á±ªÊù•ÂÆûÁé∞ ÂÖ∑‰Ωì‰∫ßÂìÅÔºöÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÊâÄÂàõÂª∫ÁöÑ‰ªª‰ΩïÂØπË±°ÈÉΩÊòØËøô‰∏™ËßíËâ≤ÁöÑÂÆû‰æãÔºåÂÖ∑‰Ωì‰∫ßÂìÅËßíËâ≤Áî±‰∏Ä‰∏™javaÁ±ªÂÆûÁé∞ Êù•Áúã‰æãÂ≠êÔºåËÄÉËôëÂà∞‰ªäÂ§©ÊúâÂ∞è‰ºô‰º¥Êù•ÊàëËøôÂÅöÂÆ¢ÔºåÊú¨demoÂ∞Ü‰ª•ÂÅöËèúÊù•ÂÆûÁé∞‰∏ÄÊ≥¢„ÄÇÈ¶ñÂÖàÂ∑•ÂéÇÂ∞±ÊòØÂé®ÊàøÔºåÊäΩË±°Á±ªÂ∞±ÊòØÁ¨ºÁªüÁöÑËèúÔºåÂÆûÁé∞Á±ªÂ∞±ÊòØÂÖ∑‰ΩìÂì™‰∏™Ëèú„ÄÇ ÊäΩË±°‰∫ßÂìÅ 1234567891011121314package com.glmapper.design.factory;/** * ÊäΩË±°Á±ªËßíËâ≤ÔºöfoodÊé•Âè£ÔºåÁ∫¶ÊùüÁ±ªÂûã * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:38:36 * */public interface IFood &#123; /** * Êèê‰æõ‰∏Ä‰∏™Â±ïÁ§∫È£üÁâ©ÁªÜËäÇÁöÑÊñπÊ≥ï * @param foodName È£üÁâ©ÂêçÁß∞ */ public void showFood();&#125; ÂÖ∑‰Ωì‰∫ßÂìÅ-È±º 1234567891011121314package com.glmapper.design.factory;/** * ÂÖ∑‰Ωì‰∫ßÂìÅ-È£üÁâ©È±º * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:51:29 * */public class FishFood implements IFood&#123; @Override public void showFood() &#123; System.out.println(&quot;‰∏ÄÁõòÈ±º&quot;); &#125;&#125; ÂÖ∑‰Ωì‰∫ßÂìÅ-ÂúüË±Ü‰∏ù 123456789101112131415package com.glmapper.design.factory;/** * * ÂÖ∑‰ΩìÈ£üÁâ©ÔºöÂúüË±Ü‰∏ù * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:47:17 * */public class ShreddedPotatoesFood implements IFood&#123; @Override public void showFood() &#123; System.out.println(&quot;‰∏ÄÁõòÂúüË±Ü‰∏ù&quot;); &#125;&#125; Â∑•ÂéÇËßíËâ≤ - È£üÁâ©Â∑•ÂéÇ 12345678910111213141516171819202122232425package com.glmapper.design.factory;/** * Â∑•ÂéÇËßíËâ≤-È£üÁâ©Â∑•ÂéÇ * * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:41:10 * */public class SimpleFoodFactory &#123; /** * Êèê‰æõ‰∏Ä‰∏™ÈùôÊÄÅÊñπÊ≥ïÔºåÁî®‰∫éËé∑ÂèñÈ£üÁâ© * @param foodType È£üÁâ©Á±ªÂûã * @return ÂÖ∑‰ΩìÈ£üÁâ© */ public static IFood getFood(String foodType)&#123; IFood food = null; if (foodType.equals(&quot;fish&quot;)) &#123; food = new FishFood(); &#125; if (foodType.equals(&quot;potatoes&quot;)) &#123; food = new ShreddedPotatoesFood(); &#125; return food; &#125;&#125; ÂÆ¢Êà∑Á´Ø 12345678910111213141516package com.glmapper.design.factory;/** * ÂÆ¢Êà∑Á´Ø * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:45:17 * */public class MainTest &#123; public static void main(String[] args) &#123; IFood fishfood = SimpleFoodFactory.getFood(&quot;fish&quot;); fishfood.showFood(); IFood potatoesfood = SimpleFoodFactory.getFood(&quot;potatoes&quot;); potatoesfood.showFood(); &#125;&#125; ÁªìÊûú 12‰∏ÄÁõòÈ±º‰∏ÄÁõòÂúüË±Ü‰∏ù OKÔºåËèúÂÅöÂÆå‰∫ÜÔºåÂèØ‰ª•ÂêÉ‰∫Ü„ÄÇ„ÄÇ„ÄÇ Êàë‰ª¨Êù•ËÆ®ËÆ∫‰∏ãÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπÔºö ‰ºòÁÇπÔºöÊ®°ÂºèÁöÑÊ†∏ÂøÉÊòØÂ∑•ÂéÇÁ±ªÔºåËøô‰∏™Á±ªÂê´ÊúâÂøÖË¶ÅÁöÑÂà§Êñ≠ÈÄªËæëÔºåÂèØ‰ª•ÂÜ≥ÂÆöÂú®‰ªÄ‰πàÊó∂ÂÄôÂàõÂª∫Âì™‰∏Ä‰∏™‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æã„ÄÇËÄåÂÆ¢Êà∑Á´ØÂàôÂèØ‰ª•ÂÖçÈô§Áõ¥Êé•ÂàõÂª∫‰∫ßÂìÅÂØπË±°ÁöÑË¥£‰ªªÔºåËÄå‰ªÖ‰ªÖË¥üË¥£Ê∂àË¥π‰∫ßÂìÅÂç≥ÂèØ„ÄÇÁî®‰∏ÄÂè•ËØùÊù•ËØ¥Â∞±ÊòØÔºöÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèËøô‰∏™ÂÅöÊ≥ïÂÆûÁé∞‰∫ÜÂØπË¥£‰ªªÁöÑÂàÜÂâ≤„ÄÇÁº∫ÁÇπÔºöÈõÜ‰∏≠‰∫ÜÊâÄÊúâ‰∫ßÂìÅÁöÑÂàõÂª∫ÈÄªËæëÔºåÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™Êó†ÊâÄ‰∏çËÉΩÁöÑÂÖ®ËÅåÁ±ªÔºå‰ΩÜÊòØ‰πãÂâçÊàë‰ª¨Âú®ËÆ®ËÆ∫ËÆæËÆ°ÂéüÂàôÁöÑÊó∂ÂÄôËØ¥ËøáÔºåÊàë‰ª¨Ë¶ÅÂ∞ΩÈáèÈÅøÂÖçËøôÁßçÊÉÖÂÜµÁöÑÂèëÁîüÔºåËøôÁßçÂ∞±ÂæàÊòéÊòæÁ†¥Âùè‰∫ÜÂçï‰∏ÄËÅåË¥£ËøôÊù°ÂéüÂàôÔºåÂè¶Â§ñ‰πü‰∏çÊª°Ë∂≥ÂºÄÈó≠ÂéüÂàôÁöÑÁ∫¶Êùü„ÄÇÂΩìÊàë‰ª¨ÈúÄË¶ÅËøõË°åÂìÅÁ±ªÊâ©Â±ïÊó∂ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏çÊñ≠ÁöÑÂéª‰øÆÊîπÊàë‰ª¨ÁöÑÂ∑•ÂéÇÁöÑ‰∏öÂä°ÈÄªËæëÔºå‰∏ÄÊñπÈù¢ÊòØÂ∑•ÂéÇÁ±ª‰ºöÊÄ•ÈÄüÁöÑËÜ®ËÉÄÔºåÂè¶‰∏ÄÊñπÈù¢Âõ†‰∏∫ÂõäÊã¨‰∫Ü‰∏çÂêåÁöÑ‰∫ßÂìÅÂØπ‰∫éÊàë‰ª¨ÂêéÊúüÁöÑÁª¥Êä§ÈÄ†Êàê‰∏ÄÂÆöÁöÑÂΩ±Âìç„ÄÇ 2„ÄÅÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèËøô‰∏™Êó∂ÂÄô‰∏Ä‰∏™Âêå‰∫ãËØ¥‰ªñÊòØÂçóÊñπ‰∫∫ÔºåÂè¶Â§ñ‰∏Ä‰∏™Âêå‰∫ãËØ¥‰ªñÊòØÂåóÊñπ‰∫∫ÔºåÂêÉ‰∏çÊÉØ‰ªäÂ§©ÁöÑËèú„ÄÇ Â•ΩÂêßÔºåÊó¢ÁÑ∂ËøôÊ†∑ÔºåÈÇ£ÊàëÂ∞±Âè™ËÉΩÁÇπÂ§ñÂçñ‰∫Ü„ÄÇ„ÄÇ„ÄÇ‰ΩÜÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢‰ªñ‰ª¨ÂèòÂç¶Ëá™Â∑±ÁöÑÂÆ∂‰π°ÔºåÊàëÈúÄË¶ÅÂÅö‰∏Ä‰∏™ËÆ°ÂàíÔºå‰∏ãÈù¢Â∞±ÊòØËÆ°ÂàíÂõæÔºö ‰ªé‰∏äÂõæ‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÁöÑËßíËâ≤ÂåÖÊã¨‰ª•‰∏ãÂá†ÁßçÔºö ÊäΩË±°Â∑•ÂéÇÔºöÊòØÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÁöÑÊ†∏ÂøÉÔºå‰∏éÂ∫îÁî®Á®ãÂ∫èÊó†ÂÖ≥„ÄÇ‰ªª‰ΩïÂú®Ê®°Âºè‰∏≠ÂàõÂª∫ÁöÑÂØπË±°ÁöÑÂ∑•ÂéÇÁ±ªÂøÖÈ°ªÂÆûÁé∞Ëøô‰∏™Êé•Âè£„ÄÇ ÂÖ∑‰ΩìÂ∑•ÂéÇÔºöËøôÊòØÂÆûÁé∞ÊäΩË±°Â∑•ÂéÇÊé•Âè£ÁöÑÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºåÂåÖÂê´‰∏éÂ∫îÁî®Á®ãÂ∫èÂØÜÂàáÁõ∏ÂÖ≥ÁöÑÈÄªËæëÔºåÂπ∂‰∏îÂèóÂà∞Â∫îÁî®Á®ãÂ∫èË∞ÉÁî®‰ª•ÂàõÂª∫‰∫ßÂìÅÂØπË±°„ÄÇ ÊäΩË±°‰∫ßÂìÅÔºöÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÊâÄÂàõÂª∫ÁöÑÂØπË±°ÁöÑË∂ÖÁ±ªÂûãÔºå‰πüÂ∞±ÊòØ‰∫ßÂìÅÂØπË±°ÁöÑÂÖ±ÂêåÁà∂Á±ªÊàñÂÖ±ÂêåÊã•ÊúâÁöÑÊé•Âè£ ÂÖ∑‰Ωì‰∫ßÂìÅÔºöËøô‰∏™ËßíËâ≤ÂÆûÁé∞‰∫ÜÊäΩË±°‰∫ßÂìÅËßíËâ≤ÊâÄÂÆö‰πâÁöÑÊé•Âè£„ÄÇÊüêÂÖ∑‰Ωì‰∫ßÂìÅÊúâ‰∏ìÈó®ÁöÑÂÖ∑‰ΩìÂ∑•ÂéÇÂàõÂª∫ÔºåÂÆÉ‰ª¨‰πãÈó¥ÂæÄÂæÄ‰∏Ä‰∏ÄÂØπÂ∫î„ÄÇ Âõ†‰∏∫ÊàëÁöÑÂêå‰∫ãÈÉΩÊòØÊù•Ëá™‰∏çÂêåÂú∞ÊñπÁöÑÔºå‰ªñ‰ª¨ÁöÑÂè£Âë≥‰πüÈÉΩ‰∏ç‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÂë¢Âêå‰∫ãÈÉΩÊòØÁ¨¨‰∏ÄÊ¨°Êù•ÊàëÂÆ∂ÂêÉÈ•≠ÔºåÊâÄ‰ª•‰∏∫‰∫ÜÊãõÂæÖÂë®ÂÖ®ÔºåÊ†πÊçÆÂêå‰∫ã‰∏çÂêåÁöÑÂè£Âë≥Âè´‰∏çÂêåÂè£Âë≥ÁöÑÈ±º„ÄÇ ÊäΩË±°Â∑•ÂéÇËßíËâ≤ÔºöËé∑ÂèñÈ£üÁâ© 1234567891011package com.glmapper.design.factory;/** * * ËßíËâ≤1ÔºöÊäΩË±°Â∑•ÂéÇ - Ë¥üË¥£Ëé∑ÂèñÈ£üÁâ© * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏ãÂçà1:59:28 */public interface MethodFoodFactory &#123; //Ëé∑ÂèñÈ£üÁâ©ÁöÑÊñπÊ≥ï public IFishFood getFood();&#125; ÂÖ∑‰ΩìÂ∑•ÂéÇ1ÔºöËé∑ÂèñÂçóÊñπÈ£üÁâ©-È±º 123456789101112package com.glmapper.design.factory;/** * ÂçóÊñπÂè£Âë≥Â§ñÂçñ - È±º * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏ãÂçà2:03:36 */public class SouthFishFactory implements MethodFoodFactory&#123; @Override public IFishFood getFood() &#123; return new SouthFishFood(); &#125;&#125; ÂÖ∑‰ΩìÂ∑•ÂéÇ2ÔºöËé∑ÂèñÂåóÊñπÈ£üÁâ©-È±º 1234567891011121314package com.glmapper.design.factory;/** * ÂåóÊñπÂè£Âë≥Â§ñÂçñ - È±º * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏ãÂçà2:03:36 */public class NorthFishFactory implements MethodFoodFactory&#123; @Override public IFishFood getFood() &#123; // TODO Auto-generated method stub return new NorthFishFood(); &#125;&#125; ÂÖ∑‰Ωì‰∫ßÂìÅ1ÔºöÂçóÊñπÈ£üÁâ©- È±º 123456789101112package com.glmapper.design.factory;/** * ÂçóÊñπÂè£Âë≥-È±º * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏ãÂçà2:16:17 */public class SouthFishFood implements IFishFood&#123; @Override public void showFood() &#123; System.out.println(&quot;Êù•Ëá™ÂçóÊñπÂé®Â∏àÂÅöÁöÑÈ±º&quot;); &#125;&#125; ÂÖ∑‰Ωì‰∫ßÂìÅ2ÔºöÂåóÊñπÈ£üÁâ©-È±º 123456789101112package com.glmapper.design.factory;/** * ÂåóÊñπÂè£Âë≥ - È±º * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏ãÂçà2:12:55 */public class NorthFishFood implements IFishFood &#123; @Override public void showFood() &#123; System.out.println(&quot;Êù•Ëá™ÂåóÊñπÂé®Â∏àÂÅöÁöÑÈ±º&quot;); &#125;&#125; ÂÆ¢Êà∑Á´Ø 123456789101112131415161718package com.glmapper.design.factory;/** * ÂÆ¢Êà∑Á´Ø * @author glmapper * @date 2017Âπ¥12Êúà24Êó•‰∏äÂçà10:45:17 */public class MainTest &#123; public static void main(String[] args) &#123; //ÁÇπ‰∏Ä‰∏™ÂçóÊñπÂè£Âë≥Â§ñÂçñ MethodFoodFactory southFoodFactory = new SouthFishFactory(); //ÁÇπ‰∏Ä‰∏™ÂåóÊñπÂè£Âë≥Â§ñÂçñ MethodFoodFactory northFoodFactory = new NorthFishFactory(); //ÊãøÂà∞ÂçóÊñπÂè£Âë≥Â§ñÂçñÈ±º southFoodFactory.getFood().showFood(); //ÊãøÂà∞ÂåóÊñπÂè£Âë≥Â§ñÂçñÈ±º northFoodFactory.getFood().showFood(); &#125;&#125; ÁªìÊûúÔºö12Êù•Ëá™ÂçóÊñπÂé®Â∏àÂÅöÁöÑÈ±ºÊù•Ëá™ÂåóÊñπÂé®Â∏àÂÅöÁöÑÈ±º OKÔºåËøôÊ†∑Êàë‰ª¨Â∞±Êª°Ë∂≥‰∫Ü‰∏çÂêåÂå∫ÂüüÂêåÊó∂ÂÖ≥‰∫éÈ±ºÂè£Âë≥ÁöÑÈúÄÊ±Ç‰∫ÜÔºå‰ª•ÂêéÂçáÂÄºÂä†Ëñ™Â∞±ÊåáÊúõ‰ªñ‰ª¨‰∫Ü„ÄÇ„ÄÇ„ÄÇ ÂÖ≥‰∫éÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπÔºö ‰ºòÁÇπÔºö1„ÄÅ Âú®Â∑•ÂéÇÊñπÊ≥ï‰∏≠ÔºåÁî®Êà∑Âè™ÈúÄË¶ÅÁü•ÈÅìÊâÄË¶Å‰∫ßÂìÅÁöÑÂÖ∑‰ΩìÂ∑•ÂéÇÔºåÊó†È°ªÂÖ≥Á≥ªÂÖ∑‰ΩìÁöÑÂàõÂª∫ËøáÁ®ãÔºåÁîöËá≥‰∏çÈúÄË¶ÅÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÁ±ªÂêç„ÄÇ2„ÄÅ Âú®Á≥ªÁªüÂ¢ûÂä†Êñ∞ÁöÑ‰∫ßÂìÅÊó∂ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÂíåÂØπÂ∫îÁöÑÂÆûÁé∞Â∑•ÂéÇÔºåÊó†ÈúÄÂØπÂéüÂ∑•ÂéÇËøõË°å‰ªª‰Ωï‰øÆÊîπÔºåÂæàÂ•ΩÂú∞Á¨¶Âêà‰∫Ü‚ÄúÂºÄÈó≠ÂéüÂàô‚ÄùÁº∫ÁÇπÔºöÊØèÊ¨°Â¢ûÂä†‰∏Ä‰∏™‰∫ßÂìÅÊó∂ÔºåÈÉΩÈúÄË¶ÅÂ¢ûÂä†‰∏Ä‰∏™ÂÖ∑‰ΩìÁ±ªÂíåÂØπË±°ÂÆûÁé∞Â∑•ÂéÇÔºåÊòØÁöÑÁ≥ªÁªü‰∏≠Á±ªÁöÑ‰∏™Êï∞ÊàêÂÄçÂ¢ûÂä†ÔºåÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶ÔºåÂêåÊó∂‰πüÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÂÖ∑‰ΩìÁ±ªÁöÑ‰æùËµñ„ÄÇËøôÂπ∂‰∏çÊòØ‰ªÄ‰πàÂ•Ω‰∫ã„ÄÇ 3„ÄÅÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÂáÜÂ§áÂêÉÈ•≠ÁöÑÊó∂ÂÄôÁ™ÅÁÑ∂ÂèàÊù•‰∫ÜÂá†‰ΩçÂêå‰∫ãÔºåËÄå‰∏î‰ªñ‰ª¨ÊúâÁöÑÂñúÊ¨¢ÂêÉÈÖ∏ËèúÈ±ºÔºåÊúâÁöÑÂñúÊ¨¢ÂêÉÁ∫¢ÁÉßÈ±ºÔºåËøôÂ∞±ÂæàÂ§¥Áñº„ÄÇ‰∫éÊòØÔºåÂè™ËÉΩÊ†πÊçÆ‰ªñ‰ª¨ÁöÑÈúÄË¶ÅÁªßÁª≠ÁÇπÂ§ñÂçñ„ÄÇÔºàËøô‰∏™Â∞±ÁªôÂá∫‰∏Ä‰∏™ÁªìÊûÑÂõæÔºåÂπ∂‰∏îÂ∞ÜÊØèÁßçËßíËâ≤ÈÉΩÁî®ÂÖ∑‰ΩìÁöÑÂú∫ÊôØÊù•ËØ¥Êòé‰∫ÜÔºåÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÂèØ‰ª•ÂèÇËÄÉËøô‰∏™Âõæ‰æãËá™Â∑±Â∞ùËØï‰∏Ä‰∏ã„ÄÇÔºâ OKÔºåÁªà‰∫éÂèØ‰ª•ÂêÉÈ•≠‰∫ÜÔºÅ 4„ÄÅ‰∏âÁßçÂΩ¢ÊÄÅÁöÑÂ∑•ÂéÇÊ®°ÂºèÂú®java‰∏≠ÁöÑ‰ΩøÁî®4.1„ÄÅÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÂú®java‰∏≠ÁöÑ‰ΩøÁî®java.text.DateFormat Ôºà‰∏Ä‰∏™ÊäΩË±°Á±ªÔºâËøô‰∏™Á±ªÁõ∏‰ø°ÂæàÂ§öÂ∞è‰ºô‰º¥ÈÉΩÁî®Âà∞ËøáÔºåÂú®java API‰∏≠ÔºåËøô‰∏™Á±ªÁÆóÊòØ‰∏Ä‰∏™ÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÁöÑÂÖ∏ÂûãÂ∫îÁî®‰∫ÜÔºàÊ≠§Â§ÑËøòÊòØ‰∏é‰∏äÁØá‰∏ÄÊ†∑Ôºå‰∏çËÄÉËôëÊúüÊ∫êÁ†ÅÁªÜËäÇÔºå‰πü‰∏ç‰ªãÁªçÂü∫Êú¨Áî®Ê≥ïÔºâ„ÄÇÊù•ÁúãÂÆÉÁöÑÂá†‰∏™ÊñπÊ≥ïÔºö public final static DateFormat getDateInstance() public final static DateFormat getDateInstance(int style) public final static DateFormat getDateInstance(int style, Locale aLocale) ‰Ωú‰∏∫‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÂç¥Êèê‰æõ‰∫ÜÂæàÂ§öÁöÑÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÔºåÂ∞±ÂÉè‰∏äÈù¢Âàó‰∏æÁöÑÈÇ£‰∏â‰∏™‰∏ÄÊ†∑„ÄÇÊúâÂ∞è‰ºô‰º¥ÂèØËÉΩ‰ºöÁñëÊÉëÔºå‰∏∫Âï•Â≠ê‰∏Ä‰∏™ÊäΩË±°Á±ªÈòî‰ª•ÊúâËá™Â∑±ÁöÑÂÆû‰æãÔºåÂπ∂ÈÄöËøáÂá†‰∏™ÊñπÊ≥ïÊèê‰æõËá™Â∑±ÁöÑÂÆû‰æã„ÄÇÊàë‰ª¨Áü•ÈÅìÔºåÊäΩË±°Á±ªÊòØ‰∏çÂèØ‰ª•ÊúâËá™Â∑±ÁöÑÂÆû‰æãÂØπË±°ÁöÑÔºå‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåDateFormatÁöÑÂ∑•ÂéÇÊñπÊ≥ïÊòØÈùôÊÄÅÁöÑÔºåÂπ∂‰∏çÊòØÊôÆÈÄöÁöÑÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‰∏çÈúÄË¶ÅÈÄöËøáÂàõÂª∫ÂÆû‰æãÂØπË±°ÁöÑÊñπÂºèÂéªË∞ÉÁî®„ÄÇ 1234public final static DateFormat getDateInstance()&#123; return get(0, DEFAULT, 2, Locale.getDefault(Locale.Category.FORMAT));&#125; getDateInstanceÊñπÊ≥ïÂπ∂Ê≤°ÊúâÈÄöËøáË∞ÉÁî®DateFormatÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊù•ÂàõÂª∫ÂØπË±°„ÄÇ 4.2„ÄÅÂ∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÂú®java‰∏≠ÁöÑÂ∫îÁî®java.net.URLÁ±ªÔºåÁ±ªÂõæÂ¶Ç‰∏ãÔºåURLÂØπË±°ÈÄöËøá‰∏Ä‰∏™Â∑•ÂéÇÊñπÊ≥ïopenConnection()ËøîÂõû‰∏Ä‰∏™URLConnectionÁ±ªÂûãÁöÑÂØπË±°„ÄÇURLConnectionÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÂõ†Ê≠§ÊâÄËøîËøòÁöÑ‰∏çÂèØËÉΩÊòØËøô‰∏™ÊäΩË±°Á±ªÁöÑÂÆû‰æãÔºåËÄåÂøÖÁÑ∂ÊòØÂÖ∂ÂÖ∑‰ΩìÂ≠êÁ±ªÁöÑÂÆû‰æã„ÄÇ 4.3„ÄÅÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÂú®java‰∏≠ÁöÑÂ∫îÁî®Ê†πÊçÆjava‰∏éÊ®°Âºè‰∏Ä‰π¶ÁöÑ‰ªãÁªçÔºåÂú®java‰∏≠‰ΩøÁî®ÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÁöÑÊòØ JAVA awtÁöÑpeerÊû∂ÊûÑÔºåÈÄöËøáÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÊù•ÊûÑÂª∫ÂàÜÂ±û‰∫é‰∏çÂêåÊìç‰ΩúÁ≥ªÁªüÁöÑpeerÊûÑ‰ª∂„ÄÇËøô‰∏™Êàë‰πüÊ≤°Áî®ËøáÔºå‰∫ÜËß£Âç≥ÂèØ„ÄÇ ÂÖ≥‰∫éSpring‰∏≠Â∑•ÂéÇÊ®°ÂºèÁöÑ‰ΩøÁî®‰ºöÂú®ÂêéÁª≠SpringÊ∫êÁ†ÅÂàÜÊûêÁ≥ªÂàó‰∏≠ÁªôÂ§ßÂÆ∂ËØ¶ÁªÜÂàÜÊûêÔºåËøôÈáåÂ∞±‰∏çÈáçÂ§ç‰∫Ü„ÄÇ ‰ªäÂ§©ÁöÑÂ≠¶‰π†Â∞±Âà∞Ê≠§ÁªìÊùü‰∫ÜÔºåÁ•ùÂ§ßÂÆ∂Âë®Êú´ÊÑâÂø´„ÄÇËØùËØ¥‰ªäÂ§©Âπ≥ÂÆâÂ§úÔºåÂ§ßÂÆ∂ÈÉΩÊòØÂú®ÂÆ∂ÂÜô‰ª£Á†ÅÂêóÔºü Â¶ÇÊûúÊÇ®ÂØπÁ≥ªÂàóÊñáÁ´†Êúâ‰ªª‰ΩïÊÑèËßÅÔºåÂèØ‰ª•ÁªôÊàëÁïôË®ÄÔºåÊÑüË∞¢Â§ßÂÆ∂„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Âçï‰æãÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-design-model-singleton%2F</url>
    <content type="text"><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑÂõõÂ§ßÂü∫Á°ÄÁâπÊÄßËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â§öÊÄÅ„ÄÅÊé•Âè£ÂíåÊäΩË±°Á±ªËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑ6ÁßçËÆæËÆ°ÂéüÂàô ÂâçÈù¢Â∑≤ÁªèÂ∞ÜËÆæËÆ°Ê®°Âºè‰∏≠ÁöÑÂü∫Êú¨ÂÜÖÂÆπÊí∏‰∫Ü‰∏Ä‰∏ãÔºå‰ªäÂ§©ÂºÄÂßãÊ≠£ÂºèÂºÄÂßãËÆæËÆ°Ê®°ÂºèÁ≥ªÂàóÁöÑÂÜÖÂÆπÔºåÂõ†‰∏∫ÁΩë‰∏ä‰πüÊúâÂæàÂ§öÂÖ≥‰∫éËÆæËÆ°Ê®°ÂºèÁöÑÊäÄÊúØÂçöÂÆ¢Ôºå‰ªé‰∏çÂêåÁöÑËßíÂ∫¶ÂØπËÆæËÆ°Ê®°ÂºèÈÉΩÂÅö‰∫ÜÂæàËØ¶ÁªÜÁöÑËß£ËØªÔºõÊú¨Á≥ªÂàóÁöÑÊ®°ÂºèÈô§‰∫ÜÂü∫Êú¨ÁöÑÊ¶ÇÂøµÂíåÊ®°Âûã‰πãÂ§ñÔºåËøò‰ºöÁªìÂêàjavaËá™Ë∫´‰ΩøÁî®ÁöÑÂíåSpring‰∏≠‰ΩøÁî®ÁöÑ‰∏Ä‰∫õÊ°à‰æãÊù•ËøõË°åÂ≠¶‰π†ÂàÜÊûê„ÄÇÊ∞¥Âπ≥ÊúâÈôêÔºåÂ¶ÇÊûúÂ≠òÂú®‰∏çÂΩì‰πãÂ§ÑÔºåÂ∏åÊúõÂ§ßÂÆ∂Â§öÊèêÊÑèËßÅÔºåÁÅ∞Â∏∏ÊÑüË∞¢ÔºÅËÆæËÆ°Ê®°Âºè‰∏≠ÊÄª‰ΩìÂàÜ‰∏∫‰∏âÁ±ª:‰∏Ä„ÄÅÂàõÂª∫Âûã(5)Ôºö Â∑•ÂéÇÊñπÊ≥ï[Factory Method] ÊäΩË±°Â∑•ÂéÇ[Abstract Factory] ÂéüÂûã[Prototype] Âª∫ÈÄ†ËÄÖ[Builder] Âçï‰æã[Singleton] ËøòÊúâ‰∏Ä‰∏™ÁÆÄÂçïÂ∑•ÂéÇ[Simple Factory]ÔºåÁõÆÂâçÊúâ‰∏§ÁßçÔºåÊúâÁöÑÊääÂçï‰æãÊ®°Âºè‰Ωú‰∏∫Ëøô5Áßç‰πã‰∏ÄÔºåÊúâÁöÑÊòØÂ∞ÜÁÆÄÂçïÂ∑•ÂéÇ‰Ωú‰∏∫Ëøô5Áßç‰πã‰∏Ä„ÄÇËøôÈáå‰∏çÂÅöËÆ®ËÆ∫ÔºåÂéüÂàô‰∏ä‰∏§‰∏™ÈÉΩÊòØÔºåÂè™ÊòØÂàíÂàÜËßÑÂàô‰∏çÂêå„ÄÇ ‰∫å„ÄÅÁªìÊûÑÂûã(7) ÈÄÇÈÖçÂô®[Adapter] Ê°•Êé•[Bridge] ÁªÑÂêà[Composite] Ë£ÖÈ•∞[Decorator] Â§ñËßÇ[Facade] ‰∫´ÂÖÉ[Flyweight] ‰ª£ÁêÜ[Proxy] ‰∏â„ÄÅË°å‰∏∫Âûã(11) Á≠ñÁï•[Strategy] Ê®°ÊùøÊñπÊ≥ï[Template method] ËÅåË¥£Èìæ[Chain of Responsibility] Ëø≠‰ª£Âô®[Iterator] Áä∂ÊÄÅ[State] ËÆøÈóÆËÄÖ[Visitor] ÂëΩ‰ª§[Command] Â§áÂøòÂΩï[Memento] ËßÇÂØüËÄÖ[Observer] ‰∏≠‰ªãËÄÖ[Mediator] Ëß£ÈáäÂô®[Interpreter] Âçï‰æãÊ®°ÂºèÈ¶ñÂÖàÂÆÉÊòØ‰∏ÄÁßçÂàõÂª∫ÂûãÊ®°ÂºèÔºå‰∏éÂÖ∂‰ªñÊ®°ÂºèÂå∫Âà´Âú®‰∫éÔºöÂçï‰æãÊ®°ÂºèÁ°Æ‰øùË¢´ÂàõÂª∫ÁöÑÁ±ªÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÂØπË±°ÔºåËÄå‰∏îËá™Ë°åÂÆû‰æãÂåñÂπ∂ÂêëÊï¥‰∏™Á≥ªÁªüÊèê‰æõËøô‰∏™ÂÆû‰æã„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊàë‰ª¨Áß∞ÂΩìÂâçËøô‰∏™Á±ª‰∏∫Âçï‰æãÁ±ª„ÄÇ ‰ªé‰∏äÈù¢ËøôÊÆµËØù‰∏≠Êàë‰ª¨ÂèØ‰ª•‰∫ÜËß£Âà∞ÔºåÂçï‰æãÊ®°ÂºèÂÖ∑Â§á‰ª•‰∏ã‰∏â‰∏™Ë¶ÅÁÇπÔºö Êüê‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™ÂÆû‰æã ÂøÖÈ°ªËá™Ë°åÂàõÂª∫Ëøô‰∏™ÂÆû‰æã[ÂÖ∑‰ΩìÁöÑÂØπË±°ÂàõÂª∫Áî±Á±ªÊú¨Ë∫´Ë¥üË¥£ÔºåÂÖ∂‰ªñÁ±ª‰∏çË¥üË¥£ÂΩìÂâçÁ±ªÁöÑÂàõÂª∫] ÂøÖÈ°ªÂêëÊï¥‰∏™Á≥ªÁªüÊèê‰æõËøô‰∏™ÂÆû‰æã[‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÂâçÁ±ªÈúÄË¶ÅÂØπÂ§ñÊèê‰æõ‰∏Ä‰∏™Ëé∑ÂèñÂΩìÂâçÂÆû‰æãÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºå‰∏îËØ•ÊñπÊ≥ï‰∏çËÉΩÊòØÁßÅÊúâÁöÑ] OKÔºåÊù•ÁúãÂçï‰æãÊ®°ÂºèÁöÑÂá†ÁßçÂÆûÁé∞ÊñπÂºè„ÄÇ ÊñπÂºè‰∏ÄÔºöÈ•øÊ±âÂºè123456789101112131415161718192021222324252627package com.glmapper.design.singleton;/** * Âçï‰æãÊ®°Âºè-È•øÊ±âÂºè * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà10:30:38 */public class EagerSingleton &#123; /** * ÂÜÖÈÉ®Áõ¥Êé•Êèê‰æõ‰∏Ä‰∏™eagerSingletonInstanceÔºõ * Êàë‰ª¨Áü•ÈÅìÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÂèòÈáèË¢´static final‰øÆÈ•∞‰∫ÜÔºåÈÇ£‰πàËØ•ÂèòÈáèÂ∞Ü‰ºöË¢´ËßÜ‰∏∫Â∏∏Èáè„ÄÇ * Êª°Ë∂≥Ë¶ÅÁÇπÔºöËá™Ë°åÂàõÂª∫ */ private static final EagerSingleton eagerSingletonInstance = new EagerSingleton(); /** * Êèê‰æõ‰∏Ä‰∏™ÁßÅÊúâÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåËøôÊ†∑ÂÖ∂‰ªñÁ±ªÂ∞±Êó†Ê≥ïÈÄöËøánew * EagerSingleton()Êù•Ëé∑ÂèñÂØπË±°‰∫ÜÔºåÂêåÊ†∑‰πü‰øùËØÅ‰∫ÜÂΩìÂâçÁ±ª‰∏çÂèØ‰ª•Ë¢´ÁªßÊâø * Êª°Ë∂≥Ë¶ÅÁÇπÔºöÊüê‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™ÂÆû‰æã */ private EagerSingleton()&#123;&#125; /** * ÂØπÂ§ñÊèê‰æõ‰∏Ä‰∏™Ëé∑ÂèñÂÆû‰æãÁöÑÊñπÊ≥ï * Êª°Ë∂≥Ë¶ÅÁÇπÔºöÂêëÊï¥‰∏™Á≥ªÁªüÊèê‰æõËøô‰∏™ÂÆû‰æã */ public static EagerSingleton getInstance()&#123; return eagerSingletonInstance; &#125;&#125; ÊñπÂºè‰∫åÔºöÊáíÊ±âÂºè 1234567891011121314151617181920212223package com.glmapper.design.singleton;/** * Âçï‰æãÊ®°Âºè-ÊáíÊ±âÂºè * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà10:45:54 */public class LazySingleton &#123; //Êèê‰æõ‰∏Ä‰∏™ÁßÅÊúâÈùôÊÄÅÂèòÈáèÔºåÊ≥®ÊÑèÂå∫Âà´‰∏éÈ•øÊ±âÂºè‰∏≠ÁöÑstatic final„ÄÇ private static LazySingleton lazySingletonInstance = null ; //ÂêåÊ†∑ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™ÁßÅÊúâÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºåÂÖ∂‰ΩúÁî®‰∏éÈ•øÊ±âÂºè‰∏≠ÁöÑ‰ΩúÁî®‰∏ÄÊ†∑ private LazySingleton()&#123;&#125; /** * 1.‰ΩøÁî®synchronizedÊù•‰øùËØÅÁ∫øÁ®ãÂêåÊ≠• * 2.ÂÆû‰æãÁöÑÂÖ∑‰ΩìÂàõÂª∫Ë¢´Âª∂ËøüÂà∞Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®getInstanceÊñπÊ≥ïÊó∂Êù•ËøõË°å * 3.Â¶ÇÊûúÂΩìÂâçÂÆû‰æãÂ∑≤ÁªèÂ≠òÂú®Ôºå‰∏çÂÜçÈáçÂ§çÂàõÂª∫ */ public synchronized static LazySingleton getInstance()&#123; if (lazySingletonInstance == null) &#123; lazySingletonInstance = new LazySingleton(); &#125; return lazySingletonInstance; &#125;&#125; È•øÊ±âÂºèÂçï‰æãÁ±ªÂú®Ëá™Â∑±Ë¢´Âä†ËΩΩÊó∂Â∞±Ëá™Â∑±ÂÆû‰æãÂåñ‰∫ÜÔºåÂç≥‰æøÂä†ËΩΩÂô®ÊòØÈùôÊÄÅÁöÑÔºåÂú®È•øÊ±âÂºèÂçï‰æãÁ±ªË¢´Âä†ËΩΩÊó∂‰ªç‰ºöÂ∞ÜËá™Â∑±ÂÆû‰æãÂåñ„ÄÇ‰ªéËµÑÊ∫êÂà©Áî®ËßíÂ∫¶Êù•ËØ¥ÔºåËøô‰∏™ÊØîÊáíÊ±âÂºèÂçï‰æãÁ±ªÁ®çÂæÆÁöÑÂ∑Æ‰∏Ä‰∫õ„ÄÇÂ¶ÇÊûú‰ªéÈÄüÂ∫¶ÂíåÂìçÂ∫îÊó∂Èó¥Êù•ÁúãÔºåÈ•øÊ±âÂºèÂ∞±‰ºöÊØîÊáíÊ±âÂºèÂ•Ω‰∏Ä‰∫õ„ÄÇÊáíÊ±âÂºèÂú®Âçï‰æãÁ±ªËøõË°åÂÆû‰æãÂåñÊó∂ÔºåÂøÖÈ°ªÂ§ÑÁêÜÂ•ΩÂú®Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂È¶ñÊ¨°ÂºïÁî®Ê≠§Á±ªÊó∂ÁöÑËÆøÈóÆÈôêÂà∂ÈóÆÈ¢ò„ÄÇ ÊñπÂºè‰∏âÔºöÁôªËÆ∞Âºè 123456789101112131415161718192021222324252627282930313233343536373839package com.glmapper.design.singleton;import java.util.HashMap;/** * Âçï‰æãÊ®°Âºè-ÁôªËÆ∞Âºè * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà10:58:36 */public class RegisterSingleton &#123; //Êèê‰æõ‰∏Ä‰∏™ÁßÅÊúâÁöÑHashMapÁ±ªÂûãÁöÑregisterSingletonInstanceÂ≠òÂÇ®ËØ•RegisterSingletonÁ±ªÂûãÁöÑÂçï‰æã private static HashMap&lt;String,Object&gt; registerSingletonInstance = new HashMap&lt;&gt;(); //ÈÄöËøástaticÈùôÊÄÅ‰ª£Á†ÅÂùóÊù•ËøõË°åÂàùÂßãÂåñRegisterSingletonÂΩìÂâçÁ±ªÁöÑÂÆû‰æãÔºåÂπ∂Â∞ÜÂΩìÂâçÂÆû‰æãÂ≠òÂÖ•registerSingletonInstance static &#123; RegisterSingleton singleton = new RegisterSingleton(); registerSingletonInstance.put(singleton.getClass().getName(), singleton); &#125; /** * Ê≥®ÊÑèÂå∫Âà´ÔºåÊ≠§Â§ÑÊèê‰æõÁöÑÊòØÈùûprivateÁ±ªÂûãÁöÑÔºåËØ¥ÊòéÂΩìÂâçÁ±ªÂèØ‰ª•Ë¢´ÁªßÊâø */ protected RegisterSingleton()&#123;&#125; /** * Ëé∑ÂèñÂÆû‰æãÁöÑÊñπÊ≥ï */ public static RegisterSingleton getInstance(String name)&#123; //Â¶ÇÊûúname‰∏∫Á©∫ÔºåÂàôÈÇ£‰πàÈªòËÆ§‰∏∫ÂΩìÂâçÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç if (name == null) &#123; name =&quot;com.glmapper.design.singleton.RegisterSingleton&quot;; &#125; //Â¶ÇÊûúmap‰∏≠Ê≤°ÊúâÊü•ËØ¢Âà∞ÊåáÂÆöÁöÑÂçï‰æãÔºåÂàôÂ∞ÜÈÄöËøáClass.forName(name)Êù•ÂàõÂª∫‰∏Ä‰∏™ÂÆû‰æãÂØπË±°ÔºåÂπ∂Â≠òÂÖ•map‰∏≠ if (registerSingletonInstance.get(name)==null) &#123; try &#123; registerSingletonInstance.put(name, Class.forName(name).newInstance()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; //ËøîÂõûÂÆû‰æã return (RegisterSingleton) registerSingletonInstance.get(name); &#125;&#125; ÁôªËÆ∞ÂºèÂçï‰æãÊòØGof‰∏∫‰∫ÜÂÖãÊúçÈ•øÊ±âÂºèÂíåÊáíÊ±âÂºèÂçï‰æãÁ±ªÂùá‰∏çÂèØË¢´ÁªßÊâøÁöÑÁº∫ÁÇπËÄåËÆæËÆ°ÁöÑ„ÄÇ 12345678910111213141516171819202122232425262728package com.glmapper.design.singleton;/** * ÁôªËÆ∞Âºè-Âçï‰æã-Â≠êÁ±ª * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà11:14:03 * */public class ChildRegisterSingleton extends RegisterSingleton&#123; /** * Áî±‰∫éÂ≠êÁ±ªÂøÖÈ°ªÂÖÅËÆ∏Áà∂Á±ª‰ª•ÊûÑÈÄ†ÊñπÊ≥ïË∞ÉÁî®‰∫ßÁîüÂÆû‰æãÔºåÂõ†Ê≠§ÔºåÂ≠êÁ±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂøÖÈ°ª * ÊòØpublicÁ±ªÂûãÁöÑ„ÄÇ‰ΩÜÊòØËøôÊ†∑‰∏ÄÊù•ÔºåÂ∞±Á≠â‰∫éËØ¥ÂèØ‰ª•ÂÖÅËÆ∏‰ª•new * ChildRegisterSingleton()ÁöÑÊñπÂºè‰∫ßÁîüÂÆû‰æãÔºåËÄå‰∏çÂøÖÂú®Áà∂Á±ªÁöÑÁôªËÆ∞‰∏≠„ÄÇ */ public ChildRegisterSingleton()&#123;&#125; //ÂÆ¢Êà∑Á´ØÊµãËØïËé∑ÂèñÂÆû‰æã public static void main(String[] args) &#123; ChildRegisterSingleton crs1 = (ChildRegisterSingleton) getInstance( &quot;com.glmapper.design.singleton.ChildRegisterSingleton&quot;); ChildRegisterSingleton crs2 = (ChildRegisterSingleton) getInstance( &quot;com.glmapper.design.singleton.ChildRegisterSingleton&quot;); System.out.println(crs1 == crs2); &#125;&#125;ËøîÂõûÔºötrue Ëøô‰∏™ÂêåÂøó‰ª¨ÂèØ‰ª•Ëá™Ë°åÈ™åËØÅÔºåËÇØÂÆöÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ‰ΩÜÊòØ‰∏çËÉΩ‰ΩøÁî®newÔºåÂõ†‰∏∫ÂâçÊèêÁ∫¶ÊùüÊòØÔºåÈúÄÂú®Áà∂Á±ª‰∏≠ÁôªËÆ∞ÁöÑÊâçÊòØÂçï‰æã„ÄÇ ÊñπÂºèÂõõÔºöÂèåÈáçÊ£ÄÊµãÊ®°ÂºèÔºåÂèåÈáçÊ£ÄÊµãÊñπÂºèÂú®Êüê‰∫õ‰π¶‰∏äÊàñËÄÖÊñáÁåÆ‰∏≠ËØ¥ÂØπ‰∫éjavaËØ≠Ë®ÄÊù•ËØ¥ÊòØ‰∏çÊàêÁ´ãÁöÑÔºå‰ΩÜÊòØÁõÆÂâçÁ°ÆÂÆûÊòØÈÄöËøáÊüêÁßçÊäÄÂ∑ßÂÆåÊàê‰∫ÜÂú®java‰∏≠‰ΩøÁî®ÂèåÈáçÊ£ÄÊµãÊú∫Âà∂ÁöÑÂçï‰æãÊ®°ÂºèÁöÑÂÆûÁé∞ÔºåÔºõËøôÁßçÊäÄÂ∑ßÂêéÈù¢Êù•ËØ¥ÔºõÂÖ≥‰∫é‰∏∫‰ªÄ‰πàjavaËØ≠Ë®ÄÂØπ‰∫éÂèåÈáçÊ£ÄÊµãÊàê‰æã‰∏çÊàêÁ´ãÔºåÂ§ßÂÆ∂ÂèØ‰ª•Âú®[BLOCH01]ÊñáÁåÆ‰∏≠Áúã‰∏ãÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇÂÖàÊù•Áúã‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÊ®°Âºè‰∏ãÁöÑÊÉÖÂÜµÔºö 123456789101112131415package com.glmapper.design.singleton;/** * ‰∏Ä‰∏™ÈîôËØØÁöÑÂçï‰æã‰æãÂ≠ê * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà11:53:04 */public class DoubleCheckSingleton &#123; private static DoubleCheckSingleton instance=null; public static DoubleCheckSingleton getDoubleCheckSingleton()&#123; if (instance == null) &#123; instance = new DoubleCheckSingleton(); &#125; return instance; &#125;&#125; Ëøô‰∏™ÂæàÊòéÊòæÊòØ‰∏Ä‰∏™ÈîôËØØÁöÑ‰æãÂ≠êÔºåÂØπ‰∫éA/B‰∏§‰∏™Á∫øÁ®ãÔºåÂõ†‰∏∫step 1Âπ∂Ê≤°Êúâ‰ΩøÁî®ÂêåÊ≠•Á≠ñÁï•ÔºåÂõ†Ê≠§Á∫øÁ®ãA/BÂèØËÉΩ‰ºöÂêåÊó∂ËøõË°å// step 2ÔºåËøôÊ†∑ÁöÑËØùÔºåÂ∞±‰ºöÂèØËÉΩÂàõÂª∫‰∏§‰∏™ÂØπË±°„ÄÇÈÇ£‰πàÊ≠£Á°ÆÁöÑÊñπÂºèÂ¶Ç‰∏ãÔºö‰ΩøÁî®synchronizedÂÖ≥ÈîÆÂ≠óÊù•‰øùËØÅÂêåÊ≠•„ÄÇ 12345678910111213141516package com.glmapper.design.singleton;/** * ËøôÊòØ‰∏Ä‰∏™Ê≠£Á°ÆÁöÑÊâìÂºÄÊñπÂºèÂì¶„ÄÇ„ÄÇ„ÄÇ * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà11:53:04 */public class DoubleCheckSingleton &#123; private static DoubleCheckSingleton instance=null; //‰ΩøÁî®synchronizedÊù•‰øùËØÅgetDoubleCheckSingletonÂêå‰∏ÄÊó∂ÂàªÂè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ public synchronized static DoubleCheckSingleton getDoubleCheckSingleton()&#123; if (instance == null) &#123; instance = new DoubleCheckSingleton(); &#125; return instance; &#125;&#125; ËøôÁßçÊñπÂºèËôΩÁÑ∂‰øùËØÅ‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÔºå‰ΩÜÊòØ‰πüÂ≠òÂú®Âè¶Â§ñ‰∏ÄÁßçÈóÆÈ¢òÔºöÂêåÊ≠•ÂåñÊìç‰Ωú‰ªÖ‰ªÖÂú®instanceÈ¶ñÊ¨°ÂàùÂßãÂåñÊìç‰Ωú‰πãÂâç‰ºöËµ∑Âà∞‰ΩúÁî®ÔºåÂ¶ÇÊûúinstanceÂ∑≤ÁªèÂÆåÊàê‰∫ÜÂàùÂßãÂåñÔºåÂØπ‰∫égetDoubleCheckSingletonÊØè‰∏ÄÊ¨°Ë∞ÉÁî®Êù•ËØ¥ÈÉΩ‰ºöÈòªÂ°ûÂÖ∂‰ªñÁ∫øÁ®ãÔºåÈÄ†Êàê‰∏Ä‰∏™‰∏çÂøÖË¶ÅÁöÑÁì∂È¢à„ÄÇÈÇ£Êàë‰ª¨Â∞±ÈÄöËøá‰ΩøÁî®Êõ¥Âä†ÁªÜÁ≤íÂ∫¶ÂåñÁöÑÈîÅÔºåÊù•ÈÄÇÂΩìÁöÑÂáèÂ∞èÈ¢ùÂ§ñÁöÑÂºÄÈîÄ„ÄÇOKÔºå‰∏ãÈù¢ÂÜçÊù•‰∏Ä‰∏™ÈîôËØØÁöÑ‰æãÂ≠êÔºö 1234567891011121314151617181920212223package com.glmapper.design.singleton;/** * ‰∏Ä‰∏™ÈîôËØØÁöÑÂçï‰æã‰æãÂ≠ê * @author glmapper * @date 2017Âπ¥12Êúà17Êó•‰∏ãÂçà11:53:04 */public class DoubleCheckSingleton &#123; private static DoubleCheckSingleton instance=null; //‰ΩøÁî®synchronizedÊù•‰øùËØÅgetDoubleCheckSingletonÂêå‰∏ÄÊó∂ÂàªÂè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ public static DoubleCheckSingleton getDoubleCheckSingleton()&#123; if (instance == null) &#123; //1 // BÁ∫øÁ®ãÊ£ÄÊµãÂà∞uniqueInstance‰∏ç‰∏∫Á©∫ synchronized (DoubleCheckSingleton.class) &#123; //2 if (instance == null) &#123; //3 instance = new DoubleCheckSingleton();//4 // AÁ∫øÁ®ãË¢´Êåá‰ª§ÈáçÊéí‰∫ÜÔºåÂàöÂ•ΩÂÖàËµãÂÄº‰∫ÜÔºõ‰ΩÜËøòÊ≤°ÊâßË°åÂÆåÊûÑÈÄ†ÂáΩÊï∞„ÄÇ &#125; &#125; &#125; // ÂêéÈù¢BÁ∫øÁ®ãÊâßË°åÊó∂Â∞ÜÂºïÂèëÔºöÂØπË±°Â∞öÊú™ÂàùÂßãÂåñÈîôËØØ„ÄÇ return instance;//5 &#125;&#125; ÁúãËµ∑Êù•Ê≤°‰ªÄ‰πàÊØõÁóÖÂëÄÔºüÊàë‰ª¨Êù•ÂàÜÊûêÔºå‰∏§‰∏™Á∫øÁ®ãAÂíåBÔºåÂêåÊó∂Âà∞Ëææ1,‰∏îÈÉΩÈÄöËøá‰∫Ü1ÁöÑÊ£ÄÊµã„ÄÇÊ≠§Êó∂AÂà∞‰∫Ü4ÔºåBÂú®2„ÄÇÊ≠§Êó∂BÁ∫øÁ®ãÊ£ÄÊµãÂà∞instance‰∏ç‰∏∫Á©∫ÔºåAÁ∫øÁ®ãË¢´Êåá‰ª§ÈáçÊéí‰∫ÜÔºåÂàöÂ•ΩÂÖàËµãÂÄº‰∫ÜÔºõ‰ΩÜËøòÊ≤°ÊâßË°åÂÆåÊûÑÈÄ†ÂáΩÊï∞ÔºõÂÜçÊé•‰∏ãÊù•BÁ∫øÁ®ãÊâßË°åÊó∂Â∞ÜÂºïÂèëÔºöÂØπË±°Â∞öÊú™ÂàùÂßãÂåñÈîôËØØÔºà5Ôºâ„ÄÇ ÂØπ‰∫é‰∏äÈù¢ÁöÑÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøávolatileÂÖ≥ÈîÆÂ≠óÊù•‰øÆÈ•∞instanceÂØπË±°ÔºåÊù•‰øùËØÅinstanceÂØπË±°ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄßÂíåÈò≤Ê≠¢Êåá‰ª§ÈáçÊéíÂ∫è„ÄÇËøô‰∏™‰πüÂ∞±ÊòØÂâçÈù¢ËØ¥Âà∞ÁöÑ‚ÄúÊäÄÂ∑ß‚Äù„ÄÇ 123private static DoubleCheckSingleton instance=null;Êîπ‰∏∫Ôºöprivate static volatile DoubleCheckSingleton instance=null; Êú¨ÁØáÂ∞ÜÂçï‰æãÊ®°ÂºèÁöÑÂá†ÁßçÊÉÖÂÜµËøõË°å‰∫ÜÂàÜÊûê„ÄÇÂêéÈù¢Â∞Ü‰ºöÂØπÂ∞Üjava‰∏≠ÂíåSpring‰∏≠ÊâÄ‰ΩøÁî®ÁöÑÂçï‰æãÂú∫ÊôØËøõË°åÂÖ∑‰ΩìÁöÑÊ°à‰æãÂàÜÊûê„ÄÇ JAVA‰∏≠ÁöÑÂçï‰æãÊ®°Âºè‰ΩøÁî®JAVA‰∏≠ÂØπ‰∫éÂçï‰æãÊ®°ÂºèÁöÑ‰ΩøÁî®ÊúÄÁªèÂÖ∏ÁöÑÂ∞±ÊòØRunTimeËøô‰∏™Á±ª„ÄÇÊ≥®ÈáäËß£ËØªÔºöÊØè‰∏™JavaÂ∫îÁî®Á®ãÂ∫èÈÉΩÊúâ‰∏Ä‰∏™RuntimeÁ±ªÁöÑÂçï‰∏™ÂÆû‰æãÔºåÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫è‰∏éËøêË°åÂ∫îÁî®Á®ãÂ∫èÁöÑÁéØÂ¢ÉËøõË°å‰∫§‰∫í„ÄÇ ÂΩìÂâçËøêË°åÊó∂ÂèØ‰ª•‰ªégetRuntimeÊñπÊ≥ïËé∑Âæó„ÄÇÂ∫îÁî®Á®ãÂ∫è‰∏çËÉΩÂàõÂª∫ÂÆÉËá™Â∑±ÁöÑËøô‰∏™Á±ªÁöÑÂÆû‰æã„ÄÇ ÁúãËøá‰∏äÁØáÊñáÁ´†ÁöÑÂ∞è‰ºô‰º¥ÂèØËÉΩÊØîËæÉÊ∏ÖÊ•öÔºåËøôÈáåRunTime‰ΩøÁî®ÁöÑÊòØÊáíÊ±âÂºèÂçï‰æãÁöÑÊñπÂºèÊù•ÂàõÂª∫ÁöÑ„ÄÇRuntimeÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïgetRuntimeÊñπÊ≥ïÁî®‰∫éËé∑ÂèñRuntimeÂÆû‰æã„ÄÇRuntimeËøô‰∏™Á±ªÁöÑÂÖ∑‰ΩìÊ∫êÁ†ÅÂàÜÊûêÂíåÂè™ËÉΩÊ≠§Â§Ñ‰∏çÂÅöÂàÜÊûê„ÄÇ Spring‰∏≠ÁöÑÂçï‰æãSpring‰æùËµñÊ≥®ÂÖ•BeanÂÆû‰æãÈªòËÆ§ÊòØÂçï‰æãÁöÑ„ÄÇSpring‰∏≠beanÁöÑ‰æùËµñÊ≥®ÂÖ•ÈÉΩÊòØ‰æùËµñAbstractBeanFactoryÁöÑgetBeanÊñπÊ≥ïÊù•ÂÆåÊàêÁöÑ„ÄÇÈÇ£Êàë‰ª¨Â∞±Êù•ÁúãÁúãÂú®getBean‰∏≠ÈÉΩÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ org.springframework.beans.factory.suppor.AbstractBeanFactory‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠Êàë‰ª¨Âï•‰πüÁúã‰∏çÂá∫ÔºåÂè™Áü•ÈÅìÂú®getBean‰∏≠ÂèàË∞ÉÁî®‰∫ÜdoGetBeanÊñπÊ≥ïÔºàSpring‰∏≠ËøòÊúâjavaÊ∫êÁ†Å‰∏≠ÊúâÂæàÂ§öÁ±ª‰ººÁöÑÂÜôÊ≥ïÔºåÂ•ΩÂ§ÑÂú®‰∫éÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂ≠êÁ±ªÁªßÊâøÔºåÁªßËÄåÁºñÂÜôÊàë‰ª¨Ëá™Â∑±ÁöÑÂ§ÑÁêÜÈÄªËæëÔºâ„ÄÇOKÔºåÂÜçÊù•ÁúãÁúãdoGetBeanÊñπÊ≥ï„ÄÇ Êù•Áúã‰∏ãËøô‰∏™ÊñπÊ≥ïÁöÑÊ≥®ÈáäÔºöËøîÂõûÊåáÂÆöÁöÑbeanÂèØ‰ª•ÂÖ±‰∫´ÊàñÁã¨Á´ãÁöÑÂÆû‰æã ÔºàË∞∑Ê≠å+ÊúâÈÅì+ÁôæÂ∫¶Ôºâ name:Ë¶ÅÊ£ÄÁ¥¢ÁöÑbeanÁöÑÂêçÁß∞ requiredType:Ë¶ÅÊ£ÄÁ¥¢ÁöÑbeanÊâÄÈúÄÁöÑÁ±ªÂûã args:Â¶ÇÊûú‰ΩøÁî®ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÁöÑÊòæÂºèÂèÇÊï∞ÂàõÂª∫ÂéüÂûãÔºåÂàô‰ΩøÁî®ÂèÇÊï∞„ÄÇ Âú®ÂÖ∂‰ªñÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÈùûÁ©∫argsÂÄºÊòØÊó†ÊïàÁöÑ„ÄÇ typeCheckOnly:Ëé∑ÂæóÂÆû‰æãÊòØÂê¶ÊòØ‰∏∫‰∫ÜÁ±ªÂûãÊ£ÄÊü•ÔºåËÄå‰∏çÊòØÂÆûÈôÖÁöÑ‰ΩøÁî® Ëøô‰∏™ÊñπÊ≥ï‰ΩìÂÜÖÁöÑ‰ª£Á†ÅÈùûÂ∏∏ÁöÑÂ§öÔºåÈÇ£‰πàÊàë‰ª¨Êú¨Êñá‰∏çÊòØÊù•Â≠¶‰π†SpringÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Âè™ÁúãÊàë‰ª¨ÂÖ≥ÂøÉÁöÑÈÉ®ÂàÜÔºå‰∏∫ÊâãÂ∑•Ê≥®ÂÜåÁöÑsingletonÊ£ÄÊü•Âçï‰æãÁºìÂ≠ò„ÄÇ,‰ªéËøô‰∏™Ê≥®ÈáäÂèØ‰ª•ÁúãÂá∫ÔºåÊ≠§Â§ÑÂ∞±ÊòØÊàë‰ª¨Ëé∑ÂèñÂÆû‰æãÁöÑÂú∞ÊñπÔºåÂÜçÂæÄ‰∏ãÁúã„ÄÇ Ê≠§Â§ÑÂíå‰∏äÈù¢ÁöÑgetBean‰∏ÄÊ†∑Ôºå‰πüÊòØÈÄöËøáÊ®°ÊùøÊñπÊ≥ïÁöÑÊñπÂºèËøõË°åË∞ÉÁî®ÁöÑ„ÄÇOKÔºåËøôÈáåÊàë‰ª¨ÁúãÂà∞‰∫ÜËé∑ÂèñÂçï‰æãÂÆû‰æãÁöÑÂÖ∑‰ΩìÂÆûÁé∞ËøáÁ®ã„ÄÇËøîÂõûÊ≥®ÂÜåÂú®ÁªôÂÆöÂêçÁß∞‰∏ãÁöÑ(ÂéüÂßãÁöÑ)singletonÂØπË±°„ÄÇÊ£ÄÊü•Â∑≤ÁªèÂÆû‰æãÂåñÁöÑÂçï‰æãÔºåÂπ∂‰∏îËøòÂÖÅËÆ∏ÊèêÂâçÂºïÁî®ÂΩìÂâçÂàõÂª∫ÁöÑÂçï‰æãÔºàËß£ÊûêÂæ™ÁéØÂºïÁî®Ôºâ„ÄÇËøôÈáå‰ΩøÁî®ÁöÑÊòØÈ•øÊ±âÂºè‰∏≠ÁöÑÂèåÈáçÊ£ÄÊµãÊú∫Âà∂Êù•ÂÆûÁé∞ÁöÑ„ÄÇ OKÔºåËá≥Ê≠§Âçï‰æãÊ®°ÂºèÁöÑÂ≠¶‰π†Â∞±ÁªìÊùü‰∫ÜÔºå‰∏ã‰∏ÄÁØáÊñáÁ´†Â∞Ü‰ºö‰ªãÁªçÂ∑•ÂéÇÊ®°ÂºèÔºàÁÆÄÂçïÂ∑•ÂéÇÔºåÂ∑•ÂéÇÊñπÊ≥ïÔºåÊäΩË±°Â∑•ÂéÇÔºâ„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊÄé‰πàÂÜô‰∏Ä‰∏™Ê≠ªÈîÅÔºü]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-base-thread-deadlock%2F</url>
    <content type="text"><![CDATA[ÂàöÊääÊâãÂ§¥‰∏äÁöÑÈ°πÁõÆ‰ª£Á†ÅÊí∏ÂÆåÔºåÈó≤Êù•ÁúãÁúãÂçöÂÆ¢ÔºåÁÑ∂ÂêéÂ∞±ÁúãÂà∞‰∫ÜÁ∫øÁ®ãËøôÂùóÁöÑ‰∏úË•ø„ÄÇ‰πãÂâçÊúâÁÆÄÂçïÁöÑËÆ∞ÂΩïËøáÁ∫øÁ®ãÂíåËøõË°åÁöÑÈõ∂Á¢éÁü•ËØÜ„ÄÇJAVAÂü∫Á°ÄÁü•ËØÜÁ≥ªÂàó‚ÄîËøõÁ®ã„ÄÅÁ∫øÁ®ãÂÆâÂÖ® ÁúãÁùÄÁúãÁùÄÂ∞±ÊÉ≥ÁùÄÊÄé‰πàËÉΩÂÜô‰∏Ä‰∏™Ê≠ªÈîÅÂë¢ÔºåÊâìÂºÄeclipseÔºåÁ™ÅÁÑ∂ÊÑüËßâÊó†‰ªé‰∏ãÊâãÔºõ‰πãÂâçÈÉΩÊòØ‰∏ÄÁõ¥Âú®Ëß£ÂÜ≥ÈòªÂ°û„ÄÅÊ≠ªÈîÅËøô‰∫õÈóÆÈ¢òÔºåÁé∞Âú®ÂèçËøáÊù•ÂéªÂÜô‰∏Ä‰∏™Ê≠ªÈîÅÊÑüËßâÊúâÁÇπËé´ÂêçÂ•áÂ¶ô„ÄÇ„ÄÇ„ÄÇ ok,ÂÜô‰∏Ä‰∏™Ê≠ªÈîÅÂ∞±Ë¶ÅÊúâ‰∏ÄÁßçÂú∫ÊôØÔºåÂπ∂‰∏îÊª°Ë∂≥Ê≠ªÈîÅÁöÑÊù°‰ª∂„ÄÇ ‰∫íÊñ•Êù°‰ª∂Ôºö‰∏Ä‰∏™ËµÑÊ∫êÊØèÊ¨°Âè™ËÉΩË¢´‰∏Ä‰∏™ËøõÁ®ã‰ΩøÁî®„ÄÇ ËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂Ôºö‰∏Ä‰∏™ËøõÁ®ãÂõ†ËØ∑Ê±ÇËµÑÊ∫êËÄåÈòªÂ°ûÊó∂ÔºåÂØπÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫ê‰øùÊåÅ‰∏çÊîæ ‰∏çÂâ•Â§∫Êù°‰ª∂:ËøõÁ®ãÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫êÔºåÂú®Êú´‰ΩøÁî®ÂÆå‰πãÂâçÔºå‰∏çËÉΩÂº∫Ë°åÂâ•Â§∫„ÄÇ Âæ™ÁéØÁ≠âÂæÖÊù°‰ª∂:Ëã•Âπ≤ËøõÁ®ã‰πãÈó¥ÂΩ¢Êàê‰∏ÄÁßçÂ§¥Â∞æÁõ∏Êé•ÁöÑÂæ™ÁéØÁ≠âÂæÖËµÑÊ∫êÂÖ≥Á≥ª„ÄÇ È¶ñÂÖàË¶ÅÊúâÁ´û‰∫âÁöÑËµÑÊ∫êÔºåÂπ∂‰∏î‰∏§‰∏™Á∫øÁ®ãË¶ÅÂêåÊó∂ÈÉΩÂú®Á≠âÂæÖÂØπÊñπÈáäÊîæËµÑÊ∫ê„ÄÇÈÇ£Êàë‰ª¨ÂÖàÂºÑ‰∏§‰∏™ËµÑÊ∫êÔºö 12Object lock=new Object();Object lock2=new Object(); ÁÑ∂ÂêéÊúâ‰∏§‰∏™Á∫øÁ®ãÔºö 12345Tr1 tr1=new Tr1(lock, lock2);Tr2 tr2=new Tr2(lock, lock2); Thread t1=new Thread(tr1);Thread t2=new Thread(tr2); ÂêØÂä®Ôºö 12t1.start();t2.start(); ÈÇ£‰πàÂØπ‰∫élockÔºålock2ÊÄé‰πàÂÜçÁ∫øÁ®ãÂÜÖÈÉ®‰∫ßÁîüÁ´û‰∫âÂÖ≥Á≥ªÂë¢ÔºüÊù•Áúã‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.glmapper.base.synchronize;public class Tr1 implements Runnable &#123; Object lock; Object lock2; public Tr1(Object lock,Object lock2)&#123; this.lock= lock; this.lock2= lock2; &#125; @Override public void run() &#123; //Ëé∑Âèñlock synchronized (lock) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫ÜlockÈîÅ&quot;); try &#123; Thread.sleep(3000); &#125; catch (Exception e) &#123; &#125; //Ëé∑Âèñlock2 synchronized (lock2) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫Ülock2ÈîÅ&quot;); &#125; &#125; &#125;&#125;public class Tr2 implements Runnable &#123; Object lock; Object lock2; public Tr2(Object lock,Object lock2)&#123; this.lock= lock; this.lock2= lock2; &#125; @Override public void run() &#123; //Ëé∑Âèñlock2 synchronized (lock2) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫Ülock2ÈîÅ&quot;); try &#123; Thread.sleep(3000); &#125; catch (Exception e) &#123; &#125; //Ëé∑Âèñlock synchronized (lock) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫ÜlockÈîÅ&quot;); &#125; &#125; &#125;&#125; ÂàÜÊûê‰∏Ä‰∏ãÔºöÂΩìÁ∫øÁ®ã1Ëé∑ÂèñlockÊó∂ÔºåÁ∫øÁ®ã2Ëé∑Âèñ‰∫Ülock2ÈîÅÔºõÁÑ∂ÂêéÁ∫øÁ®ã1ÁªßÁª≠ÊâßË°åÔºåÂà∞ËøôÈáåÔºå 123synchronized (lock2) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫Ülock2ÈîÅ&quot;);&#125; Ê≠§Êó∂ÈúÄË¶ÅËé∑ÂèñÂà∞lock2Ëøô‰∏™ÈîÅÔºå‰ΩÜÊòØlock2Áé∞Âú®Ë¢´Á∫øÁ®ã2ÊåÅÊúâÔºõÂêåÊó∂ÔºåÁ∫øÁ®ã2‰πüÂºÄÂßãÊâßË°åÂà∞Ôºö 123synchronized (lock) &#123; System.out.println(Thread.currentThread().getName()+&quot;Ëé∑Âèñ‰∫ÜlockÈîÅ&quot;);&#125; Ê≠§Êó∂Á∫øÁ®ã2‰πüÂú®Â∞ùËØïËé∑ÂèñlockËøôÊääÈîÅÔºå‰ΩÜÊòØlockÂèàË¢´Á∫øÁ®ã1ÊåÅÊúâ‰∫Ü„ÄÇ‰∏§‰∏™Á∫øÁ®ãÈÉΩÂú®Á≠âÂæÖÂØπÊñπÈáäÊîæËµÑÊ∫êÔºåÈÄ†Êàê‰∫ÜÊ≠ªÈîÅ„ÄÇOKÔºåÂÆåÊàê‰∫Ü„ÄÇ„ÄÇ„ÄÇÂΩìÊàëÂáÜÂ§áÂÖ≥Êú∫Êó∂ÔºåÂèëÁé∞ËøòÂú®Á≠âÂë¢ÔºüÔºüÔºüÈÇ£‰∏∫‰ªÄ‰πàÂë¢ÔºüÔºüÊàë‰ª¨ÂºÄÁúã‰∏ãÂèëÁîü‰∫Ü‰ªÄ‰πà‚Ä¶. ÈÄöËøájpsÊù•Áúã‰∏ãÊàë‰ª¨Á®ãÂ∫èËøõÁ®ã ‰ΩøÁî®jstack -l „Äêpid„Äë Êù•Áúã‰∏ã‰ø°ÊÅØ ‰∏§‰∏™Á∫øÁ®ãÈÉΩÂ§Ñ‰∫éBLOCKEDÁä∂ÊÄÅ‰∫Ü‚Ä¶,ÁªßÁª≠ÂæÄ‰∏ãÁúãfound 1 deadlock.Â¶ÇÊàë‰ª¨ÊâÄÊÑøÔºåÊ≠ªÈîÅÂèëÁîü‰∫ÜÔºÅ]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Á∫øÁ®ã</tag>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑ6ÁßçËÆæËÆ°ÂéüÂàô]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-bird-three%2F</url>
    <content type="text"><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàóÊãñ‰∫Ü‰∏ÄÂë®Â§ö‰∫ÜÔºå‰ªäÂ§©ÁªßÁª≠‰πãÂâçÁöÑÊÄùË∑ØÊù•ËøõË°å„ÄÇÊåâÁÖß‰πãÂâçÁöÑËßÑÂàíÔºåËøôÁØá‰∏ªË¶ÅÊù•Â≠¶‰π†ËÆæËÆ°ÂéüÂàôÂÖàÂÖ≥Áü•ËØÜ„ÄÇÈÄöËøáÊú¨ÊñáÂ≠¶‰π†ÔºåÂ∏åÊúõÂ§ßÂÆ∂‰∏ÄÊñπÈù¢ËÉΩÊòØËÉΩÂ§üËÆ§ËØÜËøô‰∫õÂéüÂàôÊòØ‰ªÄ‰πàÔºåËÉΩÂ§üÂú®Êó•Â∏∏ÁöÑÂºÄÂèë‰∏≠Ëµ∑Âà∞ÊÄéÊ†∑ÁöÑÁ∫¶ÊùüÔºåÂπ∂‰∏îÁî®Ëøô‰∫õÂéüÂàôÊù•ÊèêÈ´ò‰ª£Á†ÅÁöÑÂ§çÁî®ÊÄßÂíåÂèØÁª¥Êä§ÊÄßÔºåÂè¶‰∏ÄÊñπÈù¢ÊòØÂØπÂêéÁª≠ÁöÑËÆæËÆ°Ê®°ÂºèÁöÑÂ≠¶‰π†ËÉΩÂ§üÊúâ‰∏Ä‰∫õÂü∫Á°Ä„ÄÇ ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Ê¶ÇËø∞ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Èù¢ÂêëÂØπË±°ÁöÑÂõõÂ§ßÂü∫Á°ÄÁâπÊÄßËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Â§öÊÄÅ„ÄÅÊé•Âè£ÂíåÊäΩË±°Á±ª ËÆæËÆ°ÂéüÂàôÔºåÂú®java‰∏éÊ®°ÂºèËøôÊú¨‰π¶‰∏≠ÊúâÊèêÂà∞ÔºåÁî®‰∫éÊèêÈ´òÁ≥ªÁªüÂèØÁª¥Êä§ÊÄßÁöÑÂêåÊó∂Ôºå‰πüÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÂ§çÁî®ÊÄß„ÄÇËøôÊú¨‰π¶‰∏≠‰∏ªË¶ÅËÆ≤‰∫ÜÂÖ≠ÁßçËÆæËÆ°ÂéüÂàôÔºö ‚ÄúÂºÄ-Èó≠‚ÄùÂéüÂàô ÈáåÊ∞èÊõøÊç¢ÂéüÂàô ‰æùËµñÂÄíÁΩÆÂéüÂàô Êé•Âè£ÈöîÁ¶ªÂéüÂàô Âçï‰∏ÄËÅåË¥£ÂéüÂàô Ëø™ÁâπÁ±≥Ê≥ïÂàô Ëøô‰∫õËÆæËÆ°ÂéüÂàôÈ¶ñÂÖàÈÉΩÊòØÂ§çÁî®ÁöÑÂéüÂàôÔºåÈÅµÂæ™Ëøô‰∫õÂéüÂàôÂèØ‰ª•ÊúâÊïàÁöÑÊèêÈ´òÁ≥ªÁªüÁöÑÂ§çÁî®ÊÄßÔºåÂêåÊó∂‰πüÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÂèØÁª¥Êä§ÊÄß„ÄÇ ‚ÄúÂºÄ-Èó≠‚ÄùÂéüÂàôÁΩë‰∏äÁúãÂà∞‰∏Ä‰∏™‰∫∫ÁöÑËß£ÈáäÔºå‰ªñÊòØËøôÊ†∑Êù•ÊØîÂñªÁöÑÔºö‰∏Ä‰∏™Êú¨Â≠êÔºåÂ∑≤ÁªèÂÜôÂÆå‰∫ÜÔºå‰Ω†‰∏çÂèØËÉΩÊíïÂá†Âº†Á∫∏Á≤ò‰∏äÂéªÂêßÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïÊòØ‰π∞‰∏™Êñ∞ÁöÑ„ÄÇÈÅìÁêÜÂ∞±ÊòØËøôÊ†∑Ôºå‰∏Ä‰∏™Â∑≤ÁªèÂÅöÂ•ΩÁöÑÁ®ãÂ∫èÔºå‰∏çÊîØÊåÅ‰øÆÊîπÁöÑÔºåÂõ†‰∏∫‰øÆÊîπÁöÑËØùÔºåÊúâÂèØËÉΩÈÄ†ÊàêÁ®ãÂ∫èÊó†Ê≥ïËøêË°åÊàñÊä•ÈîôÔºåÊâÄ‰ª•ÔºåÈÄöÂ∏∏Á®ãÂ∫èÂè™ÊîØÊåÅÊâ©Â±ïÔºå‰∏çÊîØÊåÅ‰øÆÊîπ„ÄÇ 1.‰∏∫‰ªÄ‰πà‰ºöÊúâËøôÊ†∑‰∏Ä‰∏™ÂéüÂàôÊù•‰Ωú‰∏∫Á®ãÂ∫èËÆæËÆ°ÁöÑ‰∏ÄÁßçÁ∫¶ÊùüÂë¢ÔºüÂú®ËΩØ‰ª∂ÁöÑÁîüÂëΩÂë®ÊúüÂÜÖÔºåÁî±‰∫éËΩØ‰ª∂ÂäüËÉΩÊàñËÄÖÁªìÊûÑÁöÑÂèòÂåñ„ÄÅÂçáÁ∫ßÂíåÁª¥Êä§Á≠âÂéüÂõ†ÈúÄË¶ÅÂØπËΩØ‰ª∂ÂéüÊúâ‰ª£Á†ÅËøõË°å‰øÆÊîπÔºåÂú®‰øÆÊîπÁöÑËøáÁ®ã‰∏≠ÂèØËÉΩ‰ºöÁªôÊóß‰ª£Á†Å‰∏≠ÂºïÂÖ•ÈîôËØØÔºå‰πüÂèØËÉΩ‰ºö‰ΩøÊàë‰ª¨‰∏çÂæó‰∏çÂØπÊï¥‰∏™ÂäüËÉΩËøõË°åÈáçÊûÑÔºåÂπ∂‰∏îËøòÈúÄË¶ÅËøõË°åËΩØ‰ª∂ÁöÑÈáçÊñ∞ÊµãËØïÔºåÂõ†Ê≠§Êàë‰ª¨Â∏åÊúõÂú®ËΩØ‰ª∂ËÆæËÆ°‰πãÂàùÔºåËÉΩÂ§üÁî®‰∏ÄÁßçÂéüÂàôÊù•ËøõË°å‰∏Ä‰∫õÂü∫Êú¨ÁöÑÁ∫¶ÊùüÔºå‰ΩøÂæóÂú®ËΩØ‰ª∂ÂêéÊúüÁöÑÂäüËÉΩÂèòÊõ¥„ÄÅÊâ©Â±ïÊàñËÄÖÁª¥Êä§Êõ¥Âä†ÂÆπÊòì 2.ÂºÄÈó≠ÂéüÂàôËß£ÂÜ≥ÁöÑÈóÆÈ¢òÊòØ‰ªÄ‰πàÔºüÂΩìËΩØ‰ª∂ÈúÄË¶ÅËøõË°åÊîπÂèòÊó∂ÔºåÊàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÄöËøáÊâ©Â±ïËΩØ‰ª∂ÂÆû‰ΩìÁöÑË°å‰∏∫Êù•ÂÆûÁé∞ÂèòÂåñÔºåËÄå‰∏çÊòØÈÄöËøá‰øÆÊîπÂ∑≤ÊúâÁöÑ‰ª£Á†ÅÊù•ÂÆûÁé∞ÂèòÂåñ„ÄÇÈÄöËøáËøôÊ†∑‰∏ÄÁßçÂéüÂàôÔºåÂèØ‰ª•ÂæàÂ•ΩÁöÑÂÆûÁé∞Âú®‰øùËØÅÂéüÊúâÂäüËÉΩÁ®≥ÂÆöÁöÑÂâçÊèê‰∏ãÊâ©Â±ïÊñ∞ÁöÑÂäüËÉΩ 3.‰ªÄ‰πàÊòØÂºÄÈó≠ÂéüÂàôÂë¢Ôºü‰∏Ä‰∏™ËΩØ‰ª∂ÂÆû‰Ωì(Á±ª„ÄÅÊ®°ÂùóÊàñÂáΩÊï∞)Â∫îÂΩìÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇ‰πüÂ∞±ÊòØËØ¥Âú®Êâ©Â±ïÊàñËÄÖ‰øÆÊîπËΩØ‰ª∂ÂäüËÉΩÊó∂ÔºåÂ∫îÂ∞ΩÈáèÂú®‰∏ç‰øÆÊîπÂéüÊúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãËøõË°å ‰∏æ‰∏™ÁÆÄÂçïÁöÑÊ†óÂ≠êÔºöÁé∞Âú®ÊúâËøôÊ†∑‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÁ≥ªÁªüÈúÄË¶ÅÈÄöËøáQQÊù•ËøõË°åÈ™åËØÅÁôªÂΩï„ÄÇOKÔºåÊàë‰ª¨Êù•Êí∏‰ª£Á†ÅÔºö Áî®Êà∑Á±ªUser 1234567891011121314151617181920212223package com.glmapper.framerwork;/** * Áî®Êà∑‰ø°ÊÅØÁ±ª * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:54:09 * */public class User &#123; private String userName;//Áî®Êà∑Âêç private String passWord;//ÂØÜÁ†Å public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125; public String getPassWord() &#123; return passWord; &#125; public void setPassWord(String passWord) &#123; this.passWord = passWord; &#125;&#125; QQÊ†∏ÂøÉÈ™åËØÅÈÄªËæë 12345678910111213141516package com.glmapper.framerwork;/** * QQÈ™åËØÅÂô® * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:49:24 */public class QQAuther &#123; /** * Áî®‰∫éÈ™åËØÅQQÁôªÂΩï‰ø°ÊÅØ */ public boolean validateQQ(User user) &#123; //Ê®°Êãü‰∏ãÈÄªËæë return user.toString()==null?false:true; &#125;&#125; Ê†∏ÂøÉÈ™åËØÅÊúçÂä°Á±ª 12345678910111213141516171819202122package com.glmapper.framerwork;/** * * Áî®‰∫éÈ™åËØÅÁöÑÊ†∏ÂøÉÊúçÂä° * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:47:04 * */public class AuthService &#123; //ÊåÅÊúâ‰∏Ä‰∏™QQÈ™åËØÅÂô®ÂØπË±° private QQAuther qqAuther; //ÈÄöËøáÊûÑÈÄ†Âô®Ê≥®ÂÖ•qqAutherÂØπË±° public AuthService(QQAuther qqAuther) &#123; this.qqAuther = qqAuther; &#125; /* * È™åËØÅÁî®Êà∑ÂêàÊ≥ïÊÄß */ public boolean validateUser(User user)&#123; return qqAuther.validateQQ(user); &#125;&#125; ÂÆ¢Êà∑Á´Ø 12345678910111213141516171819package com.glmapper.framerwork;/** * ÂÆ¢Êà∑Á´ØË∞ÉÁî®È™åËØÅ * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:50:13 * */public class AuthClient &#123; public static void main(String[] args) &#123; //Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ User user = UserHolder.getUser(); QQAuther qqAuther = new QQAuther(); AuthService authService = new AuthService(qqAuther); //Ëé∑ÂèñÈ™åËØÅÁªìÊûú boolean isOK = authService.validateUser(user); System.out.println(isOK); &#125;&#125; OK,ÂÆå‰∫ã‰∫ÜÔºÅ‰ΩÜÊòØÁé∞Âú®ÈúÄË¶ÅÊé•ÂÖ•ÂæÆÂçöÁöÑÂºÄÊîæÂπ≥Âè∞Êé•Âè£Ôºõ‰øÆÊîπ‰ª£Á†Å‚Ä¶„ÄÇÂ¢ûÂä†‰∏Ä‰∏™ÂæÆÂçöÈ™åËØÅÂô®Ôºö123456789101112131415package com.glmapper.framerwork;/** * ÂæÆÂçöÊ†∏ÂøÉÈ™åËØÅÂô® * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà11:01:10 */public class WeiBoAuther &#123; /** * Áî®‰∫éÈ™åËØÅQQÁôªÂΩï‰ø°ÊÅØ */ public boolean validateWeiBo(User user) &#123; return user.toString()==null?false:true; &#125;&#125; Ê†∏ÂøÉÈ™åËØÅÊúçÂä°‰øÆÊîπÔºö 1234567891011121314151617181920212223242526272829package com.glmapper.framerwork;/** * * Áî®‰∫éÈ™åËØÅÁöÑÊ†∏ÂøÉÊúçÂä° * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:47:04 * */public class AuthService &#123; //ÊåÅÊúâ‰∏Ä‰∏™QQÈ™åËØÅÂô®ÂØπË±° private Object obj; //ÈÄöËøáÊûÑÈÄ†Âô®Ê≥®ÂÖ•qqAutherÂØπË±° public AuthService(Object obj) &#123; this.obj = obj; &#125; /* * È™åËØÅÁî®Êà∑ÂêàÊ≥ïÊÄß */ public boolean validateUser(User user)&#123; //ËøôÈáå‰ªÖ‰Ωú‰∏∫Ê®°ÊãüÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰ºöÈÄöËøá‰ΩøÁî®ÂÆö‰πâÊûö‰∏æ&amp;Â∑•ÂéÇÊ®°ÂºèÊù•ÂÆåÊàê if (obj instanceof QQAuther) &#123; return new QQAuther().validateQQ(user); &#125; if(obj instanceof WeiBoAuther)&#123; return new WeiBoAuther().validateWeiBo(user); &#125; return false; &#125;&#125; ÂÆ¢Êà∑Á´ØÊîπÂèòÔºö 12345678910111213141516171819202122232425package com.glmapper.framerwork;/** * ÂÆ¢Êà∑Á´ØË∞ÉÁî®È™åËØÅ * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:50:13 * */public class AuthClient &#123; public static void main(String[] args) &#123; //Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ User user = UserHolder.getUser(); //QQ QQAuther qqAuther = new QQAuther(); boolean isQQOK = new AuthService(qqAuther).validateUser(user); System.out.println(isQQOK); //ÂæÆÂçö WeiBoAuther weiBoAuther = new WeiBoAuther(); boolean isWeiBoOK = new AuthService(weiBoAuther).validateUser(user); System.out.println(isWeiBoOK); &#125;&#125; OKÔºåÊîπËøõÂÆåÊàêÔºÅ‰ΩÜÊòØÂèàÊúâÊñ∞ÁöÑÈúÄÊ±ÇÔºåÊé•ÂÖ•ÂæÆ‰ø°‚Ä¶.„ÄÇÂÅáÂ¶ÇÊàë‰ª¨Áé∞Âú®ÊääÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞‰πüÊé•ÂÖ•‰∫ÜÔºåÁÑ∂ÂêéÂèàÊù•ÈúÄÊ±ÇË¶ÅÊé•ÂÖ•ÊîØ‰ªòÂÆùË¥¶Êà∑„ÄÅËãèÂÆÅÊòìË¥≠Ë¥¶Êà∑Á≠âÁ≠â„ÄÇ„ÄÇ„ÄÇÂ∞±ÈúÄË¶Å‰∏çÊñ≠ÁöÑ‰øÆÊîπ‰ª£Á†Å„ÄÇÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÂú®ËÆæËÆ°‰πãÂàùÁî®Âà∞Êàë‰ª¨ÁöÑÂºÄÈó≠ÂéüÂàôÊù•ÂÅö‰∏Ä‰∏™Á∫¶Êùü‰∫Ü„ÄÇÁªßÁª≠Êí∏ÔºöÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£Áî®‰∫éÁ∫¶ÊùüÔºö È™åËØÅÂô®Êé•Âè£ÔºåÁî®‰∫éË¢´QQ/WEIBO/ÂæÆ‰ø°/ËãèÂÆÅÊòìË¥≠Á≠âÂºÄÂèëÂπ≥Âè∞È™åËØÅÂô®ÂÆûÁé∞ 12345678910111213package com.glmapper.framerwork;/** * ÂÆö‰πâ‰∏Ä‰∏™Á∫¶ÊùüÊé•Âè£ * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà11:32:32 * */public interface ValidateInteface &#123; /** * Êèê‰æõ‰∏Ä‰∏™È™åËØÅÂÖ•Âè£ */ boolean validate(User user);&#125; QQ‰øÆÊîπ‰πãÂêé 123456789101112131415package com.glmapper.framerwork;/** * QQÈ™åËØÅÂô® * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:49:24 */public class QQAuther implements ValidateInteface&#123; /** * Áî®‰∫éÈ™åËØÅQQÁôªÂΩï‰ø°ÊÅØ */ @Override public boolean validate(User user) &#123; return user.toString()==null?false:true; &#125;&#125; ÂæÆÂçö‰øÆÊîπ‰πãÂêé 12345678910111213141516package com.glmapper.framerwork;/** * ÂæÆÂçöÊ†∏ÂøÉÈ™åËØÅÂô® * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà11:01:10 */public class WeiBoAuther implements ValidateInteface&#123; /** * Áî®‰∫éÈ™åËØÅQQÁôªÂΩï‰ø°ÊÅØ */ @Override public boolean validate(User user) &#123; // TODO Auto-generated method stub return user.toString()==null?false:true; &#125;&#125; Ê†∏ÂøÉÈ™åËØÅÊúçÂä° 1234567891011121314151617181920package com.glmapper.framerwork;/** * Áî®‰∫éÈ™åËØÅÁöÑÊ†∏ÂøÉÊúçÂä° * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:47:04 */public class AuthService &#123; //ÊåÅÊúâ‰∏Ä‰∏™QQÈ™åËØÅÂô®ÂØπË±° private ValidateInteface validate; //ÈÄöËøáÊûÑÈÄ†Âô®Ê≥®ÂÖ•qqAutherÂØπË±° public AuthService(ValidateInteface validate) &#123; this.validate = validate; &#125; /* * È™åËØÅÁî®Êà∑ÂêàÊ≥ïÊÄß */ public boolean validateUser(User user)&#123; return validate.validate(user); &#125;&#125; ÂÆ¢Êà∑Á´Ø 123456789101112131415161718192021package com.glmapper.framerwork;/** * ÂÆ¢Êà∑Á´ØË∞ÉÁî®È™åËØÅ * @author glmapper * @date 2017Âπ¥12Êúà9Êó•‰∏ãÂçà10:50:13 * */public class AuthClient &#123; public static void main(String[] args) &#123; //Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ User user = UserHolder.getUser(); //QQ ValidateInteface qqAuther = new QQAuther(); boolean isQQOK = new AuthService(qqAuther).validateUser(user); System.out.println(isQQOK); //ÂæÆÂçö ValidateInteface weiBoAuther = new WeiBoAuther(); boolean isWeiBoOK = new AuthService(weiBoAuther).validateUser(user); System.out.println(isWeiBoOK); &#125;&#125; ÊîπËøõ‰πãÂêéÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞ÔºåÂØπ‰∫éÂéüÊù•ÁöÑÊ†∏ÂøÉÈ™åËØÅÊúçÂä°Á±ª„ÄÅÂêÑÈ™åËØÅÂô®Á±ªÔºåÊó†ËÆ∫Â¢ûÂä†‰ªÄ‰πàÊñπÂºèÊé•ÂÖ•ÔºåÊàë‰ª¨ÈÉΩ‰∏çÈúÄË¶ÅÂéª‰øÆÊîπÂÆÉÁöÑ‰ª£Á†Å‰∫Ü„ÄÇËÄåÊ≠§Êó∂Êàë‰ª¨ÈúÄË¶ÅÂÅöÁöÑÂ∞±ÊòØÊñ∞Â¢û‰∏Ä‰∏™È™åËØÅÂô®Ôºà‰æãÂ¶ÇËãèÂÆÅÊòìË¥≠È™åËØÅÂô®ÔºâÔºåÁÑ∂ÂêéÁªßÊâøValidateInterfaceÊé•Âè£Â∞±Ë°å‰∫Ü„ÄÇÊÄª‰ΩìÊù•È¶ñÔºåÂºÄÈó≠ÂéüÂàôÁöÑÊ†∏ÂøÉÊòØÔºö ÊäΩË±°Âåñ ÂØπÂèØÂèòÊÄßÁöÑÂ∞ÅË£ÖÂéüÂàôÔºà1.‰∏çÂèØÂèòÊÄß‰∏çÂ∫îËØ•Êï£ËêΩÂú®‰ª£Á†ÅÁöÑÂ§öÂ§ÑÔºåËÄåÂ∫îÂΩìË¢´Â∞ÅË£ÖÂà∞‰∏Ä‰∏™ÂØπË±°ÈáåÈù¢Ôºõ2.‰∏ÄÁßçÂèØÂèòÊÄß‰∏çÂ∫îÂΩì‰∏éÂè¶Â§ñ‰∏ÄÁßçÂèØÂèòÊÄßÊ∑∑ÂêàÂú®‰∏ÄËµ∑Ôºâ ÔºàÂ§ßÂÆ∂Â¶ÇÊûúÊúâÊõ¥ÁÆÄÂçïÊö¥ÂäõÁöÑ‰æãÂ≠êÔºåÂèØ‰ª•ÁïôË®ÄÔºõËøô‰∏™‰æãÂ≠êÊÉ≥‰∫ÜÂæàÂ§öÈÉΩÊÑüËßâ‰∏çÊòØÂæàÊÅ∞ÂΩìÔºåËøòÊòØ‰ªéÂ∑•‰Ωú‰∏≠ÊäΩË±°Âá∫Êù•ÁöÑÔºâ„ÄÇ ÈáåÊ∞èÊõøÊç¢ÂéüÂàô‰ªª‰ΩïÁà∂Á±ªÂèØ‰ª•Âá∫Áé∞ÁöÑÂú∞ÊñπÔºåÂ≠êÁ±ª‰∏ÄÂÆöÂèØ‰ª•Âá∫Áé∞ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÁÆóÊòØÂØπ‚ÄúÂºÄÈó≠‚ÄùÂéüÂàôÁöÑË°•ÂÖÖÔºå‰∏äÈù¢‰πüÊèêÂà∞ÔºåÂÆûÁé∞‚ÄúÂºÄÈó≠‚ÄùÂéüÂàôÁöÑÂÖ≥ÈîÆÊ≠•È™§ÊòØÊäΩË±°ÂåñÔºåËÄåÁà∂Á±ª‰∏éÂ≠êÁ±ªÁöÑÁªßÊâøÂÖ≥Á≥ªÂ∞±ÊòØÊäΩË±°ÂåñÁöÑ‰∏ÄÁßçÂÖ∑‰Ωì‰ΩìÁé∞ÔºåÊâÄ‰ª•ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÊòØÂØπÂÆûÁé∞ÊäΩË±°ÂåñÁöÑÂÖ∑‰ΩìÊ≠•È™§ÁöÑËßÑËåÉ„ÄÇ ÊëòËá™java‰∏éÊ®°Âºè‰∏≠ÁöÑÂÆö‰πâ:Â¶ÇÊûúÂØπÊØè‰∏Ä‰∏™Á±ªÂûã‰∏∫ T1ÁöÑÂØπË±° o1ÔºåÈÉΩÊúâÁ±ªÂûã‰∏∫ T2 ÁöÑÂØπË±°o2Ôºå‰ΩøÂæó‰ª• T1ÂÆö‰πâÁöÑÊâÄÊúâÁ®ãÂ∫è P Âú®ÊâÄÊúâÁöÑÂØπË±° o1 ÈÉΩ‰ª£Êç¢Êàê o2 Êó∂ÔºåÁ®ãÂ∫è P ÁöÑË°å‰∏∫Ê≤°ÊúâÂèëÁîüÂèòÂåñÔºåÈÇ£‰πàÁ±ªÂûã T2 ÊòØÁ±ªÂûã T1 ÁöÑÂ≠êÁ±ªÂûã„ÄÇ ‰∏ãÂõæ‰∏≠ÊèèËø∞‰∫Ü‰∏ÄÁßçÁªßÊâøÂÖ≥Á≥ªÔºå‰ªéÊúÄÈ´òÂ±ÇÁöÑÂä®Áâ©‰∏ÄÁõ¥Ë°çÁîüÂá∫ÂÖ∑‰ΩìÁöÑÂä®Áâ©„ÄÇOKÔºåÂÜô‰∏ÄÊÆµÊñ≠Á†ÅÊù•ÁúãÁúãÔºö È°∂Â±ÇÊäΩË±°Áà∂Á±ª-Animal 12345678910package com.glmapper.framework.model.lsp;/** * È°∂Â±ÇÊäΩË±°Áà∂Á±ªÂä®Áâ©Á±ª * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏äÂçà10:51:30 */public abstract class Animal &#123; //Êèê‰æõ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÔºå‰ª•‰æõ‰∏çÂêåÂ≠êÁ±ªÊù•ËøõË°åÂÖ∑‰ΩìÁöÑÂÆûÁé∞ public abstract void eatFood(String foodName);&#125; ÂÖ∑‰ΩìÂä®Áâ©Á±ªÂûã-Dog 12345678910111213 package com.glmapper.framework.model.lsp;/** *Â≠êÁ±ª-Â∞èÁãó * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏äÂçà10:54:17 * */public class Dog extends Animal&#123; @Override public void eatFood(String foodName) &#123; System.out.println(&quot;Â∞èÁãóÂêÉ&quot;+foodName); &#125;&#125; ÂÖ∑‰ΩìÂä®Áâ©-ÂìàÂ£´Â•á 12345678910111213141516 package com.glmapper.framework.model.lsp;/** * ÂÖ∑‰ΩìÂ∞èÁãóÁöÑÁßçÁ±ª-Â≠êÁ±ªÂìàÂ£´Â•á * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏äÂçà10:56:59 * */public class HSQDog extends Dog&#123; /** * ÈáçÂÜôÁà∂Á±ªÊñπÊ≥ï */ @Override public void eatFood(String foodName) &#123; System.out.println(&quot;ÂìàÂ£´Â•áÂêÉ&quot;+foodName); &#125;&#125; ÂÆ¢Êà∑Á´Ø 123456789101112131415package com.glmapper.framework.model.lsp;//ÂÆ¢Êà∑Á´ØÁ®ãÂ∫èpublic class ClientMain &#123; public static void main(String[] args) &#123; //Â≠êÁ±ª HSQDog hsqdog=new HSQDog(); hsqdog.eatFood(&quot;È•ºÂπ≤&quot;); //Áà∂Á±ª Dog dog = new HSQDog(); dog.eatFood(&quot;È•ºÂπ≤&quot;); //È°∂Â±ÇÁà∂Á±ª Animal animal = new HSQDog(); animal.eatFood(&quot;È•ºÂπ≤&quot;); &#125;&#125; ËøêË°åÁªìÊûú 123ÂìàÂ£´Â•áÂêÉÈ•ºÂπ≤ÂìàÂ£´Â•áÂêÉÈ•ºÂπ≤ÂìàÂ£´Â•áÂêÉÈ•ºÂπ≤ ÂèØ‰ª•ÁúãÂá∫Êàë‰ª¨ÊúÄÂºÄÂßãËØ¥ÁöÑÈÇ£Âè•ËØù‰ªª‰ΩïÁà∂Á±ªÂèØ‰ª•Âá∫Áé∞ÁöÑÂú∞ÊñπÔºåÂ≠êÁ±ª‰∏ÄÂÆöÂèØ‰ª•Âá∫Áé∞ÔºåÂèçËøáÊù•ÊòØ‰∏çÊàêÁ´ãÁöÑ„ÄÇÊàëÁöÑÁêÜËß£ÊòØÂ≠êÁ±ªÈÄöËøáÈõÜÊàêËé∑ÂèñÁöÑÁà∂Á±ªÁöÑÂ±ûÊÄßÂíåË°å‰∏∫ÔºåÂπ∂‰∏îÂ≠êÁ±ªËá™Ë∫´‰πüÂÖ∑ÊúâËá™Â∑±ÁöÑÂ±ûÊÄßÂíåË°å‰∏∫ÔºõÁà∂Á±ªÂèØ‰ª•Âá∫Áé∞ÁöÑÂú∞ÊñπÂøÖÁÑ∂ÊòØÈúÄË¶ÅÁî®Âà∞Áà∂Á±ªÁöÑÂ±ûÊÄßÊàñËÄÖË°å‰∏∫ÔºåËÄåÂ≠êÁ±ªÈÉΩÊ∂µÁõñ‰∫ÜÁà∂Á±ªÁöÑËøô‰∫õ‰ø°ÊÅØÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÅöÂà∞ÊõøÊç¢„ÄÇÂèçËøáÊù•‰∏çË°åÊòØÂõ†‰∏∫Áà∂Á±ªÂú®‰∏äËø∞ÁöÑ‰æãÂ≠ê‰∏≠Âè™ÊòØÂÖÖÂΩì‰∫Ü‰∏ÄÁßçÁ±ªÂûãÁ∫¶ÊùüÔºåÂÆÉÂèØËÉΩ‰∏çÂÖ∑ÊúâÂ≠êÁ±ªÁöÑÊüê‰∫õÁâπÂæÅÔºåÂõ†Ê≠§Â∞±Êó†Ê≥ïÂÅöÂà∞ÁúüÊ≠£ÁöÑÊõøÊç¢„ÄÇ ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÊòØÁªßÊâøÂ§çÁî®ÁöÑÂü∫Áü≥ÔºåÂè™ÊúâÂΩìÂ≠êÁ±ªÂèØ‰ª•ÊõøÊç¢ÊéâÂü∫Á±ªÔºåËΩØ‰ª∂Âçï‰ΩçÁöÑÂäüËÉΩ‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÊó∂ÔºåÂü∫Á±ªÊâçËÉΩË¢´ÁúüÊ≠£ÁöÑÂ§çÁî®ÔºåËÄåÂ≠êÁ±ª‰πüÊâçËÉΩÂ§üÂú®Âü∫Á±ªÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†Êñ∞ÁöÑÂäüËÉΩ„ÄÇ ‰æùËµñÂÄíËΩ¨ÂéüÂàôÂÆûÁé∞‚ÄúÂºÄÈó≠‚ÄùÂéüÂàôÁöÑÂÖ≥ÈîÆÊòØÊäΩË±°ÂåñÔºåÂπ∂‰∏î‰ªéÊäΩË±°ÂåñÂØºÂá∫ÂÖ∑‰ΩìÂåñÂÆûÁé∞„ÄÇÂ¶ÇÊûúËØ¥ÂºÄÈó≠ÂéüÂàôÊòØÈù¢ÂêëÂØπË±°ËÆæËÆ°ÁöÑÁõÆÊ†áÁöÑËØùÔºå‰æùËµñÂÄíËΩ¨ÂéüÂàôÂ∞±ÊòØÈù¢ÂêëÂØπË±°ËÆæËÆ°ÁöÑ‰∏ªË¶ÅÊú∫Âà∂Ôºàjava‰∏éÊ®°ÂºèÔºâ„ÄÇ‰æùËµñÂÄíËΩ¨ÂéüÂàôÔºöË¶Å‰æùËµñ‰∏éÊäΩË±°Ôºå‰∏ç‰æùËµñ‰∫éÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ ÊÄé‰πàÁêÜËß£Âë¢? 1ÔºâÈ´òÂ±ÇÊ®°Âùó‰∏çÂ∫îËØ•Áõ¥Êé•‰æùËµñ‰∫éÂ∫ïÂ±ÇÊ®°ÂùóÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåËÄåÂ∫îËØ•‰æùËµñ‰∫éÂ∫ïÂ±ÇÁöÑÊäΩË±°„ÄÇÊç¢Ë®Ä‰πãÔºåÊ®°ÂùóÈó¥ÁöÑ‰æùËµñÊòØÈÄöËøáÊäΩË±°ÂèëÁîüÔºåÂÆûÁé∞Á±ª‰πãÈó¥‰∏çÂèëÁîüÁõ¥Êé•ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºåÂÖ∂‰æùËµñÂÖ≥Á≥ªÊòØÈÄöËøáÊé•Âè£ÊàñÊäΩË±°Á±ª‰∫ßÁîüÁöÑ„ÄÇ 2ÔºâÊé•Âè£ÂíåÊäΩË±°Á±ª‰∏çÂ∫îËØ•‰æùËµñ‰∫éÂÆûÁé∞Á±ªÔºåËÄåÂÆûÁé∞Á±ª‰æùËµñÊé•Âè£ÊàñÊäΩË±°Á±ª„ÄÇËøô‰∏ÄÁÇπÂÖ∂ÂÆû‰∏çÁî®Â§öËØ¥ÔºåÂæàÂ•ΩÁêÜËß£Ôºå‚ÄúÈù¢ÂêëÊé•Âè£ÁºñÁ®ã‚ÄùÊÄùÊÉ≥Ê≠£ÊòØËøôÁÇπÁöÑÊúÄÂ•Ω‰ΩìÁé∞ È¶ñÂÖàÊòØÁ¨¨‰∏ÄÁÇπÔºå‰ªéÂ§çÁî®ÁöÑËßíÂ∫¶Êù•ËØ¥ÔºåÈ´òÂ±ÇÊ¨°ÁöÑÊ®°ÂùóÊòØËÆæËÆ°ËÄÖÂ∫îÂΩìÂ§çÁî®ÁöÑ„ÄÇ‰ΩÜÊòØÂú®‰º†ÁªüÁöÑËøáÁ®ãÊÄßÁöÑËÆæËÆ°‰∏≠ÔºåÂ§çÁî®Âç¥‰æßÈáç‰∫éÂÖ∑‰ΩìÂ±ÇÊ¨°Ê®°ÂùóÁöÑÂ§çÁî®„ÄÇÊØîÂ¶ÇÁÆóÊ≥ïÁöÑÂ§çÁî®ÔºåÊï∞ÊçÆÁªìÊûÑÁöÑÂ§çÁî®ÔºåÂáΩÊï∞Â∫ìÁöÑÂ§çÁî®Á≠âÔºåÈÉΩ‰∏çÂèØÈÅøÂÖçÊòØÂÖ∑‰ΩìÂ±ÇÊ¨°Ê®°ÂùóÈáåÈù¢ÁöÑÂ§çÁî®„ÄÇËæÉÈ´òÂ±ÇÊ¨°ÁöÑÁªìÊûÑ‰æùËµñ‰∫éËæÉ‰ΩéÂ±ÇÊ¨°ÁöÑÁªìÊûÑÔºåÁÑ∂ÂêéËæÉ‰ΩéÂ±ÇÊ¨°ÁöÑÁªìÊûÑÂèà‰æùËµñ‰∫éÊõ¥‰ΩéÂ±ÇÊ¨°ÁöÑÁªìÊûÑÔºåÁõ¥Âà∞‰æùËµñÂà∞ÊØè‰∏ÄË°å‰ª£Á†Å‰∏∫Ê≠¢„ÄÇÁÑ∂ÂêéÂØπ‰ΩéÂ±ÇÊ¨°‰øÆÊîπ‰πü‰ºöÈÄêÂ±Ç‰øÆÊîπÔºå‰∏ÄÁõ¥Âà∞ÊúÄÈ´òÂ±ÇÁöÑËÆæËÆ°Ê®°Âùó‰∏≠„ÄÇ ÂØπ‰∫é‰∏Ä‰∏™Á≥ªÁªüÊù•ËØ¥Ôºå‰∏ÄËà¨ÊäΩË±°Â±ÇÊ¨°Ë∂äÈ´òÔºåÂÆÉÁöÑÁ®≥ÂÆöÊÄßÂ∞±Ë∂äÂ•ΩÔºåÂõ†Ê≠§‰πüÊòØ‰Ωú‰∏∫Â§çÁî®ÁöÑÈáçÁÇπ„ÄÇ ‚ÄúÂÄíËΩ¨‚ÄùÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØÊåáÂ§çÁî®Â∫îÂΩìÂ∞ÜÂ§çÁî®ÁöÑÈáçÁÇπÊîæÂú®ÊäΩË±°Â±Ç‰∏äÔºåÂ¶ÇÊûúÊäΩË±°Â±ÇÊ¨°ÁöÑÊ®°ÂùóÁõ∏ÂØπÁã¨Á´ã‰∫éÂÖ∑‰ΩìÂ±ÇÊ¨°Ê®°ÂùóÁöÑËØùÔºåÈÇ£‰πàÊäΩË±°Â±ÇÊ¨°ÁöÑÊ®°ÂùóÁöÑÂ§çÁî®‰æøÊòØÁõ∏ÂØπËæÉ‰∏∫ÂÆπÊòìÁöÑ‰∫Ü„ÄÇ Âú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™javaÁ®ãÂ∫èÈúÄË¶ÅÂºïÁî®‰∏Ä‰∏™ÂØπË±°ÔºåÂ¶ÇÊûúËøô‰∏™ÂØπË±°Êúâ‰∏Ä‰∏™ÊäΩË±°Á±ªÂûãÁöÑËØùÔºåÂ∫îÂΩì‰ΩøÁî®Ëøô‰∏™ÊäΩË±°Á±ªÂûã‰Ωú‰∏∫ÂèòÈáèÁöÑÈùôÊÄÅÁ±ªÂûã„ÄÇÂú®‰∏äÈù¢Êàë‰ª¨Áîª‰∫ÜÂä®Áâ©ÂíåÂ∞èÁãóÁöÑÁ±ªÂõæÂÖ≥Á≥ªÔºåÂú®ÂÆ¢Êà∑Á´ØË∞ÉÁî®ÁöÑÊó∂ÂÄôÊúâ‰∏âÁßçÊñπÂºèÔºö 123456789//Â≠êÁ±ª(ÊñπÂºè1)HSQDog hsqdog=new HSQDog();hsqdog.eatFood(&quot;È•ºÂπ≤&quot;);//Áà∂Á±ªÔºàÊñπÂºè2ÔºâDog dog = new HSQDog();dog.eatFood(&quot;È•ºÂπ≤&quot;);//È°∂Â±ÇÁà∂Á±ªÔºàÊñπÂºè3ÔºâAnimal animal = new HSQDog();animal.eatFood(&quot;È•ºÂπ≤&quot;); Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÂìàÂ£´Â•áÔºàHSQDogÔºâÁöÑËØùÔºåÊàë‰ª¨‰∏çÂ∫îÂΩì‰ΩøÁî®ÊñπÂºè1ÔºåËÄåÊòØÂ∫îÂΩì‰ΩøÁî®ÊñπÂºè2ÊàñËÄÖÊñπÂºè3„ÄÇ Êé•Âè£ÈöîÁ¶ªÂéüÂàôÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºö‰ΩøÁî®Â§ö‰∏™‰∏ìÈó®ÁöÑÊé•Âè£ÊØî‰ΩøÁî®Âçï‰∏ÄÁöÑÊÄªÊé•Âè£Ë¶ÅÂ•Ω„ÄÇÊç¢Âè•ËØùËØ¥Ôºå‰ªé‰∏Ä‰∏™ÂÆ¢Êà∑Á±ªÁöÑËßíÂ∫¶Êù•ËÆ≤Ôºö‰∏Ä‰∏™Á±ªÂØπÂè¶Â§ñ‰∏Ä‰∏™Á±ªÁöÑ‰æùËµñÊÄßÂ∫îÂΩìÊòØÂª∫Á´ãÂú®ÊúÄÂ∞èÁöÑÊé•Âè£‰∏äÁöÑ„ÄÇËøô‰∏™ÂÖ∂ÂÆûÂú®Êàë‰ª¨ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠ÊòØÁªèÂ∏∏ÈÅáÂà∞ÁöÑ„ÄÇÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶ÅÁºñÂÜô‰∏Ä‰∏™ÂÆåÊàê‰∏Ä‰∏™‰∫ßÂìÅÁöÑ‰∏Ä‰∫õÊìç‰ΩúÊé•Âè£„ÄÇ12345678910111213141516package com.glmapper.framework.model.isp;/** * ‰∏Ä‰∏™‰∫ßÂìÅÊúçÂä°Êé•Âè£ * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏ãÂçà12:01:31 */public interface ProductService &#123; //Â¢ûÂä†‰∫ßÂìÅ public int addProduct(Product p); //Âà†Èô§‰∫ß‰∫ßÂìÅ public int deleteProduct(int pId); //‰øÆÊîπ‰∫ßÂìÅ public int updateProduct(Product p); //Êü•ËØ¢‰∏Ä‰∏™‰∫ßÂìÅ public Product queryProduct(int pId);&#125; OKÔºåÊàë‰ª¨Âú®ProductService‰∏≠Êèê‰æõ‰∫ÜÂØπ‰∫ßÂìÅÁöÑÂ¢ûÂà†ÊîπÊü•Ôºõ‰ΩÜÊòØÈöèÁùÄÈúÄÊ±ÇÂçáÁ∫ßÔºåÊàë‰ª¨ÈúÄË¶ÅÂèØ‰ª•Â¢ûÂä†ÂØπ‰∫ßÂìÅÊñ∞ÁöÑÊâπÈáèÂØºÂÖ•ÂíåÂØºÂá∫„ÄÇOKÔºåËøôÊó∂Âú®Êé•Âè£‰∏≠ÁªßÁª≠Êñ∞Â¢û‰∏§‰∏™ÊñπÊ≥ïÔºö1234//‰ªéexcel‰∏≠ÊâπÈáèÂØºÂÖ•public void batchImportFromExcel();//‰ªéexcel‰∏≠ÊâπÈáèÂØºÂØºÂá∫public void batchExportFromExcel(); ÁÑ∂ÂêéÈúÄÊ±ÇÂèàÈúÄË¶ÅÊâ©Â±ïÔºåÈúÄË¶ÅÂ¢ûÂä†Â¢ûÂä†Ë¥≠‰π∞‰∫ßÂìÅ„ÄÅ‰∫ßÂìÅËÆ¢ÂçïÁîü‰∫ß„ÄÅÊü•ËØ¢ËÆ¢Âçï„ÄÅËÆ¢ÂçïËØ¶ÊÉÖ‚Ä¶.ÔºõËøôÊ†∑‰∏ÄÊù•ÔºåÊàë‰ª¨ÁöÑProductServiceÂ∞±‰ºöÊÖ¢ÊÖ¢ÁöÑÊÄ•ÈÄüËÜ®ËÉÄ„ÄÇ‰∏éÊ≠§ÂØπÂ∫îÁöÑÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÈÄªËæëProductServiceImplÁ±ª‰πü‰ºöÂèòÂæóÈùûÂ∏∏ÁöÑÂ∫ûÂ§ßÔºåÂèØËÉΩÂçïÁ±ª‰ºöË∂ÖËøáÊï∞ÂçÉË°å‰ª£Á†Å„ÄÇ ÈÇ£‰πàÊàë‰ª¨Â∞±ÈúÄË¶ÅËøõË°åÊé•Âè£ÈöîÁ¶ªÔºåÂ∞Ü‰∫ßÂìÅÁöÑÂü∫Êú¨Êìç‰ΩúÂ¶ÇÂ¢ûÂà†ÊîπÊü•ÊîæÂú®‰∏Ä‰∏™Êé•Âè£ÔºåÂ∞Ü‰∫ßÂìÅËÆ¢ÂçïÂ§ÑÁêÜÊîæÂú®‰∏Ä‰∏™Êé•Âè£ÔºåÂ∞Ü‰∫ßÂìÅÁî≥Ë¥≠ÊîæÂú®‰∏Ä‰∏™Êé•Âè£ÔºåÂ∞ÜÊâπÈáèÊìç‰ΩúÊîæÂú®‰∏Ä‰∏™Êé•Âè£Á≠âÁ≠â‚Ä¶ÂØπ‰∫éÊØè‰∏Ä‰∏™Êé•Âè£Êàë‰ª¨Âè™ÂÖ≥ÂøÉÊüê‰∏ÄÁ±ªÁâπÂÆöÁöÑËÅåË¥£ÔºåËøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØÂíåÂçï‰∏ÄËÅåË¥£ÂéüÂàôÊúâÁÇπÊåÇÈí©‰∫Ü„ÄÇÈÄöËøáËøôÁßçËÆæËÆ°ÔºåÈôç‰Ωé‰∫ÜÂçï‰∏™Êé•Âè£ÁöÑÂ§çÊùÇÂ∫¶Ôºå‰ΩøÂæóÊé•Âè£ÁöÑ‚ÄúÂÜÖËÅöÊÄß‚ÄùÊõ¥È´òÔºå‚ÄúËÄ¶ÂêàÊÄß‚ÄùÊõ¥‰Ωé„ÄÇÁî±Ê≠§ÂèØ‰ª•ÁúãÂá∫Êé•Âè£ÈöîÁ¶ªÂéüÂàôÁöÑÂøÖË¶ÅÊÄß„ÄÇ Ëø™ÁâπÁ±≥Ê≥ïÂàôËø™ÁâπÁ±≥Ê≥ïÂàôÔºöÂèàÁß∞‰∏∫ÊúÄÂ∞ëÁü•ËØÜÂéüÂàôÔºåÂ∞±ÊòØËØ¥‰∏Ä‰∏™ÂØπË±°Â∫îÂΩìÂØπÂÖ∂‰ªñÂØπË±°Â∞ΩÂèØËÉΩÂ∞ëÁöÑ‰∫ÜËß£ÔºõÁúã‰∏ãËø™ÁâπÁ±≥Ê≥ïÂàôÁöÑÂá†ÁßçË°®Ëø∞Ôºö1.Âè™‰∏é‰Ω†Áõ¥Êé•ÁöÑÊúãÂèã‰ª¨ÈÄö‰ø°2.‰∏çË∑üÈôåÁîü‰∫∫ËØ¥ËØù3.ÊØè‰∏Ä‰∏™ËΩØ‰ª∂Âçï‰ΩçÂØπÂÖ∂‰ªñÁöÑÂçï‰ΩçÈÉΩÂè™ÊúâÊúÄÂ∞ëÁü•ËØÜÔºåËÄå‰∏îÂ±ÄÈôê‰∫éÈÇ£‰∫õ‰∏éÊú¨Âçï‰ΩçÂØÜÂàáÁõ∏ÂÖ≥ÁöÑËΩØ‰ª∂Âçï‰Ωç ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰∏§‰∏™Èõ∑‰∏çÂøÖÂΩºÊ≠§Áõ¥Êé•ÈÄö‰ø°ÔºåÈÇ£‰πàËøô‰∏§‰∏™Á±ªÂ∞±‰∏çÂ∫îÂΩìÂèëÁîüÁõ¥Êé•ÁöÑÁõ∏‰∫í‰ΩúÁî®„ÄÇÂ¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™Á±ªÈúÄË¶ÅÁîµÊ≥≥Âè¶‰∏Ä‰∏™Á±ªÁöÑÊüê‰∏Ä‰∏™ÊñπÊ≥ïÁöÑËØùÔºåÂèØ‰ª•ÈÄöËøáÁ¨¨‰∏âËÄÖËøõË°åÊ∂àÊÅØÁöÑËΩ¨Âèë„ÄÇ‰ª£Á†ÅÁúã‰∏ãÔºö Êüê‰∏™‰∫∫ 1234567891011121314package com.glmapper.framework.model.isp;/** * Êüê‰∏™‰∫∫ * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏ãÂçà12:39:45 */public class SomeOne &#123; //ÂÖ∑‰ΩìoprateionË°å‰∏∫ public void oprateion(Friend friend)&#123; Stranger stranger =friend.provide(); stranger.oprateion3(); &#125;&#125;SomeOneÂÖ∑Êúâ‰∏Ä‰∏™oprateionÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÊé•ÂèóFriend‰∏∫ÂèÇÊï∞ÔºåÊ†πÊçÆ‰∏äÈù¢ÁöÑÂÆö‰πâÂèØ‰ª•Áü•ÈÅìFriendÊòØSomeOneÁöÑ‚ÄúÊúãÂèã‚ÄùÔºàÁõ¥Êé•ÈÄö‰ø°‰∫ÜÔºâ ÊúãÂèã 123456789101112131415package com.glmapper.framework.model.isp;/** * ÊúãÂèã * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏ãÂçà12:40:09 */public class Friend &#123; private Stranger stranger = new Stranger(); public Stranger provide()&#123; return stranger; &#125; public void opration2()&#123; &#125;&#125;ÂæàÊòéÊòæSomeOneÁöÑoprationÊñπÊ≥ï‰∏çÊª°Ë∂≥Ëø™ÁâπÁ±≥Ê≥ïÂàôÔºåÂõ†‰∏∫Ëøô‰∏™ÊñπÊ≥ï‰∏≠Ê∂âÂèäÂà∞‰∫ÜÈôåÁîü‰∫∫Stranger,Stranger‰∏çÊòØSomeOneÁöÑÊúãÂèã OKÔºåÊàë‰ª¨Êù•ÈÄöËøáËø™ÁâπÁ±≥Ê≥ïÂàôËøõË°åÊîπÈÄ†„ÄÇ ÊîπÈÄ†‰πãÂêéÁöÑSomeOne 12345678910111213package com.glmapper.framework.model.isp;/** * Êüê‰∏™‰∫∫ * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏ãÂçà12:39:45 * */public class SomeOne &#123; //ÂÖ∑‰ΩìoprateionË°å‰∏∫ public void oprateion(Friend friend)&#123; friend.forward(); &#125;&#125; ÊîπÈÄ†‰πãÂêéÁöÑÊúãÂèã 1234567891011121314151617package com.glmapper.framework.model.isp;/** * ÊúãÂèã * @author glmapper * @date 2017Âπ¥12Êúà10Êó•‰∏ãÂçà12:40:09 * */public class Friend &#123; private Stranger stranger = new Stranger(); public void opration2()&#123; &#125; //ËøõË°åËΩ¨Âèë public void forward() &#123; stranger.oprateion3(); &#125;&#125; Áî±‰∫éË∞ÉÁî®‰∫ÜËΩ¨ÂèëÔºåÂõ†Ê≠§SomeOne‰∏≠Â∞±‰∏ç‰ºöÂíåÈôåÁîü‰∫∫StrangerÁõ¥Êé•ÁöÑÂÖ≥Á≥ªÂ∞±Ë¢´ÂøΩÁï•‰∫Ü„ÄÇÊª°Ë∂≥‰∫ÜÁõ¥Êé•ÂíåÊúãÂèãÈÄö‰ø°„ÄÅ‰∏ç‰∏éÈôåÁîü‰∫∫ËØ¥ËØùÁöÑÊù°‰ª∂„ÄÇ‰ΩÜÊòØËø™ÁâπÁ±≥Ê≥ïÂàôÂ∏¶Êù•ÁöÑÈóÆÈ¢ò‰πüÊòØÂæàÊòéÊòæÁöÑÔºöÂç≥‰ºöÂú®Á≥ªÁªü‰∏≠ÈÄ†Âá∫Â§ßÈáèÁöÑÂ∞èÊñπÊ≥ïÊï£ËêΩÂú®Á≥ªÁªüÁöÑÂêÑ‰∏™ËßíËêΩÔºåËøô‰∫õÊñπÊ≥ï‰ªÖ‰ªÖÊòØ‰º†ÈÄíÊ∂àÊÅØÁöÑË∞ÉÁî®Ôºå‰∏éÁ≥ªÁªüÁöÑ‰∏öÂä°ÈÄªËæëÊ≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ª„ÄÇ Âçï‰∏ÄËÅåË¥£‰∏äÈù¢Âú®Êé•Âè£ÈöîÁ¶ª‰∏≠ÊúâÊèêÂà∞ËøáÔºåÂçï‰∏ÄËÅåË¥£ÂÖ∂ÂÆûÂæàÂ•ΩÁêÜËß£ÔºåËß£ÈáäÂ∞ΩÈáèÁöÑ‰ΩøÂæóÊàë‰ª¨ÁöÑÊØè‰∏Ä‰∏™Á±ªÊàñËÄÖÊé•Âè£Âè™ÂÆåÊàêÊú¨ËÅåÂ∑•‰Ωú‰ª•ÂÜÖÁöÑ‰∫ãÊÉÖÔºå‰∏çÂèÇ‰∏éÂÖ∂‰ªñ‰ªª‰ΩïÈÄªËæë„ÄÇÊØîÂ¶ÇËØ¥ËãπÊûúÊ¶®Ê±ÅÊú∫ÊàëÂ∞±Âè™Áî®Êù•Ê¶®ËãπÊûúÊ±ÅÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊ¶®ÈªÑÁìúÊ±ÅÁöÑËØùÔºå‰Ω†Â∞±Âæó‰π∞‰∏Ä‰∏™ÈªÑÁìúÊ¶®Ê±ÅÊú∫„ÄÇ ÊÄªÁªìOK ÔºåËá≥Ê≠§ÔºåËÆæËÆ°ÂéüÂàôÈÉ®ÂàÜÂ∞±Â§ç‰π†ÂÆå‰∫Ü„ÄÇÊÄªÁªì‰∏Ä‰∏ãÔºö Âçï‰∏ÄËÅåË¥£ÂéüÂàôË¶ÅÊ±ÇÂÆûÁé∞Á±ªË¶ÅËÅåË¥£Âçï‰∏ÄÔºõ ÈáåÊ∞èÊõøÊç¢ÂéüÂàôË¶ÅÊ±Ç‰∏çË¶ÅÂéªÁ†¥ÂùèÁªßÊâøÁ≥ªÁªüÔºõ ‰æùËµñÂÄíÁΩÆÂéüÂàôË¶ÅÊ±ÇÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÔºõ Êé•Âè£ÈöîÁ¶ªÂéüÂàôË¶ÅÊ±ÇÂú®ËÆæËÆ°Êé•Âè£ÁöÑÊó∂ÂÄôË¶ÅÁ≤æÁÆÄÂçï‰∏ÄÔºõ Ëø™Á±≥ÁâπÊ≥ïÂàôË¶ÅÊ±ÇË¶ÅÈôç‰ΩéËÄ¶ÂêàÔºõ ÂºÄÈó≠ÂéüÂàôÊòØÊÄªÁ∫≤ÔºåË¶ÅÊ±ÇÂØπÊâ©Â±ïÂºÄÂèëÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇ Â§ßÂÆ∂Âë®Êú´ÊÑâÂø´ÔºÅÔºàÂ¶ÇÊûúÊúâ‰∏çÂΩì‰πãÂ§ÑÔºåÂ∏åÊúõÂ§ßÂÆ∂ÂèäÊó∂ÊåáÂá∫ÔºåÂ§öË∞¢ÔºÅÔºâ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ªéÊ∫êÁ†ÅÊù•ËÅä‰∏ÄËÅähashmap]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-base-hashmap%2F</url>
    <content type="text"><![CDATA[HashMap‰∏∫‰ªÄ‰πà‰ºöÊòØÈù¢ËØï‰∏≠ÁöÑÂ∏∏ÂÆ¢Âë¢ÔºüÊàëËßâÂæóÊúâ‰ª•‰∏ãÂá†ÁÇπÂéüÂõ†Ôºö* ËÄÉÂØü‰Ω†ÈòÖËØªÊ∫êÁ†ÅÁöÑËÉΩÂäõ* ÊòØÂê¶‰∫ÜËß£ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑ* ÊòØÂê¶‰∫ÜËß£ÂÖ∂Â≠òÂÇ®ÂíåÊü•ËØ¢ÈÄªËæë* ÂØπÈùûÁ∫øÁ®ãÂÆâÂÖ®ÊÉÖÂÜµ‰∏ãÁöÑ‰ΩøÁî®ËÄÉËôëÂâçÊÆµÊó∂Èó¥‰∏ÄÂêå‰∫ãÈù¢ËØïËöÇËöÅÈáëÊúçÔºåÂ∞±Ë¢´ÈóÆÂà∞‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºõÂÖ∂ÂÆûÂæàÂ§öÊÉÖÂÜµ‰∏ãÈÉΩÊòØ‰ªéhashMap,hashTable,ConcurrentHahMap‰∏âËÄÖ‰πãÈó¥ÁöÑÂÖ≥Á≥ªË°çÁîüËÄåÂá∫ÔºåÂΩìÁÑ∂‰πüÊúâÁõ¥Êé•Â∞±ÈíàÂØπhashMapÂéüÁêÜÁõ¥Êé•ËøõË°åËÄÉÂØüÁöÑ„ÄÇÂÆûÈôÖ‰∏äÊú¨Ë¥®ÈÉΩ‰∏ÄÊ†∑ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜËÄÉÂØü‰Ω†ÊòØÂê¶ÂØπÈõÜÂêà‰∏≠Ëøô‰∫õÂ∏∏Áî®ÈõÜÂêàÁöÑÂéüÁêÜ„ÄÅÂÆûÁé∞Âíå‰ΩøÁî®Âú∫ÊôØÊòØÂê¶Ê∏ÖÊ•ö„ÄÇ‰∏ÄÊñπÈù¢ÊòØÊàë‰ª¨ÂºÄÂèë‰∏≠Áî®ÁöÑÂ§öÔºåÂΩìÁÑ∂Áî®ÁöÑ‰∫∫‰πüÂ∞±Â§öÔºå‰ΩÜÊòØÁî®ÁöÑÂ•ΩÁöÑ‰∫∫Âç¥‰∏çÂ§öÔºàÊàë‰πüÁî®ÁöÑÂ§öÔºåÁî®ÁöÑ‰πü‰∏çÂ•ΩÔºâ„ÄÇÊâÄ‰ª•Â∞±ÂÄüÊ≠§Êú∫‰ºöÔºàÂº∫Ë°åËπ≠‰∏ÄÊ≥¢ÔºâÂÜçÊù•Êçã‰∏ÄÊçãËøô‰∏™HashMap„ÄÇÊú¨ÊñáÂü∫‰∫éjdk1.7.0_80Ôºõjdk 1.8‰πãÂêéÁï•ÊúâÊîπÂä®ÔºåËøô‰∏™ÂêéÈù¢ÁªÜËØ¥„ÄÇ ÁªßÊâøÂÖ≥Á≥ª123public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable hashMapÂÆûÁé∞‰∫ÜMap„ÄÅCloneable„ÄÅSerializable‰∏â‰∏™Êé•Âè£ÔºåÂπ∂‰∏îÁªßÊâø‰∫ÜAbstractMapËøô‰∏™ÊäΩË±°Á±ª„ÄÇhashTableÁªßÊâøÁöÑÊòØDictionaryËøô‰∏™Á±ªÔºåÂêåÊó∂‰πüÂÆûÁé∞‰∫ÜMap„ÄÅCloneable„ÄÅSerializable‰∏â‰∏™Êé•Âè£„ÄÇ ‰∏ªË¶ÅÂ±ûÊÄß DEFAULT_INITIAL_CAPACITY ÈªòËÆ§ÂàùÂßãÂÆπÈáè 16 Ôºàhashtable ÊòØ11Ôºâ Â∏∏Èáè 12345/** * The default initial capacity - MUST be a power of two. * ÈªòËÆ§ÂàùÂßãÂÆπÈáè-ÂøÖÈ°ªÊòØ2ÁöÑÂπÇ„ÄÇ */ static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 MAXIMUM_CAPACITY ÈªòËÆ§ÊúÄÂ§ßÂÆπÈáè Â∏∏Èáè 1234567/** * The maximum capacity, used if a higher value is implicitly specified * by either of the constructors with arguments. * MUST be a power of two &lt;= 1&lt;&lt;30. *Â¶ÇÊûúÊúâ‰∏Ä‰∏™Êõ¥Â§ßÁöÑÂÄºË¢´Áî®‰∫éÊûÑÈÄ†HashMap,Âàô‰ΩøÁî®ÊúÄÂ§ßÂÄº */ static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; DEFAULT_LOAD_FACTOR Ë¥üËΩΩÂõ†Â≠ê(ÈªòËÆ§0.75) Â∏∏Èáè 12345/** * The load factor used when none specified in constructor. * Âä†ËΩΩÂõ†Â≠êÔºåÂ¶ÇÊûúÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≤°ÊúâÊåáÂÆöÔºåÂàô‰ΩøÁî®ÈªòËÆ§ÁöÑ */ static final float DEFAULT_LOAD_FACTOR = 0.75f; EMPTY_TABLE ÈªòËÆ§ÁöÑÁ©∫Ë°® 12345/** * An empty table instance to share when the table is not inflated. * ÂΩìË°®‰∏çËÜ®ËÉÄÊó∂ÂÖ±‰∫´ÁöÑÁ©∫Ë°®ÂÆû‰æã„ÄÇ */ static final Entry&lt;?,?&gt;[] EMPTY_TABLE = &#123;&#125;; table Ë°®ÔºåÂøÖË¶ÅÊó∂Ë∞ÉÊï¥Â§ßÂ∞è„ÄÇÈïøÂ∫¶ÂøÖÈ°ªÊòØ‰∏§‰∏™ÂπÇ„ÄÇËøô‰∏™‰πüÊòØhashmap‰∏≠ÁöÑÊ†∏ÂøÉÁöÑÂ≠òÂÇ®ÁªìÊûÑ 1234/** * The table, resized as necessary. Length MUST Always be a power of two. */ transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE; size Ë°®Á§∫HashMap‰∏≠Â≠òÊîæKVÁöÑÊï∞ÈáèÔºà‰∏∫ÈìæË°®/Ê†ë‰∏≠ÁöÑKVÁöÑÊÄªÂíåÔºâ 1234/** * The number of key-value mappings contained in this map. */ transient int size; threshold Êâ©ÂÆπÂèòÈáèÔºåË°®Á§∫ÂΩìHashMapÁöÑsizeÂ§ß‰∫éthresholdÊó∂‰ºöÊâßË°åresizeÊìç‰Ωú„ÄÇthreshold=capacity*loadFactor 1234567/** * The next size value at which to resize (capacity * load factor). * @serial */ // If table == EMPTY_TABLE then this is the initial capacity at which the // table will be created when inflated. int threshold; loadFactor Ë¥üËΩΩÂõ†Â≠ê Ë¥üËΩΩÂõ†Â≠êÁî®Êù•Ë°°ÈáèHashMapÊª°ÁöÑÁ®ãÂ∫¶„ÄÇloadFactorÁöÑÈªòËÆ§ÂÄº‰∏∫0.75f„ÄÇËÆ°ÁÆóHashMapÁöÑÂÆûÊó∂Ë£ÖËΩΩÂõ†Â≠êÁöÑÊñπÊ≥ï‰∏∫Ôºösize/capacityÔºåËÄå‰∏çÊòØÂç†Áî®Ê°∂ÁöÑÊï∞ÈáèÂéªÈô§‰ª•capacity„ÄÇÔºàÊ°∂ÁöÑÊ¶ÇÂøµÂêéÁª≠‰ªãÁªçÔºâ 123456/** * The load factor for the hash table. * * @serial */final float loadFactor; modCountËøô‰∏™HashMapÁöÑÁªìÊûÑ‰øÆÊîπÁöÑÊ¨°Êï∞ÊòØÈÇ£‰∫õÊîπÂèòHashMap‰∏≠ÁöÑÊò†Â∞ÑÊï∞ÈáèÊàñ‰øÆÊîπÂÖ∂ÂÜÖÈÉ®ÁªìÊûÑ(‰æãÂ¶Çrehash)ÁöÑÈÇ£‰∫õ„ÄÇËøô‰∏™Â≠óÊÆµÁî®‰∫é‰ΩøËø≠‰ª£Âô®ÂØπHashMapÂ§±Ë¥•Âø´ÈÄüÁöÑÈõÜÂêàËßÜÂõæ„ÄÇ(ËßÅConcurrentModificationException)„ÄÇ 12345678/** * The number of times this HashMap has been structurally modified * Structural modifications are those that change the number of mappings in * the HashMap or otherwise modify its internal structure (e.g., * rehash). This field is used to make iterators on Collection-views of * the HashMap fail-fast. (See ConcurrentModificationException). */ transient int modCount; hashSeed ‰∏éÊ≠§ÂÆû‰æãÁõ∏ÂÖ≥ËÅîÁöÑÈöèÊú∫ÂÄºÔºåÁî®‰∫éÂìàÂ∏åÈîÆÁöÑÊï£Âàó‰ª£Á†ÅÔºå‰ΩøÊï£ÂàóÂÜ≤Á™ÅÊõ¥ÈöæÊâæÂà∞„ÄÇÂ¶ÇÊûú0ÔºåÈÇ£‰πàÊõø‰ª£ÂìàÂ∏åÊòØÁ¶ÅÁî®ÁöÑ„ÄÇ 123456/** * A randomizing value associated with this instance that is applied to * hash code of keys to make hash collisions harder to find. If 0 then * alternative hashing is disabled. */ transient int hashSeed = 0; ÁªìÊûÑÂàÜÊûê1static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; hashmap‰∏≠ÊòØÈÄöËøá‰ΩøÁî®‰∏Ä‰∏™ÁªßÊâøËá™Map‰∏≠ÂÜÖÈÉ®Á±ªEntryÁöÑEntryÈùôÊÄÅÂÜÖÈÉ®Á±ªÊù•Â≠òÂÇ®ÊØè‰∏Ä‰∏™K-VÂÄºÁöÑ„ÄÇÁúã‰∏ãÂÖ∑‰Ωì‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; //ÈîÆÂØπË±° V value; //ÂÄºÂØπË±° Entry&lt;K,V&gt; next; //ÊåáÂêëÈìæË°®‰∏≠‰∏ã‰∏Ä‰∏™EntryÂØπË±°ÔºåÂèØ‰∏∫nullÔºåË°®Á§∫ÂΩìÂâçEntryÂØπË±°Âú®ÈìæË°®Â∞æÈÉ® int hash; //ÈîÆÂØπË±°ÁöÑhashÂÄº /** * ÊûÑÈÄ†ÂØπË±° */ Entry(int h, K k, V v, Entry&lt;K,V&gt; n) &#123; value = v; next = n; key = k; hash = h; &#125; /** * Ëé∑Âèñkey */ public final K getKey() &#123; return key; &#125; /** * Ëé∑Âèñvalue */ public final V getValue() &#123; return value; &#125; /** * ËÆæÁΩÆvalueÔºåËøôÈáåËøîÂõûÁöÑÊòØoldValue(Ëøô‰∏™‰∏çÂ§™ÊòéÁôΩÔºåÂì™‰ΩçÂ§ß‰Ω¨Ê∏ÖÊ•öÁöÑÂèØ‰ª•ÁïôË®ÄËß£Èáä‰∏ãÔºåÈùûÂ∏∏ÊÑüË∞¢) */ public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; /** * ÈáçÂÜôequalsÊñπÊ≥ï */ public final boolean equals(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry e = (Map.Entry)o; Object k1 = getKey(); Object k2 = e.getKey(); if (k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2))) &#123; Object v1 = getValue(); Object v2 = e.getValue(); if (v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2))) return true; &#125; return false; &#125; /** * ÈáçÂÜôhashCodeÊñπÊ≥ï */ public final int hashCode() &#123; return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue()); &#125; public final String toString() &#123; return getKey() + &quot;=&quot; + getValue(); &#125; /** * This method is invoked whenever the value in an entry is * overwritten by an invocation of put(k,v) for a key k that&apos;s already * in the HashMap. */ void recordAccess(HashMap&lt;K,V&gt; m) &#123; &#125; /** * This method is invoked whenever the entry is * removed from the table. */ void recordRemoval(HashMap&lt;K,V&gt; m) &#123; &#125; &#125; HashMapÊòØ‰∏Ä‰∏™Áî®‰∫éÂ≠òÂÇ®Key-ValueÈîÆÂÄºÂØπÁöÑÈõÜÂêàÔºåÊØè‰∏Ä‰∏™ÈîÆÂÄºÂØπ‰πüÂè´ÂÅöEntry„ÄÇËøô‰∫õ‰∏™ÈîÆÂÄºÂØπÔºàEntryÔºâÂàÜÊï£Â≠òÂÇ®Âú®‰∏Ä‰∏™Êï∞ÁªÑÂΩì‰∏≠ÔºåËøô‰∏™Êï∞ÁªÑÂ∞±ÊòØHashMapÁöÑ‰∏ªÂπ≤Ôºà‰πüÂ∞±ÊòØ‰∏äÈù¢ÁöÑtable‚ÄìÊ°∂Ôºâ„ÄÇÁúã‰∏ÄÂº†ÂõæÔºö hashmapÂàùÂßãÂåñÊó∂ÂêÑ‰∏™Á©∫Èó¥ÁöÑÈªòËÆ§ÂÄº‰∏∫nullÔºåÂΩìÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÔºàÂÖ∑‰ΩìÊèíÂÖ•‰∏ãÈù¢ÂàÜÊûêÔºâÔºåÊ†πÊçÆkeyÂÄºÊù•ËÆ°ÁÆóÂá∫ÂÖ∑‰ΩìÁöÑÁ¥¢Âºï‰ΩçÁΩÆÔºåÂ¶ÇÊûúÈáçÂ§çÔºåÂàô‰ΩøÁî®Â∞æÊèíÂÖ•Ê≥ïËøõË°åÊèíÂÖ•ÂêéÈù¢ÈìæË°®‰∏≠„ÄÇ Â∞æÊèíÊ≥ï‰πãÂâçÊàëÊòØÈÄöËøáÊèíÂÖ•17Êù°Êï∞ÊçÆÊù•ËØïÈ™åÁöÑÔºàÂÖ∑‰ΩìÊï∞ÊçÆÊï∞ÁõÆÈöèÊÑèÔºåË∂äÂ§ßÈáçÂ§çÁöÑÂá†ÁéáË∂äÈ´òÔºâ1234567public static void main(String[] args) throws Exception &#123; HashMap&lt;String, Object&gt; map=new HashMap&lt;&gt;(); for (int i = 0; i &lt; 170; i++) &#123; map.put(&quot;key&quot;+i, i); &#125; System.out.println(map); &#125; ÈÄöËøáÊñ≠ÁÇπÊü•ÁúãnextÔºåÂèØ‰ª•ÂæóÂá∫Êàë‰ª¨‰∏äÈù¢ÁöÑÁªìËÆ∫Ôºö1.Á¥¢ÂºïÂÜ≤Á™ÅÊó∂‰ºö‰ΩøÁî®ÈìæË°®Êù•Â≠òÂÇ®Ôºõ2.ÊèíÂÖ•ÈìæË°®ÁöÑÊñπÂºèÊòØ‰ªéÂ∞æÈÉ®ÂºÄÂßãÊèíÂÖ•ÁöÑÔºàÂÆòÊñπÁöÑËß£ÈáäÊòØ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂêéÊù•ÊèíÂÖ•ÁöÑÊï∞ÊçÆË¢´‰ΩøÁî®ÁöÑÈ¢ëÊ¨°ËæÉÈ´òÔºâÔºåËøôÊ†∑ÁöÑËØùÊúâÂà©‰∫éÊü•Êâæ„ÄÇ ‰∏ªË¶ÅÊñπÊ≥ïÊàë‰ª¨Âπ≥Êó∂Âú®ÂºÄÂèëÊòØÊúÄÂ∏∏Áî®ÁöÑhashMap‰∏≠ÁöÑÊñπÊ≥ïÊó†ÈùûÂ∞±ÊòØÂÖàÂàõÂª∫‰∏Ä‰∏™HashMapÂØπË±°ÔºåÁÑ∂ÂêéÂ≠òÔºåÊé•ÁùÄÂèñÔºõÂØπÂ∫îÁöÑÊñπÊ≥ïÂ∞±ÊòØÔºö ÊûÑÈÄ†ÂáΩÊï∞ putÂáΩÊï∞ getÂáΩÊï∞ ÊûÑÈÄ†ÂáΩÊï∞ 12345678910111213141516171819202122232425262728/** * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial * capacity and load factor. * * @param initialCapacity the initial capacity ÊåáÂÆöÁöÑÂàùÂßãÂåñÂÆπÈáèÂ§ßÂ∞è * @param loadFactor the load factor ÊåáÂÆöÁöÑË¥üËΩΩÂõ†Â≠ê * @throws IllegalArgumentException if the initial capacity is negative * or the load factor is nonpositive */ public HashMap(int initialCapacity, float loadFactor) &#123; //Â¶ÇÊûúÂàùÂßãÂåñÂÆπÈáèÂ∞è‰∫é0ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ if (initialCapacity &lt; 0) throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; + initialCapacity); //Â¶ÇÊûúÂàùÂßãÂåñÂÆπÈáèÂ§ß‰∫éÊúÄÂ§ßÂÆπÈáèÔºåÂàô‰ΩøÁî®ÈªòËÆ§ÊúÄÂ§ßÂÆπÈáè if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; //Â¶ÇÊûúË¥üËΩΩÂõ†Â≠êÂ∞è‰∫é0ÊàñËÄÖÈùûÊï∞ÂÄºÁ±ªÂûãÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&quot;Illegal load factor: &quot; + loadFactor); //ÂàùÂßãÂåñË¥üËΩΩÂõ†Â≠ê this.loadFactor = loadFactor; //ÂàùÂßãÂåñthreshold threshold = initialCapacity; //Ëøô‰∏™ÂàùÂßãÂåñÊñπÊ≥ïÊòØ‰∏™Á©∫ÊñπÊ≥ïÔºåÂ∫îËØ•ÊòØÊÑèÂú®HashMapÁöÑÂ≠êÁ±ª‰∏≠Áî±‰ΩøÁî®ËÄÖËá™Ë°åÈáçÂÜôËØ•ÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞ init(); &#125; Âè¶Â§ñ‰∏§‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÂÆûÈôÖ‰∏äÈÉΩÊòØÂØπ‰∏äÈù¢Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÁöÑË∞ÉÁî®Ôºö 12345678//Âè™Âà∂ÂÆöÈªòËÆ§ÂÆπÈáè public HashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR); &#125; //‰ΩøÁî®HashMapÈªòËÆ§ÁöÑÂÆπÈáèÂ§ßÂ∞èÂíåË¥üËΩΩÂõ†Â≠ê public HashMap() &#123; this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR); &#125; ËøòÊúâ‰∏Ä‰∏™ÊòØÔºö1234567public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1, DEFAULT_INITIAL_CAPACITY), DEFAULT_LOAD_FACTOR); inflateTable(threshold); putAllForCreate(m); &#125; ÊûÑÈÄ†‰∏Ä‰∏™Êò†Â∞ÑÂÖ≥Á≥ª‰∏éÊåáÂÆö Map Áõ∏ÂêåÁöÑÊñ∞ HashMap„ÄÇÊâÄÂàõÂª∫ÁöÑ HashMap ÂÖ∑ÊúâÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê (0.75) ÂíåË∂≥‰ª•ÂÆπÁ∫≥ÊåáÂÆö Map ‰∏≠Êò†Â∞ÑÂÖ≥Á≥ªÁöÑÂàùÂßãÂÆπÈáè„ÄÇ putÊñπÊ≥ïÈ¶ñÂÖàÔºåÊàë‰ª¨ÈÉΩÁü•ÈÅìhashmap‰∏≠ÁöÑkeyÊòØÂÖÅËÆ∏‰∏∫nullÁöÑÔºåËøô‰∏ÄÁÇπ‰πüÊòØÈù¢ËØï‰∏≠ÊúÄÂ∏∏ÈóÆÂà∞ÁöÑÁÇπ„ÄÇÈÇ£ÊàëÂÖàÁúã‰∏ã‰∏∫‰ªÄ‰πàÂèØ‰ª•Â≠ònull‰Ωú‰∏∫keyÂÄº„ÄÇ 123456789101112131415161718192021222324252627282930public V put(K key, V value) &#123; //Â¶ÇÊûútableÊòØÁ©∫ÁöÑ if (table == EMPTY_TABLE) &#123; //inflateÔºöÊâ©ÂÆπ/ËÜ®ËÉÄÁöÑÊÑèÊÄù inflateTable(threshold); &#125; //Â¶ÇÊûúkey‰∏∫null Ê≠§Â§ÑÊï≤‰∏ãÊ°åÂ≠êÔºå‰∏∫‰ªÄ‰πàÂèØ‰ª•Â≠ònullÔºü if (key == null) //ÊâßË°åputForNullKeyÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÂ¶ÇÊûúkey‰∏∫nullÔºåÂ∞±Â∞ÜÂΩìÂâçÁöÑk-vÂ≠òÊîæÂà∞table[0],Âç≥Á¨¨‰∏Ä‰∏™Ê°∂„ÄÇ return putForNullKey(value); //ÂØπkeyËøõË°å‰∏ÄÊ¨°hashËøêÁÆóÔºåËé∑ÂèñhashÂÄº int hash = hash(key); //Ê†πÊçÆkeyÂÄºÂæóhashÂÄºÂíåË°®ÁöÑÈïøÂ∫¶Êù•ËÆ°ÁÆóÁ¥¢Âºï‰ΩçÁΩÆ int i = indexFor(hash, table.length); //ÁßªÂä®Êï∞ÊçÆÔºåÊèíÂÖ•Êï∞ÊçÆ for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); //‰∏äÈù¢Entry‰∏≠ÁöÑsetValue‰∏≠‰πüÊúâÊèêÂà∞ÔºåËøîÂõûÁöÑÈÉΩÊòØÊóßÁöÑÊï∞ÊçÆ return oldValue; &#125; &#125; modCount++; addEntry(hash, key, value, i); return null; &#125; hashÊñπÊ≥ïÔºöÊ£ÄÁ¥¢ÂØπË±°ÂìàÂ∏å‰ª£Á†ÅÔºåÂπ∂Â∞ÜÈôÑÂä†ÂìàÂ∏åÂáΩÊï∞Â∫îÁî®‰∫éÁªìÊûúÂìàÂ∏åÔºåËØ•ÂìàÂ∏åÂáΩÊï∞Èò≤Ê≠¢Ë¥®ÈáèÂ∑ÆÁöÑÂìàÂ∏åÂáΩÊï∞„ÄÇ ËøôÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫HashMap‰ΩøÁî®‰∏§‰∏™ÈïøÂ∫¶ÁöÑÂìàÂ∏åË°®ÔºåÂê¶Âàô‰ºöÁ¢∞Âà∞hashCodeÁöÑÂÜ≤Á™ÅÔºåËøô‰∫õhashCodesÂú®‰Ωé‰Ωç‰∏äÊ≤°ÊúâÂå∫Âà´„ÄÇ Ê≥®ÊÑèÔºöÁ©∫ÈîÆÊÄªÊòØÊò†Â∞ÑÂà∞Êï£Âàó0ÔºåÂõ†Ê≠§Á¥¢Âºï‰∏∫0„ÄÇ1234567891011121314/** final int hash(Object k) &#123; int h = hashSeed; if (0 != h &amp;&amp; k instanceof String) &#123; return sun.misc.Hashing.stringHash32((String) k); &#125; h ^= k.hashCode(); //Ëøô‰∏™ÂáΩÊï∞Á°Æ‰øùÂú®ÊØè‰∏™ÊØîÁâπ‰ΩçÁΩÆ‰∏ä‰ªÖ‰ª•ÊÅíÂÆöÂÄçÊï∞‰∏çÂêå //ÁöÑÊï£ÂàóÁ†ÅÂÖ∑ÊúâÊúâÈôêÊï∞ÈáèÁöÑÂÜ≤Á™ÅÔºàÂú®ÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê‰∏ãÂ§ßÁ∫¶‰∏∫8Ôºâ„ÄÇ h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12); return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4); &#125; ÂÜ≤Á™ÅÂÖ∑‰ΩìËøáÁ®ãÊèèËø∞Ôºö ‰∏Ä‰∏™Á©∫ÁöÑhashmapË°® ÊèíÂÖ•ÂÖÉÁ¥†ÔºåÈÄöËøáhashËÆ°ÁÆóÂæóÂá∫Á¥¢Âºï‰∏∫3ÔºåÂõ†‰∏∫ÂΩìÂâç3ÁöÑ‰ΩçÁΩÆÊ≤°ÊúâÂÖÉÁ¥†ÔºåÂõ†Ê≠§Áõ¥Êé•ÊèíÂÖ•ËøõÂéªÂç≥ÂèØ ÂÜçÊ¨°ÊèíÂÖ•ÂÖÉÁ¥†ÔºåÈÄöËøáhashËÆ°ÁÆóÂæóÂá∫Á¥¢ÂºïËøòÊòØ3ÔºåÂèëÁîüÂÜ≤Á™ÅÔºåÂàôÂ∞ÜÂΩìÂâçÊñ∞ÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÊîæÂú®ÂéüÊù•ÁöÑÂ∑≤ÊúâÁöÑÂÖÉÁ¥†‰ΩçÁΩÆÔºåÂπ∂Â∞ÜÂÖ∂nextÊåáÂêëÂéüÊù•Â∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†„ÄÇgetÊñπÊ≥ïËøîÂõûÊåáÂÆöÈîÆÊò†Â∞ÑÂà∞ÁöÑÂÄº;Â¶ÇÊûúÊ≠§Êò†Â∞Ñ‰∏çÂåÖÂê´ÈîÆÊò†Â∞ÑÔºåÂàôËøîÂõûnull„ÄÇ123456789public V get(Object key) &#123; //ÂíåÂ≠ònull key‰∏ÄÊ†∑ÔºåÂèñÁöÑÊó∂ÂÄô‰πüÊòØ‰ªétable[0]Âèñ if (key == null) return getForNullKey(); //Ëé∑Âèñentry Entry&lt;K,V&gt; entry = getEntry(key); return null == entry ? null : entry.getValue(); &#125; getEntryÊñπÊ≥ï 12345678910111213141516171819final Entry&lt;K,V&gt; getEntry(Object key) &#123; //sizeÁ≠â‰∫é0ÔºåËØ¥ÊòéÂΩìÂâçhashMap‰∏≠Ê≤°ÊúâÂÖÉÁ¥†ÔºåÁõ¥Êé•ËøîÂõûnullÔºàÊØè‰∏™entryÈªòËÆ§ÂÄº‰∏∫nullÔºâ if (size == 0) &#123; return null; &#125; //Ê†πÊçÆkeyÂÄºËÆ°ÁÆóhashÂÄº int hash = (key == null) ? 0 : hash(key); //ÈÄöËøáhashÂÄºËé∑ÂèñÂà∞Á¥¢Âºï‰ΩçÁΩÆÔºåÊâæÂà∞ÂØπÂ∫îÁöÑÊ°∂ÈìæËøõË°åÈÅçÂéÜÊü•Êâæ for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next) &#123; Object k; //Â¶ÇÊûúÊâæÂà∞ÂàôËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâÈìæË°®ÊåáÈíàÁßªÂä®Âà∞‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁªßÁª≠Êü•Êâæ„ÄÇ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; return null; &#125; Êâ©ÂÆπÊú∫Âà∂Âú®ÂâçÈù¢ÊèêÂà∞ËøáthresholdÔºåÊâ©ÂÆπÂèòÈáèÔºåË°®Á§∫ÂΩìHashMapÁöÑsizeÂ§ß‰∫éthresholdÊó∂‰ºöÊâßË°åresizeÊìç‰Ωú„ÄÇÂÖ∂ËÆ°ÁÆóÊñπÂºèÊòØÔºöthreshold=capacity*loadFactor„ÄÇ‰ªé‰∏äÈù¢ÁöÑÂºèÂ≠ê‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂæóÁü•hashmapÁöÑÊâ©ÂÆπÊó∂Êú∫ÊòØÂΩìÂâçÂΩìÂâçsizeÁöÑÂÄºË∂ÖËøáÂÆπÈáè‰πò‰ª•Ë¥üËΩΩÂõ†Â≠êÊó∂Â∞±‰ºöËß¶ÂèëÊâ©ÂÆπ„ÄÇÊù•Áúã‰∏ãÊ∫êÁ†ÅÔºö 123456789101112131415161718192021void addEntry(int hash, K key, V value, int bucketIndex) &#123; //Â¶ÇÊûúÂΩìÂâçsizeË∂ÖËøáthreshold Âπ∂‰∏îÊª°Ë∂≥Ê°∂Á¥¢Âºï‰ΩçÁΩÆ‰∏ç‰∏∫nullÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâ©ÂÆπ if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; //Êâ©ÂÆπ‰πãÂêé‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄç resize(2 * table.length); //ÈáçÊñ∞ËÆ°ÁÆóhashÂÄº hash = (null != key) ? hash(key) : 0; //ÈáçÂÜôËÆ°ÁÆóÁ¥¢Âºï bucketIndex = indexFor(hash, table.length); &#125; //ÊâßË°åÂÖ∑‰ΩìÁöÑÊèíÂÖ•Êìç‰Ωú createEntry(hash, key, value, bucketIndex); &#125;void createEntry(int hash, K key, V value, int bucketIndex) &#123; //ÂÖàÂèñÂà∞ÂΩìÂâçÊ°∂ÁöÑentry Entry&lt;K,V&gt; e = table[bucketIndex]; //Â∞ÜÊñ∞ÁöÑÊï∞ÊçÆÊèíÂÖ•Âà∞table[bucketIndex]ÔºåÂÜçÂ∞Ü‰πãÂâçÁöÑentryÈÄöËøáÈìæË°®ÁÆÄ‰ªãÂà∞table[bucketIndex]ÁöÑnextÊåáÂêëÔºõÂâçÈù¢ÁöÑÂõæÂ∑≤ÁªèËøõË°å‰∫ÜÊèèËø∞„ÄÇ table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e); size++; &#125; ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊâ©ÂÆπÂπ∂‰∏çÊòØÂú®hashmapÊª°‰∫Ü‰πãÂêéÊâçËøõË°åÁöÑÔºåÁúã‰∏ãÈù¢Êñ≠ÁÇπÔºö ÈÄöËøáÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞new‰∫Ü‰∏Ä‰∏™mapÂØπË±°Âá∫Êù•ÔºåÈÄöËøáforÂæ™ÁéØÊèíÂÖ•12Êù°Êï∞ÊçÆÔºåÊñ≠ÁÇπÂà∞ÊâßË°åÁªìÊùüÔºåÊàë‰ª¨ÁúãÂà∞ÂΩìÂâçtableÁöÑÂÆπÈáèÊòØ16ÔºåÊâ©ÂÆπÂèòÈáèthreshold‰∏∫12Ôºà16x0.75ÔºâÔºåÁé∞Âú®Êàë‰ª¨Â∞Ü12Êîπ‰∏∫13.Ê≠§Êó∂13ËøòÊòØÂ∞è‰∫é16ÁöÑÔºå‰ΩÜÊòØËøòÊòØËß¶Âèë‰∫Ühashmap ÁöÑÊâ©ÂÆπ„ÄÇÂΩìÂâçtableÂÆπÈáè‰∏∫32ÔºàÊâ©ÂÆπ‰∏∫‰∫Ü‰πãÂâçÁöÑ‰∏§ÂÄçÔºâÔºåthreshold‰∏∫24Ôºà32x0.75ÔºâÔºåÈÄöËøáËøô‰∏§ÁßçÂõæÊàë‰ª¨ÂæóÁü•Ôºö ÊØèÊ¨°Êâ©ÂÆπ‰πãÂêéÁöÑÂÆπÈáè‰∏∫ÂéüÊúâÂÆπÈáèÁöÑ‰∏§ÂÄçÔºà2nÔºâ Ëß¶ÂèëÊâ©ÂÆπÂπ∂‰∏çÊòØÂõ†‰∏∫ÂΩìÂâçhashmapÂØπË±°Â∑≤ÁªèÊª°‰∫ÜÔºåËÄåÊòØÈÄöËøáthreholdÊâ©ÂÆπÂèòÈáèÊù•ÊéßÂà∂Ëß¶ÂèëÊó∂Êú∫ÁöÑ„ÄÇ Â∞èÁªìÊú¨ÊñáÂ∞±ÂçïÁ∫ØÁöÑÊâí‰∫Ü‰∏ÄÊ≥¢Ê∫êÁ†ÅÔºåÂπ∂ÂØπÊ∫êÁ†Å‰∏≠ÁöÑÊ≥®ÈáäÂπ∂ÁªìÂêàËá™Â∑±ÁöÑÁêÜËß£ËøõË°å‰∫ÜÁøªËØëÔºåÈÄöËøáÊñ≠ÁÇπË∞ÉËØïÁÆÄÂçïÁöÑ‰ªãÁªç‰∫ÜÂ∞æÊèíÊ≥ïÂú®hashmapÁöÑÂ∫îÁî®„ÄÇÊúÄÂêéÈÄöËøáÂá†Âº†ÂõæÊèèËø∞‰∫Ü‰∏ãhashmapÂèëÁîüÁ¥¢ÂºïÂÜ≤Á™ÅÊó∂ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇhashmapÂú®Èù¢ËØïÊó∂ÁúüÁöÑÊòØÂèØÊ∑±ÂèØÊµÖÔºå‰ΩÜÊòØÊ∫êÁ†ÅÁöÑÈòÖËØªËøòÊòØÂæàÊúâÂøÖË¶ÅÁöÑÔºå‰∏ãÈù¢Êé®Ëçê‰∏§ÁØáÂçöÂÆ¢ÁªôÂ§ßÂÆ∂„ÄÇ 1.ÂÖ≥‰∫éhashmap‰∏éhashtableÁöÑÂÖ∑‰ΩìÂØπÊØîÂèØ‰ª•ÂèÇËÄÉËøô‰∏™ÂçöÂÆ¢ÔºöHashMapÂíåHashTableÂà∞Â∫ïÂì™‰∏çÂêåÔºü 2.ÂÖ≥‰∫é‰∏∫‰ªÄ‰πàhashmap‰∏≠ÁöÑÂÆπÈáèÂøÖÈ°ªÊòØ2ÁöÑÂπÇÔºåËøôÁØáÂçöÂÆ¢Â§ßÂÆ∂ÂèØ‰ª•Áúã‰∏ãÔºö‰ªÄ‰πàÊòØhashmapÔºü 3.ÂÖ≥‰∫éhashmapÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑËß£ÈáäÂπ∂ÂèëÂÆâÂÖ®ÈóÆÈ¢ò‰πãHashMap]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>hash</tag>
        <tag>map</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏Ä‰∏™ÊúãÂèãÂúàÊ≥õÂûãÈóÆÈ¢òÂºïÂèëÁöÑ‚ÄúÊ°àÂ≠ê‚Äù]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-base-one%2F</url>
    <content type="text"><![CDATA[Êò®Â§©ÊúãÂèãÂúàÈóÆ‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂØπ‰∫é‰∏ãÈù¢ÁöÑlistÔºå‰ΩïÂ¶ÇÂú®listÊ∑ªÂä†‰∏Ä‰∏™IntegerÂûãÊï¥Êï∞Ôºü1ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); ÊúâËøôÊ†∑Âá†ÁßçÂõûÁ≠îÔºö 1.‰∏çÁü•ÈÅìÔºàÈùû‰∏ì‰∏öÂõûÁ≠îÔºâ 2.Á°¨Â°ûÔºàÈùû‰∏ì‰∏öÂõûÁ≠îÔºâ 3.ÊääString ÊîπÊàêIntegerÂÜçÊ∑ªÂä†ÔºàËøùËÉå‰∫ÜÈóÆÈ¢òÂàùË°∑Ôºâ 4.ÊääStringÊîπÊàêObjectÔºåÂèØ‰ª•Âä†‰ªªÊÑèÁ±ªÂûãÔºàËøùËÉå‰∫ÜÈóÆÈ¢òÂàùË°∑Ôºâ 5.StringÊç¢ÊàêÈÄöÈÖçÁ¨¶ 6.ÂèçÂ∞Ñ ÂØπ‰∫é1„ÄÅ2Â∞±‰∏çËØ¥‰∫ÜÔºåÂ±û‰∫éÊêû‰∫ãÊÉÖÁöÑÔºÅ3„ÄÅ4„ÄÅ5‰∏âÁßçÊñπÂºèËøùËÉå‰∫ÜÈóÆÈ¢òÁöÑÂàùË°∑ÔºåÂ¶ÇÊûúÂèØ‰ª•ÊîπÔºåÈÇ£Êàë‰ª¨Áõ¥Êé•new‰∏â‰∏™ArrayListÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ6ÂèçÂ∞ÑÔºåËøô‰∏™ÊòØÊó†ÈôêÊé•ËøëÁöÑÔºåÈÇ£‰πàËøô‰∏™ÂíåÂèçÂ∞ÑÊúâ‰ªÄ‰πàÂÖ≥Á≥ªÂë¢Ôºü‰∏ãÊù•Áúã‰∏ã‰∏ãÈù¢Âá†‰∏™‰æãÂ≠êÔºö 12345678910111213141516171819public static void main(String[] args) &#123; ArrayList list=new ArrayList(); ArrayList&lt;String&gt; str_list=new ArrayList&lt;String&gt;(); ArrayList&lt;Integer&gt; int_list=new ArrayList&lt;Integer&gt;(); ArrayList&lt;Object&gt; obj_list=new ArrayList&lt;Object&gt;(); //ÂØπË±°ÊØîËæÉ System.out.println(list == str_list); System.out.println(list == int_list); System.out.println(list == obj_list); //ÂØπË±°ÁöÑËøêË°åÊó∂classÊØîËæÉ System.out.println(list.getClass() == str_list.getClass()); System.out.println(list.getClass() == int_list.getClass()); System.out.println(list.getClass() == obj_list.getClass()); &#125; ÁªìÊûúÔºö123456falsefalsefalsetruetruetrue ÂÖ∂ÂÆû‰∏äÈù¢‰∏â‰∏™ÂæàÂÆπÊòìÁêÜËß£Ôºå‰∏çÂêåÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄËÇØÂÆöÊòØ‰∏çÂêåÁöÑÔºåÂõ†Ê≠§Âùá‰∏∫false;‰∏ãÈù¢‰∏â‰∏™Âùá‰∏∫true?ÊòØÁöÑÔºåÁ°ÆÂÆû‰∏∫true,ËøôÂ∞±ÂºïÂá∫‰∫ÜÊúãÂèãÂúàÁöÑÈÇ£‰∏™ÈóÆÈ¢ò„ÄÇ‰∏∫‰ªÄ‰πà‰∏çÂêåÁöÑ‰∏â‰∏™ÂØπË±°Ôºå‰ªñ‰ª¨ÁöÑgetClassÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰∏çÂ∫îËØ•ÊòØÊúâ‰∏â‰∏™‰∏çÂêåÁöÑhashCodeÂêóÔºüËøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØÊ≥õÂûãÁºñËØëÊó∂ÂíåËøêË°åÊó∂ÁöÑÈóÆÈ¢ò„ÄÇÂØπ‰∫éÊ≥õÂûãÊù•ËØ¥ÔºåÊ≥õÂûãÂè™Âú®ÁºñËØëÈò∂ÊÆµÊúâÊïàÔºåÁºñËØë‰πãÂêéÔºåÈõÜÂêàÁöÑÊ≥õÂûãÊòØÂéªÊ≥õÂûãÂåñÁöÑÔºõÂéüÂõ†ÔºöÁî±‰∫éJVMÊ≥õÂûãÁöÑÊì¶Èô§Êú∫Âà∂ÔºåÂú®ËøêË°åÊó∂JVMÊòØ‰∏çÁü•ÈÅìÊ≥õÂûã‰ø°ÊÅØÁöÑ„ÄÇÂõ†Ê≠§ÔºöjavaÈõÜÂêà‰∏≠ÁöÑÊ≥õÂûãÔºåÊòØÊù•Á∫¶ÊùüÁî®Êà∑ÁöÑÈîôËØØËæìÂÖ•ÁöÑÔºåÂè™Âú®ÁºñËØëÊó∂ÊúâÊïàÔºõÂú®ÂõûÂà∞ÈóÆÈ¢òÊúÄÂàùÔºåÊàë‰ª¨ÊÄé‰πàÊâçËÉΩÂ∞Ü‰∏Ä‰∏™IntegerÂØπÂÉèÊîæÂÖ•‰∏äÈù¢ÂÆö‰πâÁöÑlist‰∏≠Âë¢ÔºüÊó¢ÁÑ∂ÈõÜÂêà‰∏≠ÁöÑÊ≥õÂûãÊòØÁºñËØëÊó∂ÊúâÊïàÁöÑÔºåÈÇ£ÊàëÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÁªïËøáÁºñËØëÁöÑÊñπÂºèËøõË°åÊèíÂÖ•„ÄÇÈÇ£‰πàÂ¶Ç‰ΩïÁªïËøáÁºñËØëÊó∂ÁöÑÊ†°È™åÂë¢ÔºüÁ≠îÊ°àÂ∞±ÊòØÁî®ÂèçÂ∞ÑÔºõÊàë‰ª¨Áü•ÈÅìJAVAÂèçÂ∞ÑÊú∫Âà∂ÊòØÊåáÔºö‚ÄúÂú®ËøêË°åÁä∂ÊÄÅ‰∏≠ÔºåÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™Á±ªÔºåÈÉΩËÉΩÂ§üÁü•ÈÅìËøô‰∏™Á±ªÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºõÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÔºåÈÉΩËÉΩÂ§üË∞ÉÁî®ÂÆÉÁöÑ‰ªªÊÑèÊñπÊ≥ïÂíåÂ±ûÊÄßÔºõËøôÁßçÂä®ÊÄÅËé∑Âèñ‰ø°ÊÅØ‰ª•ÂèäÂä®ÊÄÅË∞ÉÁî®ÂØπË±°ÊñπÊ≥ïÁöÑÂäüËÉΩÁß∞‰∏∫javaËØ≠Ë®ÄÁöÑÂèçÂ∞ÑÊú∫Âà∂„ÄÇOKÔºåÂÜçÊù•ÁúãÁ®ãÂ∫èÔºö 123456789 ArrayList&lt;String&gt; str_list=new ArrayList&lt;String&gt;();//Ëé∑ÂèñÁ±ª‰ø°ÊÅØClass c=str_list.getClass();//Ëé∑ÂèñaddÊñπÊ≥ïMethod m=c.getMethod(&quot;add&quot;, Object.class);//ËøêË°åÊó∂Ë∞ÉÁî®addÊñπÊ≥ïm.invoke(str_list, 20);//ËæìÂá∫ÂΩìÂâçstr_listSystem.out.println(str_list); ÁªìÊûúÔºö1[20] ‰ªéÁªìÊûúÂèØ‰ª•ÁúãÂá∫ÔºåÊàë‰ª¨ÂÆåÊàê‰∫ÜÂú®list‰∏≠Ê∑ªÂä†IntegerÁöÑ‰ªªÂä°„ÄÇ„ÄêÊ≥õÂûã„ÄÅÂèçÂ∞Ñ„ÄÅÁºñËØëÊó∂„ÄÅËøêË°åÊó∂„Äë]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Ê≥õÂûã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁÆóÊ≥ï-ÊéíÂ∫èÁÆóÊ≥ïÊÄùÊÉ≥ÂèäÂÆûÁé∞]]></title>
    <url>%2F2018%2F11%2F10%2Falg-one%2F</url>
    <content type="text"><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï‰∏ªË¶ÅÊúâÔºöÊèíÂÖ•ÊéíÂ∫èÔºåÈÄâÊã©ÊéíÂ∫èÔºåÂÜíÊ≥°ÊéíÂ∫èÔºåÂ∏åÂ∞îÊéíÂ∫èÔºåÂΩíÂπ∂ÊéíÂ∫èÔºåÂø´ÈÄüÊéíÂ∫èÔºåÂ†ÜÊéíÂ∫è„ÄÇËøôÈáåÁöÑÊéíÂ∫èÊåáÁöÑÊòØÂÜÖÈÉ®ÊéíÂ∫èÔºå‰πüÂ∞±ÊòØÂü∫‰∫éÂÜÖÂ≠òÁöÑÊéíÂ∫èÔºåÂü∫‰∫éÂÜÖÂ≠òÁöÑÊéíÂ∫èÊòØÂü∫‰∫éÂ§ßOÊ®°ÂûãÁöÑÔºåÂèØ‰ª•‰ΩøÁî®Â§ßOÊ®°ÂûãÊù•Ë°°ÈáèÁÆóÊ≥ïÁöÑÊÄßËÉΩÊëòËá™ÊàëËá™Â∑±ÁöÑÂçöÂÆ¢Âõ≠Ôºöhttp://www.cnblogs.com/myadmin/p/5821158.html ‰∏≠ÁöÑÈÉ®ÂàÜÊéíÂ∫èÁÆóÊ≥ï„ÄÇ ÊèíÂÖ•ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÔºöÊØè‰∏ÄÊ≠•ÈÉΩÂ∞Ü‰∏Ä‰∏™ÂæÖÊéíÊï∞ÊçÆÊåâÂÖ∂Â§ßÂ∞èÊèíÂÖ•Âà∞Â∑≤ÁªèÊéíÂ∫èÁöÑÊï∞ÊçÆ‰∏≠ÁöÑÈÄÇÂΩì‰ΩçÁΩÆÔºåÁõ¥Âà∞ÂÖ®ÈÉ®ÊèíÂÖ•ÂÆåÊØï„ÄÇ 1234ÂéüÂßãÔºö4 3 1 21) 3 4 1 22) 1 3 4 23) 1 2 3 4 Ê†∏ÂøÉ‰ª£Á†ÅÔºö 12345678910111213141516/** * ÊèíÂÖ•ÊéíÂ∫è */ public static int[] insertSort(int[] arr) &#123; for (int i = 1; i &lt; arr.length; i++) &#123; int index = i;// indexÂΩìÂâçÊâ´ÊèèÂà∞ÁöÑÂÖÉÁ¥†‰∏ãÊ†á int temp = arr[i]; // ÂØªÊâæÊèíÂÖ•ÁöÑ‰ΩçÁΩÆ while (index &gt; 0 &amp;&amp; temp &lt; arr[index - 1]) &#123; arr[index] = arr[index - 1]; index--; &#125; arr[index] = temp; &#125; return arr; &#125; ÈÄâÊã©ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥Ôºö‰ªéÊâÄÊúâÂ∫èÂàó‰∏≠ÂÖàÊâæÂà∞ÊúÄÂ∞èÁöÑÔºåÁÑ∂ÂêéÊîæÂà∞Á¨¨‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ‰πãÂêéÂÜçÁúãÂâ©‰ΩôÂÖÉÁ¥†‰∏≠ÊúÄÂ∞èÁöÑÔºåÊîæÂà∞Á¨¨‰∫å‰∏™‰ΩçÁΩÆ‚Ä¶‚Ä¶‰ª•Ê≠§Á±ªÊé®ÔºåÂ∞±ÂèØ‰ª•ÂÆåÊàêÊï¥‰∏™ÁöÑÊéíÂ∫èÂ∑•‰Ωú‰∫Ü„ÄÇÂèØ‰ª•ÂæàÊ∏ÖÊ•öÁöÑÂèëÁé∞ÔºåÈÄâÊã©ÊéíÂ∫èÊòØÂõ∫ÂÆö‰ΩçÁΩÆÔºåÊâæÂÖÉÁ¥†„ÄÇÁõ∏ÊØî‰∫éÊèíÂÖ•ÊéíÂ∫èÁöÑÂõ∫ÂÆöÂÖÉÁ¥†Êâæ‰ΩçÁΩÆÔºåÊòØ‰∏§ÁßçÊÄùÁª¥ÊñπÂºè„ÄÇ 1234567893 2 1 4 6 5ÂàùÂßãÂåñÁ¥¢Âºï‰ΩçÁΩÆ‰∏∫0 ÂØªÊâæÊúÄÂ∞èÂÄºÊâÄÂú®‰ΩçÁΩÆ‰∫§Êç¢Ôºö1 2 3 4 6 5ÂàùÂßãÂåñÁ¥¢Âºï‰ΩçÁΩÆ‰∏∫1ÂØªÊâæÊúÄÂ∞èÂÄºÊâÄÂú®‰ΩçÁΩÆ‰∫§Êç¢Ôºö1 2 3 4 6 5‰æùÊ¨°Á±ªÊé®ÔºÅ Ê†∏ÂøÉ‰ª£Á†ÅÔºö 123456789101112131415161718/** * ÈÄâÊã©ÊéíÂ∫è */ public static int[] selectSort(int[] arr) &#123; for (int i = 0; i &lt; arr.length; i++) &#123; int minVal = arr[i]; int index = i; for (int j = i + 1; j &lt; arr.length; j++) &#123;// ÊâæÂà∞ÊúÄÂ∞èÂÖÉÁ¥† if (arr[j] &lt; minVal) &#123; minVal = arr[j]; index = j; &#125; &#125; arr[index] = arr[i]; arr[i] = minVal; &#125; return arr; &#125; ÂÜíÊ≥°ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÔºöÂéüÁêÜÊòØ‰∏¥ËøëÁöÑÊï∞Â≠ó‰∏§‰∏§ËøõË°åÊØîËæÉ,ÊåâÁÖß‰ªéÂ∞èÂà∞Â§ßÊàñËÄÖ‰ªéÂ§ßÂà∞Â∞èÁöÑÈ°∫Â∫èËøõË°å‰∫§Êç¢„ÄÇÊ†∏ÂøÉ‰ª£Á†ÅÔºö12345678910111213141516171819/** * ÂÜíÊ≥°ÊéíÂ∫è * * @param arr * ËæìÂÖ•ÁöÑÂæÖÊéíÊï∞ÁªÑ * @return ËøîÂõûÊéíÂ∫èÂè∑ÁöÑÊï∞ÁªÑ */ public static int[] bubbleSort(int[] arr) &#123; for (int i = 0; i &lt; arr.length; i++) &#123; for (int j = 1; j &lt; arr.length; j++) &#123; if (arr[j - 1] &gt; arr[j]) &#123; int temp = arr[j - 1]; arr[j - 1] = arr[j]; arr[j] = temp; &#125; &#125; &#125; return arr; &#125; Â∏åÂ∞îÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÔºöÂÖàÂèñ‰∏Ä‰∏™Â∞è‰∫énÁöÑÊï¥Êï∞d1‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™Â¢ûÈáèÔºåÊääÊñá‰ª∂ÁöÑÂÖ®ÈÉ®ËÆ∞ÂΩïÂàÜÁªÑ„ÄÇÊâÄÊúâË∑ùÁ¶ª‰∏∫d1ÁöÑÂÄçÊï∞ÁöÑËÆ∞ÂΩïÊîæÂú®Âêå‰∏Ä‰∏™ÁªÑ‰∏≠„ÄÇÂÖàÂú®ÂêÑÁªÑÂÜÖËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºõÁÑ∂ÂêéÔºåÂèñÁ¨¨‰∫å‰∏™Â¢ûÈáèd2&lt;d1ÈáçÂ§ç‰∏äËø∞ÁöÑÂàÜÁªÑÂíåÊéíÂ∫èÔºåÁõ¥Ëá≥ÊâÄÂèñÁöÑÂ¢ûÈáè =1( &lt; ‚Ä¶&lt;d2&lt;d1)ÔºåÂç≥ÊâÄÊúâËÆ∞ÂΩïÊîæÂú®Âêå‰∏ÄÁªÑ‰∏≠ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è‰∏∫Ê≠¢„ÄÇÔºà‰∏ãÂõæÊù•Ëá™ÁôæÂ∫¶ÂõæÁâáÔºâ Ê†∏ÂøÉ‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425262728/** * Â∏åÂ∞îÊéíÂ∫è * * @author sgl * */public class ShellSort &#123; public static int[] shellSort(int[] arr) &#123; int step = arr.length / 2;// ÂàùÂßãÊ≠•Èïø while (1 &lt;= step) &#123; for (int i = step; i &lt; arr.length; i++) &#123; if (arr[i] &lt; arr[i - step]) &#123; int temp = arr[i]; arr[i] = arr[i - step]; arr[i - step] = temp; &#125; &#125; step = step / 2; for (int i = 0; i &lt; arr.length; i++) &#123; System.out.print(arr[i]+&quot;,&quot;); &#125; System.out.println(); &#125; return arr; &#125; ÂΩíÂπ∂ÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÔºöÂ∞ÜÂæÖÊéíÂ∫èÂ∫èÂàóR[0‚Ä¶n-1]ÁúãÊàêÊòØn‰∏™ÈïøÂ∫¶‰∏∫1ÁöÑÊúâÂ∫èÂ∫èÂàóÔºåÂ∞ÜÁõ∏ÈÇªÁöÑÊúâÂ∫èË°®ÊàêÂØπÂΩíÂπ∂ÔºåÂæóÂà∞n/2‰∏™ÈïøÂ∫¶‰∏∫2ÁöÑÊúâÂ∫èË°®ÔºõÂ∞ÜËøô‰∫õÊúâÂ∫èÂ∫èÂàóÂÜçÊ¨°ÂΩíÂπ∂ÔºåÂæóÂà∞n/4‰∏™ÈïøÂ∫¶‰∏∫4ÁöÑÊúâÂ∫èÂ∫èÂàóÔºõÂ¶ÇÊ≠§ÂèçÂ§çËøõË°å‰∏ãÂéªÔºåÊúÄÂêéÂæóÂà∞‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫nÁöÑÊúâÂ∫èÂ∫èÂàó„ÄÇÂΩíÂπ∂ÊéíÂ∫èÂÖ∂ÂÆûË¶ÅÂÅö‰∏§‰ª∂‰∫ãÔºöÔºà1Ôºâ‚ÄúÂàÜËß£‚Äù‚Äî‚ÄîÂ∞ÜÂ∫èÂàóÊØèÊ¨°ÊäòÂçäÂàíÂàÜ„ÄÇÔºà2Ôºâ‚ÄúÂêàÂπ∂‚Äù‚Äî‚ÄîÂ∞ÜÂàíÂàÜÂêéÁöÑÂ∫èÂàóÊÆµ‰∏§‰∏§ÂêàÂπ∂ÂêéÊéíÂ∫è„ÄÇ Ê†∏ÂøÉ‰ª£Á†ÅÔºö12345678910111213141516171819202122232425262728293031323334353637public static int[] sort(int[] nums, int low, int high) &#123; int mid = (low + high) / 2; if (low &lt; high) &#123; sort(nums, low, mid);// Â∑¶Ëæπ sort(nums, mid + 1, high);// Âè≥Ëæπ merge(nums, low, mid, high);// Â∑¶Âè≥ÂΩíÂπ∂ &#125; return nums; &#125; public static void merge(int[] nums, int low, int mid, int high) &#123; int[] temp = new int[high - low + 1]; int i = low;// Â∑¶ÊåáÈíà int j = mid + 1;// Âè≥ÊåáÈíà int k = 0; // ÊääËæÉÂ∞èÁöÑÊï∞ÂÖàÁßªÂà∞Êñ∞Êï∞ÁªÑ‰∏≠ while (i &lt;= mid &amp;&amp; j &lt;= high) &#123; if (nums[i] &lt; nums[j]) &#123; temp[k++] = nums[i++]; &#125; else &#123; temp[k++] = nums[j++]; &#125; &#125; // ÊääÂ∑¶ËæπÂâ©‰ΩôÁöÑÊï∞ÁßªÂÖ•Êï∞ÁªÑ while (i &lt;= mid) &#123; temp[k++] = nums[i++]; &#125; // ÊääÂè≥ËæπËæπÂâ©‰ΩôÁöÑÊï∞ÁßªÂÖ•Êï∞ÁªÑ while (j &lt;= high) &#123; temp[k++] = nums[j++]; &#125; // ÊääÊñ∞Êï∞ÁªÑ‰∏≠ÁöÑÊï∞Ë¶ÜÁõñnumsÊï∞ÁªÑ for (int k2 = 0; k2 &lt; temp.length; k2++) &#123; nums[k2 + low] = temp[k2]; &#125; &#125;&#125; Âø´ÈÄüÊéíÂ∫èÂü∫Êú¨ÊÄùÊÉ≥ÔºöÂø´ÈÄüÊéíÂ∫èÈááÁî®ÁöÑÊÄùÊÉ≥ÊòØÂàÜÊ≤ªÊÄùÊÉ≥„ÄÇÂø´ÈÄüÊéíÂ∫èÊòØÊâæÂá∫‰∏Ä‰∏™ÂÖÉÁ¥†ÔºàÁêÜËÆ∫‰∏äÂèØ‰ª•Èöè‰æøÊâæ‰∏Ä‰∏™Ôºâ‰Ωú‰∏∫Âü∫ÂáÜ,ÁÑ∂ÂêéÂØπÊï∞ÁªÑËøõË°åÂàÜÂå∫Êìç‰Ωú,‰ΩøÂü∫ÂáÜÂ∑¶ËæπÂÖÉÁ¥†ÁöÑÂÄºÈÉΩ‰∏çÂ§ß‰∫éÂü∫ÂáÜÂÄº,Âü∫ÂáÜÂè≥ËæπÁöÑÂÖÉÁ¥†ÂÄº ÈÉΩ‰∏çÂ∞è‰∫éÂü∫ÂáÜÂÄºÔºåÂ¶ÇÊ≠§‰Ωú‰∏∫Âü∫ÂáÜÁöÑÂÖÉÁ¥†Ë∞ÉÊï¥Âà∞ÊéíÂ∫èÂêéÁöÑÊ≠£Á°Æ‰ΩçÁΩÆ„ÄÇÈÄíÂΩíÂø´ÈÄüÊéíÂ∫èÔºåÂ∞ÜÂÖ∂‰ªñn-1‰∏™ÂÖÉÁ¥†‰πüË∞ÉÊï¥Âà∞ÊéíÂ∫èÂêéÁöÑÊ≠£Á°Æ‰ΩçÁΩÆ„ÄÇÊúÄÂêéÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÊòØÂú®ÊéíÂ∫èÂêéÁöÑÊ≠£ Á°Æ‰ΩçÁΩÆÔºåÊéíÂ∫èÂÆåÊàê„ÄÇÊâÄ‰ª•Âø´ÈÄüÊéíÂ∫èÁÆóÊ≥ïÁöÑÊ†∏ÂøÉÁÆóÊ≥ïÊòØÂàÜÂå∫Êìç‰ΩúÔºåÂç≥Â¶Ç‰ΩïË∞ÉÊï¥Âü∫ÂáÜÁöÑ‰ΩçÁΩÆ‰ª•ÂèäË∞ÉÊï¥ËøîÂõûÂü∫ÂáÜÁöÑÊúÄÁªà‰ΩçÁΩÆ‰ª•‰æøÂàÜÊ≤ªÈÄíÂΩí„ÄÇ Ê†∏ÂøÉ‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233/** * Âø´ÈÄüÊéíÂ∫è * * @author sgl * */public class QuickSort &#123; static void quicksort(int n[], int left, int right) &#123; int dp; if (left &lt; right) &#123; dp = partition(n, left, right); quicksort(n, left, dp - 1); quicksort(n, dp + 1, right); &#125; &#125; static int partition(int n[], int left, int right) &#123; int pivot = n[left]; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; n[right] &gt;= pivot) right--; if (left &lt; right) n[left++] = n[right]; while (left &lt; right &amp;&amp; n[left] &lt;= pivot) left++; if (left &lt; right) n[right--] = n[left]; &#125; n[left] = pivot; return left; &#125;&#125;]]></content>
      <categories>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âü∫‰∫émavenÊûÑÂª∫Â§öÊ®°ÂùóÂåñÁöÑSSMÊ°ÜÊû∂]]></title>
    <url>%2F2018%2F11%2F10%2Fproject-frame-maven-ssm%2F</url>
    <content type="text"><![CDATA[‰πãÂâçÂÜôËøá‰∏ÄÁØáSSMÁöÑÊ°ÜÊû∂Êï¥ÂêàÔºõÈ°πÁõÆÂºÄÂèëÊ°ÜÊû∂-SSMÔºõÂØπSSM‰∏≠ÁöÑ‰∏Ä‰∫õÁÇπËøõË°å‰∫ÜÂ≠¶‰π†ËÆ∞ÂΩï,ÈÇ£ÁØáÊñáÁ´†‰πüÊòØÂü∫‰∫émavenÊù•ÂàõÂª∫ÁöÑÔºåÈÇ£‰πà‰∏∫‰ªÄ‰πàÂèàË¶ÅÊêû‰∏ÄÁØáÂë¢Ôºü‰ª•ÊàëÂΩìÂâçÂÖ¨Âè∏È°πÁõÆAÊù•ËØ¥ÔºåAÈ°πÁõÆÂåÖÊã¨ÂâçÂè∞„ÄÅÂêéÂè∞Â≠êÈ°πÁõÆ„ÄêÂâçÂè∞Áî®‰∫éÂØπÂ§ñÔºåÂêéÂè∞Áî®‰∫éÁÆ°ÁêÜ„ÄëÔºåÂ¶ÇÊûúÊåâÁÖßÂâç‰∏ÄÁØáÊñáÁ´†ÁöÑÈÇ£ÁßçÊñπÂºèÊù•ËøõË°åÔºåÊàë‰ª¨Â∞±ÈúÄË¶ÅÂª∫Á´ã‰∏§‰∏™ÂçïÁã¨ÁöÑÊ°ÜÊû∂Êù•ËøõË°åÂºÄÂèëÔºå‰∏ÄÊ†∑ÁöÑÊã•Êúâ‰∏ÄÂ•ó‰ªédmoÂÆû‰ΩìÁ±ªÂåÖÔºåutilÂåÖÔºådaoÂåÖÔºåserviceÂåÖ‰ª•ÂèäcontrollerÂåÖÔºåËøôÁßçÁªìÊûÑÈùûÂ∏∏ÁöÑÁ¥ßÂáëÂíåÁã¨Á´ãÔºå‰ΩÜÊòØÈóÆÈ¢òÂú®‰∫éÔºåÊàë‰ª¨ÂâçÂêéÂè∞‰ΩøÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™Â∫ìÔºådmo„ÄÅutil„ÄÅdao‰ª•Âèäservice‰∏≠ÈÉΩ‰ºöÂ≠òÂú®Â§ßÈáèÈáçÂ§çÁöÑ‰ª£Á†ÅÔºåÂæàÂ§öÂü∫Á°ÄÊñπÊ≥ïÊó†Ê≥ïÂÖ¨Áî®ÔºõÂè¶Â§ñ‰∏Ä‰∏™ÂéüÂõ†ÊòØÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂåÖË£Ö‰∏Ä‰∫õÊé•Âè£ÂêëÂ§ñÊèê‰æõÊúçÂä°„Äê‰∏çÂ±ÄÈôê‰∫éÊàë‰ª¨Ëá™Â∑±ÁöÑËøô‰∏§‰∏™Á≥ªÁªü„ÄëÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÊàë‰ª¨ÂèàÈúÄË¶ÅÂÜçÂéªÊäΩÁ¶ª‰∏ÄÊ¨°serviceÔºåÈùûÂ∏∏‰∏çÊñπ‰æø„ÄÇÂõ†Ê≠§Â∞±‰ΩøÁî®mavenÊù•ÊûÑÂª∫Â§öÊ®°ÂùóÈ°πÁõÆÔºåÂØπ‰∫éutil„ÄÅdao„ÄÅrpcÊúçÂä°Êé•Âè£‰ª•ÂèäserviceËøõË°åÊ®°ÂùóÂåñÂàÜÁ¶ªÔºåËøôÊ†∑‰∏ÄÊù•ÔºåËøô‰∫õÊ®°ÂùóÂ∞±ÂèØ‰ª•ÂØπÊàë‰ª¨Ëá™Â∑±ÁöÑÂâçÂêéÂè∞‰ª•ÂèäÂ§ñÈÉ®Êèê‰æõ‰∏Ä‰∫õÂÖ¨ÂÖ≥ÁöÑÊúçÂä°ÔºåÈÅøÂÖç‰∫ÜÂ§ßÈáèÁöÑ‰ª£Á†ÅÈáçÂ§çÔºå‰πüÊñπ‰æøÁÆ°ÁêÜ„ÄÇ MavenÂ§öÊ®°ÂùóÈ°πÁõÆÔºåÈÄöËøáÂêàÁêÜÁöÑÊ®°ÂùóÊãÜÂàÜÔºåÂÆûÁé∞‰ª£Á†ÅÁöÑÂ§çÁî®Ôºå‰æø‰∫éÁª¥Êä§ÂíåÁÆ°ÁêÜ„ÄÇÂ∞§ÂÖ∂ÊòØ‰∏Ä‰∫õÂºÄÊ∫êÊ°ÜÊû∂Ôºå‰πüÊòØÈááÁî®Â§öÊ®°ÂùóÁöÑÊñπÂºèÔºåÊèê‰æõÊèí‰ª∂ÈõÜÊàêÔºåÁî®Êà∑ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈÖçÁΩÆÊåáÂÆöÁöÑÊ®°Âùó„ÄÇ ÊûÑÂª∫Â§öÊ®°ÂùóÂåñÈ°πÁõÆÂü∫‰∫émavenÊûÑÂª∫Â§öÊ®°ÂùóÂåñÈ°πÁõÆ‰∏ªË¶Å‰æùËµñ‰∫émavenÂèØ‰ª•ÂÆûÁé∞Áà∂Â≠êÈ°πÁõÆÁöÑÂÖ≥Á≥ªÔºåÂ≠êÈ°πÁõÆÂèØ‰ª•Áà∂È°πÁõÆÁöÑ‰æùËµñJarÂåÖÔºåËøôÊ†∑‰πüÊñπ‰æøÊàë‰ª¨ÂéªÂÖ±ÂêåÁÆ°ÁêÜjar‰æùËµñÔºå‰ΩÜÊòØÁî±‰∫é‰∏Ä‰∏™È°πÁõÆ‰∏≠ÊØïÁ´ü‰ºöÊúâÂæàÂ§ö‰∫∫ËøõË°åÂçèÂêåÂºÄÂèëÔºåÂú®Ê≠§ËøáÁ®ã‰∏≠Â¶ÇÊûúÊ≤°ÊúâÂæàÂ•ΩÁöÑÁ∫¶ÊùüÔºåÂØπ‰∫éËøôÁßçÂ§öÊ®°ÂùóÂåñÊù•ËØ¥ÔºåËß£ÂÜ≥jarÂåÖÁöÑÂÜ≤Á™Å‰πüÂæàÁπÅÁêê„ÄÇ Êñ∞Âª∫‰∏Ä‰∏™Áà∂Â∑•Á®ã1.ÂàõÂª∫mavenÈ°πÁõÆ step1:(Êñ∞Âª∫mavenÈ°πÁõÆ) step2:(ÂãæÈÄâÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÂ∑•Á®ã) step3:(Â°´ÂÜôÂ∑•Á®ãÈÖçÁΩÆÔºö‰∏ªË¶ÅÊòØÊâìÂåÖÊñπÂºèË¶ÅÈÄâÊã©pomÊñπÂºè)ÁÇπÂáªfinishÔºåÁà∂È°πÁõÆÂ∞±ÂàõÂª∫ÊàêÂäü‰∫ÜÔºÅ2.ÂàõÂª∫Â≠êÈ°πÁõÆ step1:(Âè≥ÂáªÁà∂È°πÁõÆ-&gt;maven-&gt;New Maven Model Project) step2: step3:(‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨È°πÁõÆ‰∏≠ÁöÑutil„ÄÅdao„ÄÅserviceÈÉΩÊòØÂèØ‰ª•Áõ¥Êé•ÂàÜÂá∫Êù•ÁöÑÔºåËøôÈáåÊàë‰ª¨ÈÄâÊã©quickstartÊù•ÊûÑÂª∫,Áî®‰∫éÁîü‰∫ßÂêéÈù¢ÁöÑjarÂåÖÊèê‰æõÊúçÂä°„ÄÇÊàë‰ª¨ÁöÑwebÂ≠êÈ°πÁõÆÈÄâÊã©webappÊù•ÊûÑÂª∫ÔºåÁî®‰∫éÈÖçÁΩÆÊñá‰ª∂„ÄÅjspÊñá‰ª∂/ftl/html/js/cssÁ≠âÁïåÈù¢ËµÑÊ∫êÊñá‰ª∂Áª¥Êä§)ÁÇπÂáªfinishÔºåÂÆåÊàêÂ≠êÊ®°ÂùóÁöÑÊûÑÂª∫ÔºÅÊûÑÂª∫‰πãÂêéÁöÑÈ°πÁõÆÁªìÊûÑ‰∏∫ÔºöÊ≠§Êó∂ÔºåÊàë‰ª¨ÁöÑÁà∂Ê®°Âùó‰∏≠Â∑≤ÁªèÊúâ‰∫ÜÂ≠êÊ®°ÂùóÁöÑÈ°πÁõÆÊ†áËØÜÔºåÊñ∞Âª∫ÁöÑdaoÊ®°Âùó‰∏≠‰∏çÂåÖÊã¨webappÊ≠§Á±ªÁöÑÊñá‰ª∂Â§π„ÄÇÈÇ£‰πàËøôÊó∂Â∞±ÂèØ‰ª•Â∞ÜÊàë‰ª¨ÁöÑÊï∞ÊçÆËÆøÈóÆÁõ∏ÂÖ≥ÁöÑÁ±ªÂíåÊé•Âè£ÈÉΩÊîæÂú®Ëøô‰∏™Â≠êÊ®°Âùó‰∏≠ÔºåÂ¶ÇÊûúÂÖ∂‰ªñÈ°πÁõÆÈúÄË¶Å‰ΩøÁî®ÔºåÊàë‰ª¨Áõ¥Êé•ÂºïÂÖ•Â∞±Ë°åÔºåÂºïÂÖ•ÊñπÂºèÂ¶Ç‰∏ãÔºà‰∏ãÈù¢Êà™ÂõæÊòØ‰ªéserviceÊ®°ÂùóÂºïÂÖ•daoÊ®°ÂùóÁöÑÔºåËøôÈáåÁöÑgroupIdÔºåartifactIdÔºåversionÊàë‰ª¨ÂèØ‰ª•Âú®daoÁöÑpomÊñá‰ª∂‰∏≠Áõ¥Êé•Â§çÂà∂‰ΩøÁî®ÔºâÔºöÔºà‰∏äÈù¢Êñ∞Âª∫ÁöÑËøáÁ®ãÂè™‰Ωú‰∏∫ÊºîÁ§∫ËÄåÁî®Ôºå‰∏ãÈù¢ÁöÑÂºïÂÖ•Âíå‰∏äÈù¢ÁöÑÊñ∞Âª∫È°πÁõÆÂπ∂Èùû‰∏Ä‰∏™È°πÁõÆÔºâÂÖ∂‰ªñÁöÑÊ®°ÂùóÊûÑÂª∫ÂíådaoÁöÑÊûÑÂª∫ËøáÁ®ãÊòØ‰∏ÄÊ†∑ÁöÑÔºåËøôÈáåÂ∞±‰∏ç‰∏Ä‰∏ÄÊûÑÂª∫‰∫Ü„ÄÇÊ∫êÁ†ÅÂú∞ÂùÄÂú®‰∏ãÈù¢ÔºåËß£Âéã‰πãÂêéÔºå‰ª•mavenÈ°πÁõÆÊñπÂºèÂØºÂÖ•Ôºå‰øÆÊîπ‰∏ãÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÊñá‰ª∂Â∫îËØ•Â∞±ÂèØ‰ª•Áõ¥Êé•ËøêË°å‰∫ÜÔºàÂΩìÂâçÈ°πÁõÆÂü∫‰∫éjdk1.7ÂÜôÁöÑÔºåÊúâÁöÑÂ∞è‰ºô‰º¥Â¶ÇÊûúÁî®1.8ÁöÑËØùÔºåÂ∫îËØ•‰ºöÂá∫Áé∞jspÊó†Ê≥ïÁºñËØëÁöÑ‰∏Ä‰∏™ÈîôËØØÔºâÔºõÊ∫êÁ†ÅÈôÑ‰ª∂‰∏≠ËøòÊúâ‰∏Ä‰∏™settingÊñá‰ª∂,ÈòøÈáåÁöÑÔºå‰∏™‰∫∫ËßâÂæóÁî®Ëµ∑Êù•Âæà‰∏çÈîôÔºå‰πüÊé®ËçêÁªôÂ§ßÂÆ∂! Ê∫êÁ†ÅÂú∞ÂùÄÔºöhttp://download.csdn.net/download/sinat_25518349/10124726„ÄêËøô‰∏™ÊòØcsdnÁöÑÂú∞ÂùÄÔºåÁé∞Âú®ËµÑÊ∫ê‰∏ä‰º†ËøòÂøÖÈúÄË¶ÅÈÄâÊã©CÂ∏ÅÔºåÂ∞è‰ºô‰º¥Â¶ÇÊûúÊ≤°ÊúâcsdnË¥¶Êà∑ÊàñËÄÖCÂ∏Å‰∏çË∂≥ÔºåÂèØ‰ª•Âú®ÊñáÁ´†ÁïôË®ÄÂå∫ÁïôË®ÄÔºåÁïô‰∏ãÈÇÆÁÆ±ÔºåÊàëÂèëÁªô‰Ω†‰ª¨„Äë]]></content>
      <categories>
        <category>Êû∂ÊûÑ</category>
      </categories>
      <tags>
        <tag>ssm</tag>
        <tag>spring</tag>
        <tag>mybatis</tag>
        <tag>web</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÊÄÅ„ÄÅÊé•Âè£ÂíåÊäΩË±°Á±ª]]></title>
    <url>%2F2018%2F11%2F10%2Fglmapper-bird-two%2F</url>
    <content type="text"><![CDATA[Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÊÄßÔºöÂ∞ÅË£Ö„ÄÅÁªßÊâø„ÄÅÂ§öÊÄÅ„ÄÇ‰ªé‰∏ÄÂÆöËßíÂ∫¶Êù•ÁúãÔºåÂ∞ÅË£ÖÂíåÁªßÊâøÂá†‰πéÈÉΩÊòØ‰∏∫Â§öÊÄÅËÄåÂáÜÂ§áÁöÑ„ÄÇËøôÊòØÊàë‰ª¨ÊúÄÂêé‰∏Ä‰∏™Ê¶ÇÂøµÔºå‰πüÊòØÊúÄÈáçË¶ÅÁöÑÁü•ËØÜÁÇπ„ÄÇ Â§öÊÄÅÁöÑÂÆö‰πâÔºöÊåáÂÖÅËÆ∏‰∏çÂêåÁ±ªÁöÑÂØπË±°ÂØπÂêå‰∏ÄÊ∂àÊÅØÂÅöÂá∫ÂìçÂ∫î„ÄÇÂç≥Âêå‰∏ÄÊ∂àÊÅØÂèØ‰ª•Ê†πÊçÆÂèëÈÄÅÂØπË±°ÁöÑ‰∏çÂêåËÄåÈááÁî®Â§öÁßç‰∏çÂêåÁöÑË°å‰∏∫ÊñπÂºè„ÄÇÔºàÂèëÈÄÅÊ∂àÊÅØÂ∞±ÊòØÂáΩÊï∞Ë∞ÉÁî®Ôºâ Âä®ÊÄÅÁªëÂÆö ÈùôÊÄÅÁªëÂÆöÂíåÂä®ÊÄÅÁªëÂÆöËøôÈáåÊâÄË∞ìÁöÑÁªëÂÆöÔºåÂç≥‰∏Ä‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®‰∏éÊñπÊ≥ïÊâÄÂú®ÁöÑÁ±ªÔºàÊñπÊ≥ï‰∏ª‰ΩìÔºâÂÖ≥ËÅîËµ∑Êù•„ÄÇ ÈùôÊÄÅÁªëÂÆöÔºàÂâçÊúüÁªëÂÆöÔºâÔºöÂç≥Âú®Á®ãÂ∫èÊâßË°åÂâçÔºåÂç≥ÁºñËØëÁöÑÊó∂ÂÄôÂ∑≤ÁªèÂÆûÁé∞‰∫ÜËØ•ÊñπÊ≥ï‰∏éÊâÄÂú®Á±ªÁöÑÁªëÂÆöÔºåÂÉèCÂ∞±ÊòØÈùôÊÄÅÁªëÂÆö„ÄÇ java‰∏≠Âè™ÊúâstaticÔºåfinalÔºåprivateÂíåÊûÑÈÄ†ÊñπÊ≥ïÊòØÈùôÊÄÅÁªëÂÆöÔºåÂÖ∂‰ªñÁöÑÈÉΩÂ±û‰∫éÂä®ÊÄÅÁªëÂÆöÔºåËÄåprivateÁöÑÊñπÊ≥ïÂÖ∂ÂÆû‰πüÊòØfinalÊñπÊ≥ïÔºàÈöêÂºèÔºâÔºåËÄåÊûÑÈÄ† ÊñπÊ≥ïÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™staticÊñπÊ≥ïÔºàÈöêÂºèÔºâÔºåÊâÄ‰ª•ÂèØ‰ª•ÁúãÂá∫ÊääÊñπÊ≥ïÂ£∞Êòé‰∏∫finalÔºåÁ¨¨‰∏ÄÂèØ‰ª•ËÆ©‰ªñ‰∏çË¢´ÈáçÂÜôÔºåÁ¨¨‰∫å‰πüÂèØ‰ª•ÂÖ≥Èó≠ÂÆÉÁöÑÂä®ÊÄÅÁªëÂÆö„ÄÇ Âä®ÊÄÅÁªëÂÆöÔºàÂêéÊúüÁªëÂÆöÔºâÔºöËøêË°åÊó∂Ê†πÊçÆÂØπË±°ÁöÑÁ±ªÂûãËøõË°åÁªëÂÆöÔºåjava‰∏≠ÁöÑÂ§ßÂ§öÊï∞ÊñπÊ≥ïÈÉΩÊòØÂ±û‰∫éÂä®ÊÄÅÁªëÂÆöÔºå‰πüÂ∞±ÊòØÂÆûÁé∞Â§öÊÄÅÁöÑÂü∫Á°Ä„ÄÇ javaÂÆûÁé∞‰∫ÜÂêéÊúüÁªëÂÆöÔºåÂàôÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∫õÊú∫Âà∂ÔºåÂèØÂú®ËøêË°åÊúüÈó¥Âà§Êñ≠ÂØπË±°ÁöÑÁ±ªÂûãÔºåÂπ∂ÂàÜÂà´Ë∞ÉÁî®ÈÄÇÂΩìÁöÑÊñπÊ≥ï„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÁºñËØëÁöÑÊó∂ÂÄôËØ•ÊñπÊ≥ï‰∏ç‰∏éÊâÄÂú®Á±ªÁªëÂÆöÔºåÁºñËØëÂô®Ê≠§Êó∂‰æùÁÑ∂‰∏çÁü•ÈÅìÂØπË±°ÁöÑÁ±ªÂûãÔºå‰ΩÜÊñπÊ≥ïË∞ÉÁî®Êú∫Âà∂ËÉΩËá™Â∑±ÂéªË∞ÉÊü•ÔºåÊâæÂà∞Ê≠£Á°ÆÁöÑÊñπÊ≥ï‰∏ª‰Ωì„ÄÇjavaÈáåÂÆûÁé∞Âä®ÊÄÅÁªëÂÆöÁöÑÊòØJVM. Âä®ÊÄÅÁªëÂÆöÊòØÂÆûÁé∞Â§öÊÄÅÁöÑÊäÄÊúØÔºåÊòØÊåáÂú®ÊâßË°åÊúüÈó¥Âà§Êñ≠ÊâÄÂºïÁî®ÂØπË±°ÁöÑÂÆûÈôÖÁ±ªÂûãÔºåÊ†πÊçÆÂÖ∂ÂÆûÈôÖÁöÑÁ±ªÂûãË∞ÉÁî®ÂÖ∂Áõ∏Â∫îÁöÑÊñπÊ≥ï„ÄÇ Â§öÊÄÅÁöÑ‰ΩúÁî®Ê∂àÈô§Á±ªÂûã‰πãÈó¥ÁöÑËÄ¶ÂêàÂÖ≥Á≥ª„ÄÇÂç≥ÔºöÊää‰∏çÂêåÁöÑÂ≠êÁ±ªÂØπË±°ÈÉΩÂΩì‰ΩúÁà∂Á±ªÊù•ÁúãÔºåÂèØ‰ª•Â±èËîΩ‰∏çÂêåÂ≠êÁ±ªÂØπË±°‰πãÈó¥ÁöÑÂ∑ÆÂºÇÔºåÂÜôÂá∫ÈÄöÁî®ÁöÑ‰ª£Á†ÅÔºåÂÅöÂá∫ÈÄöÁî®ÁöÑÁºñÁ®ãÔºå‰ª•ÈÄÇÂ∫îÈúÄÊ±ÇÁöÑ‰∏çÊñ≠ÂèòÂåñ„ÄÇ Â§öÊÄÅÂ≠òÂú®ÁöÑ‰∏â‰∏™ÂøÖË¶ÅÊù°‰ª∂‰∏Ä„ÄÅË¶ÅÊúâÁªßÊâøÔºõ‰∫å„ÄÅË¶ÅÊúâÈáçÂÜôÔºõ‰∏â„ÄÅÁà∂Á±ªÂºïÁî®ÊåáÂêëÂ≠êÁ±ªÂØπË±°„ÄÇ Â§öÊÄÅÁöÑ‰ºòÁÇπ1.ÂèØÊõøÊç¢ÊÄßÔºàsubstitutabilityÔºâ„ÄÇÂ§öÊÄÅÂØπÂ∑≤Â≠òÂú®‰ª£Á†ÅÂÖ∑ÊúâÂèØÊõøÊç¢ÊÄß„ÄÇ2.ÂèØÊâ©ÂÖÖÊÄßÔºàextensibilityÔºâ„ÄÇÂ§öÊÄÅÂØπ‰ª£Á†ÅÂÖ∑ÊúâÂèØÊâ©ÂÖÖÊÄß„ÄÇÂ¢ûÂä†Êñ∞ÁöÑÂ≠êÁ±ª‰∏çÂΩ±ÂìçÂ∑≤Â≠òÂú®Á±ªÁöÑÂ§öÊÄÅÊÄß„ÄÅÁªßÊâøÊÄßÔºå‰ª•ÂèäÂÖ∂‰ªñÁâπÊÄßÁöÑËøêË°åÂíåÊìç‰Ωú„ÄÇÂÆûÈôÖ‰∏äÊñ∞Âä†Â≠êÁ±ªÊõ¥ÂÆπÊòìËé∑ÂæóÂ§öÊÄÅÂäüËÉΩ„ÄÇ3.Êé•Âè£ÊÄßÔºàinterface-abilityÔºâ„ÄÇÂ§öÊÄÅÊòØË∂ÖÁ±ªÈÄöËøáÊñπÊ≥ïÁ≠æÂêçÔºåÂêëÂ≠êÁ±ªÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖ±ÂêåÊé•Âè£ÔºåÁî±Â≠êÁ±ªÊù•ÂÆåÂñÑÊàñËÄÖË¶ÜÁõñÂÆÉËÄåÂÆûÁé∞ÁöÑ„ÄÇ4.ÁÅµÊ¥ªÊÄßÔºàflexibilityÔºâ„ÄÇÂÆÉÂú®Â∫îÁî®‰∏≠‰ΩìÁé∞‰∫ÜÁÅµÊ¥ªÂ§öÊ†∑ÁöÑÊìç‰ΩúÔºåÊèêÈ´ò‰∫Ü‰ΩøÁî®ÊïàÁéá„ÄÇ5.ÁÆÄÂåñÊÄßÔºàsimplicityÔºâ„ÄÇÂ§öÊÄÅÁÆÄÂåñÂØπÂ∫îÁî®ËΩØ‰ª∂ÁöÑ‰ª£Á†ÅÁºñÂÜôÂíå‰øÆÊîπËøáÁ®ãÔºåÂ∞§ÂÖ∂Âú®Â§ÑÁêÜÂ§ßÈáèÂØπË±°ÁöÑËøêÁÆóÂíåÊìç‰ΩúÊó∂ÔºåËøô‰∏™ÁâπÁÇπÂ∞§‰∏∫Á™ÅÂá∫ÂíåÈáçË¶Å„ÄÇ Â§öÊÄÅÁöÑÂÆûÁé∞ÊñπÂºèJava‰∏≠Â§öÊÄÅÁöÑÂÆûÁé∞ÊñπÂºèÔºö Êé•Âè£ÂÆûÁé∞ ÁªßÊâøÁà∂Á±ªËøõË°åÊñπÊ≥ïÈáçÂÜô Âêå‰∏Ä‰∏™Á±ª‰∏≠ËøõË°åÊñπÊ≥ïÈáçËΩΩ„ÄÇ‰æãÂ≠êÊó†ËÆ∫Â∑•‰ΩúËøòÊòØÂ≠¶‰π†‰∏≠ÔºåÁ¨îÈÉΩÊòØÊàë‰ª¨ÁªèÂ∏∏Áî®Âà∞ÁöÑÂ∑•ÂÖ∑„ÄÇ‰ΩÜÊòØÁ¨îÁöÑÁßçÁ±ªÂèàÈùûÂ∏∏ÁöÑÁπÅÂ§öÔºåÈìÖÁ¨î„ÄÅÁ≠æÂ≠óÁ¨î„ÄÅÊ∞¥Á¨î„ÄÅÊØõÁ¨î„ÄÅÈí¢Á¨î‚Ä¶„ÄÇÁé∞Âú®Êàë‰ª¨Ë¶ÅÂØπ‚ÄúÁ¨î‚ÄùËøõË°åÊäΩË±°ÔºåÊäΩË±°Êàê‰∏Ä‰∏™ÊäΩË±°Áà∂Á±ª‚ÄúPen‚Äù 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.glmapper.demo.base;/** * ÊäΩË±°Áà∂Á±ªÔºöÁ¨î * @author glmapper */public abstract class Pen &#123; //Á¨îÁöÑÈïøÂ∫¶ private int length; //È¢úËâ≤ private String color; //Á±ªÂûã private String type; //‰ª∑Ê†º private double price; //ÂÜôÂ≠ó public abstract void write(String cnt); public int getLength() &#123; return length; &#125; public void setLength(int length) &#123; this.length = length; &#125; public String getColor() &#123; return color; &#125; public void setColor(String color) &#123; this.color = color; &#125; public String getType() &#123; return type; &#125; public void setType(String type) &#123; this.type = type; &#125; public double getPrice() &#123; return price; &#125; public void setPrice(double price) &#123; this.price = price; &#125; &#125; Áé∞Âú®Êúâ‰∏§‰∏™Â≠êÁ±ªÔºåÂàÜÂà´ÊòØÔºöÈìÖÁ¨îÂíåÈí¢Á¨î„ÄÇ ÈìÖÁ¨îÁ±ªÔºåÁªßÊâøÁà∂Á±ªPenÔºåÂπ∂ÈáçÂÜôwriteÊñπÊ≥ï1234567891011121314151617package com.glmapper.demo.base;/** * ÈìÖÁ¨îÁ±ª ÁªßÊâøÁà∂Á±ª Á¨îÔºàÊª°Ë∂≥ÂøÖË¶ÅÊù°‰ª∂‰∏ÄÔºöÊúâÁªßÊâø„ÄêÂÖ∂ÂÆûÂ¶ÇÊûúÊòØÊé•Âè£ÁöÑËØùÔºåimplementÂÆûÁé∞‰πüÊòØÂèØ‰ª•ÁöÑ„ÄëÔºâ * @author glmapper * */public class Pencil extends Pen&#123; /** * Áà∂Á±ªÁöÑÊäΩË±°ÊñπÊ≥ïÂßîÊâòÂ≠êÁ±ªÂÖ∑‰ΩìÂÆûÁé∞ÔºöË¶ÜÁõñ */ //Êª°Ë∂≥ÂøÖË¶ÅÊù°‰ª∂‰∫åÔºöË¶ÅÊúâÈáçÂÜô„ÄêÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÊòØÂØπ‰∫éwriteÊúâÈáçËΩΩ‰πüÊòØÂèØ‰ª•ÁöÑÔºå‰∏çÂêåÁöÑÊ¶ÇÂøµËÄåÂ∑≤„Äë @Override public void write(String cnt) &#123; System.out.println(&quot;ËøôÊòØ‰∏ÄÂè™ÈìÖÁ¨îÂÜôÁöÑÂÜÖÂÆπÔºåÂÜÖÂÆπÊòØÔºö&quot;+cnt); &#125;&#125; Èí¢Á¨îÁ±ªÔºåÁªßÊâøÁà∂Á±ªPenÔºåÂπ∂ÈáçÂÜôwriteÊñπÊ≥ï 1234567891011121314package com.glmapper.demo.base;/** * Èí¢Á¨îÁ±ª ÁªßÊâøÁà∂Á±ª Á¨î * @author 17070738 * */public class Fountainpen extends Pen&#123; @Override public void write(String cnt) &#123; System.out.println(&quot;ËøôÊòØ‰∏ÄÊîØÈí¢Á¨îÂÜôÁöÑÂÜÖÂÆπÔºåÂÜÖÂÆπÊòØÔºö&quot;+cnt); &#125;&#125; ÊµãËØïÔºö 12345678910111213package com.glmapper.demo.base;public class MainTest &#123; public static void main(String[] args) &#123; /* Pen pen= new Pencil();*/ //ÂøÖË¶ÅÊù°‰ª∂‰∏âÔºöÁà∂Á±ªÂºïÁî®ÊåáÂêëÂ≠êÁ±ªÂØπË±°„ÄÇ Pen pen= new Fountainpen(); pen.write(&quot;ÊàëÊòØ‰∏ÄÊîØÁ¨î&quot;); &#125;&#125; ËæìÂá∫ÁªìÊûúÔºöËøôÊòØ‰∏ÄÊîØÈí¢Á¨îÂÜôÁöÑÂÜÖÂÆπÔºåÂÜÖÂÆπÊòØÔºöÊàëÊòØ‰∏ÄÊîØÁ¨î ËØ¥ÊòéÂèØÊõøÊç¢ÊÄßÔºöÂ§öÊÄÅÂØπÁ¨îPenÁ±ªÂ∑•‰ΩúÔºåÂØπÂÖ∂‰ªñ‰ªª‰ΩïÂ≠êÁ±ªÔºåÂ¶ÇÈìÖÁ¨î„ÄÅÈí¢Á¨îÔºå‰πüÂêåÊ†∑Â∑•‰Ωú„ÄÇÂèØÊâ©ÂÖÖÊÄßÔºöÂú®ÂÆûÁé∞‰∫ÜÈìÖÁ¨î„ÄÅÈí¢Á¨îÁöÑÂ§öÊÄÅÂü∫Á°Ä‰∏äÔºåÂæàÂÆπÊòìÂ¢ûÊ∑ª‚ÄúÁ¨î‚ÄùÁ±ªÁöÑÂ§öÊÄÅÊÄß„ÄÇ Êé•Âè£‰∏Ä‰∏™JavaÊé•Âè£ÔºåÂ∞±ÊòØ‰∏Ä‰∫õÊñπÊ≥ïÁâπÂæÅÁöÑÈõÜÂêà„ÄÇ„ÄêÊú¨ÊñáËßíÂ∫¶Âπ∂ÈùûÊòØjavaÂü∫Á°ÄËßíÂ∫¶Êù•ËØ¥Ôºå‰∏ªË¶ÅÊòØ‰ª•ËÆæËÆ°Ê®°Âºè‰∏≠ÁöÑÂ∫îÁî®‰∏∫ËÉåÊôØÔºåÂõ†Ê≠§ÂØπ‰∫éÁõ∏ÂÖ≥ÂÆö‰πâÂèäÁî®Ê≥ïËØ∑Ëá™Ë°åÂ≠¶‰π†„ÄÇhttp://www.runoob.com/java/java-interfaces.html„ÄëÊàë‰ª¨Âú®Âπ≥Êó∂ÁöÑÂ∑•‰Ωú‰∏≠ÔºåÊèêÂà∞Êé•Âè£Ôºå‰∏ÄËà¨‰ºöÂê´Êúâ‰∏§Áßç‰∏çÂêåÁöÑÂê´‰πâÔºå ÊåáÁöÑÊòØjavaÊé•Âè£ÔºåËøôÊòØ‰∏ÄÁßçjavaËØ≠Ë®Ä‰∏≠Â≠òÂú®ÁöÑÁªìÊûÑÔºåÊúâÁâπÂÆöÁöÑËØ≠Ê≥ïÂíåÁªìÊûÑ Êåá‰∏Ä‰∏™Á±ªÊâÄÂÖ∑ÊúâÁöÑÊñπÊ≥ïÁâπÂæÅÁöÑÈõÜÂêàÔºåÊòØ‰∏ÄÁßçÈÄªËæë‰∏äÁöÑÊäΩË±°„ÄÇ ÂâçËÄÖÂè´ÂÅö‚ÄújavaÊé•Âè£‚ÄùÔºåÂêéËÄÖÂè´ÁùÄ‚ÄúÊé•Âè£‚Äù„ÄÇ‰æãÂ¶ÇÔºöjava.lang.RunnableÂ∞±ÊòØ‰∏Ä‰∏™javaÊé•Âè£„ÄÇ ‰∏∫‰ªÄ‰πà‰ΩøÁî®Êé•Âè£Êàë‰ª¨ËÄÉËôë‰∏Ä‰∏ãÔºåÂÅáÂ¶ÇÊ≤°ÊúâÊé•Âè£‰ºöÊÄé‰πàÊ†∑Âë¢Ôºü‰∏Ä‰∏™Á±ªÊÄªÂΩíÊòØÂèØ‰ª•ÈÄöËøáÁªßÊâøÊù•ËøõË°åÊâ©Â±ïÁöÑÔºåËøôÈöæÈÅì‰∏çË∂≥‰ª•Êàë‰ª¨ÁöÑÂÆûÈôÖÂ∫îÁî®ÂêóÔºü‰∏Ä‰∏™ÂØπË±°ÈúÄË¶ÅÁü•ÈÅìÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õÂØπË±°ÔºåÂπ∂‰∏î‰∏éÂÖ∂‰ªñÁöÑÂØπË±°ÂèëÁîüÁõ∏‰∫íÁöÑ‰ΩúÁî®ÔºåËøôÊòØÂõ†‰∏∫Ëøô‰∫õÂØπË±°ÈúÄË¶ÅÂÄü‰Ωè‰∫éÂÖ∂‰ªñÂØπË±°ÁöÑË°å‰∏∫‰ª•‰æø‰∫éÂÆåÊàê‰∏ÄÈ°πÂ∑•‰Ωú„ÄÇËøô‰∫õÂÖ≥‰∫éÂÖ∂‰ªñÂØπË±°ÁöÑÁü•ËØÜÔºå‰ª•ÂèäÂØπÂÖ∂‰ªñÂØπË±°Ë°å‰∏∫ÁöÑË∞ÉÁî®ÔºåÈÉΩÊòØ‰ΩøÁî®Á°¨‰ª£Á†ÅÂÜôÂú®Á±ªÈáåÈù¢ÁöÑÔºåÂèØÊèíÂÖ•ÊÄßÂá†‰πé‰∏∫0„ÄÇÂ¶ÇÔºöÈí¢Á¨î‰∏≠ÈúÄË¶ÅÈí¢Á¨îÊ∞¥ÔºåÈí¢Á¨îÊ∞¥Êúâ‰∏çÂêåÁöÑÈ¢úËâ≤ÔºöÈí¢Á¨îÊ∞¥Á±ªÔºö1234567891011121314151617181920212223package com.glmapper.demo.base;/** * Èí¢Á¨îÂ¢®Ê∞¥ * @author glmapper */public class PenInk &#123; //Â¢®Ê∞¥È¢úËâ≤ private String inkColor; public String getInkColor() &#123; return inkColor; &#125; public void setInkColor(String inkColor) &#123; this.inkColor = inkColor; &#125; public PenInk(String inkColor) &#123; super(); this.inkColor = inkColor; &#125; &#125; Èí¢Á¨î‰∏≠ÊåÅÊúâ‰∏Ä‰∏™Â¢®Ê∞¥Á±ªÁöÑÂØπË±°ÂºïÁî®Ôºö 123456789101112131415package com.glmapper.demo.base;/** * Èí¢Á¨îÁ±ª ÁªßÊâøÁà∂Á±ª Á¨î * @author 17070738 * */public class Fountainpen extends Pen&#123; //ÂºïÁî®ÊåÅÊúâ PenInk ink =new PenInk(&quot;black&quot;); @Override public void write(String cnt) &#123; System.out.println(&quot;Èí¢Á¨îÂ¢®Ê∞¥È¢úËâ≤ÊòØÔºö&quot;+ink.getInkColor()); System.out.println(&quot;ËøôÊòØ‰∏ÄÊîØÈí¢Á¨îÂÜôÁöÑÂÜÖÂÆπÔºåÂÜÖÂÆπÊòØÔºö&quot;+cnt); &#125;&#125; ‰ΩÜÊòØËøôÁßçÊó∂ÂÄôÔºåÊàë‰ª¨ÈúÄË¶ÅÊç¢‰∏ÄÁßçÈ¢úËâ≤ÊÄé‰πàÂäûÂë¢ÔºüÂ∞±ÂøÖÈ°ªË¶ÅÂØπFountainpen‰∏≠ÁöÑ‰ª£Á†ÅËøõË°å‰øÆÊîπÔºåÂ∞ÜÂàõÂª∫PenInkÂØπË±°Êó∂ÁöÑinkColorÂ±ûÊÄßËøõË°åÊõ¥ÊîπÔºõÁé∞Âú®ÂÅáÂ¶ÇÊàë‰ª¨Êúâ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÁ±ªÔºåÊèê‰æõÊüêÁßç‰ΩøÁî®Á°¨‰ª£Á†ÅÂÜôÂú®Á±ª‰∏≠ÁöÑË°å‰∏∫ÔºõÁé∞Âú®ÔºåË¶ÅÊèê‰æõ‰∏Ä‰∫õÁ±ª‰ººÁöÑË°å‰∏∫ÔºåÂπ∂‰∏îÂèØ‰ª•ÂÆûÁé∞Âä®ÊÄÅÁöÑÂèØÊèíÂÖ•Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåË¶ÅËÉΩÂ§üÂä®ÊÄÅÁöÑÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏ÄÁßçÂÆûÁé∞„ÄÇ‰∏ÄÁßçÊñπÊ°àÂ∞±ÊòØ‰∏∫Ëøô‰∏™Á±ªÊèê‰æõ‰∏Ä‰∏™ÊäΩË±°Áà∂Á±ªÔºå‰∏îÂ£∞ÊòéÂá∫Â≠êÁ±ªË¶ÅÊèê‰æõÁöÑË°å‰∏∫ÔºåÁÑ∂ÂêéËÆ©Ëøô‰∏™ÂÖ∑‰ΩìÁ±ªÁªßÊâøËá™Ëøô‰∏™ÊäΩË±°Áà∂Á±ª„ÄÇÂêåÊó∂Ôºå‰∏∫Ëøô‰∏™ÊäΩË±°Áà∂Á±ªÊèê‰æõÂè¶Â§ñ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂ≠êÁ±ªÔºåËøô‰∏™Â≠êÁ±ª‰ª•‰∏çÂêåÁöÑÊñπÊ≥ïÂÆûÁé∞‰∫ÜÁà∂Á±ªÊâÄÂ£∞ÊòéÁöÑË°å‰∏∫„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•Âä®ÊÄÅÁöÑÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂ≠êÁ±ªÔºåËøôÊòØÂê¶ÂèØ‰ª•Êèê‰æõÂèØÊèíÂÖ•ÊÄßÂë¢ÔºüÊîπËøõ‰πãÂêéÁöÑ‰ª£Á†ÅÔºöÂ≠êÁ±ª1ÔºöÈªëËâ≤Â¢®Ê∞¥1234567891011package com.glmapper.demo.base;/** * ÈªëËâ≤Â¢®Ê∞¥ * @author glmapper */public class BlackInk extends PenInk&#123; public BlackInk() &#123; super(&quot;black&quot;); &#125;&#125; Â≠êÁ±ª2ÔºöËìùËâ≤Â¢®Ê∞¥ 1234567891011package com.glmapper.demo.base;/** * ËìùËâ≤Â¢®Ê∞¥ * @author glmapper */public class BlueInk extends PenInk&#123; public BlueInk() &#123; super(&quot;blue&quot;); &#125;&#125; Èí¢Á¨îÁ±ªÂºïÁî®Ôºö 123456789101112131415161718package com.glmapper.demo.base;/** * Èí¢Á¨îÁ±ª ÁªßÊâøÁà∂Á±ª Á¨î * @author 17070738 * */public class Fountainpen extends Pen&#123; PenInk ink ; //ÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÂàùÂßãÂåñPenInk ÔºåPenInkÁî±ÂÖ∑‰ΩìÂ≠êÁ±ªÊù•ÂÆûÁé∞ public Fountainpen(PenInk ink) &#123; this.ink = ink; &#125; @Override public void write(String cnt) &#123; System.out.println(&quot;Èí¢Á¨îÂ¢®Ê∞¥È¢úËâ≤ÊòØÔºö&quot;+ink.getInkColor()); System.out.println(&quot;ËøôÊòØ‰∏ÄÊîØÈí¢Á¨îÂÜôÁöÑÂÜÖÂÆπÔºåÂÜÖÂÆπÊòØÔºö&quot;+cnt); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî®Ôºö 12345678public static void main(String[] args) &#123; /** * ‰ΩøÁî®ÈªëËâ≤Â¢®Ê∞¥Â≠êÁ±ª */ Pen pen= new Fountainpen(new BlackInk()); pen.write(&quot;ÊàëÊòØ‰∏ÄÊîØÁ¨î&quot;); &#125; ‰ªé‰∏äÈù¢‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÁ°ÆÂÆûÂèØ‰ª•Âú®ÁÆÄÂçïÁöÑÊÉÖÂÜµ‰∏ãÊèê‰æõ‰∫ÜÂä®ÊÄÅÂèØÊèíÂÖ•ÊÄß„ÄÇ ‰ΩÜÊòØÁî±‰∫éjavaËØ≠Ë®ÄÊòØ‰∏Ä‰∏™ÂçïÁªßÊâøÁöÑËØ≠Ë®ÄÔºåÊç¢Ë®Ä‰πãÔºå‰∏Ä‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™Ë∂ÖÁ±ªÔºåÂõ†Ê≠§ÔºåÂú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™ÂÖ∑‰ΩìÁ±ªÂèØËÉΩÂ∑≤ÁªèÊúâ‰∫Ü‰∏Ä‰∏™Ë∂ÖÁ±ªÔºåËøô‰∏™Êó∂ÂÄôÔºåË¶ÅÁªô‰ªñÂä†‰∏ä‰∏Ä‰∏™Êñ∞ÁöÑË∂ÖÁ±ªÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇÂ¶ÇÊûúÁ°¨Ë¶ÅÂÅöÁöÑËØùÔºåÂ∞±Âè™Â•ΩÊääËøô‰∏™Êñ∞ÁöÑË∂ÖÁ±ªÂä†Âà∞Â∑≤ÊúâÁöÑË∂ÖÁ±ª‰∏äÈù¢ÔºåÂΩ¢ÊàêË∂ÖË∂ÖÁ±ªÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúËøô‰∏™Ë∂ÖË∂ÖÁ±ªÁöÑ‰ΩçÁΩÆ‰πüÂ∑≤ÁªèË¢´Âç†Áî®‰∫ÜÔºåÂ∞±Âè™Â•ΩÁªßÁª≠Âêë‰∏äÁßªÂä®ÔºåÁõ¥Âà∞ÁßªÂä®Âà∞Á±ªÁ≠âÁ∫ßÁªìÊûÑÁöÑÊúÄÈ°∂Á´Ø„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂØπ‰∏Ä‰∏™ÂÖ∑‰ΩìÁ±ªÁöÑÂèØÊèíÂÖ•ÊÄßËÆæËÆ°ÔºåÂ∞±ÂèòÊàê‰∫ÜÂØπÊï¥‰∏™Á≠âÁ∫ßÁªìÊûÑ‰∏≠ÊâÄÊúâÁ±ªÁöÑ‰øÆÊîπ„ÄÇËøôÁßçËøòÊòØÂÅáËÆæËøô‰∫õË∂ÖÁ±ªÊòØÊàë‰ª¨ÂèØ‰ª•ÊéßÂà∂ÁöÑÔºåÂ¶ÇÊûúÊüê‰∫õË∂ÖÁ±ªÊòØÁî±‰∏Ä‰∫õËΩØ‰ª∂ÂïÜÊèê‰æõÁöÑÔºåÊàë‰ª¨Êó†Ê≥ï‰øÆÊîπÔºåÊÄé‰πàÂäûÂë¢ÔºüÂõ†Ê≠§ÔºåÂÅáËÆæÊ≤°ÊúâÊé•Âè£ÔºåÂèØÊèíÂÖ•ÊÄßÂ∞±Ê≤°Êúâ‰∫Ü‰øùËØÅ„ÄÇ Á±ªÂûãjavaÊé•Âè£Ôºà‰ª•ÂèäjavaÊäΩË±°Á±ªÔºâÁî®Êù•Â£∞Êòé‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûã„ÄÇjavaËÆæËÆ°Â∏àÂ∫îÂΩì‰∏ªË¶Å‰ΩøÁî®javaÊé•Âè£ÂíåÊäΩË±°Á±ªËÄå‰∏çÊòØÂÖ∑‰ΩìÁ±ªËøõË°åÂèòÈáèÁöÑÁ±ªÂûãÂ£∞Êòé„ÄÅÂèÇÊï∞ÁöÑÁ±ªÂûãÂ£∞Êòé„ÄÅÊñπÊ≥ïÁöÑËøîËøòÁ±ªÂûãÂ£∞ÊòéÔºå‰ª•ÂèäÊï∞ÊçÆÁ±ªÂûãÁöÑËΩ¨Êç¢Á≠â„ÄÇÂΩìÁÑ∂Ôºå‰∏Ä‰∏™Êõ¥Â•ΩÁöÑÂÅöÊ≥ïÊòØ‰ªÖ‰ªÖ‰ΩøÁî®javaÊé•Âè£ÔºåËÄå‰∏çË¶Å‰ΩøÁî®ÊäΩË±°javaÁ±ªÊù•ÂÅöÂà∞‰∏äÈù¢Ëøô‰∫õ„ÄÇÂú®ÁêÜÊÉ≥ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™ÂÖ∑‰ΩìjavaÁ±ªÂ∫îÂΩìÂè™ÂÆûÁé∞javaÊé•Âè£ÂíåÊäΩË±°Á±ª‰∏≠Â£∞ÊòéËøáÁöÑÊñπÊ≥ïÔºåËÄå‰∏çÂ∫îËØ•ÁªôÂá∫Â§ö‰ΩôÁöÑÊñπÊ≥ï„ÄÇ Á±ªÂûãÁ≠âÁ∫ßÁªìÊûÑjavaÊé•Âè£Ôºà‰ª•ÂèäÊäΩË±°Á±ªÔºâ‰∏ÄËà¨Áî®Êù•‰Ωú‰∏∫‰∏Ä‰∏™Á±ªÂûãÁöÑÁ≠âÁ∫ßÁªìÊûÑÁöÑËµ∑ÁÇπjavaÁöÑÁ±ªÂûãÊòØ‰ª•Á±ªÂûãÁ≠âÁ∫ßÁªìÊûÑÁöÑÊñπÂºèÁªÑÁªáËµ∑Êù•ÁöÑÔºåÂú®‰∏Ä‰∏™Á±ªÂûãÁ≠âÁ∫ßÁªìÊûÑÈáåÈù¢Ôºå‰∏Ä‰∏™Á±ªÂûãÂèØ‰ª•Êúâ‰∏ÄÁ≥ªÂàóÁöÑË∂ÖÁ±ªÂûãÔºåËøôÊó∂Ëøô‰∏™Á±ªÂûãÂè´ÂÅöÂÖ∂Ë∂ÖÁ±ªÂûãÁöÑÂ≠êÁ±ªÂûã„ÄÇÂ≠êÁ±ªÂûãÁöÑÂÖ≥Á≥ªÊòØ‰º†ÈÄíÊÄßÔºöÁ±ªÂûãÁî≤ÊòØÁ±ªÂûã‰πôÁöÑÂ≠êÁ±ªÂûãÔºåÁ±ªÂûã‰πôÊòØÁ±ªÂûã‰∏ôÁöÑÂ≠êÁ±ªÂûãÔºåÈÇ£‰πàÁ±ªÂûãÁî≤Â∞±ÊòØÁ±ªÂûã‰∏ôÁöÑÂ≠êÁ±ªÂûã„ÄÇ Ê∑∑ÂêàÁ±ªÂûãÂ¶ÇÊûú‰∏Ä‰∏™Á±ªÂ∑≤ÁªèÊúâ‰∏Ä‰∏™‰∏ªË¶ÅÁöÑË∂ÖÁ±ªÂûãÔºåÈÇ£‰πàÈÄöËøáÂÆûÁé∞‰∏Ä‰∏™Êé•Âè£ÔºåËøô‰∏™Á±ªÂèØ‰ª•Êã•ÊúâÂè¶‰∏Ä‰∏™Ê¨°Ë¶ÅÁöÑË∂ÖÁ±ªÂûã„ÄÇËøôÁßçÊ¨°Ë¶ÅÁöÑË∂ÖÁ±ªÂûãÂ∞±Âè´ÂÅöÊ∑∑ÂêàÁ±ªÂûã„ÄÇ‰æãÂ¶ÇÔºöÂú®java‰∏≠Ôºå TreeMapÁ±ªÊúâÂ§ö‰∏™Á±ªÂûãÔºåÂÆÉÁöÑ‰∏ªË¶ÅÁ±ªÂûãÊòØAbstractMap,ËøôÊòØ‰∏ÄÁßçjavaÁöÑËÅöÈõÜÔºõËÄåCloneableÊé•Âè£ÂàôÁªôÂá∫‰∫Ü‰∏Ä‰∏™Ê¨°Ë¶ÅÁ±ªÂûãÔºåËøô‰∏™Á±ªÂûãËØ¥ÊòéÂΩìÂâçÁ±ªÁöÑÂØπË±°ÊòØÂèØ‰ª•Ë¢´ÂÖãÈöÜÔºõÂêåÊó∂Serializable‰πüÊòØ‰∏Ä‰∏™Ê¨°Ë¶ÅÁ±ªÂûãÔºåÂÆÉË°®ÊòéÂΩìÂâçÁ±ªÁöÑÂØπË±°ÊòØÂèØ‰ª•Ë¢´Â∫èÂàóÂåñÁöÑ„ÄÇËÄåNavigableMapÁªßÊâø‰∫ÜSortedMap,Âõ†‰∏∫‰πãÂâçËØ¥Âà∞ËøáÔºåÂ≠êÁ±ªÂûãÊòØÂèØ‰ª•‰º†ÈÄíÁöÑÔºåÂõ†Ê≠§ÂØπ‰∫éTreeMapÊù•ËØ¥ÔºåSortedMapÔºàÊàñËÄÖËØ¥NavigableMapÔºâË°®ÊòéËøô‰∏™ËÅöÈõÜÁ±ªÊòØÂèØ‰ª•ÊéíÂ∫èÁöÑ„ÄÇ Êé•Âè£ÁöÑ‰∏Ä‰∫õÁî®Ê≥ï ÂçïÊé•Âè£ÊñπÊ≥ïÔºöÊé•Âè£‰∏≠Âè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÔºõjavaËØ≠Ë®Ä‰∏≠ÊúâÂæàÂ§ö‰ΩÜÊñπÊ≥ïÊé•Âè£ÁöÑ‰ΩøÁî®ÔºåRunnalbleÊé•Âè£‰∏≠ÁöÑrunÔºàÔºâÊñπÊ≥ï„ÄÇ 1234567891011121314public interface Runnable &#123; /** * When an object implementing interface &lt;code&gt;Runnable&lt;/code&gt; is used * to create a thread, starting the thread causes the object&apos;s * &lt;code&gt;run&lt;/code&gt; method to be called in that separately executing * thread. * &lt;p&gt; * The general contract of the method &lt;code&gt;run&lt;/code&gt; is that it may * take any action whatsoever. * * @see java.lang.Thread#run() */ public abstract void run();&#125; Ê†áËØÜÊé•Âè£ÔºöÊ≤°Êúâ‰ªª‰ΩïÊñπÊ≥ïÂíåÂ±ûÊÄßÁöÑÊé•Âè£ÔºõÊ†áËØÜÊé•Âè£‰∏çÂØπÂÆûÁé∞ÂÆÉÁöÑÁ±ªÊúâ‰ªª‰ΩïËØ≠‰πâ‰∏äÁöÑË¶ÅÊ±ÇÔºå‰ªÖ‰ªÖÊòØË°®ÊòéÂÆûÁé∞ËØ•Êé•Âè£ÁöÑÁ±ªÂ±û‰∫é‰∏Ä‰∏™ÁâπÂÆöÁöÑÁ±ªÂûã„ÄÇ‰∏äÈù¢ËØ¥Âà∞ÁöÑSerializableÊé•Âè£Â∞±ÊòØ‰∏ÄÁßçÊ†áËØÜÊé•Âè£„ÄÇ 12public interface Serializable &#123;&#125; Â∏∏ÈáèÊé•Âè£ÔºöÁî®javaÊé•Âè£Êù•Â£∞Êòé‰∏Ä‰∫õÂ∏∏Èáè 12345package com.glmapper.demo.base;public interface MyConstants &#123; public static final String USER_NAME=&quot;admin&quot;;&#125;; ËøôÊ†∑‰∏ÄÊù•ÔºåÂá°ÊòØÂÆûÁé∞Ëøô‰∏™Êé•Âè£ÁöÑÁ±ªÈÉΩ‰ºöËá™Âä®ÁªßÊâøËøô‰∫õÂ∏∏ÈáèÔºåÂπ∂‰∏îÈÉΩÂèØ‰ª•ÂÉè‰ΩøÁî®Ëá™Â∑±ÁöÑÂ∏∏Èáè‰∏ÄÊ†∑Ôºå‰∏çÈúÄË¶ÅÂÜçÁî®MyConstants.USER_NAMEÊù•‰ΩøÁî®„ÄÇ ÊäΩË±°Á±ªÂú®javaËØ≠Ë®ÄÈáåÈù¢ÔºåÁ±ªÊúâ‰∏§ÁßçÔºå‰∏ÄÁßçÊòØÂÖ∑‰ΩìÁ±ªÔºå‰∏ÄÁßçÊòØÊäΩË±°Á±ª„ÄÇÂú®‰∏äÈù¢ÁªôÂá∫ÁöÑ‰ª£Á†Å‰∏≠Ôºå‰ΩøÁî®absract‰øÆÈ•∞ÁöÑÁ±ª‰∏∫ÊäΩË±°Á±ª„ÄÇÊ≤°ÊúâË¢´abstract‰øÆÈ•∞ÁöÑÁ±ªÊòØÂÖ∑‰ΩìÁ±ª„ÄÇÊäΩË±°Á±ªÈÄöÂ∏∏‰ª£Ë°®‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµÔºåÂÆÉÊèê‰æõ‰∏Ä‰∏™ÁªßÊâøÁöÑÂá∫ÂèëÁÇπ„ÄÇËÄåÂÖ∑‰ΩìÁ±ªÂàô‰∏çÂêåÔºåÂÖ∑‰ΩìÁ±ªÂèØ‰ª•Ë¢´ÂÆû‰æãÂåñÔºåÂ∫îÂΩìÁªôÂá∫‰∏Ä‰∏™ÊúâÈÄªËæëÂÆûÁé∞ÁöÑÂØπË±°Ê®°Êùø„ÄÇÁî±‰∫éÊäΩË±°Á±ª‰∏çÂèØ‰ª•Ë¢´ÂÆû‰æãÂåñÔºåÂõ†Ê≠§‰∏Ä‰∏™Á®ãÂ∫èÂëòËÆæËÆ°‰∏Ä‰∏™Êñ∞ÁöÑÊäΩË±°Á±ªÔºå‰∏ÄÂÆöÊòØÁî®Êù•Ë¢´ÁªßÊâøÁöÑ„ÄÇÔºà‰∏çÂª∫ËÆÆ‰ΩøÁî®ÂÖ∑‰ΩìÁ±ªÊù•ËøõË°åÁõ∏ÂÖ≥ÁöÑÁªßÊâøÔºâ„ÄÇ ÂÖ≥‰∫é‰ª£Á†ÅÈáçÊûÑÂÅáËÆæÊúâ‰∏§‰∏™ÂÖ∑‰ΩìÁ±ªÔºåÁ±ªAÂíåÁ±ªBÔºåÁ±ªBÊòØÁ±ªAÁöÑÂ≠êÁ±ªÔºåÈÇ£‰πà‰∏Ä‰∏™ÊØîËæÉÁÆÄÂçïÁöÑÊñπÊ°àÂ∫îËØ•ÊòØÂª∫Á´ã‰∏Ä‰∏™ÊäΩË±°Á±ªÔºàÊàñËÄÖjavaÊé•Âè£ÔºâÔºåÊöÇÂÆö‰∏∫CÔºåÁÑ∂ÂêéËÆ©Á±ªAÂíåÁ±ªBÊàê‰∏∫ÊäΩË±°Á±ªCÁöÑÂ≠êÁ±ª„ÄêÊ≤°Êúâ‰ΩøÁî®UMLÁöÑÊñπÂºèÊù•ÁªòÂà∂ÔºåËØ∑ËßÅË∞ÖÂìà„Äë„ÄÇ ‰∏äÈù¢ÂÖ∂ÂÆûÂ∞±ÊòØÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºåÂêéÈù¢‰ºöÂÖ∑‰Ωì‰ªãÁªçÂà∞ÁöÑ„ÄÇËøôÁßçÈáçÊûÑ‰πãÂêéÔºåÊàë‰ª¨ÈúÄË¶ÅÂÅöÁöÑÂ∞±ÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÁ±ªAÂíåÁ±ªBÁöÑÂÖ±Âêå‰ª£Á†ÅÂíåÂÖ±ÂêåÊï∞ÊçÆ„ÄÇ‰∏ãÈù¢ÁªôÂá∫Áõ∏ÂÖ≥ÂáÜÂàô„ÄÇ ÊäΩË±°Á±ªÂ∫îÂΩìÊã•ÊúâÂ∞ΩÂèØËÉΩÂ§öÁöÑÂÖ±Âêå‰ª£Á†Å Âú®‰∏Ä‰∏™ÁªßÊâøÁ≠âÁ∫ßÁªìÊûÑ‰∏≠ÔºåÂÖ±ÂêåÁöÑ‰ª£Á†ÅÂ∫îÂΩìÂ∞ΩÈáèÂêëÁªìÊûÑÁöÑÈ°∂Â±ÇÁßªÂä®ÔºåÂ∞ÜÈáçÂ§çÁöÑ‰ª£Á†Å‰ªéÂ≠êÁ±ª‰∏≠ÊäΩÁ¶ªÔºåÊîæÂú®ÊäΩË±°Áà∂Á±ª‰∏≠ÔºåÊèêÈ´ò‰ª£Á†ÅÁöÑÂ§çÁî®Áéá„ÄÇËøôÊ†∑ÂÅöÁöÑÂè¶Â§ñ‰∏Ä‰∏™Â•ΩÂ§ÑÊòØÔºåÂú®‰ª£Á†ÅÂèëÁîüÊîπÂèòÊó∂ÔºåÊàë‰ª¨Âè™ÈúÄË¶Å‰øÆÊîπ‰∏Ä‰∏™Âú∞Êñπ„ÄêÂõ†‰∏∫ÂÖ±Âêå‰ª£Á†ÅÂùáÂú®Áà∂Á±ª‰∏≠„Äë„ÄÇ ÊäΩË±°Á±ªÂ∫îÂΩìÊã•ÊúâÂ∞ΩÂèØËÉΩÂ∞ëÁöÑÊï∞ÊçÆÊï∞ÊçÆÁöÑÁßªÂä®ÊñπÂêëÊòØ‰ªéÊäΩË±°Á±ªÂà∞ÂÖ∑‰ΩìÁ±ªÔºå‰πüÂ∞±ÊòØ‰ªéÁªßÊâøÁ≠âÁ∫ßÁöÑÈ°∂Â±ÇÂà∞Â∫ïÂ±ÇÁöÑÁßªÂä®„ÄÇÊàë‰ª¨Áü•ÈÅìÔºå‰∏Ä‰∏™ÂØπË±°ÁöÑÊï∞ÊçÆ‰∏çËÆ∫ÊòØÂê¶‰ΩøÁî®ÈÉΩ‰ºöÂç†Áî®ËµÑÊ∫êÔºåÂõ†Ê≠§Êï∞ÊçÆÂ∫îÂΩìÂ∞ΩÈáèÊîæÂà∞ÂÖ∑‰ΩìÁ±ªÊàñËÄÖÁªßÊâøÁ≠âÁ∫ßÁªìÊûÑÁöÑ‰ΩéÁ´Ø„ÄÇ Has - A ‰∏éIs -AÂΩì‰∏Ä‰∏™Á±ªÊòØÂè¶Â§ñ‰∏Ä‰∏™Á±ªÁöÑËßíËâ≤Êó∂„ÄêÊàë Êúâ‰∏Ä‰∏™ Áé©ÂÖ∑„ÄëÔºåËøôÁßçÂÖ≥Á≥ªÂ∞±‰∏çÂ∫îÂΩì‰ΩøÁî®ÁªßÊâøÊù•ÊèèËø∞‰∫ÜÔºåËøô‰∏™Â∞Ü‰ºöÂú®ÂêéÈù¢ËØ¥Âà∞ÁöÑ‚ÄúÂêàÊàê/ËÅöÂêàÂ§çÁî®ÂéüÂàô‚ÄùÊù•ÊèèËø∞„ÄÇHas - A: ÊàëÊúâ‰∏ÄÂè™Á¨îÔºàËÅöÂêàÔºâIs - A:Èí¢Á¨îÊòØ‰∏ÄÁßçÁ¨îÔºàÁªßÊâøÔºâ ÂÖ≥‰∫éÂ≠êÁ±ªÊâ©Â±ïÁà∂Á±ªÁöÑË¥£‰ªªÂ≠êÁ±ªÂ∫îÂΩìÊâ©Â±ïÁà∂Á±ªÁöÑËÅåË¥£ÔºåËÄå‰∏çÊòØÁΩÆÊç¢ÊéâÊàñËÄÖË¶ÜÁõñÊéâË∂ÖÁ±ªÁöÑËÅåË¥£„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Â≠êÁ±ªÈúÄË¶ÅÂ∞ÜÁªßÊâøËá™Áà∂Á±ªÁöÑË¥£‰ªªÂèñÊ∂àÊàñËÄÖÁΩÆÊç¢ÂêéÊâçËÉΩ‰ΩøÁî®ÁöÑËØùÔºåÂ∞±ÂæàÊúâÂèØËÉΩËØ¥ÊòéËøô‰∏™Â≠êÁ±ªÊ†πÊú¨‰∏çÂ±û‰∫éÂΩìÂâçÁà∂Á±ªÁöÑÂ≠êÁ±ªÔºåÂ≠òÂú®ËÆæËÆ°‰∏äÁöÑÁº∫Èô∑„ÄÇ ÊúÄÂêéÔºåËØ¥Êòé‰∏ãÔºåÊàë‰ª¨Âú®Âπ≥Êó∂ÁöÑÂ∑•‰Ωú‰∏≠‰ºöÁªèÂ∏∏‰ΩøÁî®ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÜçÊ¨°ÁâπÂú∞Áî≥Êòé‰∏Ä‰∏ãÔºåÊàë‰ª¨‰πüÂ∞ΩÂèØËÉΩÂ∞ëÁöÑÂéª‰ªéÂ∑•ÂÖ∑Á±ªËøõË°åÁªßÊâøÊâ©Â±ï„ÄÇ ÂèÇËÄÉÔºö „ÄäJava‰∏éÊ®°Âºè„ÄãÁîµÂ≠êÂ∑•‰∏öÂá∫ÁâàÁ§æÂá∫ÁâàÔºå‰ΩúËÄÖÔºöÈòéÂÆè„ÄÇ http://www.runoob.com/java/java-interfaces.html]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Èù¢ÂêëÂØπË±°ÁöÑÂõõÂ§ßÂü∫Á°ÄÁâπÊÄß]]></title>
    <url>%2F2018%2F11%2F10%2Fglmapper-bird-one%2F</url>
    <content type="text"><![CDATA[ÊåâÁÖß‰πãÂâçÁöÑÂ≠¶‰π†ËßÑÂàíÔºåÂºÄÂßãËøõË°åÁ¨¨‰∏ÄÈÉ®ÂàÜÁöÑÂ≠¶‰π†„ÄÇÈÇ£‰πà‰ªäÂ§©Â∞±ÈáçÊñ∞ËÆ§ËØÜ‰∏Ä‰∏ãJAVA‰∏≠ÁöÑÂõõÂ§ßÁâπÊÄßÔºöÊäΩË±°„ÄÅÂ∞ÅË£Ö„ÄÅÁªßÊâø„ÄÅÂ§öÊÄÅ ÊäΩË±°Â≠¶‰π†Èù¢ÂêëÂØπË±°ÔºåÊäΩË±°ËøòÊòØÂæàÈáçË¶ÅÁöÑ„ÄÇÈù¢ÂêëÂØπË±°ÊúÄÊé•ËøëÊàë‰ª¨‰∫∫Á±ªÁöÑÊÄùÁª¥Ôºå‰Ω†ÁöÑÊäΩË±°ËÉΩÂäõÂ∞±ÊòØ‰Ω†ÂØπ‰∏áÁâ©‰∏á‰∫ãÊÄªÁªìÂíåÂΩíÁ∫≥ÁöÑËÉΩÂäõ„ÄÇÂÖ≥‰∫éÊäΩË±°ÔºåÂ∞±ÊòØ‰ªéÂÖ∑‰Ωì‰∫ãÁâ©ÊäΩÂá∫„ÄÅÊ¶ÇÊã¨Âá∫ÂÆÉ‰ª¨ÂÖ±ÂêåÁöÑÊñπÈù¢„ÄÅÊú¨Ë¥®Â±ûÊÄß‰∏éÂÖ≥Á≥ªÁ≠âÔºåËÄåÂ∞Ü‰∏™Âà´ÁöÑ„ÄÅÈùûÊú¨Ë¥®ÁöÑÊñπÈù¢„ÄÅÂ±ûÊÄß‰∏éÂÖ≥Á≥ªËàçÂºÉÔºåËøôÁßçÊÄùÁª¥ËøáÁ®ãÔºåÁß∞‰∏∫ÊäΩË±°„ÄÇÂú®JAVA‰∏≠Ë°®Áé∞Â∞±ÊòØ‰ΩøÁî®abstractÊù•‰øÆÈ•∞Á±ªÔºåË¢´abstract‰øÆÈ•∞ÁöÑÁ±ªÊàê‰∏∫ÊäΩË±°Á±ªÔºå‰∏ÄËà¨ÊòØ‰∏∫‰∫Ü‰∏∫Â≠êÁ±ªÊèê‰æõ‰∏Ä‰∫õÂÖ±ÊúâÁöÑÂ±ûÊÄßÂíåË°å‰∏∫Ôºå‰∏çÂêåÁöÑÂ≠êÁ±ªÊ†πÊçÆËá™Ë∫´ÁöÑÁâπÊÄßÂÜçËøõË°åÂÖ∑‰ΩìÁöÑË°å‰∏∫ÂÆûÁé∞„ÄÇ Â∞ÅË£ÖÂ∞ÅË£ÖÊòØÈù¢ÂêëÂØπË±°ÁöÑÈáçË¶ÅÂéüÂàôÔºåÂ∞±ÊòØÊääÂØπË±°ÁöÑÂ±ûÊÄßÂíåË°å‰∏∫ÔºàÊñπÊ≥ïÔºâÁªìÂêà‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÊï¥‰ΩìÔºåÂπ∂Â∞ΩÂèØËÉΩÈöêËóèÂØπË±°ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÁªÜËäÇÔºõÂú®java‰∏≠ÔºåÂØπ‰∫éÂØπË±°ÁöÑÂÜÖÈÉ®Â±ûÊÄß‰∏ÄËà¨Áî®privateÊù•ÂÆûÁé∞ÈöêËóèÔºåÂπ∂ÈÄöËøásetÂíågetÊñπÊ≥ïÂØπÂ§ñÊèê‰æõËÆøÈóÆÊé•Âè£„ÄÇÂ∞ÅË£ÖÂÆûÈôÖ‰∏äÊòØ‰∏ÄÁßç‰ø°ÊÅØÈöêËóèÊäÄÊúØÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇ ÂØπË±°ÁöÑÊï∞ÊçÆÂ∞ÅË£ÖÁâπÊÄßÂΩªÂ∫ïÊ∂àÈô§‰∫Ü‰º†ÁªüÁªìÊûÑÊñπÊ≥ï‰∏≠Êï∞ÊçÆ‰∏éÊìç‰ΩúÂàÜÁ¶ªÊâÄÂ∏¶Êù•ÁöÑÁßçÁßçÈóÆÈ¢òÔºåÊèêÈ´ò‰∫ÜÁ®ãÂ∫èÁöÑÂèØÂ§çÁî®ÊÄßÂíåÂèØÁª¥Êä§ÊÄßÔºåÈôç‰Ωé‰∫ÜÁ®ãÂ∫èÂëò‰øùÊåÅÊï∞ÊçÆ‰∏éÊìç‰ΩúÂÜÖÂÆπÁöÑË¥üÊãÖ„ÄÇ ÂØπË±°ÁöÑÊï∞ÊçÆÂ∞ÅË£ÖÁâπÊÄßËøòÂèØ‰ª•ÊääÂØπË±°ÁöÑÁßÅÊúâÊï∞ÊçÆÂíåÂÖ¨ÂÖ±Êï∞ÊçÆÂàÜÁ¶ªÂºÄÔºå‰øùÊä§‰∫ÜÁßÅÊúâÊï∞ÊçÆÔºåÂáèÂ∞ë‰∫ÜÂèØËÉΩÁöÑÊ®°ÂùóÈó¥Âπ≤Êâ∞ÔºåËææÂà∞Èôç‰ΩéÁ®ãÂ∫èÂ§çÊùÇÊÄß„ÄÅÊèêÈ´òÂèØÊéßÊÄßÁöÑÁõÆÁöÑ„ÄÇ ‰æãÂ¶ÇÔºöÂØπ‰∫éÂÆ¢ËßÇÂ≠òÂú®ÁöÑ‰∫∫Ëøô‰∏™ÂØπË±°ËøõË°åÂ±ûÊÄßÂíåË°å‰∏∫ÊäΩË±°„ÄêÊ≠§Â§Ñ‰ªÖ‰ªÖÊòØÈÉ®ÂàÜÊäΩË±°„ÄëÔºõ‰ΩøÁî®privateÂÖ≥ÈîÆÂ≠óÊù•‰øÆÈ•∞‰∫∫ÁöÑÂ±ûÊÄßÔºåÂπ∂ÈÄöËøáÂØπÂ∫îÁöÑsetÂíågetÊñπÊ≥ïÂØπÂ§ñÁïåÊèê‰æõËÆøÈóÆÂÖ•Âè£ÔºõÂú®Ë°å‰∏∫ÊñπÈù¢ÔºåÈÄöËøápublicÂÖ≥ÈîÆÂ≠óÊù•‰øÆÈ•∞ÔºåÂØπÂ§ñÊèê‰æõÂÖ∑‰ΩìÁöÑË°å‰∏∫ÊèèËø∞„ÄÇÂ§ñÁïåÂØπË±°Âπ∂‰∏çÁü•ÈÅì‚Äú‰∫∫‚ÄùËøô‰∏™ÂØπË±°Âú®ÂÜÖÈÉ®ÂèëÁîü‰∫Ü‰ªÄ‰πàÔºå‰ªÖ‰ªÖÊòØÈÄöËøáÊèê‰æõÁöÑÊñπÊ≥ïÊù•Ëé∑ÂæóÂÖ∑‰ΩìÁöÑÊèèËø∞‰ø°ÊÅØ„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * ‰∫∫ * @author glmapper * */public class Person &#123; //ÂßìÂêç private String name; //Âπ¥ÈæÑ private int age; //ÊÄßÂà´ private String sex; //Ë∫´È´ò private float high; //‰ΩìÈáç private float weight; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; public float getHigh() &#123; return high; &#125; public void setHigh(float high) &#123; this.high = high; &#125; public float getWeight() &#123; return weight; &#125; public void setWeight(float weight) &#123; this.weight = weight; &#125; public void eat()&#123; System.out.println(&quot;ÂêÉ‰∏úË•ø&quot;); &#125; public void walk()&#123; System.out.println(&quot;Ëµ∞Ë∑Ø&quot;); &#125; public void study()&#123; System.out.println(&quot;Â≠¶‰π†&quot;); &#125;&#125; ÁªßÊâøÁªßÊâøÊòØÈù¢ÂêëÂØπË±°ÊúÄÊòæËëóÁöÑ‰∏Ä‰∏™ÁâπÊÄßÔºåÊòØ‰ªéÂ∑≤ÊúâÁöÑÁ±ª‰∏≠Ê¥æÁîüÂá∫Êñ∞ÁöÑÁ±ªÔºåÊàë‰ª¨ÊääÂÆÉÁß∞‰πã‰∏∫Â≠êÁ±ªÔºåÂ≠êÁ±ªÁªßÊâøÁà∂Á±ªÁöÑÂ±ûÊÄßÂíåË°å‰∏∫ÔºåÂπ∂ËÉΩÊ†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÊâ©Â±ïÂá∫Êñ∞ÁöÑÂ±ûÊÄßÂíåË°å‰∏∫ÔºåÊèêÈ´ò‰∫Ü‰ª£Á†ÅÁöÑÂèØÂ§çÁî®ÊÄß„ÄÇ ÊèêÈ´ò‰∫Ü‰ª£Á†ÅÁöÑÂ§çÁî®ÊÄß„ÄÇ ËÆ©Á±ª‰∏éÁ±ª‰πãÈó¥‰∫ßÁîü‰∫ÜÂÖ≥Á≥ªÔºåÁªôÁ¨¨‰∏â‰∏™ÁâπÂæÅÂ§öÊÄÅÊèê‰æõ‰∫ÜÂâçÊèê„ÄÇ JavaÁöÑÁªßÊâøÈÄöËøáextendsÂÖ≥ÈîÆÂ≠óÊù•ÂÆûÁé∞ÔºåÂÆûÁé∞ÁªßÊâøÁöÑÁ±ªË¢´Áß∞‰∏∫Â≠êÁ±ªÔºåË¢´ÁªßÊâøÁöÑÁ±ªÁß∞‰∏∫Áà∂Á±ª(ÊúâÁöÑ‰πüÁß∞ÂÖ∂‰∏∫Âü∫Á±ª„ÄÅË∂ÖÁ±ª)ÔºåÁà∂Á±ªÂíåÂ≠êÁ±ªÁöÑÂÖ≥Á≥ªÔºåÊòØ‰∏ÄÁßç‰∏ÄËà¨ÂíåÁâπÊÆäÁöÑÂÖ≥Á≥ªÔºõÂ≠êÁ±ªÊâ©Â±ïÁà∂Á±ªÔºåÂ∞ÜÂèØ‰ª•Ëé∑ÂæóÁà∂Á±ªÁöÑÂÖ®ÈÉ®Â±ûÊÄßÂíåÊñπÊ≥ï„ÄÇ Áî∑‰∫∫ÊòØ‰∫∫ÁöÑ‰∏ÄÁßçÔºåÁî∑‰∫∫ÁöÑÁâπÂæÅÊòØÊúâËÉ°Â≠êÔºåÂõ†Ê≠§‰πüÊúâÂâ™ËÉ°Â≠êÁöÑË°å‰∏∫„ÄêÊúâËÉ°Â≠êÂíåÂâ™ËÉ°Â≠êÂπ∂Èùû‰æùËµñÂÖ≥Á≥ªÔºõ‰∏Ä‰∏™ÊòØÂ±ûÊÄßÔºå‰∏Ä‰∏™ÊòØË°å‰∏∫„ÄëÔºõ‰ΩÜÊòØÁî∑‰∫∫ÁªßÊâø‰∫Ü‰∫∫Ëøô‰∏™Áà∂Á±ªÔºåÂõ†Ê≠§ÔºåÁî∑‰∫∫‰πüÂÖ∑Êúâ‰æãÂ¶ÇÂßìÂêç„ÄÅÊÄßÂà´„ÄÅË∫´È´ò„ÄÅ‰ΩìÈáçÁ≠âÂ±ûÊÄßÔºåÂêåÊó∂‰πüÂÖ∑ÊúâÁà∂Á±ª‰∫∫ÂÖ∑ÊúâÁöÑÂêÉÈ•≠„ÄÅËµ∞Ë∑ØÂíåÂ≠¶‰π†ÁöÑË°å‰∏∫„ÄÇ123456789101112131415161718192021/** * Áî∑‰∫∫ * @author glmapper * */public class Man extends Person&#123; //ËÉ°Â≠ê private String goatee; public String getGoatee() &#123; return goatee; &#125; public void setGoatee(String goatee) &#123; this.goatee = goatee; &#125; public void shaved()&#123; System.out.println(&quot;Ââ™ËÉ°Â≠ê&quot;); &#125;&#125; ÈáçÂÜôÁà∂Á±ªÁöÑÊñπÊ≥ïÔºöÂ§ßÈÉ®ÂàÜÁöÑÊó∂ÂÄôÔºåÂ≠êÁ±ªÊÄªÊòØ‰ª•Áà∂Á±ª‰∏∫Âü∫Á°ÄÔºåÈ¢ùÂ§ñÊ∑ªÂä†Êñ∞ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇ‰ΩÜÊúâ‰∏ÄÁßçÊÉÖÂÜµ‰æãÂ§ñÔºöÂ≠êÁ±ªÈúÄË¶ÅÈáçÂÜôÁà∂Á±ªÁöÑÊñπÊ≥ï„ÄÇ‰æãÂ¶ÇÁî∑‰∫∫ÂêÉ‰∏úË•øÊØîËæÉÂø´ÔºåÂ•≥‰∫∫ÂêÉ‰∏úË•øÊØîËæÉÊÖ¢ÔºåÂõ†Ê≠§ÂØπ‰∫éeatÊñπÊ≥ïÊù•ËØ¥ÔºåManÂèØ‰ª•Ë¶ÜÁõñÁà∂Á±ªÁöÑeatÊñπÊ≥ïÔºåÊù•ÊèèËø∞ManÊú¨Ë∫´ÁöÑÁâπÁÇπ„ÄÇ 1234@Overridepublic void eat()&#123; System.out.println(&quot;Âø´ÈÄüÁöÑÂêÉ‰∏úË•ø&quot;);&#125; ÂΩìÂ≠êÁà∂Á±ª‰∏≠Âá∫Áé∞Áõ∏ÂêåÊñπÊ≥ïÊó∂Ôºå‰ºöÂÖàËøêË°åÂ≠êÁ±ª‰∏≠ÁöÑÊñπÊ≥ï„ÄÇÈáçÂÜôÁöÑÁâπÁÇπÔºöÊñπÊ≥ïÂêç‰∏ÄÊ†∑ÔºåËÆøÈóÆ‰øÆÈ•∞Á¨¶ÊùÉÈôê‰∏çÂ∞è‰∫éÁà∂Á±ªÔºåËøîÂõûÁ±ªÂûã‰∏ÄËá¥ÔºåÂèÇÊï∞ÂàóË°®‰∏ÄËá¥„ÄÇ Â§öÊÄÅÂÆö‰πâÔºöÊåáÂÖÅËÆ∏‰∏çÂêåÁ±ªÁöÑÂØπË±°ÂØπÂêå‰∏ÄÊ∂àÊÅØÂÅöÂá∫ÂìçÂ∫î„ÄÇÂç≥Âêå‰∏ÄÊ∂àÊÅØÂèØ‰ª•Ê†πÊçÆÂèëÈÄÅÂØπË±°ÁöÑ‰∏çÂêåËÄåÈááÁî®Â§öÁßç‰∏çÂêåÁöÑË°å‰∏∫ÊñπÂºè„ÄÇÔºàÂèëÈÄÅÊ∂àÊÅØÂ∞±ÊòØÂáΩÊï∞Ë∞ÉÁî®ÔºâÂÆûÁé∞Â§öÊÄÅÁöÑÊäÄÊúØÁß∞‰∏∫ÔºöÂä®ÊÄÅÁªëÂÆöÔºàdynamic bindingÔºâÔºåÊòØÊåáÂú®ÊâßË°åÊúüÈó¥Âà§Êñ≠ÊâÄÂºïÁî®ÂØπË±°ÁöÑÂÆûÈôÖÁ±ªÂûãÔºåÊ†πÊçÆÂÖ∂ÂÆûÈôÖÁöÑÁ±ªÂûãË∞ÉÁî®ÂÖ∂Áõ∏Â∫îÁöÑÊñπÊ≥ï„ÄÇ‰ªéËØ≠Ë®ÄÁâπÁÇπ‰∏äÊù•ËØ¥ÔºåJavaÂºïÁî®ÂèòÈáèÊúâ‰∏§‰∏™Á±ªÂûãÔºö‰∏Ä‰∏™ÊòØÁºñËØëÊó∂Á±ªÂûãÔºå‰∏Ä‰∏™ÊòØËøêË°åÊó∂Á±ªÂûã„ÄÇÁºñËØëÊó∂ÁöÑÁ±ªÂûãÁî±Â£∞ÊòéËØ•ÂèòÈáèÊó∂‰ΩøÁî®ÁöÑÁ±ªÂûãÂÜ≥ÂÆöÔºåËøêË°åÊó∂ÁöÑÁ±ªÂûãÁî±ÂÆûÈôÖËµãÁªôËØ•ÂèòÈáèÁöÑÂØπË±°ÂÜ≥ÂÆö„ÄÇÂ¶ÇÊûúÁºñËØëÊó∂Á±ªÂûãÂíåËøêË°åÊó∂Á±ªÂûã‰∏ç‰∏ÄËá¥ÔºåÂ∞±‰ºöÂá∫Áé∞ÊâÄË∞ìÁöÑÂ§öÊÄÅÔºàPolymorphismÔºâ„ÄÇÂ∞ÅË£ÖÂíåÁªßÊâøÈÉΩÊòØ‰∏∫JavaËØ≠Ë®ÄÁöÑÂ§öÊÄÅÊèê‰æõ‰∫ÜÊîØÊíëÔºõÂ§öÊÄÅÂ≠òÂú®ÁöÑ‰∏â‰∏™ÂøÖË¶ÅÊù°‰ª∂Ôºö Ë¶ÅÊúâÁªßÊâøÔºõ Ë¶ÅÊúâÈáçÂÜôÔºõ Áà∂Á±ªÂºïÁî®ÊåáÂêëÂ≠êÁ±ªÂØπË±°„ÄÇ ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÊñπÂºèÂ∞±ÊòØÔºöÊé•Âè£ÂÆûÁé∞ÔºåÁªßÊâøÁà∂Á±ªËøõË°åÊñπÊ≥ïÈáçÂÜôÔºåÂêå‰∏Ä‰∏™Á±ª‰∏≠ËøõË°åÊñπÊ≥ïÈáçËΩΩ„ÄÇ ‰∏ã‰∏ÄÁØáÂú®ËØ¥Á±ªÂíåÊé•Âè£ÁöÑÊó∂ÂÄôÂÜçÁî®ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÊù•ÊèèËø∞Ë¶ÜÁõñ„ÄÅÈáçËΩΩ„ÄÇ]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËèúÈ∏üÊàêÈïøÁ≥ªÂàó-Ê¶ÇËø∞]]></title>
    <url>%2F2018%2F11%2F10%2Fglmapper-bird-overall%2F</url>
    <content type="text"><![CDATA[ÂâçË®Ä‰Ωú‰∏∫Ê∏£Á°ï‰∏ÄÊûöÔºåÊØï‰∏öÊó∂‰∏ÄÁ∫ø‰∫íËÅîÁΩëÂÖ¨Âè∏ÊãõËÅòÂü∫Êú¨Ê≤°ÊúâÂèÇ‰∏éËøáÔºåÁ≠âÂõûËøáÁ•ûÂáÜÂ§áÂèÇÂä†ÔºåÊò•ÊãõÈÉΩÂø´ÁªìÊùü‰∫Ü„Äê17Âπ¥ÊØï‰∏ö„ÄëÔºõË∑åË∑åÊíûÊíûÈù¢‰∫ÜÂá†ÂÆ∂ÂÖ¨Âè∏ÔºåËôΩÁÑ∂Ë¢´ËôêÔºå‰ΩÜÊòØÂü∫Êú¨‰∏äÈÉΩÁªô‰∫ÜOfferÔºåÂá†Áï™ÊØîËæÉ‰πãÂêéÂà∞‰∫ÜËãèÂÆÅÔºåÈÄâÊã©ÂÅö‰∏ÄÊûöÈáëËûçÁ†ÅÂÜú„ÄÇËôΩÁÑ∂ÁΩë‰∏äÂÖ≥‰∫éÂú®ËãèÂÆÅÂÅöITÊúâÁùÄ‰∏çÂêåÁöÑÁúãÊ≥ïÔºåÊúâÂ•ΩÊúâÂùèÔºåË§íË¥¨‰∏ç‰∏ÄÔºå‰ΩÜÂ∞±ÊàëËÄåË®ÄÔºå‰Ωú‰∏∫Êñ∞‰∫∫ÔºåËãèÂÆÅËøòÊòØÁªôÊàëÊèê‰æõ‰∫Ü‰∏çÈîôÁöÑÂ∑•‰ΩúÂíåÂ≠¶‰π†ÁéØÂ¢É„ÄêÂÖ•ËÅåÂø´4‰∏™Êúà‰∫Ü„Äë„ÄÇË®ÄÂΩíÊ≠£‰º†Ôºå‰Ωú‰∏∫‰∏Ä‰∏™ÂàùÂÖ•ËÅåÂú∫ÁöÑÊñ∞‰∫∫ÔºåÈù¢ÂØπÂæàÂ§öÂ§çÊùÇÁöÑ‰∏öÂä°Âú∫ÊôØÔºå‰∏çÂêåÁöÑÂºÄÊ∫êÊäÄÊúØÁöÑ‰ΩøÁî®Ôºå‰∏ÄÂºÄÂßãÁ°ÆÂÆûÊúâÁÇπ‚ÄúÊÖå‚ÄùÔºå‰ΩÜÊòØÈöèÁùÄÊÖ¢ÊÖ¢ÁöÑÊ∏óÂÖ•Ôºå‰ªéËÉΩÂ§üÂ∞Ü‰∏Ä‰∏™È°πÁõÆÊàêÂäüË∑ëËµ∑Êù•ÔºåÂà∞ÂØπÁùÄËØ¶ËÆæÁªô‰ª£Á†ÅÂä†Ê≥®ÈáäÔºåÂà∞Ëá™Â∑±ÂéªÁîªÊüê‰∏ÄÊù°‰∏öÂä°Á∫øÁöÑÊµÅÁ®ãÂõæÔºåÂà∞Á¨¨‰∏ÄÊ¨°Áã¨Á´ãÂÆåÊàê‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÂÜçÂà∞‰∏çÊñ≠ÁöÑÂéªÂèëÁé∞Áé∞ÊúâÊ°ÜÊû∂ÊàñËÄÖ‰∏öÂä°ÈÄªËæë‰∏≠ÁöÑÈóÆÈ¢òÂπ∂ÂéªÂ∞ùËØï‰ºòÂåñÔºõËøô‰∏™ËøáÁ®ãËøòÊòØÂæà‚ÄúÂêÉÈ∏°‚ÄùÁöÑ„ÄÇÊäÄÊúØÂßãÁªàÊòØÊù•ÊîØÊíë‰∏öÂä°ÁöÑÔºåÁÜüÊÇâ‰∫ßÂìÅÂæàÈáçË¶ÅÔºåÂè™ÊúâÊ∑±ÂÖ•‰∫ÜËß£‰∫ÜÊüê‰∏Ä‰∏™‰∏öÂä°ÔºåÁÑ∂ÂêéÊãìÂ±ïÂá∫‰∏éÂÖ∂‰ªñ‰∏öÂä°ÁöÑÂÖ≥Á≥ªÔºåËøôÊ†∑ÊâçÂèØ‰ª•ÂèëÁé∞ÈóÆÈ¢òÔºåÊâæÂà∞ÂàáÂÖ•ÁÇπÂéªÂÅöÂÖ∑‰ΩìÁöÑ‰ª£Á†Å‰ºòÂåñÂíå‰∏öÂä°‰ºòÂåñ„ÄÇÊâÄ‰ª•‰∫∫‰∫∫ÈÉΩÊòØ‰∫ßÂìÅÁªèÁêÜËøôÂè•ËØùÂæà‰∏≠ËÇØÔºåÁâπÂà´ÊòØÁ®ãÂ∫èÂëòÔºåË¶ÅÂ≠¶‰ºöÂíå‰∫ßÂìÅÁªèÁêÜ‚ÄúËÆ®‰ª∑Ëøò‰ª∑‚Äù„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÂÜô‰∏∫‰ªÄ‰πàË¶ÅÂÜôÔºåÊúÄÂºÄÂßãÁöÑÊÉ≥Ê≥ïÂ∞±ÊòØÊääËá™Â∑±Â∑•‰Ωú‰∏≠ÁöÑÈóÆÈ¢òÂíåÂùëËÆ∞ÂΩï‰∏ãÊù•Ôºå‰ª•‰æø‰∫éËá™Â∑±‰∏ç‰ºöÂÜçË∞ÉÂà∞ÂùëÈáåÈù¢Âéª„ÄÇ‰ΩÜÊòØÂêéÊù•ÂèëÁé∞Ë∑ëÂÅè‰∫ÜÔºåÂú®Ê≤°ÊúâÂÖ∑‰ΩìÊ∑±ÂÖ•‰∫ÜËß£ÁöÑÊÉÖÂÜµ‰∏ãÂºÄÂßã‚ÄúÂÄüÈâ¥‚Äù+‚ÄúÊÄªÁªì‚Äù„ÄÇÂêéÊù•ÂÜçÂéªÁúãÔºåËØ•‰∏ç‰ºöÁöÑËøòÊòØ‰∏ç‰ºöÔºåËøôÂ∞±ÂæàÊó†Â•à„ÄÇÁΩë‰∏äÊúâÂæàÂ§ö‰ªÄ‰πà‚ÄúJAVAÂ≠¶‰π†Ë∑ØÁ∫ø‰∏ÄËßà‚Äù„ÄÅ‚ÄúÊï∞ÊçÆÂ∫ìÂ≠¶‰π†Ë∑ØÁ∫ø‰∏ÄËßà‚ÄùÔºå‚ÄúSpringÂ≠¶‰π†Ë∑ØÁ∫ø‰∏ÄËßà‚Äù„ÄÇ„ÄÇ„ÄÇÔºåÂÆûËØùÂÆûËØ¥ÔºåÂ∞ùËØïËøáÔºå‰ΩÜÊòØÈÉΩÂ§±Ë¥•‰∫ÜÔºåËµ∞‰∏ç‰∏ãÂéª„ÄÇÊØîÂ¶ÇËØ¥ÊàëÊÉ≥Â≠¶‰π†javaÈõÜÂêàÔºåÁÑ∂ÂêéÂ∞±ÂéªÁúãÔºåÂéªÊÄªÁªìÔºåÁÑ∂ÂêéÂ∞±‰ºöÂèëÁé∞ÔºåÁ∫øÁ®ãÂÆâÂÖ®Âíå‰∏çÂÆâÂÖ®Âú®ÈõÜÂêàÈáåÈù¢ÁöÑÊØîËæÉÂæàÂ§öÔºåÁÑ∂ÂêéÂ∞±ÂéªÁúãÁ∫øÁ®ãÂÆâÂÖ®Áõ∏ÂÖ≥ÔºåÁÑ∂ÂêéÂÜçËµ∞ÔºåÂ∞±‰ºöÂèëÁé∞‰ªéËøô‰∏™ÂùëË∑≥Âà∞‰∫ÜÂè¶Â§ñ‰∏Ä‰∏™ÂùëÔºå‰∏ÄÊñπÈù¢ÊòØÊ≤°ÊúâË∂≥Â§üÁöÑÊó∂Èó¥ÂéªÁ†îÁ©∂ÔºåÂè¶‰∏ÄÊñπÈù¢Ê≤°ÊúâÊääËá™Â∑±ÁöÑÊÄùÁª¥ÊîæËøõÂéªÔºåÁªìÊûúÂ∞±ÊòØÂ≠¶Âà∞ÁöÑËøòÊòØÂæàÁ¢éÁöÑ‰∏úË•ø„ÄÇÂõ†Ê≠§ÊîæÂºÉÂà´‰∫∫ÁöÑÊàêÂäü‰πãË∑ØÔºåÂõûÊù•Ëµ∞Ëá™Â∑±ÁöÑÁã¨Êú®Ê°•„ÄÇÁªìÂêàËá™Â∑±‰πãÂâçÁöÑ‰∏Ä‰∫õÊäÄÊúØÁßØÁ¥ØÂíåÂÆûÈôÖÂ∑•‰ΩúÁöÑÈúÄÊ±ÇÔºåÊù•Êï¥Âêà„ÄÇÁúã‰∫ÜÂæàÂ§öÔºåÂç¥ÂèëÁé∞Ê∑±ÂÖ•ÁöÑ‰∏çÂ§ö„ÄÇ‰∏ÄÂºÄÂßãÊÉ≥ÁöÑÊòØ‰ªéjavaÁöÑObjectÂºÄÂßãÂÜôÔºå‰ΩÜÊòØÂΩìÊàëÂéªÂ∞ùËØï‰∏ÄÊ¨°‰πãÂêéÂ∞±ÊîæÂºÉ‰∫Ü„ÄêÂÖ∂ÂÆû‰ªéjavaÂü∫Á°ÄÁ±ªÂ∫ìÂ≠¶ËøòÊòØÂæà‰∏çÈîôÁöÑ„ÄëÔºõÊàëËßâÂæó‰∏çÈÄÇÂêàÊàëËøôÁßç‰∏çÊåâÂ•óË∑ØÂá∫ÁâåÁöÑ‰∫∫ÔºåÂõ†Ê≠§Â∞±ÁªôËá™Â∑±ÂÆö‰∫Ü‰∏Ä‰∏™Ê°ÜÔºåÂú®Ê°ÜÈáåÂ≠¶„ÄÇËøô‰∏™Ê°ÜÊòØ‰ªÄ‰πàÂë¢ÔºüÂ∞±ÊòØËÆæËÆ°Ê®°Âºè„ÄÇÊó†ËÆ∫ÊòØjavaÂü∫Á°ÄÁ±ªÂ∫ìÁöÑËÆæËÆ°ËøòÊòØSpring‰ΩìÁ≥ªÁöÑËÆæËÆ°Âü∫Êú¨ÈÉΩÁ¶ª‰∏çÂºÄËÆæËÆ°Ê®°ÂºèÁöÑ‰ΩøÁî®Ôºå‰∏∫‰ªÄ‰πàËØ¥‰∏ç‰ªéObjectÂºÄÂßãÔºå‰∏ç‰ªéSpringÁöÑÂêØÂä®ÂºÄÂßãÂ∞±ÊòØÂõ†‰∏∫ÂΩìÊàëÈ°∫ÁùÄ‰∏ÄÊù°Á∫øÂºÄÂßãËµ∞ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÁâµÊâØÂá∫Êó†Êï∞Êù°Á∫øÔºåÁõ¥Âà∞‰∏çÁü•ÈÅìÂéªÂæÄÂì™‰∏ÄÊù°ÂºÄÂßã„ÄÇÂè™ÊúâÂΩìÂâçÁ´ôÂú®È°∂Â±ÇÂéªÁúãÊï¥‰ΩìÁöÑÊó∂ÂÄôÔºåÊâç‰ºöÂØπÂÖ®Â±ÄÊúâ‰∏Ä‰∏™ÊääÊè°ÔºåÊâçËÉΩÁõ¥Âà∞‰∏çÂêåÂàÜÊîØÁöÑÂÖ≥Á≥ªÔºåÊâçËÉΩÊõ¥Â•ΩÁöÑÂ≠¶ÊäìÁªÜËäÇ„ÄÇ ÂÜô‰ªÄ‰πàÊàëÁöÑÊÉ≥Ê≥ïÊòØ‰ª•ËÆæËÆ°Ê®°Âºè‰∏∫‰∏ªÁ∫øÊù•Ë¥ØÁ©øÔºåÂºÄÂßãÈáçÊñ∞Â≠¶‰π†„ÄÇ„Äê‰ªéjavaËØ≠Ë®ÄÁöÑËßíÂ∫¶„ÄëËÆæËÆ°Ê®°Âºè‰∏≠Âü∫Êú¨‰∏äÈÉΩÊòØÂõ¥ÁªïÂÖ≠ÁßçËÆæËÆ°ÂéüÂàôÊù•Á∫¶ÊùüÁöÑÔºåÂÜçÂà©Áî®JAVA‰∏≠Êèê‰æõÊäΩË±°„ÄÅÁªßÊâø„ÄÅÂ§öÊÄÅÊèê‰æõÁöÑÊú∫Âà∂Êù•ËøõË°åÂÖ∑‰ΩìÁöÑÂÆûÁé∞„ÄÇÈ°∫ÁùÄËøô‰∏™ÊÄùË∑ØÁÆÄÂçïÁΩóÂàó‰∏ãÊàëËá™Â∑±ÁöÑÂ≠¶‰π†Ë∑ØÁ∫øÔºöÂõ†‰∏∫ÈúÄË¶Å‰ΩøÁî®JAVAÔºåÈÇ£‰πàÂ∞±ÂøÖÈ°ªÂÖàË¶ÅÂØπÊäΩË±°„ÄÅÁªßÊâøÂíåÂ§öÊÄÅÊúâ‰∏Ä‰∏™ÊØîËæÉÊ∏ÖÊ•öÁöÑÁêÜËß£ÔºåÂõ†Ê≠§Á¨¨‰∏ÄÈÉ®ÂàÜÂ∞Ü‰ºö‰ªéjavaËØ≠Ë®ÄÊú¨Ë∫´ÁöÑÁâπËâ≤Êù•Â≠¶‰π†Ôºå‰∏ªË¶ÅÂåÖÊã¨Ôºö 1.ÊäΩË±°ÔºåÁªßÊâøÔºåÂ§öÊÄÅÁöÑÁêÜËß£ 2.Á±ªÂíåÊé•Âè£ 3.Èù¢ÂêëÊé•Âè£ÁºñÁ®ãÁöÑÁêÜËß£OKÔºåÂà∞Ê≠§Â∞±Êî∂ÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜÂ∞±ÊääÂêéÈù¢ËÆæËÆ°Ê®°Âºè‰∏≠Êàë‰ª¨ÈúÄË¶ÅÁî®ÁöÑÊñπÂºèÁöÑÂü∫Á°ÄÂÆö‰∫Ü‰∏™Âü∫Ë∞É„ÄÇÁ¨¨‰∫åÈÉ®ÂàÜÂ∞±Áõ¥Êé•ËøõÂÖ•ËÆæËÆ°Ê®°ÂºèËåÉÁï¥‰πãÂÜÖÔºö 1.ËÆæËÆ°ÂéüÂàô 2.ÂàõÂª∫Âûã 3.ÁªìÊûÑÂûã 4.Ë°å‰∏∫ÂûãÂú®Â≠¶‰π†Êüê‰∏™ÂÖ∑‰ΩìÁöÑËÆæËÆ°Ê®°ÂºèÁöÑÊó∂ÂÄô‰ºöÁªìÂêàjavaËØ≠Ë®Ä‰∏≠Êüê‰∫õÁ±ªÂ∫ìÊù•ËÆ®ËÆ∫ÔºåÁ©øÊèíÂ≠¶‰π†ÔºõÁ¨¨‰∫åÈÉ®ÂàÜ‰πãÂêéÔºåÂØπ‰∫éËÆæËÆ°Ê®°Âºè„ÄÅËÆæËÆ°Ê®°ÂºèÂú®java‰∏≠ÁöÑÂ∫îÁî®„ÄÅSpringÁöÑÈ°∂Â±ÇËÆæËÆ°‰ª•Âèäjava‰∏≠ÁöÑ‰∏Ä‰∫õÁ±ªÂ∫ì‰ºöÊúâ‰∏Ä‰∏™Â§ß‰ΩìÁöÑÊéåÊè°„ÄÇËøô‰∏™ÈÉ®ÂàÜ‰ºöÈúÄË¶ÅÂæàÈïøÊó∂Èó¥Ôºå‰ºöÊ∂âÂèäÂà∞ÁöÑÁü•ËØÜÁÇπ‰ºöÂæàÂ§öÔºåÊúâÁÇπÊÖå„ÄÇÁ¨¨‰∏âÈÉ®ÂàÜÂºÄÂßãÊï∞ÊçÆÁªìÊûÑÔºå‰∏∫‰ªÄ‰πàÊòØÊï∞ÊçÆÁªìÊûÑËÄå‰∏çÊòØÂπ∂ÂèëÊàñËÄÖÊï∞ÊçÆÂ∫ìÂë¢„ÄÇ‰∏ÄÊñπÈù¢Âú®java‰∏≠ÂæàÂ§öÂÖ≥‰∫éÂπ∂ÂèëÁöÑÈóÆÈ¢òÈÉΩ‰ºöÊ∂âÂèäÂà∞ÈõÜÂêàÁöÑ‰ΩøÁî®ÔºåÈõÜÂêàÂÜÖÈÉ®Â∞±‰æùËµñ‰∫é‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑÔºõÊï∞ÊçÆÂ∫ìÊñπÈù¢ÔºåÂ¶ÇÊûúÈÉΩ‰∏çÊ∏ÖÊ•öÊï∞ÊçÆÂ∫ìÊòØÊÄé‰πàÂ≠òÊï∞ÊçÆÁöÑÔºåÂ∞±‰∏çÂèØËÉΩÁü•ÈÅìÊÄé‰πàÂéª‰ºòÂåñÔºõÂ¶ÇÊûúÈÉΩ‰∏çÁü•ÈÅìÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁªìÊûÑÊòØ‰ªÄ‰πàÔºåÂèàÊÄé‰πàËÉΩÁü•ÈÅìÊï∞ÊçÆÊòØÊÄé‰πàÂ≠òÁöÑÂë¢Ôºü‰∏äÈù¢‰∏â‰∏™ÈÉ®ÂàÜÁªìÊùü‰πãÂêéÔºåÂÖ≥‰∫éjavaÂ∑Æ‰∏çÂ§ö‰πüÂ∞±ÁªìÊùü‰∫Ü„ÄÇÈÇ£‰πà‰Ωú‰∏∫‰∏Ä‰∏™Á®ãÂ∫èÂëòÔºåÂØπ‰∫éÁΩëÁªúÁêÜËß£ÂíåÂºÄÊ∫êÊäÄÊúØÁöÑ‰ΩøÁî®ÊâçÊòØÁúüÊ≠£Âø´ÈÄüËß£ÂÜ≥ÂÆûÈôÖÈóÆÈ¢òÂíåÂêÉÈ•≠ÈóÆÈ¢òÁöÑÊ†πÊú¨„ÄÇspring„ÄÅmybatis„ÄÅredisÔºåstruts2,hibernate,‰ª•ÂèäÁõ∏ÂÖ≥rpcÊ°ÜÊû∂„ÄÇÂÖ≥‰∫éjavaËôöÊãüÊú∫Ëøô‰∏™‰∏úË•ø‰∏ç‰ºöÂçïÁã¨ÁöÑÂÜô‰∫ÜÔºåÊÑüËßâÂÜô‰∏çÂá∫Êù•ÔºåÁ≠âÊúâ‰∫ÜÂÆûÈôÖÁöÑÁªèÈ™åÁßØÁ¥Ø‰πãÂêéÂÜçÂéªË∞àÂêß„ÄÇ„ÄÇ„ÄÇÁªìÊùüËØ≠ÂÖ∂ÂÆûÊàë‰ª¨ÊØè‰∏™‰∫∫ÊØèÂ§©ÈÉΩ‰ºöÊúâÊÉ≥Ê≥ïÔºåÂ•ΩÂùè‰∏çËØ¥ÔºåË¶ÅÂéªËØïËØïÔºåËøôÁØáÊñáÁ´†ÂÜôÂÆå‰πãÂêéÊàë‰πü‰∏çÁü•ÈÅìËá™Â∑±ËÉΩËµ∞Âà∞Âì™‰∏™ÈÉ®ÂàÜÔºå‰ΩÜÊòØËøòÊòØÂõûÂéªÂ∞ùËØïËµ∞‰∏ÄËµ∞„ÄÇÊàë‰πü‰∏çÁü•ÈÅìËøôÁßçÂ≠¶‰π†ÁöÑ‚ÄúÈáéË∑ØÂ≠ê‚ÄùÈÄÇÂêà‰∏çÈÄÇÂêàÔºå‰ΩÜÊòØÂ∞±Áé∞Âú®„Äê2017.11.5 11:59„ÄëÁúãÔºåÊàëËßâÂæóÂØπÊàëÊòØÂèØ‰ª•ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ‰πãË∑Ø</category>
      </categories>
      <tags>
        <tag>ËßÑÂàí</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[È°πÁõÆÂºÄÂèëÊ°ÜÊû∂-SSM]]></title>
    <url>%2F2018%2F11%2F10%2Fproject-frame-ssm%2F</url>
    <content type="text"><![CDATA[1.SpringÊó†ÈúÄÂ§öË®ÄÔºå‰Ωú‰∏∫ÂºÄÊ∫êÂ±äÊï∞‰∏ÄÊï∞‰∫åÁöÑÂÖ∏‰æãÔºåÈ°πÁõÆÂºÄÂèë‰∏≠Êó†Â§Ñ‰∏çÂú®ÔºõÊ†∏ÂøÉIOCÂÆπÂô®ÔºåÁî®Êù•Ë£ÖËΩΩbeanÔºàjava‰∏≠ÁöÑÁ±ªÔºâ-Áî®SpringÁöÑIOCÂÆπÂô®Êù•ÁÆ°ÁêÜBeanÁöÑÁîüÂëΩÂë®ÊúüÔºåÊúâ‰∫ÜËøôÊ†∑‰∏ÄÁßçÊú∫Âà∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•‰∏çÁî®Âú®‰ª£Á†Å‰∏≠ÂéªÈáçÂ§çÁöÑÂÅönewÊìç‰Ωú„ÄÇaopÔºåÈù¢ÂêëÂàáÈù¢ÁºñÁ®ãÔºåspring‰∏≠ÊúÄ‰∏ªË¶ÅÁöÑÊòØÁî®‰∫é‰∫ãÂä°ÊñπÈù¢ÁöÑ‰ΩøÁî®„ÄÇ 2.Spring MVC‰ΩúÁî®‰∫éwebÂ±ÇÔºåÁõ∏ÂΩì‰∫écontrollerÔºå‰∏éstruts‰∏≠ÁöÑaction‰∏ÄÊ†∑ÔºåÈÉΩÊòØÁî®Êù•Â§ÑÁêÜÁî®Êà∑ËØ∑Ê±ÇÁöÑ„ÄÇÂêåÊó∂ÔºåÁõ∏ÊØî‰∫éstruts2Êù•ËØ¥ÔºåÊõ¥Âä†ÁªÜÁ≤íÂ∫¶ÔºåÂÆÉÊòØÂü∫‰∫éÊñπÊ≥ïÂ±ÇÈù¢ÁöÑÔºåËÄåstrutsÊòØÂü∫‰∫éÁ±ªÂ±ÇÈù¢ÁöÑ„ÄÇ 3.MyBatisMyBatis ÊòØ‰∏ÄÊ¨æ‰ºòÁßÄÁöÑÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÔºåÂÆÉÊîØÊåÅÂÆöÂà∂Âåñ SQL„ÄÅÂ≠òÂÇ®ËøáÁ®ã‰ª•ÂèäÈ´òÁ∫ßÊò†Â∞Ñ„ÄÇMyBatis ÈÅøÂÖç‰∫ÜÂá†‰πéÊâÄÊúâÁöÑ JDBC ‰ª£Á†ÅÂíåÊâãÂä®ËÆæÁΩÆÂèÇÊï∞‰ª•ÂèäËé∑ÂèñÁªìÊûúÈõÜ„ÄÇMyBatis ÂèØ‰ª•‰ΩøÁî®ÁÆÄÂçïÁöÑ XML ÊàñÊ≥®Ëß£Êù•ÈÖçÁΩÆÂíåÊò†Â∞ÑÂéüÁîü‰ø°ÊÅØÔºåÂ∞ÜÊé•Âè£Âíå Java ÁöÑ POJOs(Plain Old Java Objects,ÊôÆÈÄöÁöÑ JavaÂØπË±°)Êò†Â∞ÑÊàêÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩï„ÄÇ[Êù•Ëá™Ôºöhttp://www.mybatis.org/mybatis-3/zh/index.html] ‰ªñ‰∫∫ÊÄªÁªì HibernateÂäüËÉΩÂº∫Â§ßÔºåÊï∞ÊçÆÂ∫ìÊó†ÂÖ≥ÊÄßÂ•ΩÔºåO/RÊò†Â∞ÑËÉΩÂäõÂº∫ÔºåÂ¶ÇÊûú‰Ω†ÂØπHibernateÁõ∏ÂΩìÁ≤æÈÄöÔºåËÄå‰∏îÂØπHibernateËøõË°å‰∫ÜÈÄÇÂΩìÁöÑÂ∞ÅË£ÖÔºåÈÇ£‰πà‰Ω†ÁöÑÈ°πÁõÆÊï¥‰∏™ÊåÅ‰πÖÂ±Ç‰ª£Á†Å‰ºöÁõ∏ÂΩìÁÆÄÂçïÔºåÈúÄË¶ÅÂÜôÁöÑ‰ª£Á†ÅÂæàÂ∞ëÔºåÂºÄÂèëÈÄüÂ∫¶ÂæàÂø´ÔºåÈùûÂ∏∏ÁàΩ„ÄÇ HibernateÁöÑÁº∫ÁÇπÂ∞±ÊòØÂ≠¶‰π†Èó®Êßõ‰∏ç‰ΩéÔºåË¶ÅÁ≤æÈÄöÈó®ÊßõÊõ¥È´òÔºåËÄå‰∏îÊÄé‰πàËÆæËÆ°O/RÊò†Â∞ÑÔºåÂú®ÊÄßËÉΩÂíåÂØπË±°Ê®°Âûã‰πãÈó¥Â¶Ç‰ΩïÊùÉË°°ÂèñÂæóÂπ≥Ë°°Ôºå‰ª•ÂèäÊÄéÊ†∑Áî®Â•ΩHibernateÊñπÈù¢ÈúÄË¶Å‰Ω†ÁöÑÁªèÈ™åÂíåËÉΩÂäõÈÉΩÂæàÂº∫ÊâçË°å„ÄÇ MYBATISÂÖ•Èó®ÁÆÄÂçïÔºåÂç≥Â≠¶Âç≥Áî®ÔºåÊèê‰æõ‰∫ÜÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÁöÑËá™Âä®ÂØπË±°ÁªëÂÆöÂäüËÉΩÔºåËÄå‰∏îÂª∂Áª≠‰∫ÜÂæàÂ•ΩÁöÑSQL‰ΩøÁî®ÁªèÈ™åÔºåÂØπ‰∫éÊ≤°ÊúâÈÇ£‰πàÈ´òÁöÑÂØπË±°Ê®°ÂûãË¶ÅÊ±ÇÁöÑÈ°πÁõÆÊù•ËØ¥ÔºåÁõ∏ÂΩìÂÆåÁæé„ÄÇ MYBATISÁöÑÁº∫ÁÇπÂ∞±ÊòØÊ°ÜÊû∂ËøòÊòØÊØîËæÉÁÆÄÈôãÔºåÂäüËÉΩÂ∞öÊúâÁº∫Â§±ÔºåËôΩÁÑ∂ÁÆÄÂåñ‰∫ÜÊï∞ÊçÆÁªëÂÆö‰ª£Á†ÅÔºå‰ΩÜÊòØÊï¥‰∏™Â∫ïÂ±ÇÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÂÆûÈôÖËøòÊòØË¶ÅËá™Â∑±ÂÜôÁöÑÔºåÂ∑•‰ΩúÈáè‰πüÊØîËæÉÂ§ßÔºåËÄå‰∏î‰∏çÂ§™ÂÆπÊòìÈÄÇÂ∫îÂø´ÈÄüÊï∞ÊçÆÂ∫ì‰øÆÊîπ„ÄÇ4.SSMÊ°ÜÊû∂Êï¥ÂêàÊú¨È°πÁõÆÂ∞Ü‰ª•Ë¥≠Áâ©‰∏∫ËÉåÊôØÔºå‰∏ªË¶ÅÂåÖÊã¨ÂïÜÂìÅ‰ø°ÊÅØÂèäÂ∫ìÂ≠ò„ÄêÂõ†‰∏∫ÊÉ≥È°∫‰æøÂ≠¶‰π†‰∏Ä‰∏ã‰∫ãÂä°ÁöÑÂ§ÑÁêÜ„Äë„ÄÅËÆ¢Âçï‰ø°ÊÅØ„ÄÇ‰∏ãÈù¢Â∞Ü‰ªéÊï∞ÊçÆÂ∫ìÂàõÂª∫„ÄÅÈ°πÁõÆÁªìÊûÑËØ¥Êòé„ÄÅÈÖçÁΩÆÊñá‰ª∂„ÄÅ‰∏öÂä°‰ª£Á†ÅÁ≠âÊñπÈù¢ËøõË°å‰∏ÄÊ≠•Ê≠•ËØ¥Êòé„ÄÇ4.1 Êï∞ÊçÆÂ∫ìÂàõÂª∫1.ÂïÜÂìÅË°®123456CREATE TABLE `goods` ( `goods_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &apos;ÂïÜÂìÅID&apos;, `goodsname` varchar(100) NOT NULL COMMENT &apos;ÂïÜÂìÅÂêçÁß∞&apos;, `number` int(11) NOT NULL COMMENT &apos;ÂïÜÂìÅÂ∫ìÂ≠ò&apos;, PRIMARY KEY (`goods_id`)) ENGINE=InnoDB AUTO_INCREMENT=1000 DEFAULT CHARSET=utf8 COMMENT=&apos;ÂïÜÂìÅË°®&apos; ÂàùÂßãÂåñË°®Êï∞ÊçÆ12INSERT INTO `goods` (`goods_id`, `goodsname`, `number`)VALUES (1001, &apos;SNÂç´Ë°£&apos;, 15) 2.ËÆ¢ÂçïË°®12345678CREATE TABLE `orderinfo` ( `order_id` varchar(20) NOT NULL COMMENT &apos;ËÆ¢ÂçïÁºñÂè∑&apos;, `goods_id` bigint(18) NOT NULL COMMENT &apos;ÂïÜÂìÅID&apos;, `user_id` bigint(10) NOT NULL COMMENT &apos;Áî®Êà∑ID&apos;, `order_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;‰∏ãÂçïÊó∂Èó¥&apos; , PRIMARY KEY (`order_id`), INDEX `idx_order_id` (`order_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&apos;ËÆ¢ÂçïË°®&apos; OKÔºåËá≥Ê≠§Ë°®ÁªìÊûÑÂèäÂàùÂßãÂåñÊï∞ÊçÆÊûÑÂª∫ÂÆåÊàêÔºå‰∏ãÈù¢ËØ¥‰∏ãÂü∫‰∫éMavanÁöÑÈ°πÁõÆÁªìÊûÑ„ÄÇ È°πÁõÆÁªìÊûÑËØ¥ÊòéÂõ†‰∏∫È°πÁõÆÊòØ‰ΩøÁî®mavenÊù•ÁÆ°ÁêÜjarÂåÖÁöÑÔºåÂÖàÊù•Ë¥¥‰∏Ä‰∏ãÔºåpom.xmlÁöÑÈÖçÁΩÆ pom.xml‰∏∫‰∫ÜÈÅøÂÖçÂ≠¶‰π†Â∞è‰ºô‰º¥Â¥áÂ∞öÊãøÊù•‰∏ª‰πâ„Äê‰πüÂ∞±ÊòØÂéªÈô§‰∫Üxmlns‰πãÁ±ªÁöÑ‰∏úË•ø„ÄëÔºåËøôÈáåÂè™ÊîæÈ°πÁõÆ‰æùËµñÁöÑjarÂåÖÁöÑdependenciesÔºõÊú¨Ê°à‰æãÂ∞ÜÊú¨ÁùÄ‚ÄúÈúÄÂàôÁî®‚ÄùÁöÑÂéüÂàôÔºåÈÅøÂÖçÂú®ÁΩë‰∏äÁúãÂà∞ÁöÑÂêÑÁßç‰π±‰∏ÉÂÖ´Á≥üÁöÑ‰æùËµñÈÉΩ‰∏¢ËøõÊù•ÁöÑÊÉÖÂÜµÔºåÈÄ†ÊàêËµÑÊ∫êÊµ™Ë¥πÂíåÂπ≤Êâ∞ÈòÖËØª„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134&lt;dependencies&gt; &lt;!-- ÂçïÂÖÉÊµãËØï --&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 1.Êó•Âøó slf4j--&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 2.Êï∞ÊçÆÂ∫ìËøûÊé•È©±Âä® --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.37&lt;/version&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- 2.Êï∞ÊçÆÂ∫ìËøûÊé•Ê±† --&gt; &lt;dependency&gt; &lt;groupId&gt;c3p0&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 3.MyBatis ‰ª•Âèä spring-mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 4.Servlet Áõ∏ÂÖ≥‰æùËµñ --&gt; &lt;dependency&gt; &lt;groupId&gt;taglibs&lt;/groupId&gt; &lt;artifactId&gt;standard&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;jstl&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.5.4&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 5.Spring --&gt; &lt;!-- 5.1 SpringÊ†∏ÂøÉ Ôºöcore bean context --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 5.2 Spring jdbc‰æùËµñÔºå‰∫ãÂä°‰æùËµñ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 5.3 Spring web‰æùËµñ&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 5.4 Spring test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;4.1.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 6.redisÂÆ¢Êà∑Á´Ø:Jedis„Äê‰∏ç‰ΩøÁî®ÁöÑËØùÂèØ‰ª•Áõ¥Êé•ÂéªÈô§„Äë --&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.7.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.dyuproject.protostuff&lt;/groupId&gt; &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt; &lt;version&gt;1.0.8&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.dyuproject.protostuff&lt;/groupId&gt; &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt; &lt;version&gt;1.0.8&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 7.Â∑•ÂÖ∑Á±ª --&gt; &lt;dependency&gt; &lt;groupId&gt;commons-collections&lt;/groupId&gt; &lt;artifactId&gt;commons-collections&lt;/artifactId&gt; &lt;version&gt;3.2&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; *È°πÁõÆÁªìÊûÑÂõæ src/test/javaÔºöÁî®‰∫éjunitÁöÑÊµãËØïÁ±ª src/main/java: dao:Êï∞ÊçÆÂ∫ìÂ§ÑÁêÜ service:‰∏öÂä°Â§ÑÁêÜ enums:È°πÁõÆÊûö‰∏æ mapper:dao‰∏≠ÊñπÊ≥ïÂØπÂ∫îmybatisÊò†Â∞ÑÊñá‰ª∂ÔºåSqlÂ∞±Âú®ËøôÈáåÈù¢ webÔºöÊéßÂà∂Âô®Ôºåcontroller entity:È°πÁõÆ‰∏≠ÁöÑÂÆû‰ΩìÁ±ªÔºåÂ¶ÇÔºöÂïÜÂìÅÁ±ªÂíåËÆ¢ÂçïÁ±ª ÈÖçÁΩÆÊñá‰ª∂ jdbc.properties1234jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://serverName:port/dbname?useUnicode=true&amp;characterEncoding=utf8jdbc.username=[Â°´ÂÜôËá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ìÁî®Êà∑Âêç]jdbc.password=[Â°´ÂÜôËá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ìÁôªÂΩïÂØÜÁ†Å] logback.xmlËøôÈáåÁõ¥Êé•Áî®ÁöÑÊòØÊéßÂà∂Âè∞ËæìÂá∫ÔºåÂ¶ÇÊûúÊòØÁîü‰∫ßÁéØÂ¢ÉÔºåÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑÈúÄÊ±ÇËøõË°åÈÖçÁΩÆ„ÄÇ 123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configuration debug=&quot;true&quot;&gt; &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; ch.qos.logback.classic.encoder.PatternLayoutEncoder --&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;root level=&quot;debug&quot;&gt; &lt;appender-ref ref=&quot;STDOUT&quot; /&gt; &lt;/root&gt;&lt;/configuration&gt; mybatis-configËøôÈáå‰∏ªË¶ÅÊòØMyBatiesÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ÁöÑÈÖçÁΩÆÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∫õÁ±ªÁöÑÂà´Âêç„ÄÅ‰∏ªÈîÆËá™Â¢ûÈÖçÁΩÆ„ÄÅÈ©ºÂ≥∞ÂëΩÂêçËßÑÂàôÈÖçÁΩÆÁ≠â„ÄÇ 12345678910111213&lt;configuration&gt; &lt;!-- ÈÖçÁΩÆÂÖ®Â±ÄÂ±ûÊÄß --&gt; &lt;settings&gt; &lt;!-- ‰ΩøÁî®jdbcÁöÑgetGeneratedKeysËé∑ÂèñÊï∞ÊçÆÂ∫ìËá™Â¢û‰∏ªÈîÆÂÄº --&gt; &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;true&quot; /&gt; &lt;!-- ‰ΩøÁî®ÂàóÂà´ÂêçÊõøÊç¢ÂàóÂêç ÈªòËÆ§:true --&gt; &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot; /&gt; &lt;!-- ÂºÄÂêØÈ©ºÂ≥∞ÂëΩÂêçËΩ¨Êç¢:Table&#123;create_time&#125; -&gt; Entity&#123;createTime&#125; --&gt; &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot; /&gt; &lt;/settings&gt;&lt;/configuration&gt; spring Áõ∏ÂÖ≥ÈÖçÁΩÆÊñá‰ª∂‰∏∫‰∫ÜÊõ¥Âä†Ê∏ÖÊô∞ÁöÑ‰∫ÜËß£springÂêÑ‰∏™ÁªÑ‰ª∂ÁöÑ‰ΩúÁî®ÔºåËøôÈáåÂ∞ÜÊï∞ÊçÆÊ∫êÁöÑÈÖçÁΩÆ„ÄÅ‰∫ãÂä°ÈÖçÁΩÆÂíåËßÜÂõæËß£ÊûêÂô®ÁöÑÈÖçÁΩÆÂàÜÂºÄÊù•„ÄÇspring-dao.xmlËøôÈáåÈù¢‰∏ªË¶ÅÂ∞±ÊòØspringÈÖçÁΩÆÊï¥ÂêàmybatisÁöÑÂÖ∑‰ΩìËøáÁ®ãÔºåÂÖ∑‰ΩìÂåÖÊã¨Ôºö1.ÂºïÂÖ•Êï∞ÊçÆÂ∫ìÈÖçÁΩÆÊñá‰ª∂2.ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê„ÄêÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†„Äë3.ÈÖçÁΩÆSqlSessionFactoryÂØπË±°4.ÈÖçÁΩÆÊâ´ÊèèDaoÊé•Âè£ÂåÖÔºåÂä®ÊÄÅÂÆûÁé∞DaoÊé•Âè£ÔºåÊ≥®ÂÖ•Âà∞springÂÆπÂô®‰∏≠ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!-- 1.ÈÖçÁΩÆÊï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÂèÇÊï∞propertiesÁöÑÂ±ûÊÄßÔºö$&#123;url&#125; --&gt;&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot; /&gt;&lt;!-- 2.Êï∞ÊçÆÂ∫ìËøûÊé•Ê±† --&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;!-- ÈÖçÁΩÆËøûÊé•Ê±†Â±ûÊÄß --&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot; /&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt; &lt;!-- c3p0ËøûÊé•Ê±†ÁöÑÁßÅÊúâÂ±ûÊÄß --&gt; &lt;property name=&quot;maxPoolSize&quot; value=&quot;30&quot; /&gt; &lt;property name=&quot;minPoolSize&quot; value=&quot;10&quot; /&gt; &lt;!-- ÂÖ≥Èó≠ËøûÊé•Âêé‰∏çËá™Âä®commit --&gt; &lt;property name=&quot;autoCommitOnClose&quot; value=&quot;false&quot; /&gt; &lt;!-- Ëé∑ÂèñËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥ --&gt; &lt;property name=&quot;checkoutTimeout&quot; value=&quot;10000&quot; /&gt; &lt;!-- ÂΩìËé∑ÂèñËøûÊé•Â§±Ë¥•ÈáçËØïÊ¨°Êï∞ --&gt; &lt;property name=&quot;acquireRetryAttempts&quot; value=&quot;2&quot; /&gt;&lt;/bean&gt;&lt;!-- 3.ÈÖçÁΩÆSqlSessionFactoryÂØπË±° --&gt;&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;!-- Ê≥®ÂÖ•Êï∞ÊçÆÂ∫ìËøûÊé•Ê±† --&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt; &lt;!-- ÈÖçÁΩÆMyBatiesÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂:mybatis-config.xml --&gt; &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot; /&gt; &lt;!-- Êâ´ÊèèentityÂåÖ ‰ΩøÁî®Âà´Âêç --&gt; &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.glmapper.framerwork.entity&quot; /&gt; &lt;!-- Êâ´ÊèèsqlÈÖçÁΩÆÊñá‰ª∂:mapperÈúÄË¶ÅÁöÑxmlÊñá‰ª∂ --&gt; &lt;property name=&quot;mapperLocations&quot; value=&quot;com.glmapper.framerwork.mapper/*.xml&quot; /&gt;&lt;/bean&gt;&lt;!-- 4.ÈÖçÁΩÆÊâ´ÊèèDaoÊé•Âè£ÂåÖÔºåÂä®ÊÄÅÂÆûÁé∞DaoÊé•Âè£ÔºåÊ≥®ÂÖ•Âà∞springÂÆπÂô®‰∏≠ --&gt;&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt; &lt;!-- Ê≥®ÂÖ•sqlSessionFactory --&gt; &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot; /&gt; &lt;!-- ÁªôÂá∫ÈúÄË¶ÅÊâ´ÊèèDaoÊé•Âè£ÂåÖ --&gt; &lt;property name=&quot;basePackage&quot; value=&quot;com.glmapper.framerwork.dao&quot; /&gt;&lt;/bean&gt; spring-serviceÂÆûÈôÖÁöÑÂºÄÂèëËøáÁ®ã‰∏≠‰∫ãÂä°‰∏ÄËà¨ÈÉΩÊòØÂú®serviceÂ±ÇËøõË°åÊìç‰Ωú„ÄÇÂõ†Ê≠§Áî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑspring-service.xmlÊù•ËøõË°å‰∫ãÂä°ÁöÑÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ 12345678910 &lt;!-- Êâ´ÊèèserviceÂåÖ‰∏ãÊâÄÊúâ‰ΩøÁî®Ê≥®Ëß£ÁöÑÁ±ªÂûã --&gt;&lt;context:component-scan base-package=&quot;com.glmapper.framerwork.service&quot; /&gt;&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô® --&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;!-- Ê≥®ÂÖ•Êï∞ÊçÆÂ∫ìËøûÊé•Ê±† --&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;&lt;/bean&gt;&lt;!-- ÈÖçÁΩÆÂü∫‰∫éÊ≥®Ëß£ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä° --&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt; spring-web.xmlÈÖçÁΩÆSpringMVCÔºõÈúÄË¶ÅËØ¥Êòé‰∏Ä‰∏ãÔºå‰∏ÄËà¨Êàë‰ª¨Âú®ÂÆûÈôÖÁöÑÂºÄÂèëËøáÁ®ã‰∏≠Ôºå‰ºöÈÖçÁΩÆjson2mapËß£Êûê„ÄÇËøôÈáåÊ≤°ÊúâÁî®Âà∞Â∞±‰∏çË¥¥Âá∫Êù•ÔºåËØªËÄÖÂèØ‰ª•Ëá™Ë°åÁΩë‰∏äÊêúÁ¥¢‰∏ÄÊ≥¢„ÄÇ 1234567891011121314151617&lt;!-- 1.ÂºÄÂêØSpringMVCÊ≥®Ëß£Ê®°Âºè --&gt;&lt;mvc:annotation-driven /&gt;&lt;!-- 2.ÈùôÊÄÅËµÑÊ∫êÈªòËÆ§servletÈÖçÁΩÆ (1)Âä†ÂÖ•ÂØπÈùôÊÄÅËµÑÊ∫êÁöÑÂ§ÑÁêÜÔºöjs,css,ÂõæÁâáÁ≠â (2)ÂÖÅËÆ∏‰ΩøÁî®&quot;/&quot;ÂÅöÊï¥‰ΩìÊò†Â∞Ñ --&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!-- 3.ÈÖçÁΩÆËßÜÂõæËß£ÊûêÂô®ViewResolver --&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt; &lt;/bean&gt; &lt;!-- 4.Êâ´ÊèèwebÁõ∏ÂÖ≥ÁöÑbean --&gt; &lt;context:component-scan base-package=&quot;com.glmapper.framerwork.web&quot; /&gt; web.xml 12345678910111213141516171819202122232425262728293031323334353637383940&lt;!-- ÁºñÁ†ÅËøáÊª§Âô® --&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;!-- SpringÁõëÂê¨Âô® --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- Èò≤Ê≠¢SpringÂÜÖÂ≠òÊ∫¢Âá∫ÁõëÂê¨Âô® --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- ÈÖçÁΩÆDispatcherServlet --&gt; &lt;servlet&gt; &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- ÈÖçÁΩÆspringMVCÈúÄË¶ÅÂä†ËΩΩÁöÑÈÖçÁΩÆÊñá‰ª∂ spring-dao.xml,spring-service.xml,spring-web.xml Mybatis - &gt; spring -&gt; springmvc --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring-*.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt; &lt;!-- ÈªòËÆ§ÂåπÈÖçÊâÄÊúâÁöÑËØ∑Ê±Ç --&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; Ëá≥Ê≠§ÔºåÊâÄÊúâÁöÑÈÖçÁΩÆÊñá‰ª∂ÁªìÊùüÔºå‰∏ãÈù¢Â∞ÜËøõË°åÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÁéØËäÇ ‰∏öÂä°‰ª£Á†ÅËøôÈáåmapper‰∏≠ÁöÑxmlÊñá‰ª∂Â∞±‰∏çË¥¥‰∫ÜÔºåËá™Ë°åËÑëË°•„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÂÆû‰ΩìÁ±ªÔºöÂåÖÊã¨ÂïÜÂìÅÂíåËÆ¢Âçï ÂïÜÂìÅÁ±ª1234567891011121314151617181920212223242526272829/** * ÂïÜÂìÅ‰ø°ÊÅØÁ±ª * @author glmapper * */public class Goods &#123; private long goodsId;// ÂïÜÂìÅID private String goodsName;// ÂïÜÂìÅÂêçÁß∞ private int number;// ÂïÜÂìÅÂ∫ìÂ≠ò public long getGoodsId() &#123; return goodsId; &#125; public void setGoodsId(long goodsId) &#123; this.goodsId = goodsId; &#125; public String getGoodsName() &#123; return goodsName; &#125; public void setGoodsName(String goodsName) &#123; this.goodsName = goodsName; &#125; public int getNumber() &#123; return number; &#125; public void setNumber(int number) &#123; this.number = number; &#125;&#125; ËÆ¢ÂçïÁ±ª 1234567891011121314151617181920212223242526272829303132333435/** * ËÆ¢Âçï‰ø°ÊÅØÁ±ª * @author glmapper * */public class OrderInfo &#123; private String orderId;//ËÆ¢ÂçïID private long goodsId;//ÂïÜÂìÅID private long userId;//Áî®Êà∑ID private Date orderTime;//‰∏ãÂçïÊó∂Èó¥ public String getOrderId() &#123; return orderId; &#125; public void setOrderId(String orderId) &#123; this.orderId = orderId; &#125; public long getGoodsId() &#123; return goodsId; &#125; public void setGoodsId(long goodsId) &#123; this.goodsId = goodsId; &#125; public long getUserId() &#123; return userId; &#125; public void setUserId(long userId) &#123; this.userId = userId; &#125; public Date getOrderTime() &#123; return orderTime; &#125; public void setOrderTime(Date orderTime) &#123; this.orderTime = orderTime; &#125;&#125; ÂïÜÂìÅdao 12345678910111213141516171819202122232425262728public interface GoodsDao &#123; /** * ÈÄöËøáIDÊü•ËØ¢Âçï‰ª∂ÂïÜÂìÅ‰ø°ÊÅØ * * @param id * @return */ Goods queryById(long id); /** * Êü•ËØ¢ÊâÄÊúâÂïÜÂìÅ‰ø°ÊÅØ * * @param offset Êü•ËØ¢Ëµ∑Âßã‰ΩçÁΩÆ * @param limit Êü•ËØ¢Êù°Êï∞ * @return */ List&lt;Goods&gt; queryAll(@Param(&quot;offset&quot;) int offset, @Param(&quot;limit&quot;) int limit); /** * ÂáèÂ∞ëÂïÜÂìÅÂ∫ìÂ≠ò * * @param bookId * @return Â¶ÇÊûúÂΩ±ÂìçË°åÊï∞Á≠â‰∫é&gt;1ÔºåË°®Á§∫Êõ¥Êñ∞ÁöÑËÆ∞ÂΩïË°åÊï∞ */ int reduceNumber(long goodsId);&#125; ËÆ¢Âçïdao 1234567891011121314151617public interface OrderInfoDao &#123; /** * ÊèíÂÖ•ËÆ¢ÂçïËÆ∞ÂΩï * * @param OrderInfo orderInfo * @return ÊèíÂÖ•ÁöÑË°åÊï∞ */ int insertOrderInfo(OrderInfo orderInfo); /** * ÈÄöËøá‰∏ªÈîÆÊü•ËØ¢ËÆ¢ÂçïËÆ∞ÂΩïÔºåËøîÂõûËÆ¢ÂçïÂÆû‰Ωì * @param orderId * @return */ OrderInfo queryByOrderId(String orderId);&#125; ‰∏ãÂçïÊúçÂä°Êé•Âè£orderService 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566@Service(&quot;orderService&quot;)public class OrderServiceImpl implements OrderService &#123; //logÁîüÊàêÂô® private Logger logger = LoggerFactory.getLogger(OrderServiceImpl.class); // Ê≥®ÂÖ•dao‰æùËµñ„ÄêÂïÜÂìÅdaoÔºåËÆ¢Âçïdao„Äë @Autowired private GoodsDao goodsDao; @Autowired private OrderInfoDao orderInfoDao; @Override public Goods getById(long goodsId) &#123; // TODO Auto-generated method stub return goodsDao.queryById(goodsId); &#125; @Override public List&lt;Goods&gt; getList(int offset,int limit) &#123; // TODO Auto-generated method stub return goodsDao.queryAll(offset, limit); &#125; @Override @Transactional public OrderInfo buyGoods(long goodsId, long userId) &#123; //Êâ£ÂáèÂ∫ìÂ≠òÔºåÊèíÂÖ•ËÆ¢Âçï =‰∏Ä‰∏™‰∫ãÂä° Â¶ÇÊûúÂ§±Ë¥•ÂàôÊâßË°åÂõûÊªö try &#123; // ÂáèÂ∫ìÂ≠ò int update = goodsDao.reduceNumber(goodsId); if (update &lt;= 0) &#123;// Â∫ìÂ≠ò‰∏çË∂≥ throw new NoNumberException(&quot;no number&quot;); &#125; else &#123; // ÊâßË°åÈ¢ÑÁ∫¶Êìç‰Ωú OrderInfo orderInfo=new OrderInfo(); orderInfo.setGoodsId(goodsId); orderInfo.setUserId(userId); orderInfo.setOrderTime(new Date()); String orderId=getRandomOrderId(goodsId); orderInfo.setOrderId(orderId); int insert = orderInfoDao.insertOrderInfo(orderInfo); if (insert &lt;= 0) &#123;// ÈáçÂ§çÈ¢ÑÁ∫¶ throw new RepeatAppointException(&quot;repeat appoint&quot;); &#125; else &#123;// È¢ÑÁ∫¶ÊàêÂäü return orderInfo; &#125; &#125; &#125; catch (Exception e) &#123; //ËøôÈáåÂèØ‰ª•‰∏∞ÂØå‰∏ãÂÖ∑‰ΩìÁöÑËøîÂõû‰ø°ÊÅØ logger.error(&quot;‰∏ãÂçïÂ§±Ë¥•&quot;); &#125; return null; &#125; private String getRandomOrderId(long goodsId) &#123; SimpleDateFormat dateFormater = new SimpleDateFormat(&quot;yyyyMMddhhmmss&quot;); String prefix=dateFormater.format(new Date()); String goodsIdStr=goodsId+&quot;&quot;; String temp=&quot;&quot;; for (int i = 0; i &lt; 6; i++) &#123; Random random=new Random(goodsIdStr.length()-1); temp+=goodsIdStr.charAt(random.nextInt()); &#125; return prefix+temp; &#125;&#125; OKÔºåËá≥Ê≠§ÊâÄÊúâÊ†∏ÂøÉ‰ª£Á†ÅÂèäÈÖçÁΩÆÊñá‰ª∂ÁΩóÂàóÂÆåÊØïÔºõ„Äêmapper‰∏≠ÁöÑxmlÂíåÂÖ∑‰ΩìÁöÑcontrollerÂ∞±‰∏çË¥¥‰∫ÜÔºåÁõ∏‰ø°Â§ßÂÆ∂ÂØπËøô‰∏™‰πü‰∏çÈôåÁîü„ÄÇÊú¨Êñá‰∏ªË¶ÅÊÑèÂõæÂú®‰∫éÊ¢≥ÁêÜ‰∏ãËá™Â∑±Â≠¶‰π†‰∏≠ÁöÑ‰∏Ä‰∫õÁÇπÔºåSSMÊ°ÜÊû∂Âú®ÂÆûÈôÖÁöÑÂ∫îÁî®ÂºÄÂèë‰∏≠Ëøò‰ºöÊúâÂæàÂ§öÂÖ∂‰ªñÁöÑÂºÄÊ∫êÊäÄÊúØÁªìÂêàËøõÊù•ÔºåÂ¶ÇÔºöquartz,redisÁ≠â„ÄÇÂΩìÂâçÊú¨ÊñáÁöÑÂàóÂ≠êÂ∞±ÊòØ‰∏Ä‰∏™Á©∫Â£≥Â≠êÔºå‰ª•Â§áÂèÇËÄÉÂêß„Äë]]></content>
      <categories>
        <category>Êû∂ÊûÑ</category>
      </categories>
      <tags>
        <tag>ssm</tag>
        <tag>spring</tag>
        <tag>mybatis</tag>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAÂü∫Á°ÄÁü•ËØÜÁ≥ªÂàó---ËøõÁ®ã„ÄÅÁ∫øÁ®ãÂÆâÂÖ®]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-thread-base%2F</url>
    <content type="text"><![CDATA[1.1 ‰∏¥ÁïåÂå∫‰øùËØÅÂú®Êüê‰∏ÄÊó∂ÂàªÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩËÆøÈóÆÊï∞ÊçÆÁöÑÁÆÄ‰æøÊñπÊ≥ïÔºåÂú®‰ªªÊÑèÊó∂ÂàªÂè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÂØπËµÑÊ∫êËøõË°åËÆøÈóÆ„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™Á∫øÁ®ãËØïÂõæÂêåÊó∂ËÆøÈóÆ‰∏¥ÁïåÂå∫ÔºåÈÇ£‰πàÂú®Êúâ‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•ÂêéÔºåÂÖ∂‰ªñÊâÄÊúâËØïÂõæËÆøÈóÆ‰∏¥ÁïåÂå∫ÁöÑÁ∫øÁ®ãÂ∞ÜË¢´ÊåÇËµ∑ÔºåÂπ∂‰∏ÄÁõ¥ÊåÅÁª≠Âà∞ËøõÂÖ•‰∏¥ÁïåÂå∫ÁöÑÁ∫øÁ®ãÁ¶ªÂºÄ„ÄÇ‰∏¥ÁïåÂå∫Âú®Ë¢´ÈáäÊîæÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂèØ‰ª•ÁªßÁª≠Êä¢Âç†ÔºåÂπ∂‰ª•Ê≠§ËææÂà∞Áî®ÂéüÂ≠êÊñπÂºèÊìç‰ΩúÂÖ±‰∫´ËµÑÊ∫êÁöÑÁõÆÁöÑ 1.2 ‰∫íÊñ•Èáè‰∫íÊñ•ÈáèÂíå‰∏¥ÁïåÂå∫ÂæàÁõ∏‰ººÔºåÂè™ËÉΩÊã•Êúâ‰∫íÊñ•ÂØπË±°ÁöÑÁ∫øÁ®ãÊâçËÉΩÂÖ∑ÊúâËÆøÈóÆËµÑÊ∫êÁöÑÊùÉÈôêÔºåÁî±‰∫é‰∫íÊñ•ÂØπË±°Âè™Êúâ‰∏Ä‰∏™ÔºåÂõ†Ê≠§Â∞±ÂÜ≥ÂÆö‰∫Ü‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÊ¨°ÂÖ±‰∫´ËµÑÊ∫êÈÉΩ‰∏ç‰ºöÂêåÊó∂Ë¢´Â§ö‰∏™Á∫øÁ®ãÊâÄËÆøÈóÆ„ÄÇÂΩìÂâçÂç†ÊçÆËµÑÊ∫êÁöÑÁ∫øÁ®ãÂú®‰ªªÂä°Â§ÑÁêÜÂÆåÂêéÂ∫îÂ∞ÜÊã•ÊúâÁöÑ‰∫íÊñ•ÂØπË±°‰∫§Âá∫Ôºå‰ª•‰æøÂÖ∂‰ªñÁ∫øÁ®ãÂú®Ëé∑ÂæóÂêéÂèØ‰ª•ËÆøÈóÆËµÑÊ∫ê„ÄÇ‰∫íÊñ•ÈáèÊØî‰∏¥ÁïåÂå∫Â§çÊùÇÔºåÂõ†‰∏∫‰ΩøÁî®‰∫íÊñ•‰∏ç‰ªÖ‰ªÖËÉΩÂ§üÂú®Âêå‰∏ÄÂ∫îÁî®Á®ãÂ∫è‰∏çÂêåÁ∫øÁ®ã‰∏≠ÂÆûÁé∞ËµÑÊ∫êÁöÑÂÆâÂÖ®ÂÖ±‰∫´ÔºåËÄå‰∏îÂèØ‰ª•Âú®‰∏çÂêåÂ∫îÁî®Á®ãÂ∫èÁöÑÁ∫øÁ®ã‰πãÈó¥ÂÆûÁé∞ÂØπËµÑÊ∫êÁöÑÂÆâÂÖ®ÂÖ±‰∫´„ÄÇ 1.3 ÁÆ°Á®ã/‰ø°Âè∑ÈáèÁÆ°Á®ãÂíå‰ø°Âè∑ÈáèÊòØÂêå‰∏Ä‰∏™Ê¶ÇÂøµ„ÄÇÊåá‰∏Ä‰∏™‰∫íÊñ•Áã¨Âç†ÈîÅÂÆöÁöÑÂØπË±°ÊàñÁß∞‰∏∫‰∫íÊñ•‰Ωì„ÄÇÂú®ÁªôÂÆöÁöÑÊó∂Èó¥Ôºå‰ªÖÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Ëé∑ÂæóÁÆ°Á®ã„ÄÇÂΩì‰∏Ä‰∏™Á∫øÁ®ãÈúÄË¶ÅÈîÅÂÆöÔºå‰ªñÂøÖÈ°ªËøõÂÖ•ÁÆ°Á®ã„ÄÇÊâÄÊúâÂÖ∂‰ªñÁöÑËØïÂõæËøõÂÖ•Â∑≤ÁªèÈîÅÂÆöÁöÑÁÆ°Á®ãÁöÑÁ∫øÁ®ãÂøÖÈ°ªÊåÇËµ∑Áõ¥Âà∞Á¨¨‰∏Ä‰∏™Á∫øÁ®ãÈÄÄÂá∫ÁÆ°Á®ã„ÄÇËøô‰∫õÂÖ∂‰ªñÁöÑÁ∫øÁ®ãË¢´Áß∞‰∏∫Á≠âÂæÖÁ∫øÁ®ã„ÄÇ‰∏Ä‰∏™Êã•ÊúâÁÆ°Á®ãÁöÑÁ∫øÁ®ãÂ¶ÇÊûúÊÑøÊÑèÁöÑËØùÂèØ‰ª•ÂÜçÊ¨°ËøõÂÖ•Áõ∏ÂêåÁöÑÁÆ°Á®ãÔºàÂèØÈáçÂÖ•ÊÄßÔºâ 1.4 CASÊìç‰ΩúCASÊìç‰ΩúÔºàcompare and swapÔºâCASÊúâ3‰∏™Êìç‰ΩúÊï∞ÔºåÂÜÖÂ≠òÂÄºVÔºåÊóßÁöÑÈ¢ÑÊúüÂÄºAÔºåË¶Å‰øÆÊîπÁöÑÊñ∞ÂÄºB„ÄÇÂΩì‰∏î‰ªÖÂΩìÈ¢ÑÊúüÂÄºAÂíåÂÜÖÂ≠òÂÄºVÁõ∏ÂêåÊó∂ÔºåÂ∞ÜÂÜÖÂ≠òÂÄºV‰øÆÊîπ‰∏∫BÔºåÂê¶ÂàôËøîÂõûV„ÄÇËøôÊòØ‰∏ÄÁßç‰πêËßÇÈîÅÁöÑÊÄùË∑ØÔºåÂÆÉÁõ∏‰ø°Âú®ÂÆÉ‰øÆÊîπ‰πãÂâçÔºåÊ≤°ÊúâÂÖ∂ÂÆÉÁ∫øÁ®ãÂéª‰øÆÊîπÂÆÉÔºõËÄåSynchronizedÊòØ‰∏ÄÁßçÊÇ≤ËßÇÈîÅÔºåÂÆÉËÆ§‰∏∫Âú®ÂÆÉ‰øÆÊîπ‰πãÂâçÔºå‰∏ÄÂÆö‰ºöÊúâÂÖ∂ÂÆÉÁ∫øÁ®ãÂéª‰øÆÊîπÂÆÉÔºåÊÇ≤ËßÇÈîÅÊïàÁéáÂæà‰Ωé„ÄÇ‰∏ãÈù¢Êù•Áúã‰∏Ä‰∏ãAtomicIntegerÊòØÂ¶Ç‰ΩïÂà©Áî®CASÂÆûÁé∞ÂéüÂ≠êÊÄßÊìç‰ΩúÁöÑ„ÄÇ 1.5 ÈáçÊéíÂ∫èÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÔºåËÄåÂú®Á®ãÂ∫èÊâßË°åÊó∂‰ºöÂØπÁ®ãÂ∫èËøõË°åÈáçÊéíÂ∫è„ÄÇ‰ªñÁöÑÂá∫Áé∞ÊòØ‰∏∫‰∫ÜÊèêÈ´òÁ®ãÂ∫èÁöÑÂπ∂ÂèëÂ∫¶„ÄÇ‰ªéËÄåÊèêÈ´òÊÄßËÉΩÔºõ‰ΩÜÊòØÂØπ‰∫éÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÔºåÈáçÊéíÂ∫èÂèØËÉΩ‰ºöÂØºËá¥Á®ãÂ∫èÊâßË°åÁöÑÁªìÊûú‰∏çÊòØÊàë‰ª¨ÈúÄË¶ÅÁöÑÁªìÊûúÔºåÈáçÊéíÂ∫èÂàÜ‰∏∫ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰ø©‰∏™ÊñπÈù¢„ÄÇËÄåÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èÂåÖÊã¨Êåá‰ª§Á∫ßÈáçÊéíÂ∫èÂíåÂÜÖÂ≠òÈáçÊéíÂ∫è„ÄÇ Â∞èËäÇÂú®java‰∏≠ÔºåÊâÄÊúâÁöÑÂèòÈáèÔºàÂÆû‰æãÂ≠óÊÆµÔºåÈùôÊÄÅÂ≠óÊÆµÔºåÊûÑÊàêÊï∞ÁªÑÁöÑÂÖÉÁ¥†Ôºå‰∏çÂåÖÊã¨Â±ÄÈÉ®ÂèòÈáèÂíåÊñπÊ≥ïÂèÇÊï∞ÔºâÈÉΩÂ≠òÂÇ®Âú®‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÂÜÖ‰∏™Á∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÔºåÁ∫øÁ®ãÁöÑÂ∑•‰ΩúÂÜÖÂ≠ò‰øùÂ≠òË¢´Á∫øÁ®ã‰ΩøÁî®Âà∞ÁöÑÂèòÈáèÁöÑ‰∏ªÂÜÖÂ≠òÂâØÊú¨Êã∑Ë¥ù„ÄÇÁ∫øÁ®ãÂØπÂèòÈáèÁöÑÊâÄÊúâÊìç‰ΩúÈÉΩÂøÖÈ°ªÂú®Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠ËøõË°åÔºå‰∏∫‰∏çËÉΩÁõ¥Êé•ËØªÂÜô‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáè„ÄÇ‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥‰πü‰∏çÊÅ©ËÉΩÂ§üÁõ¥Êé•ËÆøÈóÆÂØπÊñπÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÂèòÈáèÔºåÁ∫øÁ®ãÈó¥ÊØîÂèòÈáèÂÄºÁöÑ‰º†ÈÄíÈÄöËøá‰∏ªÂÜÖÂ≠òÊù•ÂÆåÊàê„ÄÇ JAVA‰∏≠Á∫øÁ®ãÂÆâÂÖ®Áõ∏ÂÖ≥ÂÖ≥ÈîÆÂ≠óÂèäÁ±ª‰∏ªË¶ÅÂåÖÊã¨ÔºösynchronizedÔºåVolitileÔºåThreadLocalÔºåLockÔºåCondition 2.1 Volitile‰ΩúÁî®Ôºö 1Ôºâ‰øùËØÅ‰∫ÜÂøÉÊô∫ËÉΩÁ´ãÂç≥Â≠òÂÇ®Âà∞‰∏ªÂÜÖÂ≠òÊâçÔºåÊØèÊ¨°‰ΩøÁî®ÂâçÁ´ãÂç≥‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠Âà∑Êñ∞ 2ÔºâÁ¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫è‰ºòÂåñ VolitileÂÖ≥ÈîÆÂ≠ó‰∏çËÉΩ‰øùËØÅÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÂØπÂÖ±‰∫´Êï∞ÊçÆÁöÑÊìç‰ΩúÁöÑÊ≠£Á°ÆÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Âú®Ëá™Â∑±Áä∂ÊÄÅÊîπÂèò‰πãÂêéÈúÄË¶ÅÁ´ãÂç≥ÈÄöÁü•ÊâÄÊúâÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÔºåÂè™‰øùËØÅÂèØËßÅÊÄßÔºå‰∏ç‰øùËØÅÂéüÂ≠êÊÄß„ÄÇÂç≥ÈÄöËøáÂà∑Êñ∞ÂèòÈáèÂÄºÁ°Æ‰øùÂèØËßÅÊÄß„ÄÇ Java‰∏≠synchronizedÂíåfinal‰πüËÉΩ‰øùËØÅÂèØËßÅÊÄß synchronizedÔºöÂêåÊ≠•Âø´ÈÄöËøáÂèòÈáèÈîÅÂÆöÂâçÂøÖÈ°ªÊ∏ÖÁ©∫Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÂèòÈáèÂÄºÔºåÈáçÊñ∞‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ËØªÂèñÂèòÈáèÂÄºÔºåËß£ÈîÅÂâçÂøÖÈ°ªÊääÂèòÈáèÂÄºÂêåÊ≠•Âõû‰∏ªÂÜÖÂ≠òÊù•Á°Æ‰øùÂèØËßÅÊÄß„ÄÇ final:Ë¢´final‰øÆÈ•∞ÁöÑÂ≠óÊÆµÂú®ÊûÑÈÄ†Âô®‰∏≠‰∏ÄÊó¶Ë¢´ÂàùÂßãÂåñÂÆåÊàêÔºåÂπ∂‰∏îÊûÑÈÄ†Âô®Ê≤°ÊúâÊääthisÂºïÁî®‰º†ÈÄíËøõÂéªÔºåÈÇ£‰πàÂú®ÂÖ∂‰ªñÁ∫øÁ®ã‰∏≠Â∞±ËÉΩÁúãËßÅfinalÂ≠óÊÆµÁöÑÂÄºÔºåÊó†ÈúÄÂêåÊ≠•Â∞±ÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÊ≠£Á°ÆËÆøÈóÆ„ÄÇ 2.2 synchronizedÊää‰ª£Á†ÅÂùóÂ£∞Êòé‰∏∫synchronizedÔºåÊúâ‰ø©‰∏™‰ΩúÁî®ÔºåÈÄöÂ∏∏ÊòØÊåáÊîπ‰ª£Á†ÅÂÖ∑ÊúâÂéüÂ≠êÊÄßÂíåÂèØËßÅÊÄß„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂêåÊ≠•Êú∫Âà∂Êèê‰æõÁöÑËøôÁßçÂèØËßÅÊÄßÔºåÁ∫øÁ®ãÁúãÂà∞ÁöÑÂÖ±‰∫´ÊØîÈÇ£ÈáåÂèØËÉΩÊòØ‰øÆÊîπÂâçÁöÑÂÄºÊàñ‰∏ç‰∏ÄËá¥ÁöÑÂÄºÔºåËøôÂ∞ÜÂºïÂèëËÆ∏Â§ö‰∏•ÈáçÈóÆÈ¢ò„ÄÇ ÂéüÁêÜÔºöÂΩìÂØπË±°Ëé∑ÂèñÈîÅÊòØÔºå‰ªñÈ¶ñÂÖàÊòØËá™Â∑±ÁöÑÈ´òÈÄüÁºìÂ≠òÊó†ÊïàÔºåËøôÊ†∑Â∞±ÂèØ‰ª•‰øùËØÅÁõ¥Êé•‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠Ë£ÖÂÖ•ÂèòÈáèÔºåÂêåÊ†∑Âú®ÂØπË±°ÈáäÊîæÈîÅ‰πãÂâçÔºå‰ªñ‰ºöÂà∑Êñ∞ÂÖ∂È´òÈÄüÁºìÂ≠òÔºåÂº∫Âà∂‰ΩøÂ∑≤ÂÅöÁöÑ‰ªª‰ΩïÊõ¥ÊîπÈÉΩÂá∫Áé∞Âú®‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑‰ºö‰øùËØÅÂú®Âêå‰∏Ä‰∏™ÈîÅ‰∏äÂêåÊ≠•ÁöÑ‰ø©‰∏™Á∫øÁ®ãÁúãÂà∞Âú®synchronizedÂùóÂÜÖ‰øÆÊîπÁöÑÂèòÈáèÁöÑÁõ∏ÂêåÂÄº„ÄÇ synchronizedÈáäÊîæÁî±JVMËá™Â∑±ÁÆ°ÁêÜ„ÄÇ Â≠òÂú®ÁöÑÈóÆÈ¢òÔºö 1ÔºâÊó†Ê≥ï‰∏≠Êñ≠‰∏Ä‰∏™Ê≠£Âú®Á≠âÂæÖËé∑ÂæóÈîÅÁöÑÁ∫øÁ®ã 2ÔºâÊó†Ê≥ïÈÄöËøáÊäïÁ•®ÂæóÂà∞ÈîÅÔºåÂ¶ÇÊûú‰∏çÊÉ≥Á≠âÂæÖ‰∏ãÂéªÔºå‰πüÂ∞±Ê≤°Ê≥ïÂæóÂà∞ÈîÅ 3ÔºâÂêåÊ≠•ËøòÈúÄË¶ÅÈîÅÁöÑÈáäÊîæÂè™ËÉΩÂú®‰∏éËé∑ÂæóÈîÅÊâÄÂú®ÁöÑÂ†ÜÊ†àÂ∏ßÁõ∏ÂêåÁöÑÂ†ÜÊ†à‰∏≠ËøõË°åÔºåÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåËøôÊ≤°ÈóÆÈ¢òÔºàËÄå‰∏î‰∏é‰∏ÄÂú∫Â§ÑÁêÜ‰∫§‰∫íÁöÑÂæàÂ•ΩÔºâÔºå‰ΩÜÊòØÔºåÁ°ÆÂÆûÂ≠òÂú®‰∏Ä‰∫õÈùûÂùóÁªìÊûÑÁöÑÈîÅÂÆöÊõ¥ÈÄÇÂêàÊÉÖÂÜµ„ÄÇ 2.3 LockLockÊòØÊúâJAVAÁºñÂÜôËÄåÊàêÁöÑÔºåÂú®javaËøô‰∏™Â±ÇÈù¢ÊòØÊó†ÂÖ≥JVMÂÆûÁé∞ÁöÑ„ÄÇÂåÖÊã¨ÔºöReentrantLockÔºåReadWriteLock„ÄÇÂÖ∂Êú¨Ë¥®ÈÉΩ‰æùËµñ‰∫éAbstractQueueSynchronizedÁ±ª„ÄÇLockÊèê‰æõ‰∫ÜÂæàÂ§öÈîÅÁöÑÊñπÂºèÔºåÂ∞ùËØïÈîÅÔºå‰∏≠Êñ≠ÈîÅÁ≠â„ÄÇÈáäÊîæÈîÅÁöÑËøáÁ®ãÁî±JAVAÂºÄÂèë‰∫∫ÂëòËá™Â∑±ÁÆ°ÁêÜ„ÄÇ Â∞±ÊÄßËÉΩËÄåË®ÄÔºåÂØπ‰∫éËµÑÊ∫êÂÜ≤Á™Å‰∏çÂ§öÁöÑÊÉÖÂÜµ‰∏ãsynchronizedÊõ¥Âä†ÂêàÁêÜÔºå‰ΩÜÂ¶ÇÊûúËµÑÊ∫êËÆøÈóÆÂÜ≤Á™ÅÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåsynchronizedÁöÑÊÄßËÉΩ‰ºöÂø´ÈÄü‰∏ãÈôçÔºåËÄåLockÂèØ‰ª•‰øùÊåÅÂπ≥Ë°°„ÄÇ 2.4 conditionConditionÂ∞ÜObjectÁõëËßÜÂô®ÊñπÊ≥ïÔºàwaitÔºånotify,notifyallÔºâÂàÜËß£ÊàêÊà™ÁÑ∂‰∏çÂêåÁöÑÂØπË±°Ôºå‰ª•‰æøÈÄöËøáËøô‰∫õÂØπË±°‰∏é‰ªªÊÑèLockÂÆûÁé∞ÁªÑÂêà‰ΩøÁî®Ôºå‰∏∫ÊØè‰∏™ÂØπË±°Êèê‰æõÂ§ö‰∏™Á≠âÂæÖset(wait-set),ÔºåÂÖ∂‰∏≠LockÊõø‰ª£‰∫ÜsynchronizedÊñπÊ≥ïÂíåËØ≠Âè•ÁöÑ‰ΩøÁî®ÔºåconditionÊõø‰ª£‰∫ÜObjectÁõëËßÜÂô®ÊñπÊ≥ïÁöÑ‰ΩøÁî®„ÄÇConditionÂÆû‰æãÂÆûË¥®‰∏äË¢´‰Ω†ÁªëÂÆöÂà∞‰∏Ä‰∏™ÈîÅ‰∏ä„ÄÇË¶Å‰∏∫ÁâπÂÆöLockÂÆû‰æãËé∑ÂæóConditionÂÆû‰æãÔºåËØ∑‰ΩøÁî®ÂÖ∂newConditionÔºàÔºâÊñπÊ≥ï„ÄÇ 2.5 ThreadLockÁ∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáè„ÄÇ ÂèòÈáèÊòØÂêå‰∏Ä‰∏™Ôºå‰ΩÜÊòØÊØè‰∏™Á∫øÁ®ãÈÉΩ‰ΩøÁî®Âêå‰∏Ä‰∏™ÂàùÂßãÂÄºÔºå‰πüÂ∞±ÊòØ‰ΩøÁî®Âêå‰∏Ä‰∏™ÂèòÈáèÁöÑ‰∏Ä‰∏™Êñ∞ÁöÑÂâØÊú¨ÔºåËøôÁßçÊÉÖÂÜµ‰∏ãTreadLocalÂ∞±ÈùûÂ∏∏ÊúâÁî®„ÄÇ Â∫îÁî®Âú∫ÊôØÔºöÂΩìÂæàÂ§öÁ∫øÁ®ãÈúÄË¶ÅÂ§öÊ¨°‰ΩøÁî®Âêå‰∏Ä‰∏™ÂØπË±°ÔºåÂπ∂‰∏îÈúÄË¶ÅËØ•ÂØπË±°ÂÖ∑ÊúâÁõ∏ÂêåÂàùÂßãÂÄºÁöÑÊó∂ÂÄôÔºåÊúÄÈÄÇÂêà‰ΩøÁî®TreadLocal„ÄÇ ‰∫ãÂÆû‰∏äÔºå‰ªéÊú¨Ë¥®‰∏äËÆ≤ÔºåÂ∞±ÊòØÊØè‰∏™Á∫øÁ®ãÈÉΩÁª¥ÊåÅ‰∏Ä‰∏™MAPÔºåËÄåËøô‰∏™mapÁöÑkeyÂ∞±ÊòØTreadLocal,ËÄåÂÄºÂ∞±ÊòØÊàë‰ª¨setÁöÑÈÇ£‰∏™ÂÄºÔºåÊØèÊ¨°Á∫øÁ®ãÂú®getÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ªéËá™Â∑±ÁöÑÂèòÈáè‰∏≠ÂèñÂÄºÔºåÊó¢ÁÑ∂‰ªéËá™Â∑±ÁöÑÂèòÈáè‰∏≠ÂèñÂÄºÔºåÈÇ£Â∞±ËÇØÂÆö‰∏çÂ≠òÂú®Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈóÆÈ¢ò„ÄÇÊÄª‰ΩìÊù•ËÆ≤ÔºåTreadLocalËøô‰∏™ÂèòÈáèÁöÑÁä∂ÊÄÅÊ†πÊú¨Ê≤°ÊúâÂèëÁîüÂèòÂåñ„ÄÇÂÆÉ‰ªÖ‰ªÖÊòØÂÖÖÂΩì‰∫Ü‰∏Ä‰∏™keyÁöÑËßíËâ≤ÔºåÂè¶Â§ñÊèê‰æõÁªôÊØè‰∏Ä‰∏™Á∫øÁ®ã‰∏Ä‰∏™ÂàùÂßãÂÄº„ÄÇÂ¶ÇÊûúÂÖÅËÆ∏ÁöÑËØùÔºåÊàë‰ª¨Ëá™Â∑±Â∞±ËÉΩÂÆûÁé∞‰∏Ä‰∏™ËøôÊ†∑ÁöÑÂäüËÉΩÔºåÂè™‰∏çËøáÊÅ∞Â•ΩJDKÂ∞±Â∑≤ÁªèÂ∏ÆÂä©Êàë‰ª¨ÂÅö‰∫ÜËøô‰∏™‰∫ãÊÉÖ„ÄÇ ‰ΩøÁî®TreadLocalÁª¥Êä§ÂèòÈáèÊó∂ÔºåTreadLocal‰∏∫ÊØè‰∏™‰ΩøÁî®ËØ•ÂèòÈáèÁöÑÁ∫øÁ®ãÊèê‰æõÁã¨Á´ãÂú∞ÂèòÈáèÂâØÊú¨ÔºåÊâÄ‰ª•ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•Áã¨Á´ãÂú∞ÊîπÂèòËá™Â∑±ÁöÑÂâØÊú¨ÔºåËÄå‰∏ç‰ºöËã±ËØ≠ÂÖ∂‰ªñÁ∫øÁ®ãÊâÄÂØπÂ∫îÁöÑÂâØÊú¨„ÄÇ‰ªéÁ∫øÁ®ãÁöÑËßíÂ∫¶ÁúãÔºåÁõÆÊ†áÂèòÈáèÂØπË±°ÊòØÁ∫øÁ®ãÁöÑÊú¨Âú∞ÂèòÈáèÔºåËøô‰πüÊòØÁ±ªÂêç‰∏≠LocalÊâÄÈúÄË¶ÅË°®ËææÁöÑÊÑèÊÄù„ÄÇ TreadLocalÁöÑÂõõ‰∏™ÊñπÊ≥ïÔºö void set(Object val),ËÆæÁΩÆÂΩìÂâçÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÁöÑÂÄº Object getÔºàÔºâËøîÂõûÂΩìÂâçÁ∫øÁ®ãÊâÄÂØπÁî®ÁöÑÁ∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáè„ÄÇ void remove() Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÁöÑÂÄºÂà†Èô§ÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÂáèÂ∞ëÂÜÖÂ≠òÁöÑÂç†Áî®ÔºåÁ∫øÁ®ãÁªìÊùüÂêéÔºåÂ±ÄÈÉ®ÂèòÈáèËá™Âä®Ë¢´GC Object initValue() ËøîÂõûËØ•Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÁöÑÂàùÂßãÂÄºÔºå‰ΩøÁî®protected‰øÆÈ•∞ÔºåÊòæÁÑ∂ÊòØ‰∏∫‰∫ÜËÆ©Â≠êÁ±ªË¶ÜÁõñËÄåËÆæËÆ°ÁöÑ„ÄÇ Á∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊñπÂºè3.1 ‰∫íÊñ•ÂêåÊ≠•Âú®Â§öÁ∫øÁ®ãËÆøÈóÆÁöÑÊó∂ÂÄôÔºå‰øùËØÅÂêå‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏ÄÊù°Á∫øÁ®ã‰ΩøÁî®„ÄÇ ‰∏¥ÁïåÂå∫Ôºå‰∫íÊñ•ÈáèÔºåÁÆ°Á®ãÈÉΩÊòØÂêåÊ≠•ÁöÑ‰∏ÄÁßçÊâãÊÆµ„ÄÇ java‰∏≠ÊúÄÂü∫Êú¨ÁöÑ‰∫íÊñ•ÂêåÊ≠•ÊâãÊÆµÊòØsynchronizedÔºåÁºñËØë‰πãÂêé‰ºöÂΩ¢ÊàêmonitorenterÂíåmonitorexitËøô‰ø©‰∏™Â≠óËäÇÁ†ÅÊåá‰ª§ÔºåËøô‰ø©‰∏™Â≠óËäÇÁ†ÅÈÉΩÈúÄË¶Å‰∏Ä‰∏™referenceÁ±ªÂûãÁöÑÂèÇÊï∞Êù•ÊåáÊòéË¶ÅÈîÅÂÆöÂíåËß£ÈîÅÁöÑÂØπË±°ÔºåËøòÊúâ‰∏Ä‰∏™ÈîÅÁöÑËÆ°Êï∞Âô®ÔºåÊù•ËÆ∞ÂΩïÂä†ÈîÅÁöÑÊ¨°Êï∞ÔºåÂä†ÈîÅÂá†Ê¨°Â∞±Ë¶ÅÂêåÊ†∑Ëß£ÈîÅÂá†Ê¨°ÊâçËÉΩÊÅ¢Â§çÂà∞Êó†ÈîÅÁä∂ÊÄÅ„ÄÇ javaÁöÑÁ∫øÁ®ãÊòØÊò†Â∞ÑÂà∞Êìç‰ΩúÁ≥ªÁªüÁöÑÂéüÁîüÁ∫øÁ®ã‰πã‰∏äÁöÑÔºå‰∏çÁÆ°ÈòªÂ°ûËøòÊòØÂî§ÈÜíÈÉΩÈúÄË¶ÅÊìç‰ΩúÁ≥ªÁªüÁöÑÂ∏ÆÂä©ÂÆåÊàêÔºåÈÉΩÈúÄË¶Å‰ªéÁî®Êà∑ÊÄÅËΩ¨Êç¢Âà∞Ê†∏ÂøÉÊÄÅÔºåËøôÊòØÂæàËÄóË¥πÊó∂Èó¥ÁöÑÔºåÊòØjavaËØ≠Ë®Ä‰∏≠ÁöÑ‰∏Ä‰∏™ÈáçÈáèÁ∫ßÁöÑÊìç‰ΩúÔºåËôΩÁÑ∂ËôöÊãüÊú∫Êú¨Ë∫´‰ºöÂÅö‰∏ÄÁÇπ‰ºòÂåñÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÈÄöÁü•Êìç‰ΩúÁ≥ªÁªüÈòªÂ°û‰πãÂâç‰ºöÂä†‰∏ÄÊÆµËá™ÊóãÁ≠âÂæÖÁöÑËøáÁ®ãÔºåÈÅøÂÖçÈ¢ëÁπÅÂàáÊç¢Âà∞Ê†∏ÂøÉÊÄÅ„ÄÇ 3.2 ÈùûÈòªÂ°ûÂêåÊ≠•‰∫íÊñ•ÂíåÂêåÊ≠•ÊúÄ‰∏ªË¶ÅÁöÑÈóÆÈ¢òÂ∞±ÊòØÈòªÂ°ûÂíåÂî§ÈÜíÊâÄÂ∏¶Êù•ÁöÑÊÄßËÉΩÁöÑÈóÆÈ¢òÔºåÊâÄ‰ª•ËøôÈÄöÂ∏∏Âè´ÈòªÂ°ûÂêåÊ≠•ÔºàÊÇ≤ËßÇÁöÑÂπ∂ÂèëÁ≠ñÁï•Ôºâ.ÈöèÁùÄÁ°¨‰ª∂Êåá‰ª§ÈõÜÁöÑÂèëÂ±ïÔºåÊàë‰ª¨ÊúâÂè¶Â§ñÁöÑÈÄâÊã©ÔºöÂü∫‰∫éÂÜ≤Á™ÅÊ£ÄÊµãÁöÑ‰πêËßÇÂπ∂ÂèëÁ≠ñÁï•ÔºåÈÄö‰øóËÆ≤Â∞±ÊòØÂÖàÊìç‰ΩúÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ã‰∫âÁî®ÂÖ±‰∫´ÁöÑÊï∞ÊçÆÔºåÊìç‰ΩúÂ∞±ÊàêÂäüÔºåÂ¶ÇÊûúÊúâÔºåÂàôËøõË°åÂÖ∂‰ªñÁöÑË°•ÂÅøÔºàÊúÄÂ∏∏ËßÅÁöÑÂ∞±ÊòØ‰∏çÊñ≠ÁöÑÈáçËØïÔºâ„ÄÇËøôÁßç‰πêËßÇÁöÑÂπ∂ÂèëÁ≠ñÁï•ËÆ∏Â§öÂÆûÁé∞ÈÉΩ‰∏çÈúÄË¶ÅÊääÁ∫øÁ®ãÂÖàÊåÇËµ∑ÔºåËøôÁßçÂêåÊ≠•Êìç‰ΩúË¢´Áß∞‰∏∫ÈùûÈòªÂ°ûÂêåÊ≠•„ÄÇ 3.3 Êó†ÂêåÊ≠•ÈÉ®ÂàÜ‰ª£Á†ÅÂ§©ÁîüÂ∞±ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏çÈúÄË¶ÅÂêåÊ≠•„ÄÇ 1ÔºâÂèØÈáçÂÖ•‰ª£Á†ÅÔºöÁ∫Ø‰ª£Á†ÅÔºåÂÖ∑Êúâ‰∏ç‰æùËµñÂ≠òÂÇ®Âú®Â†Ü‰∏äÁöÑÊï∞ÊçÆÂíåÂÖ¨Áî®ÁöÑÁ≥ªÁªüËµÑÊ∫êÔºåÁî®Âà∞ÁöÑÁä∂ÊÄÅÈáèÈÉΩÁî±ÂèÇÊï∞‰∏≠‰º†ÂÖ•Ôºå‰∏çË∞ÉÁî®ÈùûÂèØÈáçÂÖ•ÁöÑÊñπÊ≥ïÁ≠âÁâπÂæÅÔºåÂÆÉÁöÑËøîÂõûÁªìÊûúÊòØÂèØ‰ª•È¢ÑÊµãÁöÑ„ÄÇ 2ÔºâÁ∫øÁ®ãÊú¨Âú∞Â≠òÂÇ®ÔºöÊääÂÖ±‰∫´Êï∞ÊçÆÁöÑÂèØËßÅÊÄßËåÉÂõ¥ÈôêÂà∂Âú®Âêå‰∏Ä‰∏™Á∫øÁ®ã‰πãÂÜÖÔºåËøôÊ†∑Â∞±Êó†ÈúÄÂêåÊ≠•‰πüËÉΩ‰øùËØÅÁ∫øÁ®ã‰πãÈó¥‰∏çÂá∫Áé∞Êï∞ÊçÆ‰∫âÁî®ÈóÆÈ¢ò„ÄÇÂèØ‰ª•ÈÄöËøájava.lang.TreadLocalÁ±ªÊù•ÂÆûÁé∞Á∫øÁ®ãÊú¨Âú∞Â≠òÂÇ®ÁöÑÂäüËÉΩ„ÄÇ]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Á∫øÁ®ã</tag>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebÊ†∏ÂøÉ-Servlet]]></title>
    <url>%2F2018%2F11%2F10%2Fservletbase1%2F</url>
    <content type="text"><![CDATA[ServletÂÆûÈôÖ‰∏äÊòØServerApplet‚ÄìÂ∞èÊúçÂä°Á®ãÂ∫èÊàñÊúçÂä°ËøûÊé•Âô®ÔºåÁî®JavaÁºñÂÜôÁöÑÊúçÂä°Âô®Á´ØÁ®ãÂ∫èÔºå‰∏ªË¶ÅÂäüËÉΩÂú®‰∫é‰∫§‰∫íÂºèÂú∞ÊµèËßàÂíå‰øÆÊîπÊï∞ÊçÆÔºåÁîüÊàêÂä®ÊÄÅWebÂÜÖÂÆπ„ÄÇ‰∏éÂ∏∏Áî®ÁöÑÂçèËÆÆÔºåÂ¶ÇDNSÔºåTCP/IPÔºåHTTPÁ±ª‰ººÔºåServletÊòØ‰Ωú‰∏∫‰∏ÄÊï¥Â•óËßÑËåÉÂ≠òÂú®ÁöÑÔºõÂêåÊó∂‰Ωú‰∏∫J2EEÊ†áÂáÜÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆö‰πâ‰∫ÜjavawebÂºÄÂèëÁöÑÊ†áÂáÜ„ÄÇServletÂà∂ÂÆö‰∫ÜjavaÂ§ÑÁêÜWEBËØ∑Ê±ÇÁöÑ‰∏ÄÁ≥ªÂàóÊ†áÂáÜÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊåâÁÖßÊ†áÂáÜËßÑÂÆöÁöÑÂéªÂÅöÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂÆûÈôÖ‰∏äÔºåÊó†ËÆ∫ÊòØStruts2ÁöÑFilterDispatcherËøòÊòØSpringMvcÁöÑDispatcherServlet,ÂÖ∂Â∫ïÂ±ÇÈÉΩÊòØÈÄöËøáÂÆûÁé∞SevletÊàñËÄÖServletÁ±ªÂûãÁöÑÊâ©Â±ï„ÄêÂ¶ÇÔºöGenericServlet„ÄëÊù•ÂÆûÁé∞ÁöÑ„ÄÇ 1.ServletÊé•Âè£‰∏ãÂõæ‰∏∫Servlet3.1‰∏≠ÁöÑÁªìÊûÑÂõæÔºöÂõ†‰∏∫ServletÊòØ‰ª•ËßÑËåÉÁöÑÊñπÂºèÂ≠òÂú®ÁöÑÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØÂÆö‰πâ‰∏ÄÁ≥ªÂàóËßÑËåÉÊé•Âè£„ÄÇÂú®ServletÊé•Âè£‰∏≠Ôºå‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†‰∏™Êé•Âè£Ôºö 1)initÊñπÊ≥ïÊòØÂú®ÂÆπÂô®ÂêØÂä®Êó∂Ë¢´ÂÆπÂô®Ë∞ÉÁî®Ôºå‰∏îÂè™‰ºöË¢´Ë∞ÉÁî®‰∏ÄÊ¨°Ôºõ 2)getServletConfigÊñπÊ≥ïÁî®‰∫éËé∑ÂèñServletConfigÔºõ 3)serviceÊñπÊ≥ïÁî®‰∫éÂ§ÑÁêÜ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑËØ∑Ê±Ç 4)getServletInfoÊñπÊ≥ïÁî®‰∫éËé∑ÂèñServletÁõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºöÁâàÊùÉÁ≠â„ÄÇ 5)destroyÊñπÊ≥ïÁî®Êù•ÈîÄÊØÅ‰∏Ä‰∏™ServletÔºåÂíåinit‰∏ÄÊ†∑ÔºåÂè™‰ºöË¢´Ë∞ÉÁî®‰∏ÄÊ¨°Ôºå‰∏ÄËà¨Âú®ÊúçÂä°Âô®ÂÖ≥Èó≠Êó∂Áî®‰∫éÈáäÊîæ‰∏Ä‰∫õËµÑÊ∫ê„ÄÇ initÊñπÊ≥ïË∞ÉÁî®Êó∂‰ºöÊé•Âèó‰∏Ä‰∏™ServletConfigÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåÁî®‰∫éÂàùÂßãÂåñServletÔºåÁî±ÂÆπÂô®‰º†ÂÖ•„ÄÇServletConfigÔºåÈ°æÂêçÊÄù‰πâÔºåÂÖ∂ÂåÖÂê´‰∫ÜSerlvetÁöÑÈÖçÁΩÆ‰ø°ÊÅØ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Âú®web.xmlÊñá‰ª∂‰∏≠ÂÆö‰πâSerlvetÊó∂Ôºå‰ºöÈÄöËøáinit-paramÊ†áÁ≠æÊù•ËøõË°åÂèÇÊï∞ÈÖçÁΩÆ„ÄÇÂú®SpringmvcÁöÑÈÖçÁΩÆ‰∏≠ÔºåÈÄöÂ∏∏ÈÄöËøá‰ª•‰∏ãÊñπÂºèÊù•ÈÖçÁΩÆÂèÇÊï∞Ôºö 2.ServletConfigÊé•Âè£1)getServletNameÁî®‰∫éËé∑ÂèñServletÁöÑÂêçÂ≠óÔºå‰πüÂ∞±ÊòØÊàë‰ª¨Âú®web.xml‰∏≠ÂÆö‰πâÁöÑservlet-name2)getServletContextËøîÂõûServletContextÔºå‰ª£Ë°®Êàë‰ª¨ÂΩìÂâçÂ∫îÁî®Êú¨Ë∫´3)getInitParameterÁî®‰∫éËé∑Âèñinit-paramÈÖçÁΩÆÁöÑÂèÇÊï∞4)getInitParameterNamesÁî®‰∫éËé∑ÂèñÊâÄÊúâinit-paramÈÖçÁΩÆÂêçÂ≠óÁöÑÈõÜÂêàServletContextÂíåServletConfigÊúÄÂ∏∏ËßÅÁöÑ‰ΩøÁî®Â∞±ÊòØ‰º†ÈÄíÂàùÂßãÂåñÂèÇÊï∞„ÄÇÊù•Áúã‰∏ãspring‰∏≠ÁöÑcontextConfigServletÁöÑÂèÇÊï∞ÈÖçÁΩÆÈÄöËøácontext-paramÈÖçÁΩÆÁöÑcontextConfigLocationÈÖçÁΩÆÂà∞‰∫ÜServletContext‰∏≠ÔºåÂÜçÈÄöËøáServlet‰∏ãÁöÑinit-paramÈÖçÁΩÆÁöÑcontextConfigLocationÈÖçÁΩÆÂà∞ServletConfig‰∏≠,Âú®Servlet‰∏≠ÂèØ‰ª•ÈÄöËøágetInitParameterÊñπÊ≥ïËé∑ÂèñÂÖ∑‰ΩìÁöÑ‰ø°ÊÅØ„ÄÇ 3.GenericServletGenericServletÊòØServletÁöÑÈªòËÆ§ÂÆûÁé∞Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576package javax.servlet;import java.io.IOException;import java.io.Serializable;import java.util.Enumeration;import java.util.ResourceBundle;public abstract class GenericServlet implements Servlet, ServletConfig, Serializable&#123; private static final String LSTRING_FILE = &quot;javax.servlet.LocalStrings&quot;; private static ResourceBundle lStrings = ResourceBundle.getBundle(&quot;javax.servlet.LocalStrings&quot;); private transient ServletConfig config; public void destroy() &#123; &#125; public String getInitParameter(String name) &#123; ServletConfig sc = getServletConfig(); if (sc == null) &#123; throw new IllegalStateException(lStrings.getString(&quot;err.servlet_config_not_initialized&quot;)); &#125; return sc.getInitParameter(name); &#125; public Enumeration getInitParameterNames() &#123; ServletConfig sc = getServletConfig(); if (sc == null) &#123; throw new IllegalStateException(lStrings.getString(&quot;err.servlet_config_not_initialized&quot;)); &#125; return sc.getInitParameterNames(); &#125; public ServletConfig getServletConfig() &#123; return this.config; &#125; public ServletContext getServletContext() &#123; ServletConfig sc = getServletConfig(); if (sc == null) &#123; throw new IllegalStateException(lStrings.getString(&quot;err.servlet_config_not_initialized&quot;)); &#125; return sc.getServletContext(); &#125; public String getServletInfo() &#123; return &quot;&quot;; &#125; public void init(ServletConfig config) throws ServletException &#123; this.config = config; init(); &#125; public void init() throws ServletException &#123; &#125; public void log(String msg) &#123; getServletContext().log(getServletName() + &quot;: &quot; + msg); &#125; public void log(String message, Throwable t) &#123; getServletContext().log(getServletName() + &quot;: &quot; + message, t); &#125; public abstract void service(ServletRequest paramServletRequest, ServletResponse paramServletResponse) throws ServletException, IOException; public String getServletName() &#123; ServletConfig sc = getServletConfig(); if (sc == null) &#123; throw new IllegalStateException(lStrings.getString(&quot;err.servlet_config_not_initialized&quot;)); &#125; return sc.getServletName(); &#125;&#125; ‰ªéÂÖ∂ÁªßÊâøÂíåÂÆûÁé∞ÂÖ≥Á≥ªÊù•ÁúãÔºåGenericServlet‰∏ªË¶ÅÂÅö‰∫Ü3‰ª∂‰∫ãÔºö1.ÂÆûÁé∞‰∫ÜServletConfigÊé•Âè£ÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®ServletConfigÈáåÈù¢ÁöÑÊñπÊ≥ïÔºõ GenericServletÂÆûÁé∞‰∫ÜServletConfigÔºåÂèØ‰ª•Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÁõ¥Êé•Ë∞ÉÁî®ServletConfig‰∏≠ÁöÑÊñπÊ≥ïÔºå‰∏çÈúÄË¶ÅÂÜçÂÖàËé∑ÂèñServletConfigÂØπË±°ÔºõÊØîÂ¶ÇÔºåËé∑ÂèñServletContextÁöÑÊó∂ÂÄôÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®getServletContext,ËÄåÊó†ÈúÄË∞ÉÁî®getServletConfig().getServletContext(),‰ΩÜÊòØÂÆûÈôÖ‰∏äÔºåÂÖ∂Â∫ïÂ±ÇÁöÑÂÜÖÈÉ®ÂÆûÁé∞ËøòÊòØÂú®ÂÜÖÈÉ®ËøòÊòØËøõË°å‰∫ÜgetServletConfig().getServletContext()ÁöÑË∞ÉÁî®„ÄÇ2.Êèê‰æõ‰∫ÜÊó†ÂèÇÁöÑinitÊñπÊ≥ï GenericServletÂÆûÁé∞‰∫ÜServletÁöÑinitÔºàServletConfig configÔºâÊñπÊ≥ïÔºåÂú®ÈáåÈù¢Â∞ÜconfigËÆæÁΩÆÁªô‰∫ÜÂÖ∂ÂÜÖÈÉ®ÂèòÈáèconfigÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫ÜÊó†ÂèÇÁöÑinitÊñπÊ≥ïÔºõÊ≠§ÊñπÊ≥ïÂèØ‰ª•Âú®Â≠êÁ±ª‰∏≠ÈÄöËøáË¶ÜÁõñÂÆÉÊù•ÂÆåÊàêÂàùÂßãÂåñÂ∑•‰Ωú„ÄÇËøôÁßçÊñπÂºèÂÖ∑ÊúâÁöÑÊúâÁÇπÂåÖÊã¨‰ª•‰∏ãÂá†ÁÇπÔºö a.configËÆæÁΩÆ‰∏∫ÂÜÖÈÉ®Â±ûÊÄßÔºåËøôÊ†∑ÂèØ‰ª•Âú®ServletConfigÁöÑÊé•Âè£ÊñπÊ≥ï‰∏≠Áõ¥Êé•Ë∞ÉÁî®ConfigÁöÑÁõ∏Â∫îÊñπÊ≥ïÊù•ÊâßË°åÔºõ b.Êàë‰ª¨Âú®ÂÜôSerlvetÁöÑÊó∂ÂÄôÂèØ‰ª•‰∏çÁî®ÂÜçÂÖ≥ÂøÉConfigÔºåÂè™ÈúÄË¶ÅÊâßË°åËá™Â∑±ÁöÑÂàùÂßãÂåñÈÄªËæëÂç≥ÂèØ c.Âú®ÈáçÂÜôinitÊñπÊ≥ïÊó∂Ôºå‰∏çÈúÄË¶ÅÂÜçË∞ÉÁî®super.init(config)„ÄÇ3.Êèê‰æõ‰∫ÜLogÊñπÊ≥ï GenericServletÊèê‰æõ‰∫Ü2‰∏™logÊñπÊ≥ïÔºå‰∏Ä‰∏™Áî®‰∫éËÆ∞ÂΩïÊó•ÂøóÔºå‰∏Ä‰∏™Áî®‰∫éËÆ∞ÂΩïÂºÇÂ∏∏„ÄÇÂÖ∂ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÊòØÈÄöËøá‰º†ÁªôServletConfigÁöÑÊó•ÂøóÂÆûÁé∞ÁöÑ„ÄÇ GenericServletÊòØ‰∏éÂÖ∑‰ΩìÂçèËÆÆÊó†ÂÖ≥ÁöÑ„ÄÇ 4.HttpServletHttpServletÊòØÂü∫‰∫éHttpÂçèËÆÆÂÆûÁé∞ÁöÑServletÁöÑÂü∫Á±ªÔºåÂÜôServletÊó∂Áõ¥Êé•ÁªßÊâøHttpServletÂç≥ÂèØ,‰∏çÈúÄË¶ÅÂÜçÈáçÂ§¥ÂÆûÁé∞ServletÊé•Âè£ÔºåSpringMvc‰∏≠ÁöÑdispatcherServletÂ∞±ÊòØHttpServletÁöÑÂ≠êÁ±ª„ÄÇ HttpServletÊòØ‰∏éHttpÂçèËÆÆÁõ∏ÂÖ≥ÁöÑÔºåHttpServletÂ§ÑÁêÜËØ∑Ê±Ç‰∏ªË¶ÅÊòØÈÄöËøáÈáçÂÜôÁà∂Á±ªÁöÑserviceÊñπÊ≥ïÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑËØ∑Ê±ÇÂ§ÑÁêÜÁöÑ„ÄÇÂú®serviceÊñπÊ≥ï‰∏≠È¶ñÂÖàÊòØÂ∞ÜServletRequestÂíåServletResponseËΩ¨Êç¢ÊàêHttpServletRequestÂíåHttpServletResponseÔºåÁÑ∂ÂêéÊ†πÊçÆËØ∑Ê±ÇÁöÑ‰∏çÂêåË∑ØÁî±Âà∞‰∏çÂêåÁöÑÂ§ÑÁêÜËøáÁ®ã‰∏≠Âéª„ÄêÂ§ÑÁêÜÊñπÊ≥ïÂ∞±ÊòØÊàë‰ª¨Â∏∏ËßÅÁöÑdoXXXÁöÑÊñπÊ≥ï„ÄÇÊúÄÂ∏∏ËßÅÁöÑÂ∞±ÊòØdoGetÂíådoPost„Äë]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>web</tag>
        <tag>servlet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringÊ∫êÁ†ÅÁ≥ªÂàóÔºöSpringÁöÑÂêØÂä®ËøáÁ®ã]]></title>
    <url>%2F2018%2F11%2F10%2Fspringbase1%2F</url>
    <content type="text"><![CDATA[SpringÂØπ‰∫éÁ®ãÂ∫èÂëòËØ¥Êù•ËØ¥ÈÉΩ‰∏çÈôåÁîüÔºõ‰Ωú‰∏∫‰∏Ä‰∏™Âº∫Â§ßÁöÑÂºÄÊ∫êÊäÄÊúØÔºåÂ∏ÆÂä©Êàë‰ª¨ËÉΩÂ§üÊõ¥Â•ΩÁöÑËøõË°åÈ°πÁõÆÁöÑÂºÄÂèë‰∏éÁª¥Êä§„ÄÇÁõ¥Êé•ËøõÂÖ•‰∏ªÈ¢òÂêß„ÄÇSpringÁöÑÂêØÂä®ËøáÁ®ãÂÆûÈôÖ‰∏äÂ∞±ÊòØIocÂÆπÂô®ÂàùÂßãÂåñ‰ª•ÂèäËΩΩÂÖ•BeanÁöÑËøáÁ®ãÔºõÊú¨Êñá‰∏ªË¶ÅÊòØÂ≠¶‰π†ËÆ∞ÂΩï‰∏ãÂâçÂçäÈÉ®ÂàÜÔºàIocÂÆπÂô®ÁöÑÂàùÂßãÂåñÔºâÔºåÊñ∞Êâã‰∏äË∑ØÔºåÂ¶ÇÊúâÈîôËØØÔºåËØ∑ÊåáÊ≠£ÔºÅ1.‰ªéÈÖçÁΩÆÊñá‰ª∂ËØ¥Ëµ∑ 12345678&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt; &lt;/listener&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; Âú®‰∏ÄËà¨ÁöÑWEBÈ°πÁõÆ‰∏≠ÔºåÈ°πÁõÆÁöÑÂêØÂä®‰∏ÄËà¨ÊòØ‰ªéweb.xmlÊñá‰ª∂ÁöÑËΩΩÂÖ•ÂºÄÂßãÁöÑ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÁöÑÈ°πÁõÆ‰∏≠‰ΩøÁî®‰∫ÜSpringÔºåÈÇ£‰πà‰Ω†ËÇØÂÆö‰ºöÂú®‰Ω†ÁöÑweb.xmlÊñá‰ª∂‰∏≠ÁúãÂà∞‰∏äÈù¢ÁöÑÈÖçÁΩÆ„ÄÇSpringÊ≠£ÊòØÈÄöËøáContextLoaderListenerÁõëÂê¨Âô®Êù•ËøõË°åÂÆπÂô®ÂàùÂßãÂåñÁöÑ„ÄÇ‰∏ãÈù¢ÈÄöËøá‰ª£Á†ÅËøõË°åÂàÜÊûê„ÄÇ 2.SpringÂÆπÂô®Âä†ËΩΩÁöÑ‰∏âÊ≠•Ëµ∞ step1:ÂàõÂª∫‰∏Ä‰∏™WebApplicationContext step2:ÈÖçÁΩÆÂπ∂‰∏îÂà∑Êñ∞Bean step3ÔºöÂ∞ÜÂÆπÂô®ÂàùÂßãÂåñÂà∞servlet‰∏ä‰∏ãÊñá‰∏≠ 3.WebApplicationContextÁöÑÂàõÂª∫ËøáÁ®ã1public class ContextLoaderListener extends ContextLoader implements ServletContextListener ‰ªéContextLoaderListenerÁöÑÂÆö‰πâÂèØ‰ª•ÁúãÂá∫ÔºåËØ•ÁõëÂê¨Âô®ÁªßÊâø‰∫ÜContextLoaderÔºåÂπ∂‰∏îÈáçÂÜô‰∫ÜServletContextListener‰∏≠ÁöÑcontextInitializedÂíåcontextDestroyedÊñπÊ≥ï„ÄÇ Âú®contextInitialized‰∏≠ÔºåÈÄöËøáË∞ÉÁî®Áà∂Á±ªÔºàContextLoaderÔºâÁöÑinitWebApplicationContextÊñπÊ≥ïËøõË°åÂÆπÂô®ÂàõÂª∫Ôºö1234@Overridepublic void contextInitialized(ServletContextEvent event) &#123; initWebApplicationContext(event.getServletContext());&#125; ‰∏ãÈù¢Êù•ÁúãinitWebApplicationContextÁöÑ‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374public WebApplicationContext initWebApplicationContext(ServletContext servletContext) &#123; //1ÔºöÂà§Êñ≠ÂΩìÂâçÂÆπÂô®ÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôÊä•ÂÆπÂô®Â∑≤ÁªèÂ≠òÂú®ÁöÑÂºÇÂ∏∏‰ø°ÊÅØ if (servletContext.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE) != null) &#123; throw new IllegalStateException( "Cannot initialize context because there is already a root application context present - " + "check whether you have multiple ContextLoader* definitions in your web.xml!"); &#125; Log logger = LogFactory.getLog(ContextLoader.class); //‰∏ãÈù¢Ëøô‰∏™Êó•ÂøóÂ∞±ÊòØÊàë‰ª¨ÁªèÂ∏∏Âú®ÂêØÂä®SpringÈ°πÁõÆÊó∂ÁúãÂà∞ÁöÑÊó•Âøó‰ø°ÊÅØ: //Initializing Spring root WebApplicationContext //Root WebApplicationContext: initialization started servletContext.log("Initializing Spring root WebApplicationContext"); if (logger.isInfoEnabled()) &#123; logger.info("Root WebApplicationContext: initialization started"); &#125; long startTime = System.currentTimeMillis(); try &#123; // Store context in local instance variable, to guarantee that // it is available on ServletContext shutdown. //Â¶ÇÊûúÂΩìÂâçÂÆπÂô®‰∏∫null,ÂàôÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®ÔºåÂπ∂Â∞ÜservletContext‰∏ä‰∏ãÊñá‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíËøõÂéªÔºå if (this.context == null) &#123; this.context = createWebApplicationContext(servletContext); &#125; //Âà§Êñ≠ÂΩìÂâçÂÆπÂô®ÊòØÂê¶‰∏∫ÂèØÈÖçÁΩÆÁöÑÔºåÂè™ÊúâÊòØConfigurableÁöÑÂÆπÂô®ÔºåÊâçËÉΩËøõË°åÂêéÁª≠ÁöÑÈÖçÁΩÆ if (this.context instanceof ConfigurableWebApplicationContext) &#123; ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) this.context; if (!cwac.isActive()) &#123; // The context has not yet been refreshed -&gt; provide services such as // setting the parent context, setting the application context id, etc if (cwac.getParent() == null) &#123; // The context instance was injected without an explicit parent -&gt; // determine parent for root web application context, if any. ApplicationContext parent = loadParentContext(servletContext); cwac.setParent(parent); &#125; //‰∏âÊ≠•Ëµ∞‰∏≠ÁöÑÁ¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆÂπ∂‰∏îÂà∑Êñ∞ÂΩìÂâçÂÆπÂô® configureAndRefreshWebApplicationContext(cwac, servletContext); &#125; &#125; //Â∞ÜÈÖçÁΩÆÂπ∂‰∏îÂà∑Êñ∞ËøáÁöÑÂÆπÂô®Â≠òÂÖ•servlet‰∏ä‰∏ãÊñá‰∏≠ÔºåÂπ∂‰ª•WebApplicationContextÁöÑÁ±ªÂêç‰Ωú‰∏∫keyÂÄº servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.context); ClassLoader ccl = Thread.currentThread().getContextClassLoader(); if (ccl == ContextLoader.class.getClassLoader()) &#123; currentContext = this.context; &#125; else if (ccl != null) &#123; currentContextPerThread.put(ccl, this.context); &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Published root WebApplicationContext as ServletContext attribute with name [" + WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE + "]"); &#125; if (logger.isInfoEnabled()) &#123; long elapsedTime = System.currentTimeMillis() - startTime; logger.info("Root WebApplicationContext: initialization completed in " + elapsedTime + " ms"); &#125; //ËøîÂõûÂàõÂª∫Â•ΩÁöÑÂÆπÂô® return this.context; &#125; catch (RuntimeException ex) &#123; logger.error("Context initialization failed", ex); servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ex); throw ex; &#125; catch (Error err) &#123; logger.error("Context initialization failed", err); servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, err); throw err; &#125; &#125; ‰∏ãÈù¢Êàë‰ª¨Âú®Áúã‰∏ãÊòØÂ¶Ç‰ΩïÂàõÂª∫WebApplicationContextÁöÑ 12345678910protected WebApplicationContext createWebApplicationContext(ServletContext sc) &#123; //È¶ñÂÖàÊù•Á°ÆÂÆöcontextÊòØÁî±‰ªÄ‰πàÁ±ªÂÆö‰πâÁöÑÔºåÂπ∂‰∏îÂà§Êñ≠ÂΩìÂâçÂÆπÂô®ÊòØÂê¶‰∏∫ÂèØÈÖçÁΩÆÁöÑ Class&lt;?&gt; contextClass = determineContextClass(sc); if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) &#123; throw new ApplicationContextException("Custom context class [" + contextClass.getName() + "] is not of type [" + ConfigurableWebApplicationContext.class.getName() + "]"); &#125; //ÂàõÂª∫ÂèØÈÖçÁΩÆÁöÑ‰∏ä‰∏ãÊñáÂÆπÂô® return (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass); &#125; ÊúÄÂêéÊù•Áúã‰∏ãdetermineContextClassËøô‰∏™ÊñπÊ≥ï 12345678910111213141516171819202122232425protected Class&lt;?&gt; determineContextClass(ServletContext servletContext) &#123; //È¶ñÂÖà‰ªéweb.xml‰∏≠Êü•ÁúãÁî®Êà∑ÊòØÂê¶Ëá™Â∑±ÂÆö‰πâ‰∫Ücontext String contextClassName = servletContext.getInitParameter(CONTEXT_CLASS_PARAM); //Â¶ÇÊûúÊúâÔºåÂàôÈÄöËøáÂèçÂ∞ÑÂàõÂª∫ÂÆû‰æã if (contextClassName != null) &#123; try &#123; return ClassUtils.forName(contextClassName, ClassUtils.getDefaultClassLoader()); &#125; catch (ClassNotFoundException ex) &#123; throw new ApplicationContextException( "Failed to load custom context class [" + contextClassName + "]", ex); &#125; &#125; /*Â¶ÇÊûúÊ≤°ÊúâÔºåÂàôÂéªdefaultStrategiesÈáåÈù¢Âèñ„ÄêdefaultStrategiesÊòØPropertitesÁ±ªÁöÑ/ÂØπË±°ÔºåÂú®ContextLoader‰∏≠ÁöÑÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠ÂàùÂßãÂåñÁöÑÔºõÂÖ∑‰ΩìÂèØÁúã‰∏ã‰∏ãÈù¢ÁöÑÂõæÂÉè„ÄëÔºõÈªòËÆ§ÂÆπÂô®ÊòØXmlWebApplicationContext*/ else &#123; contextClassName = defaultStrategies.getProperty(WebApplicationContext.class.getName()); try &#123; return ClassUtils.forName(contextClassName, ContextLoader.class.getClassLoader()); &#125; catch (ClassNotFoundException ex) &#123; throw new ApplicationContextException( "Failed to load default context class [" + contextClassName + "]", ex); &#125; &#125; &#125; ÊÄªÁöÑÊù•ËØ¥Â∞±ÊòØÔºöSpringÁöÑwebÂ∑•Á®ãÈ¶ñÂÖàÂõûÂéªÊ£ÄÊü•Áî®Êà∑ÊòØÂê¶Ëá™Â∑±ÂÆö‰πâ‰∫ÜcontextÔºåÂ¶ÇÊûúÊúâÂ∞±ÈááÁî®ÔºõÂ¶ÇÊûúÊ≤°ÊúâÂ∞±‰ΩøÁî®SpringÈªòËÆ§ÁöÑ„ÄÇdefaultStrategiesÂàùÂßãÂåñÔºö Ëá≥Ê≠§ÔºåÂÆπÂô®ÂàõÂª∫ÂÆåÊàê„ÄÇ‰∏ãÈù¢ÊòØÊï¥‰∏™ËøáÁ®ãÁöÑ‰∏Ä‰∏™ÊµÅÁ®ãÂõæÔºàÊúâÁñèÊºèÔºåÂõûÂ§¥Ë°•‰∏Ä‰∏™Êó∂Â∫èÂõæÔºâÔºö]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVA‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2F2018%2F11%2F10%2Fjava-key-word%2F</url>
    <content type="text"><![CDATA[Java‰∏≠ÂÖ≥ÈîÆÂ≠óÊúâ51‰∏™ÔºåÂè¶Â§ñËøòÊúâ‰ø©‰∏™‰øùÁïôÂ≠óÔºõÂõ†Ê≠§ÊÄªÂÖ±Êúâ53‰∏™„ÄÇÊú¨ÊñáÂè™Â∞Üjava‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠óËøõË°åÁΩóÂàóÂíåÁÆÄÂçï‰ªãÁªçÔºåÂØπ‰∫éÈÉ®ÂàÜÂÖ≥ÈîÆÂ≠óÁöÑÁêÜËß£Â¶ÇsychronizedÂ∞ÜÂú®ÂÖ∂‰ªñÊñáÁ´†‰∏≠ÂçïÁã¨ÂàÜÊûê„ÄÇ ‰øùÁïôÂ≠ó‰øùÁïôÂ≠óÊòØÊåáÈ¢ÑÁïôÁöÑÂÖ≥ÈîÆÂ≠óÔºõ constÁî®‰∫é‰øÆÈ•∞Â≠óÊÆµÊàñÂ±ÄÈÉ®ÂèòÈáèÁöÑÂ£∞ÊòéÔºõË¢´const‰øÆÈ•∞ÁöÑÂ≠óÊÆµÊàñÂ±ÄÈÉ®ÂèòÈáèÁöÑÂÄºÊòØÂ∏∏Êï∞Ôºå‰∏çËÉΩË¢´‰øÆÊîπ gotoÊåáÂÆöË∑≥ËΩ¨Âà∞Ê†áÁ≠æÔºåÊâæÂà∞Ê†áÁ≠æÂêéÔºåÁ®ãÂ∫èÂ∞ÜÂ§ÑÁêÜ‰ªé‰∏ã‰∏ÄË°åÂºÄÂßãÁöÑÂëΩ‰ª§„ÄÇ ÂÖ≥ÈîÆÂ≠ó Êï∞ÊçÆÁ±ªÂûã ËÆøÈóÆ‰øÆÈ•∞Á¨¶ Á±ª„ÄÅÊé•Âè£ÂÆö‰πâÁõ∏ÂÖ≥ ÊµÅÁ®ãÊéßÂà∂‰∏éÂà§Êñ≠Áõ∏ÂÖ≥ ÂåÖ ÂèòÈáè\Á±ª\Êé•Âè£\ÊñπÊ≥ï‰øÆÈ•∞Á¨¶ ÂºÇÂ∏∏Â§ÑÁêÜ Êûö‰∏æÂíåÊñ≠Ë®Ä]]></content>
      <categories>
        <category>java Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊØèÂ§©‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºöÊó†ÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤]]></title>
    <url>%2F2018%2F11%2F10%2Fleetcode5%2F</url>
    <content type="text"><![CDATA[È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊâæÂá∫‰∏çÂê´ÊúâÈáçÂ§çÂ≠óÁ¨¶ÁöÑ ÊúÄÈïøÂ≠ê‰∏≤ ÁöÑÈïøÂ∫¶„ÄÇ Á§∫‰æãÔºö ÁªôÂÆö ‚Äúabcabcbb‚Äù ÔºåÊ≤°ÊúâÈáçÂ§çÂ≠óÁ¨¶ÁöÑÊúÄÈïøÂ≠ê‰∏≤ÊòØ ‚Äúabc‚Äù ÔºåÈÇ£‰πàÈïøÂ∫¶Â∞±ÊòØ3„ÄÇ ÁªôÂÆö ‚Äúbbbbb‚Äù ÔºåÊúÄÈïøÁöÑÂ≠ê‰∏≤Â∞±ÊòØ ‚Äúb‚Äù ÔºåÈïøÂ∫¶ÊòØ1„ÄÇ ÁªôÂÆö ‚Äúpwwkew‚Äù ÔºåÊúÄÈïøÂ≠ê‰∏≤ÊòØ ‚Äúwke‚Äù ÔºåÈïøÂ∫¶ÊòØ3„ÄÇËØ∑Ê≥®ÊÑèÁ≠îÊ°àÂøÖÈ°ªÊòØ‰∏Ä‰∏™Â≠ê‰∏≤Ôºå‚Äùpwke‚Äù ÊòØ Â≠êÂ∫èÂàó ËÄå‰∏çÊòØÂ≠ê‰∏≤„ÄÇ ÊñπÊ°à1ÊÄùË∑ØÔºö Â≠óÁ¨¶ÂØπÂ∫îÁöÑÊï∞Â≠ó‰Ωú‰∏∫‰∏ãÊ†á ÂàùÂßãÂåñ‰∏Ä‰∏™255ÁöÑboolean‰Ωú‰∏∫ÊâÄÊúâÂèØËÉΩÂá∫Áé∞ÁöÑÂ≠óÁ¨¶ÂØπÂ∫îÁöÑÂ≠òÂú®ÂèØËÉΩÊÄßÔºå‰∏çÂ≠òÂú®ÈáçÂ§çÁöÑÂùá‰∏∫falseÔºåÂ≠òÂú®ÈáçÂ§çÁöÑÔºåÂàôÂØπÂ∫îÁöÑ‰∏ãÊ†áÁΩÆ‰∏∫true„ÄÇ ‰∏§‰∏™ÊåáÈíàËøõË°åÁßªÂä®ÔºåÂâçÊåáÈíàÂÖà‰∏çÂä®ÔºåÂêéÊåáÈíàÁßªÂä®Âπ∂Ê†πÊçÆÂΩìÂâçÂ≠óÁ¨¶ÂØπÂ∫îÊï¥Êï∞‰∏ãÊ†áÊòØÂê¶‰∏∫falseÊàñËÄÖtrueËøõË°åÂà§Êñ≠„ÄÇÂ¶ÇÊûúÊòØfalseÔºåÂàôË°®Á§∫Ê≤°ÊúâÈáçÂ§çÔºåÂàôÊåáÈíàÂêëÂêéÁßªÂä®‰∏Ä‰ΩçÔºõÂ¶ÇÊûú‰∏∫trueÔºåË°®Á§∫Â≠òÂú®ÈáçÂ§çÔºåÂàôÂêéÊåáÈíàÂÅúÊ≠¢ÁßªÂä®ÔºåÂπ∂ËÆ°ÁÆóÂΩìÂâçÂ≠ó‰∏≤ÈïøÂ∫¶Ôºå‰∏îÂ∞ÜbooleanÊï∞ÁªÑÈáçÁΩÆÔºåÁ¨¨‰∏Ä‰∏™ÊåáÈíàÂêëÂâçÁßªÂä®‰∏Ä‰ΩçÔºåÂêéÊåáÈíàÊåáÂêëÂΩìÂâçÂâçÊåáÈíà„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445class Solution &#123; public int lengthOfLongestSubstring(String s) &#123; int len = 0 ; if (s==null || s.length()== 0 ) &#123; return 0; &#125; if (s.length() == 1)&#123; return 1; &#125; int firstPoint = 0; int nextPoint = 0; boolean[] exist=new boolean[255]; while (nextPoint &lt; s.length()&amp;&amp;firstPoint &lt;s.length())&#123; int currMax = 0; int index = s.charAt(nextPoint)-0; while (exist[index] == false&amp;&amp;nextPoint&lt;s.length())&#123; exist[s.charAt(nextPoint)-0] = true; nextPoint++; if (nextPoint &lt; s.length())&#123; index = s.charAt(nextPoint)-0; &#125; &#125; currMax = Math.max(currMax,nextPoint-firstPoint); firstPoint++; nextPoint=firstPoint; len = Math.max(len,currMax); for (int i = 0 ; i &lt; 255 ; i++) &#123; exist[i] = false; &#125; &#125; return len; &#125;&#125; ÊñπÊ°à2ÊÄùË∑ØÔºö ‰ª•‰∏Ä‰∏™hashmap‰Ωú‰∏∫ËæÖÂä©ÔºåmapÁöÑkeyÂ≠òÂÇ®ÁöÑÊòØÂ≠óÁ¨¶ÔºåvalueÂ≠òÂÇ®ÁöÑÊòØËØ•Â≠óÁ¨¶ÂΩìÂâçÁöÑ‰ΩçÁΩÆÔºåÈ¶ñÂÖàËÆæÁΩÆ‰∏Ä‰∏™Â§¥ÊåáÈíàÔºåÊåáÂêëÂ≠óÁ¨¶‰∏≤ÂºÄÂ§¥ÔºåÈÇ£‰πà‰ªéÂºÄÂßãÈÅçÂéÜÂ≠óÁ¨¶‰∏≤ÔºåÂ¶ÇÊûúmapÂΩì‰∏≠‰∏çÂåÖÂê´Ëøô‰∏™Â≠óÁ¨¶ÔºåÈÇ£‰πàÁî®Ëøô‰∏™Â≠óÁ¨¶ÂΩìÂâçÊâÄÂú®ÁöÑ‰ΩçÁΩÆÂáèÂéªÂ§¥ÊåáÈíàÁöÑ‰ΩçÁΩÆÔºåÁÑ∂Âêé‰∏éÊúÄÂ§ßÈïøÂ∫¶ÂÅöÊØîËæÉÔºåÈÄâÊâìÁöÑÊàê‰∏∫ÊúÄÂ§ßÈïøÂ∫¶ÔºåÁÑ∂ÂêéÊääÂΩìÂâçÂ≠óÁ¨¶ÁöÑ‰ª•Âèä‰ΩçÁΩÆÊîæÂÖ•mapÔºå‰ª•abba‰∏∫‰æãÔºåÂ§¥ÊåáÈíàÊåáÂêëaÔºåÂΩìÂâç‰∏∫aÔºåÈÇ£‰πàÈïøÂ∫¶‰∏∫1Ôºåmap„ÄÇputÔºà‚Äòa‚Äô,0Ôºâ,ÂΩìÂâç‰∏∫bÔºåÈÇ£‰πàÈïøÂ∫¶‰∏∫2Ôºåmap.put(‚Äòb‚Äô,1)ÔºåÂ¶ÇÊûúËØ¥map‰∏≠Â≠òÂú®ÂΩìÂâçÂ≠óÁ¨¶ÔºåÈÇ£‰πàÊääÂ§¥ÊåáÈíàÊåáÂêëÔºåÂ§¥ÊåáÈíàÂΩìÂâçÁöÑ‰ΩçÁΩÆ‰∏émap‰∏≠Â≠òÂÇ®ËØ•Â≠óÁ¨¶‰ΩçÁΩÆÁöÑ‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆÂΩì‰∏≠ÁöÑËæÉÂ§ßËÄÖÔºåÊàê‰∏∫Êñ∞ÁöÑÂ§¥ÊåáÈíà‰ΩçÁΩÆÔºåÊØîÂ¶ÇÂΩìËµ∞Âà∞Á¨¨‰∫å‰∏™bÁöÑÊó∂ÂÄôÔºåÈÇ£‰πàÂ§¥ÊåáÈíàÂéüÊù•ÊòØ0ÔºåÂΩìÂâçmap‰∏≠Â≠òÊîæbÁöÑ‰ΩçÁΩÆÊòØ1ÔºåÈÇ£‰πàÂ§¥ÊåáÈíàÊåáÂêë2ÔºåÊâÄ‰ª•ÈïøÂ∫¶‰∏∫1ÔºåÊØîÊúÄÂ§ßÈïøÂ∫¶Â∞è‰∏çËøõË°åÊõøÊç¢ÔºåÊúÄÂêéÂ∞ÜÂΩìÂâçÁöÑÂ≠óÁ¨¶Âèä‰ΩçÁΩÆÊîæÂÖ•mapÔºåÁé∞Âú®ÊòØmap.put(‚Äòb‚Äô,2)ÔºåÁÑ∂ÂêéËµ∞Âà∞‰∫ÜaÔºåÈÇ£‰πàÂΩìÂâçmap‰∏≠aÁöÑ‰ΩçÁΩÆÊòØ0ÔºåÈÇ£‰πàÂÆÉÁöÑ‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆÊòØ1Ôºå‰∏éÂΩìÂâçÂ§¥ÊåáÈíà‰ΩçÁΩÆ2Áõ∏ÊØîÔºåÂ∞è‰∫éÂΩìÂâçÂ§¥ÊåáÈíàÁöÑ‰ΩçÁΩÆÔºåÈÇ£‰πàÂ§¥ÊåáÈíà‰∏çË∑üÊñ∞ÔºåÊâÄ‰ª•ÈïøÂ∫¶‰∏∫2Ôºå‰∏éÊúÄÂ§ßÈïøÂ∫¶Áõ∏Á≠âÔºåÊâÄ‰ª•‰∏çÊõøÊç¢ÔºåÊúÄÂêéÊ±ÇÂá∫ÊúÄÂ§ßÈïøÂ∫¶‰∏∫2. 12345678910111213141516171819public static int lengthOfLongestSubstring(String s) &#123; Map&lt;Character,Integer&gt; map=new HashMap&lt;Character,Integer&gt;(); int maxLength=0; int now=0; for(int i=0;i&lt;s.length();i++)&#123; if(map.containsKey(s.charAt(i)))&#123; now=Math.max(map.get(s.charAt(i))+1,now); if((i-now+1)&gt;maxLength)&#123; maxLength=i-now+1; &#125; &#125;else&#123; if((i-now+1)&gt;maxLength)&#123; maxLength=i-now+1; &#125; &#125; map.put(s.charAt(i), i); &#125; return maxLength; &#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊØèÂ§©‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºöÊ±Ç‰∏§‰∏™ÊéíÂ∫èÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞]]></title>
    <url>%2F2018%2F11%2F10%2Fleetcode4%2F</url>
    <content type="text"><![CDATA[È¢òÁõÆÊúâ‰∏§‰∏™Â§ßÂ∞è‰∏∫ m Âíå n ÁöÑÊéíÂ∫èÊï∞ÁªÑ nums1 Âíå nums2 „ÄÇ ËØ∑ÊâæÂá∫‰∏§‰∏™ÊéíÂ∫èÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞Âπ∂‰∏îÊÄªÁöÑËøêË°åÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(log (m+n)) „ÄÇ Á§∫‰æã1: 1234nums1 = [1, 3]nums2 = [2]‰∏≠‰ΩçÊï∞ÊòØ 2.0 Á§∫‰æã2: 12345nums1 = [1, 2]nums2 = [3, 4]‰∏≠‰ΩçÊï∞ÊòØ (2 + 3)/2 = 2.5 ÂΩíÂπ∂&amp;topKÈóÆÈ¢ò ÊñπÊ°à1Ëøô‰∏™ÊÄùË∑ØÂ∞±ÊòØÂØπ‰∫é‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑËøõË°åÂêàÂπ∂ÔºåÂêàÂπ∂Âà∞‰∏Ä‰∏™Â§ßÁöÑÊúâÂ∫èÁöÑÊï∞ÁªÑ‰∏≠ÂéªÔºåÁÑ∂ÂêéÊ±ÇÂêàÂπ∂ÂêéÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞„ÄÇ‰∏ãÈù¢‰ª£Á†Å‰∏≠‰ΩøÁî®ÁöÑÊòØÂΩíÂπ∂ÊéíÂ∫èÁöÑÊñπÂºèÔºåÂØπ‰∫é‰∏§‰∏™ÊúâÂ∫èÊï∞ÁªÑËøõË°åÂΩíÂπ∂ÊéíÂ∫èÁöÑ„ÄÇ‰ªéÂ§çÊùÇÂ∫¶ÁöÑËßíÂ∫¶Êù•ËØ¥ÂèØ‰ª•Êª°Ë∂≥È¢òÁõÆÁöÑË¶ÅÊ±ÇÔºå‰ΩÜÊòØËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºå‰∏ªË¶ÅÊòØÊÄé‰πàËÉΩÂ§ü‰ΩøÂæóÊó∂Èó¥Â§çÊùÇÂ∫¶ÂèòÊàêO{MIN(nums1.length,nums2.leng)}„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960class Solution &#123; public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; double result = 0.0d; int[] nums = new int[nums1.length+nums2.length]; int num1index = 0; int num2index = 0; int index = 0; if (nums1.length == 0 &amp;&amp; nums2.length == 0)&#123; return result; &#125; if (nums1.length == 0)&#123; return getResult(nums2); &#125; if (nums2.length == 0)&#123; return getResult(nums1); &#125; while(num1index &lt; nums1.length &amp;&amp; num2index &lt; nums2.length)&#123; if (nums1[num1index] &lt; nums2[num2index])&#123; nums[index]= nums1[num1index]; num1index++; &#125;else&#123; nums[index]= nums2[num2index]; num2index++; &#125; index++; &#125; while (num1index &lt; nums1.length)&#123; nums[index] = nums1[num1index++]; index++; &#125; while (num2index &lt; nums2.length)&#123; nums[index] = nums2[num2index++]; index++; &#125; if (nums.length%2==0) &#123; result = (nums[nums.length/2]+nums[nums.length/2-1])/2.0; &#125; else&#123; result = nums[nums.length/2]; &#125; return result; &#125; private double getResult(int[] nums)&#123; double result = 0.0D; if (nums.length%2==0) &#123; result = (nums[nums.length/2]+nums[nums.length/2-1])/2.0; &#125; else&#123; result = nums[nums.length/2]; &#125; return result; &#125;&#125; ÊñπÊ°à2Ê±Ç‰∏§‰∏™ÊéíÂ∫èÊï∞ÁªÑÁöÑ‰∏≠‰ΩçÊï∞ ÂÅáËÆænums1.length = m, nums2.length = n; m &lt; n; Ëã•(m + n) % 2 == 0, Ë°®Á§∫‰∏§Êï∞ÁªÑ‰πãÂíå‰∏∫ÂÅ∂Êï∞ÔºåÂ∫îËØ•ÊòØÊúâ‰∏§‰∏™‰∏≠‰ΩçÊï∞ÔºåÂõ†Ê≠§ÊúÄÁªàÁªìÊûú‰∏∫Á¨¨9Ë°åÁöÑ‰ª£Á†ÅÊâÄÁ§∫„ÄÇÂê¶ÂàôÔºåÁªìÊûú‰∏∫Á¨¨7Ë°åÁöÑ‰ª£Á†ÅÊâÄÁ§∫„ÄÇ ‰∏∫‰∫Ü‰ΩøÂæóÊñπÊ≥ïÁöÑÁªü‰∏ÄÔºåÂú®ÊúÄÂàùÊó∂ÔºåÂØπÊï∞ÁªÑËøõË°åÂ§ÑÁêÜÔºåÁªü‰∏Ä‰ΩøÂæó‰º†ËøõÊñπÊ≥ïÁöÑÁü≠Êï∞ÁªÑ‰∏∫nums1ÔºåÂç≥Á¨¨14Ë°å‰ª£Á†ÅÊâÄÁ§∫„ÄÇ Â¶ÇÊûúlen1-start1 == 0,ÂàôË°®Á§∫nums1Â∑≤ÁªèÂÖ®ÈÉ®Âä†ÂÖ•Ââçk‰∏™‰∫ÜÔºåÂàôÁ¨¨k‰∏™‰∏∫nums2[k -1]; Âú®ÊñπÊ≥ïfindKthÔºàÔºâ‰∏≠ÁöÑkÊòØ‰∏ÄÁõ¥ÂèòÂåñÁöÑÔºåÂàùÂßãÊó∂Ôºåk‰∏∫‰∏§‰∏™Êï∞ÁªÑ‰∏≠ÊéíÂ∫è‰πãÂêéÁöÑÁ¨¨k‰∏™Êï∞ÁöÑ‰ΩçÁΩÆÔºõkÂú®ÊñπÊ≥ï‰∏≠ÁöÑÁúüÊ≠£Âê´‰πâ‰∏∫‚ÄúËøòÈúÄË¶ÅÊâæÂà∞Â§öÂ∞ë‰∏™Êï∞ÊâçËÉΩËææÂà∞k‰∏™‚ÄùÔºõÂõ†Ê≠§ÂÅáËÆænums1.length ==0;,Ê≠§Êó∂len1-start1 == 0, Âàô‰∏≠‰ΩçÊï∞Â∞±ÊòØnums2[k - 1],Âç≥Âú®nums1‰∏≠ÊâæÂà∞‰∫Ü0‰∏™Êï∞ÔºåËøòÈúÄË¶ÅÊâæk‰∏™Êï∞ÔºåÁ¨¨k‰∏™Êï∞Â∞±ÊòØnums[k - 1]; Â¶ÇÊûúk == 1,ÂàôË°®Á§∫Ââçk-1Â∞èÁöÑÊï∞Â∑≤ÁªèÊâæËøá‰∫ÜÔºåÂàôÁ¨¨k‰∏™Êï∞ËÇØÂÆöÊòØnums1[start1]Âíånums2[start2]‰∏≠ËæÉÂ∞èÁöÑÈÇ£‰∏™Êï∞„ÄÇ ‰∏ãÈù¢Êé•ÁùÄÂ∞±ÊòØÂ∏∏ËßÑÁöÑÊÉÖÂÜµÔºöÂç≥nums1‰∏≠ÂåÖÂê´‰∏ÄÈÉ®ÂàÜk,nums2‰∏≠‰πüÂåÖÂê´‰∏ÄÈÉ®ÂàÜÁöÑk,Âõ†Ê≠§Â∞±‰ªéÊØè‰∏™Êï∞ÁªÑÁöÑk/2ÈÇ£ÈáåÂºÄÂßãÊØîËæÉÔºà‰πüÁõ∏ÂΩì‰∫éÊØèÊ¨°ÈÉΩ‰ºöÊúâ‰∏ÄÂçäÁöÑÊï∞Ë¢´Âä†ÂÖ•Ââçk‰∏™ÔºåÂõ†Ê≠§Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫OÔºàlog(m + n)ÔºâÔºâÔºöÈááÁî®p1Âíåp2ÂàÜÂà´ËÆ∞ÂΩïÂΩìÂâçnums1Âíånums2ÈúÄË¶ÅÊØîËæÉÁöÑÈÇ£‰∏™‰ΩçÔºåÁî±‰∫énums1ÊØîËæÉÁü≠ÔºåÂõ†Ê≠§ÊúâÂèØËÉΩ2/kÁöÑ‰ΩçÁΩÆÂ∑≤ÁªèË∂ÖÂá∫‰∫Ünums1ÁöÑÈïøÂ∫¶ÔºåÂõ†Ê≠§nums1ËøòÈúÄË¶ÅÂÅöÁâπÊÆäÂ§ÑÁêÜÔºåÂç≥Á¨¨19Ë°å‰ª£Á†ÅÊâÄÁ§∫ÔºõÁî±‰∫ép1ÂÅö‰∫ÜÁâπÊÆäÂ§ÑÁêÜÔºåÈÇ£p2‰πüÂ∞±Ë¶ÅÂÅöÁâπÊÆäÂ§ÑÁêÜ„ÄÇÊÄª‰πãÔºåstart1~p1Âíåstart2~p2ÁöÑÂíå‰∏ÄÂÆö‰∏∫k„ÄÇ1ÔºâËã•nums1[p1 - 1] &lt; nums[p2 - 1],ÂàôË°®Êòé„Äêstart1, p1)‰πãÈó¥ÁöÑÂÄºÂú®Ââçk‰∏™Êï∞‰∏≠Ôºõ2ÔºâËã•nums[p1 - 1] &gt; nums2[p2- 1],ÂàôË°®Êòé„Äêstart2, p2)‰πãÈó¥ÁöÑÂÄºÂú®Ââçk‰∏™Êï∞‰∏≠Ôºõ3ÔºâËã•‰∏§ÂÄºÁõ∏Á≠âÔºåÂàôË°®Êòé„Äêstart1, p1)+„Äêstart2Ôºå p2ÔºâÁöÑ‰∏™Êï∞‰∏∫k,ÂàôÁªìÊûúÁõ¥Êé•ËøîÂõûÂÖ∂‰∏≠‰∏Ä‰∏™Âç≥ÂèØ„ÄÇ‰∏∫‰ªÄ‰πàÊØîËæÉÁöÑp1Âíåp2ÁöÑÂâç‰∏Ä‰∏™‰ΩçÁöÑÊï∞ÔºåËÄå‰∏çÊòØp1Âíåp2‰ΩçÁΩÆÁöÑÊï∞Âë¢Ôºü ‰∏æ‰æãËØ¥ÊòéÔºöÂÅáËÆæstart1== start2 == 0, Âàôp1 = Math.min(len1, k / 2); p2 = k - p1,Âç≥p1 + p2 == k;ÔºõÂÅáËÆæp1 = 5, p2 = 7;, Âàôk = 12; Âú®Êï∞ÁªÑ‰∏≠nums[5]ÂÖ∂ÂÆûÊòØÁ¨¨6‰∏™Êï∞Ôºånums[7]ÂÖ∂ÂÆûÊòØÁ¨¨8‰∏™Êï∞ÔºåÊâÄ‰ª•Êàë‰ª¨ÊØîËæÉÁöÑÊòØnums1[p1 - 1]‰∏énums2[p2 - 1]ÁöÑÂÄºÔºõ 1234567891011121314151617181920212223242526272829public class Solution &#123; public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123; int len1 = nums1.length; int len2 = nums2.length; int size = len1 + len2; if(size % 2 == 1) return findKth(nums1, 0, len1, nums2, 0, len2, size / 2 + 1); else return (findKth(nums1, 0, len1, nums2, 0, len2, size / 2) + findKth(nums1, 0, len1, nums2, 0, len2, size / 2 + 1)) /2; &#125; public double findKth(int[] nums1, int start1, int len1, int[] nums2, int start2, int len2, int k) &#123; if(len1 - start1 &gt; len2 -start2) // ‰º†ËøõÊù•ÁöÑÊó∂ÂÄôÁªü‰∏ÄËÆ©Áü≠ÁöÑÊï∞ÁªÑ‰∏∫nums1 return findKth(nums2, start2, len2, nums1, start1, len1, k); if(len1 - start1 == 0) // Ë°®Á§∫nums1Â∑≤ÁªèÂÖ®ÈÉ®Âä†ÂÖ•ÂâçK‰∏™‰∫ÜÔºåÁ¨¨k‰∏™‰∏∫nums2[k - 1]; return nums2[k - 1]; if(k == 1) return Math.min(nums1[start1], nums2[start2]); // k==1Ë°®Á§∫Â∑≤ÁªèÊâæÂà∞Á¨¨k-1Â∞èÁöÑÊï∞Ôºå‰∏ã‰∏Ä‰∏™Êï∞‰∏∫‰∏§‰∏™Êï∞ÁªÑstartÂºÄÂßãÁöÑÊúÄÂ∞èÂÄº int p1 = start1 + Math.min(len1 - start1, k / 2); // p1Âíåp2ËÆ∞ÂΩïÂΩìÂâçÈúÄË¶ÅÊØîËæÉÁöÑÈÇ£‰∏™‰Ωç int p2 = start2 + k - p1 + start1; if(nums1[p1 - 1] &lt; nums2[p2 - 1]) return findKth(nums1, p1, len1, nums2, start2, len2, k - p1 + start1); else if(nums1[p1 - 1] &gt; nums2[p2 -1]) return findKth(nums1, start1, len1, nums2, p2, len2, k - p2 + start2); else return nums1[p1 - 1]; &#125;&#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊØèÂ§©‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºöÊúÄÈïøÂõûÊñáÂ≠ê‰∏≤]]></title>
    <url>%2F2018%2F11%2F10%2Fleetcode3%2F</url>
    <content type="text"><![CDATA[##È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ sÔºåÊâæÂà∞ s ‰∏≠ÊúÄÈïøÁöÑÂõûÊñáÂ≠ê‰∏≤„ÄÇ‰Ω†ÂèØ‰ª•ÂÅáËÆæ s ÈïøÂ∫¶ÊúÄÈïø‰∏∫1000„ÄÇ Á§∫‰æã: 12345ËæìÂÖ•: &quot;babad&quot;ËæìÂá∫: &quot;bab&quot;Ê≥®ÊÑè: &quot;aba&quot;‰πüÊòØÊúâÊïàÁ≠îÊ°à Á§∫‰æã: 123ËæìÂÖ•: &quot;cbbd&quot;ËæìÂá∫: &quot;bb&quot; ÊÄùË∑Ø‰∏ÄÂºÄÂßãÊòØÊÉ≥Áî®ÊúÄÁ¨®ÁöÑÊñπÊ≥ïÊù•Ëß£ÁöÑÔºå‰πüÂ∞±ÊòØÊâæÂá∫ÊâÄÊúâÁöÑÂ≠ó‰∏≤ÔºåÁÑ∂ÂêéÂÜçÂØπÊâÄÊúâÁöÑÂ≠ê‰∏≤ËøõË°åÂõûÊñáÊ£ÄÊµãÔºåÂπ∂ËÆ∞ÂΩïÈïøÂ∫¶„ÄÇËøôÁßçÊñπÂºèÊó∂Èó¥Â§çÊùÇÂ∫¶ÂèØÊÉ≥ËÄåÁü•ÔºåO(n)O(n)O(n)=O(n^3)„ÄÇÊâÄ‰ª•ËøôÁßçËÇØÂÆöÊòØ‰∏çËÉΩÊª°Ë∂≥Êàë‰ª¨Ë¶ÅÊ±ÇÁöÑ„ÄÇ okÔºåÈÇ£Êàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãËøô‰∏™ÈóÆÈ¢òÔºåÂÖàÊääËøô‰∏™ÈóÆÈ¢òÁâπÊÆäÂåñÔºõ ÂÅáÂ¶ÇËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶Â∞±ÊòØ1 ÈÇ£‰πàËøô‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÊúÄÈïøÂõûÊñá‰∏≤Â∞±ÊòØÂÆÉËá™Â∑±ÔºåÈïøÂ∫¶Â∞±ÊòØ1 ÂÅáÂ¶ÇÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶‰∏∫2ÔºåÂÆÉË¶ÅÊòØÂõûÊñá‰∏≤ÁöÑÂåñÔºåÂ∞±ÈúÄË¶Å‰∏§‰∏™Â≠óÁ¨¶ÊòØÁõ∏Á≠âÁöÑ„ÄÇ Âç≥Ôºös[i] == s[j] ‰∏îi-j=1(Ê≠§Â§ÑÂÅáÂÆöiÊòØËæÉÂ§ßÁ¥¢Âºï‰ΩçÁΩÆ) ÈÇ£‰πàÂØπ‰∫éiÔºçj&gt;1ÁöÑÊÉÖÂÜµ‰∏ãÂë¢ÔºüÊòØ‰∏çÊòØÂè™Ë¶ÅÊª°Ë∂≥‰∏ãÈù¢ÁöÑÊù°‰ª∂Â∞±ÂèØ‰ª•‰∫ÜÔºö Âç≥:s[i] == s[j]&amp;&amp;s[i-1] == s[j+1] ÂÖ∂ÂÆûËøôÁßçÊÄùË∑ØÂ∞±ÊòØÂä®ÊÄÅËßÑÂàí„ÄÇÂÖ≥‰∫éÂä®ÊÄÅËßÑÂàíÁöÑÁêÜËÆ∫ÊÄßÊñáÂ≠óÂ∞±‰∏çÁ†Å‰∫ÜÔºåÊúâÂÖ¥Ë∂£ÁöÑÂ∞è‰ºô‰º¥Èòî‰ª•Ëá™Ë°åÂ≠¶‰π†„ÄÇ‰∏ãÈù¢Â∞±ÈíàÂØπËøô‰∏™ÈóÆÈ¢òÁ†Å‰∏Ä‰∏ã‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425262728293031323334353637public String longestPalindrome(String s) &#123; // ÈïøÂ∫¶‰∏∫1ÔºåËøîÂõûÂΩìÂâç‰∏≤ if (s.length()==1)&#123; return s; &#125; //ÈïøÂ∫¶‰∏∫2Âπ∂‰∏î‰∏§‰∏™Â≠óÁ¨¶Áõ∏Á≠âÂàôËøîÂõû if (s.length()==2&amp;&amp;s.charAt(0)==s.charAt(1))&#123; return s; &#125; //Áî®‰∫éÊ†áËÆ∞isLongestPalindrome[j][i]Âç≥‰ªéjÂà∞iÊòØÂê¶ÊòØÂõûÊñá‰∏≤Ôºõ //Â¶ÇisLongestPalindrome[1][5]ÔºùÔºùtrueÂàôË°®Á§∫Â≠óÁ¨¶‰∏≤Á¥¢Âºï‰ΩçÁΩÆ‰ªé1Âà∞5ÁöÑÂ≠ê‰∏≤ÊòØÂõûÊñá‰∏≤„ÄÇ boolean[][] isLongestPalindrome = new boolean[s.length()][s.length()]; //ÊúÄÈïøÂõûÊñá‰∏≤ÂàùÂßãÊúÄÂ§ß‰∏∫0 int maxlen = 0; //ÂØπÂ∫îÁöÑmaxlenÁöÑÂºÄÂßãÁ¥¢Âºï‰ΩçÁΩÆ int beginIndex = 0; //ÂØπÂ∫îÁöÑmaxlenÁöÑÁªìÊùüÁ¥¢Âºï‰ΩçÁΩÆ int lastIndex = 0; for (int i=0;i&lt;s.length();i++)&#123; int j=i; while(j&gt;=0)&#123; //Êª°Ë∂≥‰∏äËø∞ÁöÑÁ¨¨‰∏â‰∏™Êù°‰ª∂ÔºåÂç≥ÂΩìÂâçs.charAt(i)==s.charAt(j)Âπ∂ //‰∏îs[jÔºã1Âà∞iÔºç1]‰πüÊòØÂõûÊñá‰∏≤ if (s.charAt(i)==s.charAt(j)&amp;&amp;(i-j&lt;2||isLongestPalindrome[j+1][i-1]))&#123; isLongestPalindrome[j][i]=true; if (maxlen &lt; i-j+1) &#123; beginIndex = j; lastIndex = i+1; maxlen = i-j+1; &#125; &#125; j--; &#125; &#125; return s.substring(beginIndex,lastIndex);&#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊØèÂ§©‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºöZÂ≠óÂΩ¢ËΩ¨Êç¢]]></title>
    <url>%2F2018%2F11%2F10%2Fleetcodetwo%2F</url>
    <content type="text"><![CDATA[È¢òÁõÆÂ∞ÜÂ≠óÁ¨¶‰∏≤ ‚ÄúPAYPALISHIRING‚Äù ‰ª•ZÂ≠óÂΩ¢ÊéíÂàóÊàêÁªôÂÆöÁöÑË°åÊï∞ÔºöÔºà‰∏ãÈù¢ËøôÊ†∑ÁöÑÂΩ¢Áä∂Ôºâ 123P A H NA P L S I I GY I R ‰πãÂêéÊåâÈÄêË°åÈ°∫Â∫è‰æùÊ¨°ÊéíÂàóÔºö‚ÄùPAHNAPLSIIGYIR‚Äù ÂÆûÁé∞‰∏Ä‰∏™Â∞ÜÂ≠óÁ¨¶‰∏≤ËøõË°åÊåáÂÆöË°åÊï∞ÁöÑËΩ¨Êç¢ÁöÑÂáΩÊï∞: 1string convert(string text, int nRows); convert(‚ÄúPAYPALISHIRING‚Äù, 3) Â∫îÂΩìËøîÂõû ‚ÄúPAHNAPLSIIGYIR‚Äù „ÄÇ ÊñπÊ°à12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public String convert(String s, int numRows) &#123; //ËÆ°ÁÆóÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ int len = s.length(); //‰∏§‰∏™Âë®Êúü‰πãÈó¥ÁöÑÂàóÊï∞Ôºå int slash = numRows - 2; //ËÆ°ÁÆóË°åÁöÑÈïøÂ∫¶ int rowLength = 0; while(len &gt; 0)&#123; //Á´ñÂàó len = len - numRows; rowLength++; //ÊñúÁùÄÁöÑ‰∏ÄÂàó for(int i = 0; i &lt; slash &amp;&amp; len &gt; 0; i++)&#123; len--; rowLength++; &#125; &#125; //Âª∫Á´ã‰∏Ä‰∏™Â§ö‰∏ÄÂàóÁöÑÊï∞ÁªÑÁî®‰∫é‰øùÂ≠òÊàë‰ª¨ÁöÑÂ≠óÁ¨¶‰∏≤,Âπ∂‰∏îÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫Á©∫Ê†º‰∫Ü char result[] = new char[numRows* rowLength]; // ÂàùÂßãÂåñ‰∏∫Á©∫Ê†º for (int i = 0; i &lt; result.length; i++) &#123; result[i] = ' '; &#125; // ÂΩìÂâçÂ§ÑÁêÜÁöÑË°åÊï∞ int curColumn = 0; int index = 0; // ‰∏ãÈù¢Â∞ÜÂ≠óÁ¨¶‰∏≤ÂÜôÂÖ•ÊâÄË∞ìÁöÑÁü©Èòµ‰∏≠ while(index &lt; s.length())&#123; //ÂÜôÂÖ•Âàó for(int i = 0; i &lt; numRows &amp;&amp; index &lt; s.length(); i++)&#123; result[rowLength * i + curColumn] = s.charAt(index); index++; &#125; curColumn++; //ÂÜôÂÖ•ÊñúÁ∫ø for(int i = numRows - 2; i &gt; 0 &amp;&amp; index &lt; s.length(); i--)&#123; result[rowLength * i + curColumn] = s.charAt(index); curColumn++; index++; &#125; &#125; // ÂéªÁ©∫Ê†ºÔºåÂÆö‰πâ‰∏§‰∏™ÊåáÈíàÂæ™ÁéØËøõË°åÊìç‰Ωú index = 0; // ÊâæÁ¨¨‰∏Ä‰∏™ÊòØÁ©∫Ê†ºÁöÑÂ≠óÁ¨¶‰ΩçÁΩÆ while (index &lt; s.length() &amp;&amp; result[index] != ' ') &#123; index++; &#125; int next = index + 1; while (index &lt; s.length()) &#123; // Êâæ‰∏çÊòØÁ©∫Ê†ºÁöÑÂÖÉÁ¥† while (next &lt; result.length &amp;&amp; result[next] == ' ') &#123; next++; &#125; result[index] = result[next]; index++; next++; &#125; return new String(result, 0, index);&#125; Ëøô‰∏™È¢òÁõÆÊÉ≥‰∫Ü‰∏§Â§©Ôºå‰πãÂâçÁöÑÊÄùË∑ØÊòØÂª∫Á´ã‰∏Ä‰∏™‰∫åÁª¥Êï∞ÁªÑÔºåÁÑ∂ÂêéÂ°´ÂÖÖÔºåÊúÄÂêéÈÅçÂéÜÊï∞ÁªÑÊãøÂà∞ÁªìÊûúÔºå‰ΩÜÊòØÂØπ‰∫éÂæàÂ§öËæπÁïåÈóÆÈ¢ò‰∏çÂ§™Â•ΩËÄÉËôëÔºåÊîæÂºÉ„ÄÇËøô‰∏§ÁßçÊñπÊ°àÁöÑÈ¶ñË¶ÅÊ†∏ÂøÉÈÉΩÊòØËÆ°ÁÆóÂàóÊï∞ÂíåÂØπÊñúÂàóÁöÑÂ§ÑÁêÜÔºåÊ≤°ÊúâÊï∞Â≠¶ÂäüÂ∫ïÂíåÊäΩË±°ÊÄùÁª¥ÁöÑÁ®ãÂ∫èÂëòÁúüÁöÑ‰º§‰∏çËµ∑„ÄÇ]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊØèÂ§©‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºöÈ¢†ÂÄíÊï¥Êï∞]]></title>
    <url>%2F2018%2F11%2F10%2Fleetcodeone%2F</url>
    <content type="text"><![CDATA[È¢òÁõÆÁªôÂÆö‰∏Ä‰∏™ËåÉÂõ¥‰∏∫ 32 ‰Ωç int ÁöÑÊï¥Êï∞ÔºåÂ∞ÜÂÖ∂È¢†ÂÄí„ÄÇ ‰æã 1: 12ËæìÂÖ•: 123ËæìÂá∫: 321 ‰æã 2: 12ËæìÂÖ•: -123ËæìÂá∫: -321 ‰æã 3: 12ËæìÂÖ•: 120ËæìÂá∫: 21 Ê≥®ÊÑè:ÂÅáËÆæÊàë‰ª¨ÁöÑÁéØÂ¢ÉÂè™ËÉΩÂ§ÑÁêÜ 32 ‰Ωç intËåÉÂõ¥ÂÜÖÁöÑÊï¥Êï∞„ÄÇÊ†πÊçÆËøô‰∏™ÂÅáËÆæÔºåÂ¶ÇÊûúÈ¢†ÂÄíÂêéÁöÑÁªìÊûúË∂ÖËøáËøô‰∏™ËåÉÂõ¥ÔºåÂàôËøîÂõû 0„ÄÇ ÊñπÊ°àËøô‰∏™È¢òÁõÆÂÖ∂ÂÆûÊå∫ÁÆÄÂçïÁöÑÔºõÊÄùË∑ØÂ¶Ç‰∏ãÔºö Âà§Êñ≠ËæìÂÖ•ÁöÑÊï∞Â≠óÊòØÂê¶Â§ß‰∫éÊúÄÂ§ßÊï¥Êï∞ÔºåÂÖ∂ÂÆûËøôÈáåÊ≤°ÊúâÂøÖË¶ÅÂà§Êñ≠ÔºåÂõ†‰∏∫Â¶ÇÊûúÂèÇÊï∞ËæìÂÖ•Â§ß‰∫éÊúÄÂ§ßÊï¥Êï∞ÁöÑËØù‰ºöÁõ¥Êé•Êä•Èîô„ÄÇ Â∞ÜÊï¥Êï∞ËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤ Âà§Êñ≠ÊòØÂê¶ÊòØË¥üÊï∞ÔºåËøô‰∏™‰æùÊçÆÂ∞±ÊòØÂà§Êñ≠Â≠óÁ¨¶‰∏≤‰∏≠ÊòØÂê¶Â≠òÂú®‚ÄòÔºç‚Äô ‰ªéÂêéÂêëÂâçÂºÄÂßãÈÅçÂéÜÔºåÊ≥®ÊÑèÁöÑÊòØÂøÖÈ°ªÂêéÂêëÈÅçÂéÜ‰∏îÂàùÂßã‰∏∫0ÁöÑÊÉÖÂÜµ‰∏ã‰øùÊåÅÁªßÁª≠ÂêëÂâçËø≠‰ª£„ÄÇ Â¶ÇÊûúËΩ¨Êç¢‰πãÂêéÁöÑÂÄºÂ§ß‰∫éÊúÄÂ§ßÊï¥Êï∞ÔºåÂàô‰ºöÂØºËá¥stringËΩ¨intÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏ÔºåÈÇ£‰πàÊàë‰ª¨Áõ¥Êé•Âú®ËøôÊääÂºÇÂ∏∏ÊçïËé∑ÔºåÂπ∂‰∏îËøîÂõû0ÔºàÂÅ∑Êáí‰∏ÄÊ≥¢Ôºå‰∏∑Ôºâ1234567891011121314151617181920212223242526272829303132333435363738394041424344 public int reverse(int x) &#123; int result = 0; if (x &gt;Integer.MAX_VALUE)&#123; return 0 ; &#125; String s =String.valueOf(x); int len = 0; if (s!=null&amp;&amp;s.length()!=0&amp;&amp;s.charAt(0)=='-')&#123; len = 1; &#125;else if(s.length() == 1)&#123; return x; &#125; int lastp = s.length()-1; boolean isStart = true; String ints = ""; while( lastp &gt;= len)&#123; if (isStart &amp;&amp; s.charAt(lastp)=='0')&#123; while (s.charAt(lastp)=='0')&#123; lastp--; &#125; isStart = false; &#125; if (isStart)&#123; isStart = false; &#125; ints = ints+s.charAt(lastp); lastp--; &#125; try&#123; result = Integer.parseInt(ints); &#125;catch (NumberFormatException e)&#123; return 0; &#125; return len==0?result:result*(-1);&#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>ÁÆóÊ≥ï</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫érpcÁöÑÊï¥ÁêÜÂíåÁêÜËß£]]></title>
    <url>%2F2018%2F11%2F10%2Frpcone%2F</url>
    <content type="text"><![CDATA[Êû∂ÊûÑÊºîÂèò ÊâÄÊúâÁöÑÁïåÈù¢ÂíåÊúçÂä°ÂùáÂú®Âêå‰∏Ä‰∏™ËøõÁ®ã‰∏ã Âü∫‰∫émvcÁöÑËßÜÂõæ‰∏éÊúçÂä°ÂàÜÁ¶ªÔºå‰ΩÜÊòØÂÆûÈôÖ‰∏äËøòÊòØÂú®‰∏Ä‰∏™Â∫îÁî®Á≥ªÁªü‰∏≠ÔºåÂè™‰∏çËøáÂú®ÂäüËÉΩÂ±ÇÊ¨°‰∏äÂàíÂàÜÁöÑÊõ¥Âä†ÁªÜËá¥ Á≤íÂ∫¶Êõ¥ÁªÜÔºåÂØπ‰∫é‰∏çÂêåÁöÑÂäüËÉΩÊúçÂä°ËøõË°åÂàáÂàÜÔºåÂπ∂ËøõË°åÂçïÁã¨ÁöÑÈÉ®ÁΩ≤ Èù¢ÂêëÊúçÂä°ÁöÑÊû∂ÊûÑÔºåÂ∞ÜÂ∫îÁî®Á®ãÂ∫èÁöÑ‰∏çÂêåÂäüËÉΩÂçïÂÖÉÔºàÁß∞‰∏∫ÊúçÂä°ÔºâÈÄöËøáËøô‰∫õÊúçÂä°‰πãÈó¥ÂÆö‰πâËâØÂ•ΩÁöÑÊé•Âè£ÂíåÂ•ëÁ∫¶ËÅîÁ≥ªËµ∑Êù• ÂæÆÊúçÂä° Ê≠§Â§Ñ‰∏çÊîØÊåÅÂõæÁâáÂ±ïÁ§∫ÔºåËá™Ë°åËÑëË°•ÔºÅÔºÅÔºÅ ÈöèÁùÄ‰∏öÂä°ÈáèÂíåÁî®Êà∑ÈáèÁöÑÂ¢ûÂä†ÔºåÊû∂ÊûÑ‰πüÊòØ‰ªéÂçï‰∏ÄÁ≥ªÁªüËµ∞ÂêëÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºåÊàëËÉΩÊÉ≥Âà∞ÁöÑÊòØÔºåËøôÁßçÊû∂ÊûÑÁöÑÊºîÂèò‰∏ªË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÂú®‰∫éÔºö ÈÄöËøá‰∏öÂä°Ê®°ÂùóÁöÑÊãÜÂàÜÔºå‰ΩøÂæóÊØè‰∏™Ê®°ÂùóÁöÑËÅåË¥£Êõ¥Âä†Ê∏ÖÊô∞Ôºå‰ΩÜÊòØÊ®°ÂùóÁöÑËÅåË¥£ËæπÁïåÁöÑÂàíÂàÜÂæÄÂæÄ‰πüÊòØÂæàÁñºÂ§¥ÁöÑ‰∫ãÊÉÖ„ÄÇ ÁªÜËá¥ÁöÑÂàíÂàÜ‰ΩøÂæóÈ°πÁõÆÂú®ÁÆ°ÁêÜ‰∏äÈù¢‰ºöÊõ¥Âä†ÊñπÈù¢Ôºå‰ªé‰ª£Á†ÅÁöÑËßíÂ∫¶Êù•ËØ¥ÔºåÂºÄÂèëÂíåÁª¥Êä§ÁöÑÊàêÊú¨‰πü‰ºöÈôç‰ΩéÔºå‰∏ç‰ºöÂõ†‰∏∫‰∏Ä‰∏™bugÂéªË∑ëÊï¥‰∏™È°πÁõÆ‰∫Ü„ÄÇ ÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÂÆπÈîôÁéáÔºåÂçï‰∏ÄÁ≥ªÁªüÂ¶ÇÊûúÂÆïÊú∫ÈÇ£Â∞±ÁúüÁöÑgg‰∫ÜÔºåÂè¶Â§ñÂ∞±ÊòØÔºåÂçï‰∏™ÁéØËäÇÂá∫Áé∞ÈóÆÈ¢ò‰πü‰ºöÂØºËá¥È°πÁõÆÊó†Ê≥ïÊ≠£Â∏∏ËøêË°åÔºàÊØîÂ¶ÇÊï∞ÊçÆÂ∫ìÂá∫ÈóÆÈ¢ò‰∫ÜÔºâ„ÄÇÂØπ‰∫éÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊù•ËØ¥Ôºå‰∏ÄËà¨ÈÉΩ‰ºö‰ΩøÁî®ÂÜó‰ΩôÁöÑÊñπÂºèÊù•ÊèêÈ´òÂèØÁî®ÊÄßÔºå‰∏™‰∫∫ÁêÜËß£Â∞±ÊòØÂèØ‰ª•Êèê‰æõÂ§ö‰∏™‰∏ÄÊ†∑ÁöÑÊúçÂä°ÔºåÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•ËøõË°åÂàáÊç¢„ÄÇ ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂ∏¶Êù•ÁöÑÈóÆÈ¢ò‰∏Ä‰∏™ÊòØÊàêÊú¨ÔºåÁ°¨‰ª∂ÊàêÊú¨ÔºåËøêÁª¥ÊàêÊú¨ÈÉΩ‰ºöÂ¢ûÂä†„ÄÇ rpcÁÆÄ‰ªãÂèäÂ∏∏Áî®ÁöÑrpcÊ°ÜÊû∂ÈöèÁùÄÈõÜ‰∏≠ÂºèÊû∂ÊûÑÂêëÂàÜÂ∏ÉÂºèÊû∂ÊûÑÁöÑËΩ¨ÂèòÔºåÂ∫îÁî®Á≥ªÁªü‰πãÈó¥ÁöÑÊúçÂä°Ë∞ÉÁî®‰∏éÈÄöËÆØÈóÆÈ¢òÊàê‰∏∫‰∫ÜÈ¶ñË¶ÅËß£ÂÜ≥ÁöÑÈúÄÊ±Ç„ÄÇ ËÄåRPC ÁöÑ‰∏ªË¶ÅÁõÆÊ†áÂ∞±ÊòØ‰∏∫‰∫ÜËÆ©ÊûÑÂª∫ÂàÜÂ∏ÉÂºèËÆ°ÁÆóÔºàÂ∫îÁî®ÔºâÂèòÂæóÊõ¥Âä†ÁÆÄÂçïÔºåÂú®Êèê‰æõÂº∫Â§ßÁöÑËøúÁ®ãË∞ÉÁî®ËÉΩÂäõÊó∂‰∏çÊçüÂ§±Êú¨Âú∞Ë∞ÉÁî®ÁöÑËØ≠‰πâÁÆÄÊ¥ÅÊÄß„ÄÇ ‰∏∫ÂÆûÁé∞ËØ•ÁõÆÊ†áÔºåRPC Ê°ÜÊû∂ÈúÄÊèê‰æõ‰∏ÄÁßçÈÄèÊòéË∞ÉÁî®Êú∫Âà∂ËÆ©‰ΩøÁî®ËÄÖ‰∏çÂøÖÊòæÂºèÁöÑÂå∫ÂàÜÊú¨Âú∞Ë∞ÉÁî®ÂíåËøúÁ®ãË∞ÉÁî®„ÄÇ Â¶Ç‰∏ã‰ª£Á†ÅÔºö 123456789101112131415 @Autowiredprivate GlRpcAgent glRpcAgent; //rpc‰ª£ÁêÜ/** * @param param Ê≠§Â§ÑÁ∫¶ÂÆöÂèÇÊï∞‰ª•MapÈîÆÂÄºÂØπÁöÑÂΩ¢Âºè‰º†ÈÄí */@Overridepublic List&lt;OrderInfo&gt; queryOrdersByUserId(Map&lt;String, Object&gt; param) &#123; //ÂàõÂª∫ËøúÁ®ãË∞ÉÁî®‰ª£ÁêÜÔºàËøúÁ®ãÊúçÂä°ÁöÑÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºâ OrderConsumeAgent orderConsumer=glRpcAgent.getAgent(&quot;com.glmapper.rpc.interface.OrderConsumeInterface&quot;); //ÈÄöËøá‰ª£ÁêÜËé∑ÂèñËøîÂõûÁªìÊûú Ê≠§Â§ÑgetOrders‰∏∫ËøúÁ®ãÊúçÂä°Âô®‰∏äÁöÑcom.glmapper.rpc.interface.OrderConsumeInterfaceÊé•Âè£‰∏≠ÁöÑÊñπÊ≥ïÔºåparam‰∏∫ÂèÇÊï∞ Map&lt;String,Object&gt; resultMap=(Map)orderConsumer.call(&quot;getOrders&quot;,param); //Ëß£ÊûêËøîÂõûÁªìÊûúÔºàËøúÁ®ãÊñπÊ≥ïÂêåÊ†∑‰ª•MapÈõÜÂêàÁöÑÊñπÂºèÊîæÂõûÔºâ List&lt;OrderInfo&gt; orders = parseResultMap(resultMap); return orders;&#125; ‰∏∫‰ªÄ‰πàË¶Å‰ª•ÂÖ®ÈôêÂÆöÂêçÊù•Ëé∑ÂèñÂë¢ÔºåËøô‰∏™Êàë‰ª¨Â∞Ü‰ºöÂú®ÂêéÈù¢Êù•ËØ¥„ÄÇ ‰ªÄ‰πàÊòØRPCIn distributed computing a remote procedure call (RPC) is when a computer program causes a procedure (subroutine) to execute in another address space(commonly on another computer on a shared network), which is coded as if it were a normal (local) procedure call, without the programmer explicitly coding the details for the remote interaction.RPC ÁöÑÂÖ®Áß∞ÊòØ Remote Procedure Call ÊòØ‰∏ÄÁßçËøõÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè„ÄÇ ÂÆÉÂÖÅËÆ∏Á®ãÂ∫èË∞ÉÁî®Âè¶‰∏Ä‰∏™ËøõÁ®ã‰∏äÔºàÈÄöÂ∏∏ÊòØÂÖ±‰∫´ÁΩëÁªúÁöÑÂè¶‰∏ÄÂè∞Êú∫Âô®‰∏äÔºâÁöÑËøáÁ®ãÊàñÂáΩÊï∞ÔºåËÄå‰∏çÁî®Á®ãÂ∫èÂëòÊòæÂºèÁºñÁ†ÅËøô‰∏™ËøúÁ®ãË∞ÉÁî®ÁöÑÁªÜËäÇ„ÄÇÂç≥Á®ãÂ∫èÂëòÊó†ËÆ∫ÊòØË∞ÉÁî®Êú¨Âú∞ÁöÑËøòÊòØËøúÁ®ãÁöÑÂáΩÊï∞ÔºåÊú¨Ë¥®‰∏äÁºñÂÜôÁöÑË∞ÉÁî®‰ª£Á†ÅÂü∫Êú¨Áõ∏Âêå„ÄÇ ‰ªéÂÆö‰πâ‰∏≠ÂèØ‰ª•ÂæóÁü•ÔºåRPC‰∏ªË¶ÅÊù•Ëß£ÂÜ≥‰∏â‰ª∂‰∫ãÊÉÖÔºö ËøõÁ®ãÈó¥ÈÄöËÆØ Êèê‰æõÂíåÊú¨Âú∞ÊñπÊ≥ïË∞ÉÁî®‰∏ÄÊ†∑ÁöÑË∞ÉÁî®Êú∫Âà∂ Â±èËîΩÁ®ãÂ∫èÂëòÂØπËøúÁ®ãË∞ÉÁî®ÁöÑÁªÜËäÇÂÆûÁé∞ È¶ñÂÖàÊòØËøõÁ®ãÈó¥ÁöÑÈÄö‰ø°ÈóÆÈ¢òÔºåÂØπ‰∫éÂàÜÂ∏ÉÂºèÁéØÂ¢ÉÔºårpcËÉΩÂ§üÂ∏ÆÂä©Êàë‰ª¨Ëß£ÂÜ≥‰∏çÂêåÊúçÂä°Âô®‰πãÈó¥ÁöÑÈÄö‰ø°ÂèäÊï∞ÊçÆ‰º†ËæìÈóÆÈ¢òÔºåÂç≥ÂÅöÂ•ΩÊñπÊ≥ïË∞ÉÁî®Âà∞Êï∞ÊçÆÁöÑËΩ¨Êç¢ÔºåÁÑ∂ÂêéÂÄüÂä©ÁΩëÁªúËøõË°åÊï∞ÊçÆ‰º†ÈÄíÔºõrpcÂÆ¢Êà∑Á´ØÂêërpcÊúçÂä°Á´ØÂèëËµ∑ËøúÁ®ãÊúçÂä°Ë∞ÉÁî®ÔºåÈÄöËøáËØ∑Ê±ÇÁöÑÂ∞ÅË£ÖÔºåÂèÇÊï∞ÁöÑÂ∞ÅË£ÖÔºåÂ∫èÂàóÂåñ„ÄÅÁºñÁ†Å„ÄÅÁ∫¶ÂÆöÂçèËÆÆ‰º†Ëæì„ÄÅËß£ÊûêËØ∑Ê±Ç„ÄÅÂ§ÑÁêÜËØ∑Ê±Ç„ÄÅÂ∞ÅË£ÖËøîÂõûÊ∂àÊÅØÊï∞ÊçÆ„ÄÅÂú®ËøõË°åËøîÂõûÊï∞ÊçÆÁöÑÂ∫èÂàóÂåñ„ÄÅÁºñÁ†Å„ÄÅÂú®ÈÄöËøáÁΩëÁªúËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂÜçËÄÖÊòØÊèê‰æõÂíåÊú¨Âú∞ÊñπÊ≥ïË∞ÉÁî®‰∏ÄÊ†∑ÁöÑË∞ÉÁî®Êú∫Âà∂Ôºå‰∏∫‰ªÄ‰πàËøô‰πàËØ¥ÔºåÂØπ‰∫é‰∏öÂä°Á≥ªÁªüÊù•ËØ¥ÔºåÊàë‰ª¨Êõ¥Â§öÁöÑÂÖ≥Ê≥®ÁÇπÂú®‰∫éÂ¶Ç‰ΩïËß£ÂÜ≥ÂÆûÈôÖÁöÑ‰∏öÂä°ÈúÄÊ±ÇÈóÆÈ¢òÔºåËÄå‰∏çÊÉ≥Ëä±Êõ¥Â§öÁöÑÊó∂Èó¥ÂíåÂøÉÊÄùÂú®ËØ∏Â¶Ç‰∏äËø∞ËøáÁ®ã‰∏≠ÂÖ≥‰∫éÁΩëÁªú‰º†ËæìÂèäÁºñËß£Á†ÅËøáÁ®ãÔºåÂõ†Ê≠§ÂØπ‰∫érpcÊù•ËØ¥ÔºåÈúÄË¶ÅÂ∞ÜËøô‰∫õÁºñËß£Á†Å„ÄÅÂçèËÆÆÁ∫¶ÂÆö„ÄÅÁΩëÁªú‰º†ËæìÁ≠âËøõË°å‰∏Ä‰∏™Êï¥‰ΩìÁöÑÂ∞ÅË£ÖÔºåÁÑ∂ÂêéÂè™Âêë‰∏öÂä°Á≥ªÁªüÊèê‰æõÊúÄÁÆÄÂçïÁöÑË∞ÉÁî®ÊñπÂºè„ÄÇÊúÄÂêé‰∏Ä‰∏™Â±èËîΩÁ®ãÂ∫èÂëòÂØπËøúÁ®ãË∞ÉÁî®ÁöÑÁªÜËäÇÂÆûÁé∞ÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØÁ¨¨‰∫åÁÇπ‰∏≠ÊèêÂà∞ÁöÑÈÇ£‰∫õÂäüËÉΩÁöÑÂ∞ÅË£ÖÔºåÊàë‰ª¨‰∏çÁî®ÂéªÂÖ≥Á≥ªrpcÂà∞Â∫ïÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºå‰πü‰∏çÁî®ÂÖ≥ÂøÉÂÆÉÊòØÂ¶Ç‰ΩïËøê‰ΩúÁöÑÔºåÂØπ‰∫é‰∏öÂä°ÂºÄÂèë‰∫∫ÂëòÊù•ËØ¥ÔºåÈÄöËøáÁ∫¶ÂÆöÁöÑÊñπÂºèËøõË°åÁ±ª‰ºº‰∫éÊú¨Âú∞ÊñπÊ≥ïË∞ÉÁî®ÁöÑÂΩ¢ÂºèÊù•Ë∞ÉÁî®ËøúÁ®ãÊúçÂä°Êé•Âè£Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÈÇ£‰πàÂ¶Ç‰ΩïÂÆûÁé∞ÈÄèÊòéÂåñÁöÑËøúÁ®ãË∞ÉÁî®Âë¢Ôºü‰ªÄ‰πàÊ†∑ÁöÑÂÜÖÈÉ®Â∞ÅË£ÖÊâçËÉΩËÆ©Êàë‰ª¨ËßâÂæóÂÉè‰ª•Êú¨Âú∞Ë∞ÉÁî®ÊñπÂºèË∞ÉÁî®ËøúÁ®ãÊúçÂä°Âë¢ÔºüÂØπ‰∫éjavaÊù•ËØ¥Â∞±ÊòØ‰ΩøÁî®‰ª£ÁêÜ„ÄÇjava‰ª£ÁêÜÊúâ‰∏§ÁßçÊñπÂºèÔºö1Ôºâ jdk Âä®ÊÄÅ‰ª£ÁêÜÔºàÊé•Âè£‰ª£ÁêÜÔºâÔºõ2Ôºâcglib‰ª£ÁêÜÔºàÂ≠êÁ±ª‰ª£ÁêÜÔºâ„ÄÇÂ∞ΩÁÆ°Â≠óËäÇÁ†ÅÁîüÊàêÊñπÂºèÂÆûÁé∞ÁöÑ‰ª£ÁêÜÊõ¥‰∏∫Âº∫Â§ßÂíåÈ´òÊïàÔºå‰ΩÜ‰ª£Á†Å‰∏çÊòìÁª¥Êä§ÔºåÂ§ßÈÉ®ÂàÜÂÖ¨Âè∏ÂÆûÁé∞RPCÊ°ÜÊû∂Êó∂ËøòÊòØÈÄâÊã©Âä®ÊÄÅ‰ª£ÁêÜÊñπÂºè„ÄÇËøôÈÉ®ÂàÜ‰πüÂ∞Ü‰ºöÂú®ÂêéÁª≠ÁöÑÁ´†ËäÇ‰∏≠Â±ïÂºÄÊù•ËØ¥„ÄÇ RPCÂü∫Êú¨ÂéüÁêÜ‰∏äÈù¢ËØ¥Âà∞ÔºårpcÈúÄË¶ÅÂØπ‰∏Ä‰∫õËøúÁ®ãË∞ÉÁî®ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ËøõË°åÂ∞ÅË£Ö„ÄÇÊàë‰ª¨ËØ¥Âà∞Êúâ‰ª•‰∏ãÂá†‰∏™ÁÇπÔºö Â∫èÂàóÂåñ ÁºñËß£Á†Å ÂçèËÆÆ ÁΩëÁªú ‰ªéÂèëËµ∑ËøúÁ®ãË∞ÉÁî®Âà∞Êé•Êî∂Âà∞Êï∞ÊçÆËøîÂõûÁªìÊûúÔºåÂ§ßËá¥ËøáÁ®ãÊòØÔºö 1ÔºâÊúçÂä°Ê∂àË¥πÊñπÔºàclientÔºâË∞ÉÁî®‰ª•Êú¨Âú∞Ë∞ÉÁî®ÊñπÂºèË∞ÉÁî®ÊúçÂä°Ôºõ2Ôºâclient stubÊé•Êî∂Âà∞Ë∞ÉÁî®ÂêéË¥üË¥£Â∞ÜÊñπÊ≥ï„ÄÅÂèÇÊï∞Á≠âÁªÑË£ÖÊàêËÉΩÂ§üËøõË°åÁΩëÁªú‰º†ËæìÁöÑÊ∂àÊÅØ‰ΩìÔºõ3Ôºâclient stubÊâæÂà∞ÊúçÂä°Âú∞ÂùÄÔºåÂπ∂Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÊúçÂä°Á´ØÔºõ4Ôºâserver stubÊî∂Âà∞Ê∂àÊÅØÂêéËøõË°åËß£Á†ÅÔºõ5Ôºâserver stubÊ†πÊçÆËß£Á†ÅÁªìÊûúË∞ÉÁî®Êú¨Âú∞ÁöÑÊúçÂä°Ôºõ6ÔºâÊú¨Âú∞ÊúçÂä°ÊâßË°åÂπ∂Â∞ÜÁªìÊûúËøîÂõûÁªôserver stubÔºõ7Ôºâserver stubÂ∞ÜËøîÂõûÁªìÊûúÊâìÂåÖÊàêÊ∂àÊÅØÂπ∂ÂèëÈÄÅËá≥Ê∂àË¥πÊñπÔºõ8Ôºâclient stubÊé•Êî∂Âà∞Ê∂àÊÅØÔºåÂπ∂ËøõË°åËß£Á†ÅÔºõ9ÔºâÊúçÂä°Ê∂àË¥πÊñπÂæóÂà∞ÊúÄÁªàÁªìÊûú„ÄÇ ÈÇ£‰πàrpcÂ∞±Áõ∏ÂΩì‰∫éÂ∞Üstep2-step8ÁöÑÊ≠•È™§ËøõË°å‰∫ÜÂ∞ÅË£Ö„ÄÇ‰∏ãÈù¢ÂÄüÁî®‰∏ÄÂº†ÁΩë‰∏äÁöÑÂõæÁâáÊù•Â∏ÆÂä©Êàë‰ª¨ÁêÜËß£Ëøô‰∏™ËøáÁ®ã„ÄÇ RPCÊ®°ÂûãÂØπ‰∫é‰∏äÂõæÔºåÊàë‰ª¨ËøõË°åËøõ‰∏ÄÊ≠•ÁöÑÊãÜËß£ÂæóÂà∞ÔºàÊù•Ëá™ÁΩëÁªúÔºâÔºö RPC ÊúçÂä°Á´ØÈÄöËøá RpcServer ÂéªÊö¥Èú≤ÊúçÂä°Êé•Âè£ÔºåËÄåÂÆ¢Êà∑Á´ØÈÄöËøá RpcClient ÂéªËé∑ÂèñÊúçÂä°Êé•Âè£„ÄÇÂÆ¢Êà∑Á´ØÂÉèË∞ÉÁî®Êú¨Âú∞ÊñπÊ≥ï‰∏ÄÊ†∑ÂéªË∞ÉÁî®ËøúÁ®ãÊé•Âè£ÊñπÊ≥ïÔºåRPC Ê°ÜÊû∂Êèê‰æõÊé•Âè£ÁöÑ‰ª£ÁêÜÂÆûÁé∞ÔºåÂÆûÈôÖÁöÑË∞ÉÁî®Â∞ÜÂßîÊâòÁªô‰ª£ÁêÜ RpcProxy„ÄÇ‰ª£ÁêÜÂ∞ÅË£ÖË∞ÉÁî®‰ø°ÊÅØÂπ∂Â∞ÜË∞ÉÁî®ËΩ¨‰∫§Áªô RpcInvoker ÂéªÂÆûÈôÖÊâßË°å„ÄÇÂú®ÂÆ¢Êà∑Á´ØÁöÑ RpcInvoker ÈÄöËøáËøûÊé•Âô® RpcConnector ÂéªÁª¥ÊåÅ‰∏éÊúçÂä°Á´ØÁöÑÈÄöÈÅì RpcChannelÔºåÂπ∂‰ΩøÁî® RpcProtocol ÊâßË°åÂçèËÆÆÁºñÁ†ÅÔºàencodeÔºâÂπ∂Â∞ÜÁºñÁ†ÅÂêéÁöÑËØ∑Ê±ÇÊ∂àÊÅØÈÄöËøáÈÄöÈÅìÂèëÈÄÅÁªôÊúçÂä°Á´Ø„ÄÇRPC ÊúçÂä°Á´ØÊé•Êî∂Âô® RpcAcceptorÊé•Êî∂ÂÆ¢Êà∑Á´ØÁöÑË∞ÉÁî®ËØ∑Ê±ÇÔºåÂêåÊ†∑‰ΩøÁî® RpcProtocol ÊâßË°åÂçèËÆÆËß£Á†ÅÔºàdecodeÔºâ„ÄÇËß£Á†ÅÂêéÁöÑË∞ÉÁî®‰ø°ÊÅØ‰º†ÈÄíÁªô RpcProcessor ÂéªÊéßÂà∂Â§ÑÁêÜË∞ÉÁî®ËøáÁ®ãÔºåÊúÄÂêéÂÜçÂßîÊâòË∞ÉÁî®Áªô RpcInvoker ÂéªÂÆûÈôÖÊâßË°åÂπ∂ËøîÂõûË∞ÉÁî®ÁªìÊûú„ÄÇ ÈÄöËøá‰∏äËø∞ÂàÜÊûêÂèØÁü•ÔºåËøôÈáåÈù¢ÂåÖÊã¨‰ª•‰∏ãÊ†∏ÂøÉÁªÑ‰ª∂Ôºö Áî®‰∫éÊö¥Èú≤ÊúçÂä°Êé•Âè£ÁöÑRpcServer Áî®‰∫éÂèëÁé∞ÊúçÂä°Êé•Âè£ÁöÑRpcClient ËøúÁ®ãÊé•Âè£ÁöÑ‰ª£ÁêÜÂÆûÁé∞RpcProxy Ë¥üË¥£ÂçèËÆÆÁºñËß£Á†ÅÁöÑRpcProtocolÔºàÂÆûÈôÖÁöÑrpcÊ°ÜÊû∂‰∏≠‰∏ÄËà¨‰ºöÊèê‰æõÂ§öÁßç‰∏çÂêåÁöÑÂÆûÁé∞Ôºâ ÁΩëÁªúËøûÊé•Âô®Ôºà‰πãÂâçÁúãËøá‰∏ÄÁØáÊñáÁ´†ËØ¥9‰∏™ÁªÑ‰ª∂ÔºåÂØπ‰∫éÂí±‰ª¨Ëøô‰∏™Êù•ËØ¥ÔºåÈÉ®ÂàÜÊ®°ÂùóÂèØ‰ª•ÈõÜÊàêÂú®clientÂíåserver‰∏≠Ôºâ Â∏∏ËßÅÁöÑRPCÊ°ÜÊû∂ÁõÆÂâçÂ∏∏ËßÅÁöÑÂàÜÂ∏ÉÂºèRPCÊ°ÜÊû∂Êúâ‰ª•‰∏ãÂá†‰∏™Ôºö dubboÈòøÈáåÂ∑¥Â∑¥ÂÖ¨Âè∏ÂºÄÊ∫êÁöÑ‰∏Ä‰∏™JavaÈ´òÊÄßËÉΩ‰ºòÁßÄÁöÑÊúçÂä°Ê°ÜÊû∂Ôºå‰ΩøÂæóÂ∫îÁî®ÂèØÈÄöËøáÈ´òÊÄßËÉΩÁöÑ RPC ÂÆûÁé∞ÊúçÂä°ÁöÑËæìÂá∫ÂíåËæìÂÖ•ÂäüËÉΩÔºåÂèØ‰ª•Âíå SpringÊ°ÜÊû∂Êó†ÁºùÈõÜÊàê motanÊñ∞Êµ™ÂæÆÂçöÂºÄÊ∫êÁöÑ‰∏Ä‰∏™Java Ê°ÜÊû∂„ÄÇÂÆÉËØûÁîüÁöÑÊØîËæÉÊôöÔºåËµ∑‰∫é2013Âπ¥Ôºå2016Âπ¥5ÊúàÂºÄÊ∫ê„ÄÇMotan Âú®ÂæÆÂçöÂπ≥Âè∞‰∏≠Â∑≤ÁªèÂπøÊ≥õÂ∫îÁî®ÔºåÊØèÂ§©‰∏∫Êï∞Áôæ‰∏™ÊúçÂä°ÂÆåÊàêËøëÂçÉ‰∫øÊ¨°ÁöÑË∞ÉÁî®„ÄÇ rpcxGoËØ≠Ë®ÄÁîüÊÄÅÂúàÁöÑDubboÔºå ÊØîDubboÊõ¥ËΩªÈáèÔºåÂÆûÁé∞‰∫ÜDubboÁöÑËÆ∏Â§öÁâπÊÄßÔºåÂÄüÂä©‰∫éGoËØ≠Ë®Ä‰ºòÁßÄÁöÑÂπ∂ÂèëÁâπÊÄßÂíåÁÆÄÊ¥ÅËØ≠Ê≥ïÔºåÂèØ‰ª•‰ΩøÁî®ËæÉÂ∞ëÁöÑ‰ª£Á†ÅÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁöÑRPCÊúçÂä°„ÄÇ gRPCGoogleÂºÄÂèëÁöÑÈ´òÊÄßËÉΩ„ÄÅÈÄöÁî®ÁöÑÂºÄÊ∫êRPCÊ°ÜÊû∂Ôºå‰∏ªË¶ÅÈù¢ÂêëÁßªÂä®Â∫îÁî®ÂºÄÂèëÂπ∂Âü∫‰∫éHTTP/2ÂçèËÆÆÊ†áÂáÜËÄåËÆæËÆ°ÔºåÂü∫‰∫éProtoBuf(Protocol Buffers)Â∫èÂàóÂåñÂçèËÆÆÂºÄÂèëÔºå‰∏îÊîØÊåÅ‰ºóÂ§öÂºÄÂèëËØ≠Ë®Ä„ÄÇÊú¨Ë∫´ÂÆÉ‰∏çÊòØÂàÜÂ∏ÉÂºèÁöÑÔºåÊâÄ‰ª•Ë¶ÅÂÆûÁé∞‰∏äÈù¢ÁöÑÊ°ÜÊû∂ÁöÑÂäüËÉΩÈúÄË¶ÅËøõ‰∏ÄÊ≠•ÁöÑÂºÄÂèë„ÄÇ thriftApacheÁöÑ‰∏Ä‰∏™Ë∑®ËØ≠Ë®ÄÁöÑÈ´òÊÄßËÉΩÁöÑÊúçÂä°Ê°ÜÊû∂ RPC‰∏éMQMQ(message queue)Ê∂àÊÅØÈòüÂàóÔºå‰ªéÊüêÁßçÁ®ãÂ∫¶‰∏äÊù•ËØ¥ÔºåÂêåÊ†∑ÂèØ‰ª•ÂÆûÁé∞RPCÁöÑÂäüËÉΩ„ÄÇ‰ªéÂäüËÉΩÁâπÁÇπ‰∏äÊù•ËØ¥ÔºåMQÂèØ‰ª•ÊääÊ∂àÊÅØÂ≠òÂÇ®ÔºåËÄåRPC‰∏çË°å„ÄÇÂÖ≥‰∫éMQÂíåRPCÂÅö‰∫Ü‰ª•‰∏ãÁÆÄÂçïÁöÑÂØπÊØîÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÊÄªÁªìÊú¨ÊñáÂØπRPCÁöÑÂü∫Êú¨ÂéüÁêÜ„ÄÅÁâπÁÇπ‰ª•ÂèäÂü∫Êú¨ÁªÑ‰ª∂ËøõË°å‰∫ÜÁÆÄÂçïÁöÑËØ¥ÊòéÔºåËÆ©Êàë‰ª¨ÂèØ‰ª•ÂØπRPCÊúâ‰∏Ä‰∏™Âü∫Êú¨ÁöÑ‰∫ÜËß£„ÄÇÂÖ≥‰∫éÂ∏∏ËßÅÁöÑRPCÊ°ÜÊû∂‰πüÂÅö‰∫ÜÂü∫Êú¨ËÆ§ËØÜÔºåÂØπ‰∫éËøô‰∫õ‰ºòÁßÄÁöÑÊ°ÜÊû∂ÔºåÊàë‰ª¨Âú®ÂÆûÁé∞Êàë‰ª¨Ëá™Â∑±RPCÊó∂ÂèØ‰ª•ÂÄüÈâ¥‰∏Ä‰∏ãËøô‰∫õÊû∂ÊûÑÈáåÁöÑ‰∏Ä‰∫õÊ®°Âºè‰ª•ÂèäÊäÄÊúØ„ÄÇÊúÄÂêéËØ¥Êòé‰∫Ü‰∏ã‰∏∫‰ªÄ‰πàÊàë‰ª¨‰ºöÂú®ÂàÜÂ∏ÉÂºèÊû∂ÊûÑ‰∏≠Ë¶Å‰ΩøÁî®RPCËÄå‰∏çÊòØMQÔºåÂØπ‰∫éMQÊù•ËØ¥ÔºåÂú®Â§ÑÁêÜÂêåÊ≠•Ë∞ÉÁî®Êó†Ê≥ïÊª°Ë∂≥ÂÆûÈôÖÁöÑÁîü‰∫ßÈúÄÊ±ÇÔºåËÄåRPCÊâçÊõ¥Âä†ÈÄÇÂêàÂàÜÂ∏ÉÂºèÂ∫îÁî®ÁöÑÂÆûÈôÖÈúÄË¶Å„ÄÇ]]></content>
      <categories>
        <category>rpc</category>
      </categories>
      <tags>
        <tag>rpc</tag>
        <tag>dubbo</tag>
        <tag>ÂæÆÊúçÂä°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫éMybatis‰∏≠SQLËØ≠Âè•ÁöÑÊï¥ÁêÜ]]></title>
    <url>%2F2018%2F11%2F10%2Fmybatisone%2F</url>
    <content type="text"><![CDATA[ÈöèÁùÄ‰∏öÂä°ÁöÑÂèëÂ±ïÔºåË∂äÊù•Ë∂äÂ§öÁöÑÂ∫îÁî®Á≥ªÁªüÈÉΩ‰ªé‰∏Ä‰∏™Â§ßÁöÑÁ≥ªÁªüÂàÜÊãÜÊàêÂ§ö‰∏™Â∞èÁöÑÁ≥ªÁªüÔºåÂêÑ‰∏™Á≥ªÁªü‰πãÈó¥ÈÄöËøá‰∏ÄÂÆöÁöÑÈÄö‰ø°ÂçèËÆÆËøõË°åÊï∞ÊçÆ‰∫§Êç¢„ÄÇËøôÊ†∑Â∞±‰ºöÂØºËá¥‰∏Ä‰∫õÂ∞èÁöÑÂ∫îÁî®Á≥ªÁªüËá™Â∑±‰∏çÁî®ÂéªËøõË°åÊï∞ÊçÆÂ∫ìÁöÑÊìç‰ΩúÔºåÂè™ÈúÄË¶ÅËøõË°å‰∏Ä‰∫õrpcË∞ÉÁî®ÊàñËÄÖÁºìÂ≠òÂ∞±ÂèØ‰ª•ÊãøÂà∞Êï∞ÊçÆËøõË°åÂ±ïÁ§∫„ÄÇÊàë‰πãÂâçÂèÇ‰∏éÁöÑ‰∏Ä‰∏™È°πÁõÆÂ∞±ÊòØËøôÊ†∑ÁöÑÊÉÖÂÜµÔºåËÄåÊàë‰πüÊòØÂ∞ÜËøë7‰∏™Â§öÊúàÁöÑÊó∂Èó¥Ê≤°ÊúâÂÜôËøá‰∏ÄË°åSQL„ÄÇ ËøëÊúüÂèÇ‰∏éÁöÑ‰∏Ä‰∏™È°πÁõÆÁöÑÊï∞ÊçÆÂ§ßÂ§öÈÉΩÂ∏ÇÂü∫‰∫éÊï∞ÊçÆÂ∫ìÊù•ËøõË°åÊï∞ÊçÆ‰∫§‰∫íÁöÑÔºåÊâÄ‰ª•ÂÖç‰∏ç‰∫ÜÁöÑË¶ÅÂÜôÂ§ßÈáèÁöÑSQLÔºåÊâÄ‰ª•Êú¨ÁØáÂ∞±ÊÄªÁªì‰∏Ä‰∏ã‰∏Ä‰∫õSQLÁöÑÂü∫Êú¨ÂÜôÊ≥ïÔºå‰ª•Â§áÂêéÁî®„ÄÇ Âª∫Ë°®12345CREATE TABLE IF NOT EXISTS `user_test` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Ëá™Â¢ûÈïøid', `user_name` varchar(128) NOT NULL COMMENT 'Áî®Êà∑Âêç', PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='Áî®Êà∑Ë°®'; Êü•ËØ¢ ÁÆÄÂçïÁöÑÊü•ËØ¢ 123&lt;select id="queryUserByName" resultMap="userMap" parameterType="java.lang.String"&gt; SELECT * FROM user_test WHERE user_name = #&#123;userName&#125; &lt;/select&gt; ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂ¶ÇÊûúËøôÈáå‰∏çÊåáÂÆöparameterTypeÔºåÂàôÈªòËÆ§‰ºöËØÜÂà´Â§ÑÁêÜÔºõÂ¶ÇÊûúÊåáÂÆö‰∫ÜÁ±ªÂûãÔºåÂàô‰º†ÂÖ•ÁöÑÂÄºÂ∞±ÈúÄË¶ÅÂíåÂΩìÂâçÊåáÂÆöÁöÑÁ±ªÂûã‰øùÊåÅ‰∏ÄËá¥Ôºå‰∏çÁÑ∂Â∞±‰ºöÂá∫Áé∞Êï∞ÊçÆÁ±ªÂûãËΩ¨Êç¢ÂºÇÂ∏∏„ÄÇ ÁÆÄÂçïÂàÜÈ°µÊü•ËØ¢ 1234567&lt;select id="queryUsersList" resultMap="userMap"&gt; SELECT * FROM user_test WHERE 1=1 &lt;if test="keyword != null and keyword != ''" &gt; AND user_name LIKE concat('%',#&#123;keyword&#125;,'%') &lt;/if&gt; LIMIT #&#123;currentPage&#125;,#&#123;pageSize&#125;&lt;/select&gt; left join app_infoË°®Âíåapp_verionË°®ÂàÜÂà´Â≠òÂÇ®ÁöÑÊòØÂ∫îÁî®‰ø°ÊÅØÂíåÂ∫îÁî®ÁâàÊú¨‰ø°ÊÅØ„ÄÇÁé∞Âú®Ë¶ÅÊ†πÊçÆappIdÂíåversionIdÊü•Âá∫‰∏Ä‰∏™Â∫îÁî®ÁöÑÂÖ∑‰Ωì‰ø°ÊÅØ„ÄêÂåÖÊã¨‰ø°ÊÅØ‰ø°ÊÅØÂíåÁâàÊú¨‰ø°ÊÅØ„Äë 12345678&lt;select id=&quot;getAppDetail&quot; resultMap=&quot;appDeatilMap&quot;&gt; select m.id id, m.app_name appName, n.version version, from app_info m LEFT JOIN app_version n ON m.id = n.app_id where m.id = #&#123;appId&#125; and n.id = #&#123;versionId&#125; &lt;/select&gt; Êü•ËØ¢Êù°‰ª∂ÊòØlist 123456789101112131415&lt;select id=&quot;queryAppByAppNames&quot; resultMap=&quot;AppMap&quot; parameterType=&quot;java.util.List&quot;&gt; select a.app_name appName, b.version version from starter_info a,starter_version b where a.id = b.app_id and a.id in ( select id from app_info where app_name in &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt; #&#123;item&#125; &lt;/foreach&gt; )&lt;/select&gt; Êõ¥Êñ∞ ÁÆÄÂçïÁöÑÊõ¥Êñ∞ 1234567&lt;update id="updateApp" parameterType="java.util.List"&gt; UPDATE app_info SET app_name = #&#123;appName&#125; WHERE app_id = #&#123;appId&#125;&lt;/update&gt; ÊâπÈáèÊõ¥Êñ∞ ÊúâËøôÊ†∑‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÊää app_infoË°®‰∏≠id ‰∏∫1Ôºå2Ôºå3ÁöÑappÁöÑapp_nameÊîπ‰∏∫appName1ÔºåappName2ÔºåappName3; ‰ΩøÁî® case ..when ..then ËøôÊ†∑ÁöÑËØ≠Ê≥ïÁªìÊûÑÊù•ÂÆåÊàêÔºö case ÊòØÂΩìÂâçÁöÑÊù°‰ª∂ÔºåwhenË°®Á§∫Êù°‰ª∂ÂÄºÔºåthenÂêéÈù¢ÊòØÂΩìÂâçÁõÆÂâçÊõ¥Êñ∞Â≠óÊÆµÁöÑÂÄºÔºõ ‰∏ãÈù¢ÁöÑËØ¥ÊòéÔºöÂΩìÂâçid=#{item.appId}Êó∂,app_name=#{item.appName} 1234567891011&lt;update id="updateApps" parameterType="java.util.List"&gt; UPDATE app_info set app_name = &lt;foreach collection="applList" item="item" index="index" separator=" " open="case ID" close="end"&gt; when #&#123;item.appId,jdbcType=INTEGER&#125; then #&#123;item.appName,jdbcType=INTEGER&#125; &lt;/foreach&gt; where id in &lt;foreach collection="appList" index="index" item="item" separator="," open="(" close=")"&gt; #&#123;item.appId,jdbcType=INTEGER&#125; &lt;/foreach&gt;&lt;/update&gt; OKÔºåÁé∞Âú®‰∫éËøôÊ†∑ÁöÑÈúÄË¶ÅÔºö Ê†πÊçÆÂ∫îÁî®Á±ªÂûãÁöÑ‰∏çÂêåÔºåÊõ¥Êñ∞‰∏çÂêåÁöÑËøêË°åÁéØÂ¢ÉÈÖçÁΩÆÔºõ 123456789101112131415161718192021222324252627282930313233&#123; [ &#123; &quot;appType&quot;:&quot;applet&quot;, &quot;cpu&quot;:5, &quot;memory&quot;:4, &quot;card&quot;:3, &quot;nums&quot;:2, &quot;network&quot;:1, &quot;isInUse&quot;:1 &#125;, &#123; &quot;appType&quot;:&quot;bs&quot;, &quot;cpu&quot;:5, &quot;memory&quot;:4, &quot;card&quot;:3, &quot;nums&quot;:2, &quot;network&quot;:1, &quot;isInUse&quot;:1 &#125;, &#123; &quot;appType&quot;:&quot;cs&quot;, &quot;cpu&quot;:5, &quot;memory&quot;:4, &quot;card&quot;:3, &quot;nums&quot;:2, &quot;network&quot;:1, &quot;isInUse&quot;:1 &#125;, //ÊúâÂá†‰∏™ÊîæÂá†‰∏™ ]&#125; trimÂ±ûÊÄßËØ¥Êòé 1.prefix,suffix Ë°®Á§∫Âú®trimÊ†áÁ≠æÂåÖË£πÁöÑÈÉ®ÂàÜÁöÑÂâçÈù¢ÊàñËÄÖÂêéÈù¢Ê∑ªÂä†ÂÜÖÂÆπ 2.Â¶ÇÊûúÂêåÊó∂ÊúâprefixOverrides,suffixOverrides Ë°®Á§∫‰ºöÁî®prefix,suffixË¶ÜÁõñOverrides‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇ 3.Â¶ÇÊûúÂè™ÊúâprefixOverrides,suffixOverrides Ë°®Á§∫Âà†Èô§ÂºÄÂ§¥ÁöÑÊàñÁªìÂ∞æÁöÑxxxOveridesÊåáÂÆöÁöÑÂÜÖÂÆπ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;update id=&quot;updateBatchApp&quot; parameterType=&quot;java.util.List&quot;&gt; UPDATE app_info &lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt; &lt;trim prefix=&quot;cpu = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; &lt;if test=&quot;item != null&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.cpu&#125; &lt;/if&gt; &lt;/foreach&gt; &lt;/trim&gt; &lt;trim prefix=&quot;memory = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; &lt;if test=&quot;item != null&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.memory&#125; &lt;/if&gt; &lt;/foreach&gt; &lt;/trim&gt; &lt;trim prefix=&quot;card = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.card&#125; &lt;/foreach&gt; &lt;/trim&gt; &lt;trim prefix=&quot;nums = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.nums&#125; &lt;/foreach&gt; &lt;/trim&gt; &lt;trim prefix=&quot;network = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.network&#125; &lt;/foreach&gt; &lt;/trim&gt; &lt;trim prefix=&quot;is_in_use = case&quot; suffix=&quot;end,&quot;&gt; &lt;foreach collection=&quot;modelList&quot; item=&quot;item&quot; index=&quot;index&quot;&gt; when app_type =#&#123;item.appType&#125; then #&#123;item.isInUse&#125; &lt;/foreach&gt; &lt;/trim&gt; &lt;/trim&gt; where app_id = #&#123;appId&#125;&lt;/update&gt; ÂÖ≥‰∫éÊÄßËÉΩÈóÆÈ¢òÊ≤°ÂÅöÁ†îÁ©∂Ôºå‰πãÂâçÁúãËøáÂÖ≥‰∫é‰∏çÂêåÊõ¥Êñ∞ËØ≠Âè•ÂÜôÊ≥ïÁöÑ‰∏ÄÁØáÊÄßËÉΩÁöÑÂàÜÊûêÔºåÂ§ßÂÆ∂ÊúâÂÖ¥Ë∂£ÂèØ‰ª•Áúã‰∏ãÔºöÊâπÈáèÊõ¥Êñ∞Êï∞ÊçÆ‰∏§ÁßçÊñπÊ≥ïÊïàÁéáÂØπÊØî Âà†Èô§ ÁÆÄÂçïÂà†Èô§ 1DELETE FROM app_info where id = #&#123;id&#125; ÊâπÈáèÂà†Èô§ 123456&lt;delete id=&quot;deleteApps&quot; parameterType=&quot;java.util.List&quot;&gt; DELETE FROM app_info where app_id in &lt;foreach item=&quot;item&quot; collection=&quot;appIds&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt; #&#123;item&#125; &lt;/foreach&gt;&lt;/delete&gt; Êó∂Èó¥Â≠óÁ¨¶‰∏≤ order by‰∏çÁü•ÈÅìÂêÑ‰ΩçÊòØÂê¶ÈÅáÂà∞ËøáÔºå‰πãÂâçÁöÑÂâçËæà‰ª¨Âú®È°πÁõÆ‰∏≠Â∞ÜÊó∂Èó¥Áî®Â≠óÁ¨¶‰∏≤ÁöÑÊñπÂºèÂ≠òÂú®DB‰∏≠ÔºåËÄå‰∏çÊòØ‰ΩøÁî®DATE,ÁÑ∂ÂêéÊúâ‰∏ÄÂ§©‰Ω†ÁöÑÂâçËæàËµ∞‰∫ÜÔºå‰Ω†ÁöÑ‰∏ªÁÆ°ËØ¥Êü•Âá∫Êù•ÊåâÊó∂Èó¥Êù•ÊéíÂ∫è‚Ä¶.ÔºõÂëµÂëµÔºåÂ•ΩÔºÅÔºÅÔºÅ 1234567&lt;select id=&quot;querySysParamList&quot; resultMap=&quot;sysParamDO&quot;&gt; SELECT * FROM app_info WHERE 1=1 &lt;if test=&quot;keyword != null and keyword != &apos;&apos;&quot; &gt; AND app_name LIKE concat(&apos;%&apos;,#&#123;keyword&#125;,&apos;%&apos;) &lt;/if&gt; ORDER BY DATE_FORMAT(update_time,&apos;%H %k %I %r %T %S %w&apos;) DESC&lt;/select&gt; Â≠óÁ¨¶‰∏≤ËΩ¨‰∏∫Êó•ÊúüÊ†ºÂºèSELECT DATE_FORMAT(‚Äò2011-09-20 08:30:45‚Äô, ‚Äò%Y-%m-%d %H:%i:%S‚Äô); ÊääÊó•ÊúüËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤Ê†ºÂºèSELECT DATE_FORMAT(NOW(), ‚Äò%Y-%m-%d %H:%i:%S‚Äô); ÈôÑÔºö 123456789101112131415161718192021222324252627%M ÊúàÂêçÂ≠ó(January‚Ä¶‚Ä¶December) %W ÊòüÊúüÂêçÂ≠ó(Sunday‚Ä¶‚Ä¶Saturday) %D ÊúâËã±ËØ≠ÂâçÁºÄÁöÑÊúà‰ªΩÁöÑÊó•Êúü(1st, 2nd, 3rd, Á≠âÁ≠â„ÄÇÔºâ %Y Âπ¥, Êï∞Â≠ó, 4 ‰Ωç %y Âπ¥, Êï∞Â≠ó, 2 ‰Ωç %a Áº©ÂÜôÁöÑÊòüÊúüÂêçÂ≠ó(Sun‚Ä¶‚Ä¶Sat) %d Êúà‰ªΩ‰∏≠ÁöÑÂ§©Êï∞, Êï∞Â≠ó(00‚Ä¶‚Ä¶31) %e Êúà‰ªΩ‰∏≠ÁöÑÂ§©Êï∞, Êï∞Â≠ó(0‚Ä¶‚Ä¶31) %m Êúà, Êï∞Â≠ó(01‚Ä¶‚Ä¶12) %c Êúà, Êï∞Â≠ó(1‚Ä¶‚Ä¶12) %b Áº©ÂÜôÁöÑÊúà‰ªΩÂêçÂ≠ó(Jan‚Ä¶‚Ä¶Dec) %j ‰∏ÄÂπ¥‰∏≠ÁöÑÂ§©Êï∞(001‚Ä¶‚Ä¶366) %H Â∞èÊó∂(00‚Ä¶‚Ä¶23) %k Â∞èÊó∂(0‚Ä¶‚Ä¶23) %h Â∞èÊó∂(01‚Ä¶‚Ä¶12) %I Â∞èÊó∂(01‚Ä¶‚Ä¶12) %l Â∞èÊó∂(1‚Ä¶‚Ä¶12) %i ÂàÜÈíü, Êï∞Â≠ó(00‚Ä¶‚Ä¶59) %r Êó∂Èó¥,12 Â∞èÊó∂(hh:mm:ss [AP]M) %T Êó∂Èó¥,24 Â∞èÊó∂(hh:mm:ss) %S Áßí(00‚Ä¶‚Ä¶59) %s Áßí(00‚Ä¶‚Ä¶59) %p AMÊàñPM %w ‰∏Ä‰∏™ÊòüÊúü‰∏≠ÁöÑÂ§©Êï∞(0=Sunday ‚Ä¶‚Ä¶6=Saturday Ôºâ %U ÊòüÊúü(0‚Ä¶‚Ä¶52), ËøôÈáåÊòüÊúüÂ§©ÊòØÊòüÊúüÁöÑÁ¨¨‰∏ÄÂ§© %u ÊòüÊúü(0‚Ä¶‚Ä¶52), ËøôÈáåÊòüÊúü‰∏ÄÊòØÊòüÊúüÁöÑÁ¨¨‰∏ÄÂ§© %% ‰∏Ä‰∏™ÊñáÂ≠ó‚Äú%‚Äù„ÄÇ ÂÖàËÆ∞ÂΩïËøô‰∫õÔºåÊúâÂùëÂÜçË°•ÔºÅ ÂèÇËÄÉÔºöhttp://www.runoob.com/sql/sql-tutorial.html]]></content>
      <categories>
        <category>mybatis</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
        <tag>sql</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxÂèçÂêë‰ª£ÁêÜÂíåË¥üËΩΩÂùáË°°Á≠ñÁï•ÂÆûÊàòÊ°à‰æã]]></title>
    <url>%2F2018%2F11%2F10%2Fnginxone%2F</url>
    <content type="text"><![CDATA[Ê¨¢ËøéÂÖ≥Ê≥®Ôºöglmapper_2018 ÂºïË®ÄÂÖàÊù•Áúã‰∏ãnginxÂú®webÊúçÂä°Âô®ÊéíÂêç‰∏äÁöÑË∂ãÂäøÔºö Â≠òÂú®Âç≥ÂêàÁêÜÔºåÈÇ£‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®nginxÂë¢ÔºüËøôÂæóÁúãÁúãnginxËÉΩÂ∏ÆÊàë‰ª¨ÂÅö‰∫õ‰ªÄ‰πà„ÄÇ È¶ñÂÖàÔºånginxËÉΩÂÅöÂèçÂêë‰ª£ÁêÜ„ÄêÂÖ≥‰∫éÂèçÂêë‰ª£ÁêÜÂíåÊ≠£Âêë‰ª£ÁêÜÊ≠§Â§Ñ‰∏çÂÅöËØ¥Êòé‰∫ÜÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂ∞è‰ºô‰º¥Ëá™Ë°åË∞∑Ê≠å„ÄëÔºõÊØîÊñπËØ¥ÔºåÊàëÊÉ≥Âú®Êú¨Âú∞‰ΩøÁî® www.glmapper1.com ÁöÑÂüüÂêçÂéªËÆøÈóÆwww.taobao.com„ÄÇÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøánginxÂéªÂÆûÁé∞„ÄÇ ÂÜçËÄÖÔºånginxËÉΩÂÆûÁé∞Ë¥üËΩΩÂùáË°°Ôºå‰ªÄ‰πàÊòØË¥üËΩΩÂùáË°°Âë¢ÔºüÂ∞±ÊòØËØ¥Â∫îÁî®ÈÉ®ÁΩ≤Âú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºå‰ΩÜÊòØÈÄöËøáÁªü‰∏ÄÁöÑÂüüÂêçËøõÂÖ•ÔºånginxÂàôÂØπËØ∑Ê±ÇËøõË°åÂàÜÂèëÔºåÂ∞ÜËØ∑Ê±ÇÂàÜÂèëÂà∞‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÂéªÂ§ÑÁêÜÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊúâÊïàÁöÑÂáèËΩª‰∫ÜÂçïÂè∞ÊúçÂä°Âô®ÁöÑÂéãÂäõ„ÄÇ Âú®‰∏äÈù¢Ëøô‰∏§ÁßçÊÉÖÂÜµ‰∏ãÔºånginxÊúçÂä°Âô®ÁöÑ‰ΩúÁî®ÈÉΩÂè™ÊòØ‰Ωú‰∏∫ÂàÜÂèëÊúçÂä°Âô®ÔºåÁúüÊ≠£ÁöÑÂÜÖÂÆπÔºåÊàë‰ª¨ÂèØ‰ª•ÊîæÂú®ÂÖ∂‰ªñÁöÑÊúçÂä°Âô®‰∏äÔºåËøôÊ†∑Êù•ÔºåËøòËÉΩËµ∑Âà∞‰∏ÄÂ±ÇÂÆâÂÖ®ÈöîÂ£ÅÁöÑ‰ΩúÁî®Ôºånginx‰Ωú‰∏∫ÈöîÁ¶ªÂ±Ç„ÄÇ Ëß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢ò ÂêåÊ∫êÔºöURLÁî±ÂçèËÆÆ„ÄÅÂüüÂêç„ÄÅÁ´ØÂè£ÂíåË∑ØÂæÑÁªÑÊàêÔºåÂ¶ÇÊûú‰∏§‰∏™URLÁöÑÂçèËÆÆ„ÄÅÂüüÂêçÂíåÁ´ØÂè£Áõ∏ÂêåÔºåÂàôË°®Á§∫‰ªñ‰ª¨ÂêåÊ∫ê„ÄÇ ÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•ÔºöÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•ÔºåÈôêÂà∂‰∫ÜÊù•Ëá™‰∏çÂêåÊ∫êÁöÑ‚Äùdocument‚ÄùÊàñËÑöÊú¨ÔºåÂØπÂΩìÂâç‚Äùdocument‚ÄùËØªÂèñÊàñËÆæÁΩÆÊüê‰∫õÂ±ûÊÄß„ÄÇ‰ªé‰∏Ä‰∏™Âüü‰∏äÂä†ËΩΩÁöÑËÑöÊú¨‰∏çÂÖÅËÆ∏ËÆøÈóÆÂè¶Â§ñ‰∏Ä‰∏™ÂüüÁöÑÊñáÊ°£Â±ûÊÄß„ÄÇ Âõ†‰∏∫nginxÂíåtomcat‰∏çËÉΩÂÖ±Áî®Âêå‰∏ÄÁ´ØÂè£,url‰∏ÄÊ†∑ÔºåÁ´ØÂè£‰∏çÂêåÔºåËøôÊ†∑Â∞±‰ºöÊúâË∑®ÂüüÈóÆÈ¢ò„ÄÇ PSÔºöÁÇπÂà∞‰∏∫Ê≠¢ÔºåËøôÈáåÊú¨Ê¨°ÊµãËØïÊ≤°ÊúâÊ∂âÂèäÔºåÂ∞±‰∏çÂ¶ÑËá™Ëè≤ËñÑ‰∫ÜÔºÅÔºÅ! ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÈÖçÁΩÆÊñá‰ª∂‰∏ªË¶ÅÁî±ÂõõÈÉ®ÂàÜÁªÑÊàêÔºö main(ÂÖ®Âå∫ËÆæÁΩÆ) server(‰∏ªÊú∫ÈÖçÁΩÆ) http(ÊéßÂà∂ÁùÄnginx httpÂ§ÑÁêÜÁöÑÊâÄÊúâÊ†∏ÂøÉÁâπÊÄß) location(URLÂåπÈÖçÁâπÂÆö‰ΩçÁΩÆËÆæÁΩÆ)„ÄÇ upstream(Ë¥üËΩΩÂùáË°°ÊúçÂä°Âô®ËÆæÁΩÆ) ‰∏ãÈù¢‰ª•ÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂Êù•ËØ¥Êòé‰∏ãÂÖ∑‰ΩìÁöÑÈÖçÁΩÆÊñá‰ª∂Â±ûÊÄßÂê´‰πâÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151#NginxÁöÑworkerËøõÁ®ãËøêË°åÁî®Êà∑‰ª•ÂèäÁî®Êà∑ÁªÑ#user nobody;#NginxÂºÄÂêØÁöÑËøõÁ®ãÊï∞worker_processes 1;#ÂÆö‰πâÂÖ®Â±ÄÈîôËØØÊó•ÂøóÂÆö‰πâÁ±ªÂûãÔºå[debug|info|notice|warn|crit]#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#ÊåáÂÆöËøõÁ®ãIDÂ≠òÂÇ®Êñá‰ª∂‰ΩçÁΩÆ#pid logs/nginx.pid;#‰∫ã‰ª∂ÈÖçÁΩÆevents &#123; #use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; #epollÊ®°ÂûãÊòØLinuxÂÜÖÊ†∏‰∏≠ÁöÑÈ´òÊÄßËÉΩÁΩëÁªúI/OÊ®°ÂûãÔºåÂ¶ÇÊûúÂú®mac‰∏äÈù¢ÔºåÂ∞±Áî®kqueueÊ®°Âûã„ÄÇ use kqueue; #ÊØè‰∏™ËøõÁ®ãÂèØ‰ª•Â§ÑÁêÜÁöÑÊúÄÂ§ßËøûÊé•Êï∞ÔºåÁêÜËÆ∫‰∏äÊØèÂè∞nginxÊúçÂä°Âô®ÁöÑÊúÄÂ§ßËøûÊé•Êï∞‰∏∫worker_processes*worker_connections„ÄÇÁêÜËÆ∫ÂÄºÔºöworker_rlimit_nofile/worker_processes worker_connections 1024;&#125;#httpÂèÇÊï∞http &#123; #Êñá‰ª∂Êâ©Â±ïÂêç‰∏éÊñá‰ª∂Á±ªÂûãÊò†Â∞ÑË°® include mime.types; #ÈªòËÆ§Êñá‰ª∂Á±ªÂûã default_type application/octet-stream; #Êó•ÂøóÁõ∏ÂÖ≥ÂÆö‰πâ #log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; # &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; # &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; #ËøûÊé•Êó•ÂøóÁöÑË∑ØÂæÑÔºåÊåáÂÆöÁöÑÊó•ÂøóÊ†ºÂºèÊîæÂú®ÊúÄÂêé„ÄÇ #access_log logs/access.log main; #ÂºÄÂêØÈ´òÊïà‰º†ËæìÊ®°Âºè sendfile on; #Èò≤Ê≠¢ÁΩëÁªúÈòªÂ°û #tcp_nopush on; #ÂÆ¢Êà∑Á´ØËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰ΩçÊòØÁßí #keepalive_timeout 0; keepalive_timeout 65; #ÂºÄÂêØgzipÂéãÁº©ËæìÂá∫ #gzip on; #ËôöÊãü‰∏ªÊú∫Âü∫Êú¨ËÆæÁΩÆ server &#123; #ÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑ listen 80; #ËÆøÈóÆÂüüÂêç server_name localhost; #ÁºñÁ†ÅÊ†ºÂºèÔºåÂ¶ÇÊûúÁΩëÈ°µÊ†ºÂºè‰∏éÂΩìÂâçÈÖçÁΩÆÁöÑ‰∏çÂêåÁöÑËØùÂ∞Ü‰ºöË¢´Ëá™Âä®ËΩ¨Á†Å #charset koi8-r; #ËôöÊãü‰∏ªÊú∫ËÆøÈóÆÊó•ÂøóÂÆö‰πâ #access_log logs/host.access.log main; #ÂØπURLËøõË°åÂåπÈÖç location / &#123; #ËÆøÈóÆË∑ØÂæÑÔºåÂèØÁõ∏ÂØπ‰πüÂèØÁªùÂØπË∑ØÂæÑ root html; #È¶ñÈ°µÊñá‰ª∂ÔºåÂåπÈÖçÈ°∫Â∫èÊåâÁÖßÈÖçÁΩÆÈ°∫Â∫èÂåπÈÖç index index.html index.htm; &#125; #ÈîôËØØ‰ø°ÊÅØËøîÂõûÈ°µÈù¢ #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; #ËÆøÈóÆURL‰ª•.phpÁªìÂ∞æÂàôËá™Âä®ËΩ¨‰∫§Áªô127.0.0.1 # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; #phpËÑöÊú¨ËØ∑Ê±ÇÂÖ®ÈÉ®ËΩ¨ÂèëÁªôFastCGIÂ§ÑÁêÜ # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; #Á¶ÅÊ≠¢ËÆøÈóÆ.htÈ°µÈù¢ # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # #location ~ /\.ht &#123; # deny all; #&#125; &#125; #Á¨¨‰∫å‰∏™ËôöÊãü‰∏ªÊú∫ÈÖçÁΩÆ # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; #HTTPSËôöÊãü‰∏ªÊú∫ÂÆö‰πâ # HTTPS server # #server &#123; # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; include servers/*;&#125; ÂèçÂêë‰ª£ÁêÜÂÆû‰æãÂÅáËÆæÊàëÁé∞Âú®ÈúÄË¶ÅÊú¨Âú∞ËÆøÈóÆwww.baidu.com;ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 1234567891011server &#123; #ÁõëÂê¨80Á´ØÂè£ listen 80; server_name localhost; # individual nginx logs for this web vhost access_log /tmp/access.log; error_log /tmp/error.log ; location / &#123; proxy_pass http://www.baidu.com; &#125; È™åËØÅÁªìÊûúÔºö ÂèØ‰ª•ÁúãÂà∞ÔºåÊàëÂú®ÊµèËßàÂô®‰∏≠‰ΩøÁî®localhostÊâìÂºÄ‰∫ÜÁôæÂ∫¶ÁöÑÈ¶ñÈ°µ‚Ä¶ Ë¥üËΩΩÂùáË°°ÂÆû‰æã‰∏ãÈù¢‰∏ªË¶ÅÈ™åËØÅÊúÄÂ∏∏Áî®ÁöÑ‰∏âÁßçË¥üËΩΩÁ≠ñÁï•„ÄÇËôöÊãü‰∏ªÊú∫ÈÖçÁΩÆÔºö123456789101112131415161718192021222324server &#123; #ÁõëÂê¨80Á´ØÂè£ listen 80; server_name localhost; # individual nginx logs for this web vhost access_log /tmp/access.log; error_log /tmp/error.log ; location / &#123; #Ë¥üËΩΩÂùáË°° #ËΩÆËØ¢ #proxy_pass http://polling_strategy; #weightÊùÉÈáç #proxy_pass http://weight_strategy; #ip_hash # proxy_pass http://ip_hash_strategy; #fair # proxy_pass http://fair_strategy; #url_hash # proxy_pass http://url_hash_strategy; #ÈáçÂÆöÂêë #rewrite ^ http://localhost:8080; &#125; ËΩÆËØ¢Á≠ñÁï•123456# 1„ÄÅËΩÆËØ¢ÔºàÈªòËÆ§Ôºâ# ÊØè‰∏™ËØ∑Ê±ÇÊåâÊó∂Èó¥È°∫Â∫èÈÄê‰∏ÄÂàÜÈÖçÂà∞‰∏çÂêåÁöÑÂêéÁ´ØÊúçÂä°Âô®ÔºåÂ¶ÇÊûúÂêéÁ´ØÊúçÂä°Âô®downÊéâÔºåËÉΩËá™Âä®ÂâîÈô§„ÄÇ upstream polling_strategy &#123; server glmapper.net:8080; # Â∫îÁî®ÊúçÂä°Âô®1 server glmapper.net:8081; # Â∫îÁî®ÊúçÂä°Âô®2&#125; ÊµãËØïÁªìÊûúÔºàÈÄöËøáÁ´ØÂè£Âè∑Êù•Âå∫ÂàÜÂΩìÂâçËÆøÈóÆÔºâÔºö 12348081Ôºöhello8080Ôºöhello8081Ôºöhello8080Ôºöhello ÊùÉÈáçÁ≠ñÁï•123456#2„ÄÅÊåáÂÆöÊùÉÈáç#ÊåáÂÆöËΩÆËØ¢Âá†ÁéáÔºåweightÂíåËÆøÈóÆÊØîÁéáÊàêÊ≠£ÊØîÔºåÁî®‰∫éÂêéÁ´ØÊúçÂä°Âô®ÊÄßËÉΩ‰∏çÂùáÁöÑÊÉÖÂÜµ„ÄÇ upstream weight_strategy &#123; server glmapper.net:8080 weight=1; # Â∫îÁî®ÊúçÂä°Âô®1 server glmapper.net:8081 weight=9; # Â∫îÁî®ÊúçÂä°Âô®2&#125; ÊµãËØïÁªìÊûúÔºöÊÄªËÆøÈóÆÊ¨°Êï∞15Ê¨°ÔºåÊ†πÊçÆ‰∏äÈù¢ÁöÑÊùÉÈáçÈÖçÁΩÆÔºå‰∏§Âè∞Êú∫Âô®ÁöÑËÆøÈóÆÊØîÈáçÔºö2Ôºö13ÔºõÊª°Ë∂≥È¢ÑÊúüÔºÅ ip hashÁ≠ñÁï•123456789#3„ÄÅIPÁªëÂÆö ip_hash#ÊØè‰∏™ËØ∑Ê±ÇÊåâËÆøÈóÆipÁöÑhashÁªìÊûúÂàÜÈÖçÔºåËøôÊ†∑ÊØè‰∏™ËÆøÂÆ¢Âõ∫ÂÆöËÆøÈóÆ‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®Ôºå#ÂèØ‰ª•Ëß£ÂÜ≥sessionÁöÑÈóÆÈ¢ò;Âú®‰∏çËÄÉËôëÂºïÂÖ•ÂàÜÂ∏ÉÂºèsessionÁöÑÊÉÖÂÜµ‰∏ãÔºå#ÂéüÁîüHttpSessionÂè™ÂØπÂΩìÂâçservletÂÆπÂô®ÁöÑ‰∏ä‰∏ãÊñáÁéØÂ¢ÉÊúâÊïàupstream ip_hash_strategy &#123; ip_hash; server glmapper.net:8080; # Â∫îÁî®ÊúçÂä°Âô®1 server glmapper.net:8081; # Â∫îÁî®ÊúçÂä°Âô®2&#125; iphash ÁÆóÊ≥ï:ipÊòØÂü∫Êú¨ÁöÑÁÇπÂàÜÂçÅËøõÂà∂ÔºåÂ∞ÜipÁöÑÂâç‰∏â‰∏™Á´Ø‰Ωú‰∏∫ÂèÇÊï∞Âä†ÂÖ•hashÂáΩÊï∞„ÄÇËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØ‰øùËØÅipÂú∞ÂùÄÂâç‰∏â‰ΩçÁõ∏ÂêåÁöÑÁî®Êà∑ÁªèËøáhashËÆ°ÁÆóÂ∞ÜÂàÜÈÖçÂà∞Áõ∏ÂêåÁöÑÂêéÁ´Øserver„ÄÇ‰ΩúËÄÖÁöÑËøô‰∏™ËÄÉËôëÊòØÊûÅ‰∏∫ÂèØÂèñÁöÑÔºåÂõ†Ê≠§ipÂú∞ÂùÄÂâç‰∏â‰ΩçÁõ∏ÂêåÈÄöÂ∏∏ÊÑèÂë≥ÁùÄÊù•ÁùÄÂêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÊàñËÄÖÁõ∏ÈÇªÂå∫ÂüüÔºå‰ΩøÁî®Áõ∏ÂêåÁöÑÂêéÁ´ØÊúçÂä°ËÆ©nginxÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÊõ¥ÂÖ∑Êúâ‰∏ÄËá¥ÊÄß„ÄÇ ‰∏∫‰ªÄ‰πàËØ¥Ë¶ÅËß£Èáä‰∏ãiphash,Âõ†‰∏∫ÈááÂùë‰∫ÜÔºõÂíåÁå™ÂºüÂú®ËøõË°åËøô‰∏™Á≠ñÁï•ÊµãËØïÊó∂‰ΩøÁî®‰∫Ü5Âè∞Êú∫Âô®Êù•ÊµãËØïÁöÑÔºå5Âè∞Êú∫Âô®ÂùáÂú®Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖ„Äê192.168.3.X„Äë;ÊµãËØïÊó∂ÂèëÁé∞5Âè∞Êú∫Âô®ÊØèÊ¨°ÈÉΩË∑ØÁî±Âà∞‰∫ÜÂêå‰∏Ä‰∏™ÊúçÂä°Âô®‰∏äÔºå‰∏ÄÂºÄÂßã‰ª•‰∏∫ÊòØÈÖçÁΩÆÈóÆÈ¢òÔºå‰ΩÜÊòØÊéíÊü•‰πãÂêé‰πüÊéíÈô§‰∫ÜËøô‰∏™ÂèØËÉΩÊÄß„ÄÇÊúÄÂêéËÄÉËôëÂà∞ÂèØËÉΩÊòØÂØπ‰∫éÂêåÁΩëÊÆµÁöÑipÂÅö‰∫ÜÁâπÊÆäÂ§ÑÁêÜÔºåÈ™åËØÅ‰πãÂêéÁ°ÆËÆ§‰∫ÜÁåúÊµã„ÄÇ ÂÖ∂‰ªñË¥üËΩΩÂùáË°°Á≠ñÁï•ËøôÈáåÂõ†‰∏∫ÈúÄË¶ÅÂÆâË£Ö‰∏âÊñπÊèí‰ª∂ÔºåÊó∂Èó¥ÊúâÈôêÂ∞±‰∏çÈ™åËØÅ‰∫ÜÔºåÁü•ÊÇâÂç≥ÂèØÔºÅ1234567891011121314151617#4„ÄÅfairÔºàÁ¨¨‰∏âÊñπÔºâ#ÊåâÂêéÁ´ØÊúçÂä°Âô®ÁöÑÂìçÂ∫îÊó∂Èó¥Êù•ÂàÜÈÖçËØ∑Ê±ÇÔºåÂìçÂ∫îÊó∂Èó¥Áü≠ÁöÑ‰ºòÂÖàÂàÜÈÖç„ÄÇ upstream fair_strategy &#123; server glmapper.net:8080; # Â∫îÁî®ÊúçÂä°Âô®1 server glmapper.net:8081; # Â∫îÁî®ÊúçÂä°Âô®2 fair; &#125; #5„ÄÅurl_hashÔºàÁ¨¨‰∏âÊñπÔºâ#ÊåâËÆøÈóÆurlÁöÑhashÁªìÊûúÊù•ÂàÜÈÖçËØ∑Ê±ÇÔºå‰ΩøÊØè‰∏™urlÂÆöÂêëÂà∞Âêå‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®Ôºå#ÂêéÁ´ØÊúçÂä°Âô®‰∏∫ÁºìÂ≠òÊó∂ÊØîËæÉÊúâÊïà„ÄÇ upstream url_hash_strategy &#123; server glmapper.net:8080; # Â∫îÁî®ÊúçÂä°Âô®1 server glmapper.net:8081; # Â∫îÁî®ÊúçÂä°Âô®2 hash $request_uri; hash_method crc32; &#125; ÈáçÂÆöÂêërewrite1234location / &#123; #ÈáçÂÆöÂêë #rewrite ^ http://localhost:8080;&#125; È™åËØÅÊÄùË∑ØÔºöÊú¨Âú∞‰ΩøÁî®localhost:80Á´ØÂè£ËøõË°åËÆøÈóÆÔºåÊ†πÊçÆnginxÁöÑÈÖçÁΩÆÔºåÂ¶ÇÊûúÈáçÂÆöÂêëÊ≤°ÊúâÁîüÊïàÔºåÂàôÊúÄÂêé‰ºöÂÅúÁïôÂú®ÂΩìÂâçlocalhost:80Ëøô‰∏™Ë∑ØÂæÑÔºåÊµèËßàÂô®‰∏≠ÁöÑÂú∞ÂùÄÊ†èÂú∞ÂùÄ‰∏ç‰ºöÂèëÁîüÊîπÂèòÔºõÂ¶ÇÊûúÁîüÊïà‰∫ÜÂàôÂú∞ÂùÄÊ†èÂú∞ÂùÄÂèò‰∏∫localhost:8080Ôºõ ÈÄöËøáÈ™åËØÅÔºåÊª°Ë∂≥È¢ÑÊúüÔºÅ ÊÄªÁªìÊú¨ÊñáÂÖàÂØπnginxÁöÑ‰ΩúÁî®ÂíåÂü∫Êú¨ÁöÑÈÖçÁΩÆÂÅö‰∫ÜÁÆÄÂçïËØ¥ÊòéÔºõÁÑ∂ÂêéÈÄöËøáË¥üËΩΩÂùáË°°ÁöÑÂÆû‰æãÊµãËØï‰∫Ü‰∏çÂêåË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÁöÑÂÖ∑‰ΩìÂ∫îÁî®ÂèçÈ¶àÁªìÊûú„ÄÇÂ∏ÆÂä©Ëá™Â∑±Êõ¥Âä†Ê∑±ÂàªÁöÑÁêÜËß£nginxÊúçÂä°Âô®‰∏≠ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÁªÜËäÇ„ÄÇÊÑüË∞¢ÂàòÁßòÊèê‰æõÁöÑhelloworldÁ®ãÂ∫è„ÄêÂü∫‰∫éspringbootÁöÑËÑöÊâãÊû∂ÔºåÊúâÈúÄË¶ÅÁöÑÂèØ‰ª•ËÅîÁ≥ª‰ªñËé∑ÂèñÔºõËøòÊúâÂ∞±ÊòØÂàòÁßòÊòØ‰∏™Áî∑ÁöÑ‚Ä¶üòú„Äë ÂèÇËÄÉ http://nginx.org/ https://www.nginx.com/ http://www.sohu.com/a/161411719_324809]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>‰ª£ÁêÜÊ®°Âºè</tag>
        <tag>Ë¥üËΩΩÂùáË°°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅäsessionÂíåcookie]]></title>
    <url>%2F2018%2F11%2F10%2Fsessionone%2F</url>
    <content type="text"><![CDATA[Êú¨Êù•ÊòØÊÉ≥ÂÜôaopËÆæËÆ°Êú∫Âà∂ÁöÑÔºå‰ΩÜÊòØÊúÄËøëË¢´sessionËøô‰∏™‰∏úË•øÊêûÂæóÊúâÁÇπÂ§¥Â§ßÔºåÊâÄ‰ª•Â∞±ÊäΩÁÇπÊó∂Èó¥Êù•Êï¥ÁêÜ‰∏ãÂÖ≥‰∫ésessionÁöÑ‰∏Ä‰∫õ‰∏úË•ø„ÄÇ ÁõÆÂΩï ‰ªéhttpÂçèËÆÆÁöÑÊó†Áä∂ÊÄÅÊÄßËØ¥Ëµ∑ Êó†ËøûÊé•ÂíåÊó†Áä∂ÊÄÅ ÊåÅ‰πÖËøûÊé• httpÊó†Áä∂ÊÄÅ Â¶Ç‰Ωï‰øùÊåÅÁä∂ÊÄÅ‰ø°ÊÅØ Cookie CookieÊú∫Âà∂ÂéüÁêÜ CookieÂú®servlet-api‰∏≠ÁöÑÂÆö‰πâ CookieÂ±ûÊÄß ÂàõÂª∫Cookie CookieÊõ¥Êñ∞ CookieÂà†Èô§ ‰ªéËØ∑Ê±Ç‰∏≠Ëé∑ÂèñCookie CookieÂêåÊ∫ê‰∏éË∑®Âüü CookieÊï∞Èáè&amp;Â§ßÂ∞èÈôêÂà∂ÂèäÂ§ÑÁêÜÁ≠ñÁï• Session sessionÊú∫Âà∂ÂéüÁêÜ HttpSession ÂàõÂª∫session ÁîüÂëΩÂë®Êúü sessionÁöÑÊúâÊïàÊúü ÂàÜÂ∏ÉÂºèsession‰ªéhttpÂçèËÆÆÁöÑÊó†Áä∂ÊÄÅÊÄßËØ¥Ëµ∑ HTTPÊòØ‰∏ÄÁßçÊó†Áä∂ÊÄÅÂçèËÆÆ„ÄÇÂÖ≥‰∫éËøô‰∏™Êó†Áä∂ÊÄÅ‰πãÂâçÊàë‰πü‰∏çÂ§™ÁêÜËß£ÔºåÂõ†‰∏∫HTTPÂ∫ïÂ±ÇÊòØTCPÔºåÊó¢ÁÑ∂ÊòØTCPÔºåÂ∞±ÊòØÈïøËøûÊé•ÔºåËøô‰∏™ËøáÁ®ãÊòØ‰øùÊåÅËøûÊé•Áä∂ÊÄÅÁöÑÔºåÂèà‰∏∫‰ªÄ‰πàËØ¥httpÊòØÊó†Áä∂ÊÄÅÁöÑÂë¢ÔºüÂÖàÊù•ÊêûÊ∏ÖÊ•öËøô‰∏§‰∏™Ê¶ÇÂøµÔºö Êó†ËøûÊé•ÂíåÊó†Áä∂ÊÄÅ Êó†ËøûÊé• ÊØèÊ¨°ËøûÊé•Âè™Â§ÑÁêÜ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÊúçÂä°Á´ØÂ§ÑÁêÜÂÆåÂÆ¢Êà∑Á´Ø‰∏ÄÊ¨°ËØ∑Ê±ÇÔºåÁ≠âÂà∞ÂÆ¢Êà∑Á´Ø‰ΩúÂá∫ÂõûÂ∫î‰πãÂêé‰æøÊñ≠ÂºÄËøûÊé•Ôºõ Êó†Áä∂ÊÄÅ ÊòØÊåáÊúçÂä°Á´ØÂØπ‰∫éÂÆ¢Êà∑Á´ØÊØèÊ¨°ÂèëÈÄÅÁöÑËØ∑Ê±ÇÈÉΩËÆ§‰∏∫ÂÆÉÊòØ‰∏Ä‰∏™Êñ∞ÁöÑËØ∑Ê±ÇÔºå‰∏ä‰∏ÄÊ¨°‰ºöËØùÂíå‰∏ã‰∏ÄÊ¨°‰ºöËØùÊ≤°ÊúâËÅîÁ≥ªÔºõ Êó†ËøûÊé•ÁöÑÁª¥Â∫¶ÊòØËøûÊé•ÔºåÊó†Áä∂ÊÄÅÁöÑÁª¥Â∫¶ÊòØËØ∑Ê±ÇÔºõhttpÊòØÂü∫‰∫étcpÁöÑÔºåËÄå‰ªéhttp1.1ÂºÄÂßãÈªòËÆ§‰ΩøÁî®ÊåÅ‰πÖËøûÊé•ÔºõÂú®Ëøô‰∏™ËøûÊé•ËøáÁ®ã‰∏≠ÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÂêëÊúçÂä°Á´ØÂèëÈÄÅÂ§öÊ¨°ËØ∑Ê±ÇÔºå‰ΩÜÊòØÂêÑ‰∏™ËØ∑Ê±Ç‰πãÈó¥ÁöÑÂπ∂Ê≤°Êúâ‰ªÄ‰πàËÅîÁ≥ªÔºõËøôÊ†∑Êù•ËÄÉËôëÔºåÂ∞±ÂæàÂ•ΩÁêÜËß£Êó†Áä∂ÊÄÅËøô‰∏™Ê¶ÇÂøµ‰∫Ü„ÄÇ ÊåÅ‰πÖËøûÊé•ÊåÅ‰πÖËøûÊé•ÔºåÊú¨Ë¥®‰∏äÊòØÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®ÈÄö‰ø°ÁöÑÊó∂ÂÄôÔºåÂª∫Á´ã‰∏Ä‰∏™ÊåÅ‰πÖÂåñÁöÑTCPËøûÊé•ÔºåËøô‰∏™ËøûÊé•‰∏ç‰ºöÈöèÁùÄËØ∑Ê±ÇÁªìÊùüËÄåÂÖ≥Èó≠ÔºåÈÄöÂ∏∏‰ºö‰øùÊåÅËøûÊé•‰∏ÄÊÆµÊó∂Èó¥„ÄÇ Áé∞ÊúâÁöÑÊåÅ‰πÖËøûÊé•Á±ªÂûãÊúâ‰∏§ÁßçÔºöHTTP/1.0+ÁöÑkeep-aliveÂíåHTTP/1.1ÁöÑpersistent„ÄÇ HTTP/1.0+ÁöÑkeep-alive ÂÖàÊù•ÂºÄ‰∏ÄÂº†ÂõæÔºö ËøôÂº†ÂõæÊòØËØ∑Ê±Çwww.baidu.comÊó∂ÁöÑËØ∑Ê±ÇÂ§¥‰ø°ÊÅØ„ÄÇËøôÈáåÈù¢Êàë‰ª¨ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºö 1connection: keep-alive Êàë‰ª¨ÊØèÊ¨°ÂèëÈÄÅ‰∏Ä‰∏™HTTPËØ∑Ê±ÇÔºå‰ºöÈôÑÂ∏¶‰∏Ä‰∏™connection:keep-aliveÔºåËøô‰∏™ÂèÇÊï∞Â∞±ÊòØÂ£∞Êòé‰∏Ä‰∏™ÊåÅ‰πÖËøûÊé•„ÄÇ HTTP/1.1ÁöÑpersistent HTTP/1.1ÁöÑÊåÅ‰πÖËøûÊé•ÈªòËÆ§ÊòØÂºÄÂêØÁöÑÔºåÂè™ÊúâÈ¶ñÈÉ®‰∏≠ÂåÖÂê´connectionÔºöcloseÔºåÊâç‰ºö‰∫ãÂä°ÁªìÊùü‰πãÂêéÂÖ≥Èó≠ËøûÊé•„ÄÇÂΩìÁÑ∂ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´Ø‰ªçÂèØ‰ª•ÈöèÊó∂ÂÖ≥Èó≠ÊåÅ‰πÖËøûÊé•„ÄÇ ÂΩìÂèëÈÄÅ‰∫ÜconnectionÔºöcloseÈ¶ñÈÉ®‰πãÂêéÂÆ¢Êà∑Á´ØÂ∞±Ê≤°ÊúâÂäûÊ≥ïÂú®ÈÇ£Êù°ËøûÊé•‰∏äÂèëÈÄÅÊõ¥Â§öÁöÑËØ∑Ê±Ç‰∫Ü„ÄÇÂΩìÁÑ∂Ê†πÊçÆÊåÅ‰πÖËøûÊé•ÁöÑÁâπÊÄßÔºå‰∏ÄÂÆöË¶Å‰º†ËæìÊ≠£Á°ÆÁöÑcontent-length„ÄÇ ËøòÊúâÊ†πÊçÆHTTP/1.1ÁöÑÁâπÊÄßÔºåÊòØ‰∏çÂ∫îËØ•ÂíåHTTP/1.0ÂÆ¢Êà∑Á´ØÂª∫Á´ãÊåÅ‰πÖËøûÊé•ÁöÑ„ÄÇÊúÄÂêéÔºå‰∏ÄÂÆöË¶ÅÂÅöÂ•ΩÈáçÂèëÁöÑÂáÜÂ§á„ÄÇ httpÊó†Áä∂ÊÄÅOKÔºåÈ¶ñÂÖàÊù•ÊòéÁ°Æ‰∏ãÔºåËøô‰∏™Áä∂ÊÄÅÁöÑ‰∏ª‰ΩìÊåáÁöÑÊòØ‰ªÄ‰πàÔºüÂ∫îËØ•ÊòØ‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØÊòØÁî±ÊúçÂä°Á´ØÊâÄÁª¥Êä§ÁöÑ‰∏éÂÆ¢Êà∑Á´Ø‰∫§‰∫íÁöÑ‰ø°ÊÅØÔºà‰πüÁß∞‰∏∫Áä∂ÊÄÅ‰ø°ÊÅØÔºâÔºõÂõ†‰∏∫HTTPÊú¨Ë∫´ÊòØ‰∏ç‰øùÂ≠ò‰ªª‰ΩïÁî®Êà∑ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÁöÑÔºåÊâÄ‰ª•HTTPÊòØÊó†Áä∂ÊÄÅÁöÑÂçèËÆÆ„ÄÇ Â¶Ç‰Ωï‰øùÊåÅÁä∂ÊÄÅ‰ø°ÊÅØÂú®ËÅäËøô‰∏™Ëøô‰∏™ÈóÆÈ¢ò‰πãÂâçÔºåÊàë‰ª¨Êù•ËÄÉËôë‰∏ã‰∏∫‰ªÄ‰πàhttpËá™Â∑±‰∏çÊù•ÂÅöËøô‰∏™‰∫ãÊÉÖÔºö‰πüÂ∞±ÊòØËÆ©httpÂèòÊàêÊúâÁä∂ÊÄÅÁöÑ„ÄÇ httpÊú¨Ë∫´Êù•ÂÆûÁé∞Áä∂ÊÄÅÁª¥Êä§ ‰ªé‰∏äÈù¢ÂÖ≥‰∫éÊó†Áä∂ÊÄÅÁöÑÁêÜËß£ÔºåÂ¶ÇÊûúÁé∞Âú®ÈúÄË¶ÅËÆ©httpËá™Â∑±ÂèòÊàêÊúâÁä∂ÊÄÅÁöÑÔºåÂ∞±ÊÑèÂë≥ÁùÄhttpÂçèËÆÆÈúÄË¶Å‰øùÂ≠ò‰∫§‰∫íÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÔºõÊöÇ‰∏î‰∏çËØ¥ËøôÁßçÊñπÂºèÊòØÂê¶ÂêàÈÄÇÔºå‰ΩÜ‰ªéÁª¥Êä§Áä∂ÊÄÅ‰ø°ÊÅØËøô‰∏ÄÁÇπÊù•ËØ¥Ôºå‰ª£‰ª∑Â∞±ÂæàÈ´òÔºåÂõ†‰∏∫Êó¢ÁÑ∂‰øùÂ≠ò‰∫ÜÁä∂ÊÄÅ‰ø°ÊÅØÔºåÈÇ£ÂêéÁª≠ÁöÑ‰∏Ä‰∫õË°å‰∏∫ÂøÖÂÆö‰πü‰ºöÂèóÂà∞Áä∂ÊÄÅ‰ø°ÊÅØÁöÑÂΩ±Âìç„ÄÇ ‰ªéÂéÜÂè≤ËßíÂ∫¶Êù•ËØ¥ÔºåÊúÄÂàùÁöÑhttpÂçèËÆÆÂè™ÊòØÁî®Êù•ÊµèËßàÈùôÊÄÅÊñá‰ª∂ÁöÑÔºåÊó†Áä∂ÊÄÅÂçèËÆÆÂ∑≤ÁªèË∂≥Â§üÔºåËøôÊ†∑ÂÆûÁé∞ÁöÑË¥üÊãÖ‰πüÂæàËΩª„ÄÇ‰ΩÜÊòØÈöèÁùÄwebÊäÄÊúØÁöÑ‰∏çÊñ≠ÂèëÂ±ïÔºåË∂äÊù•Ë∂äÂ§öÁöÑÂú∫ÊôØÈúÄË¶ÅÁä∂ÊÄÅ‰ø°ÊÅØËÉΩÂ§üÂæó‰ª•‰øùÂ≠òÔºõ‰∏ÄÊñπÈù¢ÊòØhttpÊú¨Ë∫´‰∏ç‰ºöÂéªÊîπÂèòÂÆÉÁöÑËøôÁßçÊó†Áä∂ÊÄÅÁöÑÁâπÊÄßÔºàËá≥Â∞ëÁõÆÂâçÊòØËøôÊ†∑ÁöÑÔºâÔºåÂè¶‰∏ÄÊñπÈù¢‰∏öÂä°Âú∫ÊôØÂèàËø´ÂàáÁöÑÈúÄË¶Å‰øùÊåÅÁä∂ÊÄÅÔºõÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÊù•‚ÄúË£ÖÈ•∞‚Äù‰∏Ä‰∏ãhttpÔºåÂºïÂÖ•‰∏Ä‰∫õÂÖ∂‰ªñÊú∫Âà∂Êù•ÂÆûÁé∞ÊúâÁä∂ÊÄÅ„ÄÇ cookieÂíåsession‰ΩìÁ≥ª ÈÄöËøáÂºïÂÖ•cookieÂíåsession‰ΩìÁ≥ªÊú∫Âà∂Êù•Áª¥Êä§Áä∂ÊÄÅ‰ø°ÊÅØ„ÄÇÂç≥Áî®Êà∑Á¨¨‰∏ÄÊ¨°ËÆøÈóÆÊúçÂä°Âô®ÁöÑÊó∂ÂÄôÔºåÊúçÂä°Âô®ÂìçÂ∫îÊä•Â§¥ÈÄöÂ∏∏‰ºöÂá∫Áé∞‰∏Ä‰∏™Set-CookieÂìçÂ∫îÂ§¥ÔºåËøôÈáåÂÖ∂ÂÆûÂ∞±ÊòØÂú®Êú¨Âú∞ËÆæÁΩÆ‰∏Ä‰∏™cookieÔºåÂΩìÁî®Êà∑ÂÜçÊ¨°ËÆøÈóÆÊúçÂä°Âô®ÁöÑÊó∂ÂÄôÔºåhttp‰ºöÈôÑÂ∏¶Ëøô‰∏™cookieËøáÂéªÔºåcookie‰∏≠Â≠òÊúâsessionIdËøôÊ†∑ÁöÑ‰ø°ÊÅØÊù•Âà∞ÊúçÂä°Âô®ËøôËæπÁ°ÆËÆ§ÊòØÂê¶Â±û‰∫éÂêå‰∏ÄÊ¨°‰ºöËØù„ÄÇ Cookie cookieÊòØÁî±ÊúçÂä°Âô®ÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÔºàÊµèËßàÂô®ÔºâÁöÑÂ∞èÈáè‰ø°ÊÅØÔºå‰ª•{keyÔºövalue}ÁöÑÂΩ¢ÂºèÂ≠òÂú®„ÄÇ CookieÊú∫Âà∂ÂéüÁêÜ ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊúçÂä°Âô®Êó∂ÔºåÂ¶ÇÊûúÊúçÂä°Âô®ÈúÄË¶ÅËÆ∞ÂΩïËØ•Áî®Êà∑Áä∂ÊÄÅÔºåÂ∞±‰ΩøÁî®responseÂêëÂÆ¢Êà∑Á´ØÊµèËßàÂô®È¢ÅÂèë‰∏Ä‰∏™Cookie„ÄÇËÄåÂÆ¢Êà∑Á´ØÊµèËßàÂô®‰ºöÊääCookie‰øùÂ≠òËµ∑Êù•„ÄÇÂΩìÊµèËßàÂô®ÂÜçËØ∑Ê±Ç ÊúçÂä°Âô®Êó∂ÔºåÊµèËßàÂô®ÊääËØ∑Ê±ÇÁöÑÁΩëÂùÄËøûÂêåËØ•Cookie‰∏ÄÂêåÊèê‰∫§ÁªôÊúçÂä°Âô®„ÄÇÊúçÂä°Âô®ÈÄöËøáÊ£ÄÊü•ËØ•CookieÊù•Ëé∑ÂèñÁî®Êà∑Áä∂ÊÄÅ„ÄÇ Êàë‰ª¨ÈÄöËøáÁúã‰∏ãservlet-api‰∏≠CookieÁ±ªÁöÑÂÆö‰πâÂèäÂ±ûÊÄßÔºåÊù•Êõ¥Âä†ÂÖ∑‰ΩìÁöÑ‰∫ÜËß£Cookie„ÄÇ CookieÂú®servlet-api‰∏≠ÁöÑÂÆö‰πâ123456789101112131415161718public class Cookie implements Cloneable, Serializable &#123; private static final long serialVersionUID = -6454587001725327448L; private static final String TSPECIALS; private static final String LSTRING_FILE = "javax.servlet.http.LocalStrings"; private static ResourceBundle lStrings = ResourceBundle.getBundle("javax.servlet.http.LocalStrings"); private String name; private String value; private String comment; private String domain; private int maxAge = -1; private String path; private boolean secure; private int version = 0; private boolean isHttpOnly = false; //....ÁúÅÁï•ÂÖ∂‰ªñÊñπÊ≥ï&#125; CookieÂ±ûÊÄß name cookieÁöÑÂêçÂ≠óÔºåCookie‰∏ÄÊó¶ÂàõÂª∫ÔºåÂêçÁß∞‰æø‰∏çÂèØÊõ¥Êîπ value cookieÂÄº comment ËØ•CookieÁöÑÁî®Â§ÑËØ¥Êòé„ÄÇÊµèËßàÂô®ÊòæÁ§∫Cookie‰ø°ÊÅØÁöÑÊó∂ÂÄôÊòæÁ§∫ËØ•ËØ¥Êòé domain ÂèØ‰ª•ËÆøÈóÆËØ•CookieÁöÑÂüüÂêç„ÄÇÂ¶ÇÊûúËÆæÁΩÆ‰∏∫‚Äú.baidu.com‚ÄùÔºåÂàôÊâÄÊúâ‰ª•‚Äúbaidu.com‚ÄùÁªìÂ∞æÁöÑÂüüÂêçÈÉΩÂèØ‰ª•ËÆøÈóÆËØ•CookieÔºõÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÂøÖÈ°ª‰∏∫‚Äú.‚Äù maxAge CookieÂ§±ÊïàÁöÑÊó∂Èó¥ÔºåÂçï‰ΩçÁßí„ÄÇ Ê≠£Êï∞ÔºåÂàôË∂ÖËøámaxAgeÁßí‰πãÂêéÂ§±Êïà„ÄÇ Ë¥üÊï∞ÔºåËØ•Cookie‰∏∫‰∏¥Êó∂CookieÔºåÂÖ≥Èó≠ÊµèËßàÂô®Âç≥Â§±ÊïàÔºåÊµèËßàÂô®‰πü‰∏ç‰ºö‰ª•‰ªª‰ΩïÂΩ¢Âºè‰øùÂ≠òËØ•Cookie„ÄÇ ‰∏∫0ÔºåË°®Á§∫Âà†Èô§ËØ•Cookie„ÄÇ path ËØ•CookieÁöÑ‰ΩøÁî®Ë∑ØÂæÑ„ÄÇ‰æãÂ¶ÇÔºö path=/ÔºåËØ¥ÊòéÊú¨ÂüüÂêç‰∏ãcontextPathÈÉΩÂèØ‰ª•ËÆøÈóÆËØ•Cookie„ÄÇ path=/app/ÔºåÂàôÂè™ÊúâcontextPath‰∏∫‚Äú/app‚ÄùÁöÑÁ®ãÂ∫èÂèØ‰ª•ËÆøÈóÆËØ•Cookie pathËÆæÁΩÆÊó∂ÔºåÂÖ∂‰ª•‚Äú/‚ÄùÁªìÂ∞æ. secure ËØ•CookieÊòØÂê¶‰ªÖË¢´‰ΩøÁî®ÂÆâÂÖ®ÂçèËÆÆ‰º†Ëæì„ÄÇËøôÈáåÁöÑÂÆâÂÖ®ÂçèËÆÆÂåÖÊã¨HTTPSÔºåSSLÁ≠â„ÄÇÈªòËÆ§‰∏∫false„ÄÇ version ËØ•Cookie‰ΩøÁî®ÁöÑÁâàÊú¨Âè∑„ÄÇ 0 Ë°®Á§∫ÈÅµÂæ™NetscapeÁöÑCookieËßÑËåÉÔºåÁõÆÂâçÂ§ßÂ§öÊï∞Áî®ÁöÑÈÉΩÊòØËøôÁßçËßÑËåÉÔºõ 1 Ë°®Á§∫ÈÅµÂæ™W3CÁöÑRFC2109ËßÑËåÉÔºõËßÑËåÉËøá‰∫é‰∏•Ê†ºÔºåÂÆûÊñΩËµ∑Êù•ÂæàÈöæ„ÄÇ Âú®servletËßÑËåÉ‰∏≠ÈªòËÆ§ÊòØ0Ôºõ isHttpOnly HttpOnlyÂ±ûÊÄßÊòØÁî®Êù•ÈôêÂà∂ÈùûHTTPÂçèËÆÆÁ®ãÂ∫èÊé•Âè£ÂØπÂÆ¢Êà∑Á´ØCookieËøõË°åËÆøÈóÆÔºõ‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûúÊÉ≥Ë¶ÅÂú®ÂÆ¢Êà∑Á´ØÂèñÂà∞httponlyÁöÑCookieÁöÑÂîØ‰∏ÄÊñπÊ≥ïÂ∞±ÊòØ‰ΩøÁî®AJAXÔºåÂ∞ÜÂèñCookieÁöÑÊìç‰ΩúÊîæÂà∞ÊúçÂä°Á´ØÔºåÊé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑajaxËØ∑Ê±ÇÂêéÂ∞ÜÂèñÂÄºÁªìÊûúÈÄöËøáHTTPËøîÂõûÂÆ¢Êà∑Á´Ø„ÄÇËøôÊ†∑ËÉΩÊúâÊïàÁöÑÈò≤Ê≠¢XSSÊîªÂáª„ÄÇ ‰∏äËø∞ÁöÑËøô‰∫õÂ±ûÊÄßÔºåÈô§‰∫Üname‰∏évalueÂ±ûÊÄß‰ºöË¢´Êèê‰∫§Â§ñÔºåÂÖ∂‰ªñÁöÑÂ±ûÊÄßÂØπ‰∫éÂÆ¢Êà∑Á´ØÊù•ËØ¥ÈÉΩÊòØ‰∏çÂèØËØªÁöÑÔºå‰πüÊòØ‰∏çÂèØË¢´Êèê‰∫§ÁöÑ„ÄÇ ÂàõÂª∫Cookie12345Cookie cookie = new Cookie("cookieSessionId","qwertyuiop");cookie.setDomain(".baidu.com"); // ËÆæÁΩÆÂüüÂêçcookie.setPath("/"); // ËÆæÁΩÆË∑ØÂæÑcookie.setMaxAge(Integer.MAX_VALUE); // ËÆæÁΩÆÊúâÊïàÊúü‰∏∫Ê∞∏‰πÖresponse.addCookie(cookie); // ÂõûÂÜôÂà∞ÂÆ¢Êà∑Á´Ø ÂàõÂª∫CookieÂè™ËÉΩÈÄöËøá‰∏äËø∞ÊñπÂºèÊù•ÂàõÂª∫ÔºåÂõ†‰∏∫Âú®CookieÁ±ª‰∏≠Âè™Êèê‰æõ‰∫ÜËøôÊ†∑‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ 123456789101112131415161718192021222324252627//CookieÁöÑÊûÑÈÄ†ÂáΩÊï∞public Cookie(String name, String value) &#123; if (name != null &amp;&amp; name.length() != 0) &#123; //Âà§Êñ≠‰∏ãÊòØ‰∏çÊòØtoken //Âà§Êñ≠ÊòØ‰∏çÊòØÂíåCookieÁöÑÂ±ûÊÄßÂ≠óÊÆµÈáçÂ§ç if (this.isToken(name) &amp;&amp; !name.equalsIgnoreCase("Comment") &amp;&amp; !name.equalsIgnoreCase("Discard") &amp;&amp; !name.equalsIgnoreCase("Domain") &amp;&amp; !name.equalsIgnoreCase("Expires") &amp;&amp; !name.equalsIgnoreCase("Max-Age") &amp;&amp; !name.equalsIgnoreCase("Path") &amp;&amp; !name.equalsIgnoreCase("Secure") &amp;&amp; !name.equalsIgnoreCase("Version") &amp;&amp; !name.startsWith("$")) &#123; this.name = name; this.value = value; &#125; else &#123; String errMsg = lStrings.getString("err.cookie_name_is_token"); Object[] errArgs = new Object[]&#123;name&#125;; errMsg = MessageFormat.format(errMsg, errArgs); throw new IllegalArgumentException(errMsg); &#125; &#125; else &#123; throw new IllegalArgumentException(lStrings.getString ("err.cookie_name_blank")); &#125;&#125; CookieÊõ¥Êñ∞Âú®Ê∫êÁ†Å‰∏≠ÂèØ‰ª•Áü•ÈÅìÔºåCookieÊú¨Ë∫´Âπ∂Ê≤°ÊúâÊèê‰æõ‰øÆÊîπÁöÑÊñπÊ≥ïÔºõÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Ôºå‰∏ÄËà¨ÈÄöËøá‰ΩøÁî®Áõ∏ÂêånameÁöÑCookieÊù•Ë¶ÜÁõñÂéüÊù•ÁöÑCookie,‰ª•ËææÂà∞Êõ¥Êñ∞ÁöÑÁõÆÁöÑ„ÄÇ ‰ΩÜÊòØËøô‰∏™‰øÆÊîπÁöÑÂâçÊèêÊòØÈúÄË¶ÅÂÖ∑ÊúâÁõ∏ÂêådomainÔºåpathÁöÑ Set-Cookie Ê∂àÊÅØÂ§¥ 12Cookie cookie = new Cookie("cookieSessionId","new-qwertyuiop");response.addCookie(cookie); CookieÂà†Èô§‰∏éCookieÊõ¥Êñ∞‰∏ÄÊ†∑ÔºåCookieÊú¨Ë∫´‰πüÊ≤°ÊúâÊèê‰æõÂà†Èô§ÁöÑÊñπÊ≥ïÔºõ‰ΩÜÊòØ‰ªéÂâçÈù¢ÂàÜÊûêCookieÂ±ûÊÄßÊó∂‰∫ÜËß£Âà∞ÔºåÂà†Èô§CookieÂèØ‰ª•ÈÄöËøáÂ∞ÜmaxAgeËÆæÁΩÆ‰∏∫0Âç≥ÂèØ„ÄÇ 123Cookie cookie = new Cookie("cookieSessionId","new-qwertyuiop");cookie.setMaxAge(0);response.addCookie(cookie); ‰∏äÈù¢ÁöÑÂà†Èô§ÊòØÊàë‰ª¨Ëá™Â∑±ÂèØÊéßÁöÑÔºõ‰ΩÜÊòØ‰πüÂ≠òÂú®‰∏Ä‰∫õÊàë‰ª¨‰∏çÂèØÊéßÊàñËÄÖËØ¥Êó†ÊÑèËØÜÊÉÖÂÜµ‰∏ãÁöÑÂà†Èô§Êìç‰ΩúÔºö Â¶ÇÊûúmaxAgeÊòØË¥üÂÄºÔºåÂàôcookieÂú®ÊµèËßàÂô®ÂÖ≥Èó≠Êó∂Ë¢´Âà†Èô§ ÊåÅ‰πÖÂåñcookieÂú®Âà∞ËææÂ§±ÊïàÊó•ÊúüÊó∂‰ºöË¢´Âà†Èô§ ÊµèËßàÂô®‰∏≠ÁöÑ cookie Êï∞ÈáèËææÂà∞‰∏äÈôêÔºåÈÇ£‰πà cookie ‰ºöË¢´Âà†Èô§‰ª•‰∏∫Êñ∞Âª∫ÁöÑ cookie ÂàõÂª∫Á©∫Èó¥„ÄÇ ÂÖ∂ÂÆûÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂÖ≥Ê≥®ÁöÑÈÉΩÊòØÂêéËÄÖ„ÄÇÂÖ≥‰∫éÊï∞Èáè‰∏äÈôêÂêéÈù¢‰ºöËØ¥Âà∞„ÄÇ ‰ªéËØ∑Ê±Ç‰∏≠Ëé∑ÂèñCookie1Cookie[] cookies = request.getCookies(); CookieÂêåÊ∫ê‰∏éË∑®ÂüüÊàë‰ª¨Áü•ÈÅìÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•Ôºö URLÁî±ÂçèËÆÆ„ÄÅÂüüÂêç„ÄÅÁ´ØÂè£ÂíåË∑ØÂæÑÁªÑÊàêÔºåÂ¶ÇÊûú‰∏§‰∏™URLÁöÑÂçèËÆÆ„ÄÅÂüüÂêçÂíåÁ´ØÂè£Áõ∏ÂêåÔºåÂàôË°®Á§∫‰ªñ‰ª¨ÂêåÊ∫ê„ÄÇÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•ÔºåÈôêÂà∂‰∫ÜÊù•Ëá™‰∏çÂêåÊ∫êÁöÑ‚Äùdocument‚ÄùÊàñËÑöÊú¨ÔºåÂØπÂΩìÂâç‚Äùdocument‚ÄùËØªÂèñÊàñËÆæÁΩÆÊüê‰∫õÂ±ûÊÄß„ÄÇ ÂØπ‰∫éCookieÊù•ËØ¥ÔºåCookieÁöÑÂêåÊ∫êÂè™ÂÖ≥Ê≥®ÂüüÂêçÔºåÊòØÂøΩÁï•ÂçèËÆÆÂíåÁ´ØÂè£ÁöÑ„ÄÇÊâÄ‰ª•‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåhttps://localhost:80/Âíåhttp://localhost:8080/ÁöÑCookieÊòØÂÖ±‰∫´ÁöÑ„ÄÇ CookieÊòØ‰∏çÂèØË∑®ÂüüÁöÑÔºõÂú®Ê≤°ÊúâÁªèËøá‰ªª‰ΩïÂ§ÑÁêÜÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∫åÁ∫ßÂüüÂêç‰∏çÂêå‰πüÊòØ‰∏çË°åÁöÑ„ÄÇ(wenku.baidu.comÂíåbaike.baidu.com)„ÄÇ CookieÊï∞Èáè&amp;Â§ßÂ∞èÈôêÂà∂ÂèäÂ§ÑÁêÜÁ≠ñÁï• IE6.0 IE7.0/8.0 Opera FF Safari Chrome ‰∏™Êï∞/‰∏™ 20/Âüü 50/Âüü 30/Âüü 50/Âüü Êó†ÈôêÂà∂ 53/Âüü Â§ßÂ∞è/Byte 4095 4095 4096 4097 4097 4097 Ê≥®ÔºöÊï∞ÊçÆÊù•Ëá™ÁΩëÁªúÔºå‰ªÖ‰æõÂèÇËÄÉ Âõ†‰∏∫ÊµèËßàÂô®ÂØπ‰∫éCookieÂú®Êï∞Èáè‰∏äÊòØÊúâÈôêÂà∂ÁöÑÔºåÂ¶ÇÊûúË∂ÖËøá‰∫ÜËá™ÁÑ∂‰ºöÊúâ‰∏Ä‰∫õÂâîÈô§Á≠ñÁï•„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠Browser cookie restrictionsÊèêÂà∞ÁöÑÂâîÈô§Á≠ñÁï•Â¶Ç‰∏ãÔºö The least recently used (LRU) approach automatically kicks out the oldest cookie when the cookie limit has been reached in order to allow the newest cookie some space. Internet Explorer and Opera use this approach. ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÔºàLRUÔºâÊñπÊ≥ïÔºöÂú®ËææÂà∞cookieÈôêÂà∂Êó∂Ëá™Âä®Âú∞ÂâîÈô§ÊúÄËÄÅÁöÑcookieÔºå‰ª•‰æøËÖæÂá∫Á©∫Èó¥ÁªôËÆ∏ÊúÄÊñ∞ÁöÑcookie„ÄÇInternet ExplorerÂíåOpera‰ΩøÁî®ËøôÁßçÊñπÊ≥ï„ÄÇ Firefox does something strange: it seems to randomly decide which cookies to keep although the last cookie set is always kept. There doesn‚Äôt seem to be any scheme it‚Äôs following at all. The takeaway? Don‚Äôt go above the cookie limit in Firefox. FirefoxÂÜ≥ÂÆöÈöèÊú∫Âà†Èô§CookieÈõÜ‰∏≠ÁöÑ‰∏Ä‰∏™CookieÔºåÂπ∂Ê≤°Êúâ‰ªÄ‰πàÁ´†Ê≥ï„ÄÇÊâÄ‰ª•ÊúÄÂ•Ω‰∏çË¶ÅË∂ÖËøáFirefox‰∏≠ÁöÑCookieÈôêÂà∂„ÄÇ Ë∂ÖËøáÂ§ßÂ∞èÈïøÂ∫¶ÁöÑËØùÂ∞±ÊòØÁõ¥Êé•Ë¢´Êà™Âèñ‰∏¢ÂºÉÔºõ SessionCookieÊú∫Âà∂Âº•Ë°•‰∫ÜHTTPÂçèËÆÆÊó†Áä∂ÊÄÅÁöÑ‰∏çË∂≥„ÄÇÂú®SessionÂá∫Áé∞‰πãÂâçÔºåÂü∫Êú¨‰∏äÊâÄÊúâÁöÑÁΩëÁ´ôÈÉΩÈááÁî®CookieÊù•Ë∑üË∏™‰ºöËØù„ÄÇ ‰∏éCookie‰∏çÂêåÁöÑÊòØÔºåsessionÊòØ‰ª•ÊúçÂä°Á´Ø‰øùÂ≠òÁä∂ÊÄÅÁöÑ„ÄÇ sessionÊú∫Âà∂ÂéüÁêÜÂΩìÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™sessionÁöÑÊó∂ÂÄôÔºåÊúçÂä°Âô®‰ºöÂÖàÊ£ÄÊü•Ëøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÈáåÊòØÂê¶Â∑≤ÂåÖÂê´‰∫Ü‰∏Ä‰∏™sessionÊ†áËØÜ - sessionIdÔºå Â¶ÇÊûúÂ∑≤ÂåÖÂê´Ëøô‰∏™sessionIdÔºåÂàôËØ¥Êòé‰ª•ÂâçÂ∑≤Áªè‰∏∫Ê≠§ÂÆ¢Êà∑Á´ØÂàõÂª∫ËøásessionÔºåÊúçÂä°Âô®Â∞±ÊåâÁÖßsessionIdÊääËøô‰∏™sessionÊ£ÄÁ¥¢Âá∫Êù•‰ΩøÁî®ÔºàÂ¶ÇÊûúÊ£ÄÁ¥¢‰∏çÂà∞ÔºåÂèØËÉΩ‰ºöÊñ∞Âª∫‰∏Ä‰∏™Ôºâ Â¶ÇÊûúÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∏çÂåÖÂê´sessionIdÔºåÂàô‰∏∫Ê≠§ÂÆ¢Êà∑Á´ØÂàõÂª∫‰∏Ä‰∏™sessionÂπ∂‰∏îÁîüÊàê‰∏Ä‰∏™‰∏éÊ≠§sessionÁõ∏ÂÖ≥ËÅîÁöÑsessionId sessionIdÁöÑÂÄº‰∏ÄËà¨ÊòØ‰∏Ä‰∏™Êó¢‰∏ç‰ºöÈáçÂ§çÔºåÂèà‰∏çÂÆπÊòìË¢´‰ªøÈÄ†ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøô‰∏™sessionIdÂ∞ÜË¢´Âú®Êú¨Ê¨°ÂìçÂ∫î‰∏≠ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø‰øùÂ≠ò„ÄÇ‰øùÂ≠òsessionIdÁöÑÊñπÂºèÂ§ßÂ§öÊÉÖÂÜµ‰∏ãÁî®ÁöÑÊòØcookie„ÄÇ HttpSessionHttpSessionÂíåCookie‰∏ÄÊ†∑ÔºåÈÉΩÊòØjavax.servlet.http‰∏ãÈù¢ÁöÑÔºõCookieÊòØ‰∏Ä‰∏™Á±ªÔºåÂÆÉÊèèËø∞‰∫ÜCookieÁöÑÂæàÂ§öÂÜÖÈÉ®ÁªÜËäÇ„ÄÇËÄåHttpSessionÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÆÉ‰∏∫sessionÁöÑÂÆûÁé∞Êèê‰æõ‰∫Ü‰∏Ä‰∫õË°å‰∏∫Á∫¶Êùü„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public interface HttpSession &#123; /** * ËøîÂõûsessionÁöÑÂàõÂª∫Êó∂Èó¥ */ public long getCreationTime(); /** * ËøîÂõû‰∏Ä‰∏™sessionId,ÂîØ‰∏ÄÊ†áËØÜ */ public String getId(); /** *ËøîÂõûÂÆ¢Êà∑Á´ØÊúÄÂêé‰∏ÄÊ¨°ÂèëÈÄÅ‰∏éËØ• session ‰ºöËØùÁõ∏ÂÖ≥ÁöÑËØ∑Ê±ÇÁöÑÊó∂Èó¥ *Ëá™Ê†ºÊûóÂ∞ºÊ≤ªÊ†áÂáÜÊó∂Èó¥ 1970 Âπ¥ 1 Êúà 1 Êó•ÂçàÂ§úÁÆóËµ∑Ôºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇ */ public long getLastAccessedTime(); /** * ËøîÂõûÂΩìÂâçsessionÊâÄÂú®ÁöÑServletContext */ public ServletContext getServletContext(); public void setMaxInactiveInterval(int interval); /** * ËøîÂõû Servlet ÂÆπÂô®Âú®ÂÆ¢Êà∑Á´ØËÆøÈóÆÊó∂‰øùÊåÅ session * ‰ºöËØùÊâìÂºÄÁöÑÊúÄÂ§ßÊó∂Èó¥Èó¥Èöî */ public int getMaxInactiveInterval(); public HttpSessionContext getSessionContext(); /** * ËøîÂõûÂú®ËØ• session‰ºöËØù‰∏≠ÂÖ∑ÊúâÊåáÂÆöÂêçÁß∞ÁöÑÂØπË±°Ôºå * Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂêçÁß∞ÁöÑÂØπË±°ÔºåÂàôËøîÂõû null„ÄÇ */ public Object getAttribute(String name); public Object getValue(String name); /** * ËøîÂõû String ÂØπË±°ÁöÑÊûö‰∏æÔºåString ÂØπË±°ÂåÖÂê´ÊâÄÊúâÁªëÂÆöÂà∞ËØ• session * ‰ºöËØùÁöÑÂØπË±°ÁöÑÂêçÁß∞„ÄÇ */ public Enumeration&lt;String&gt; getAttributeNames(); public String[] getValueNames(); public void setAttribute(String name, Object value); public void putValue(String name, Object value); public void removeAttribute(String name); public void removeValue(String name); /** * ÊåáÁ§∫ËØ• session ‰ºöËØùÊó†ÊïàÔºåÂπ∂Ëß£Èô§ÁªëÂÆöÂà∞ÂÆÉ‰∏äÈù¢ÁöÑ‰ªª‰ΩïÂØπË±°„ÄÇ */ public void invalidate(); /** * Â¶ÇÊûúÂÆ¢Êà∑Á´Ø‰∏çÁü•ÈÅìËØ• session ‰ºöËØùÔºåÊàñËÄÖÂ¶ÇÊûúÂÆ¢Êà∑ÈÄâÊã©‰∏çÂèÇÂÖ•ËØ• * session ‰ºöËØùÔºåÂàôËØ•ÊñπÊ≥ïËøîÂõû true„ÄÇ */ public boolean isNew();&#125; ÂàõÂª∫sessionÂàõÂª∫sessionÁöÑÊñπÂºèÊòØÈÄöËøárequestÊù•ÂàõÂª∫Ôºõ1234// 1„ÄÅÂàõÂª∫SessionÂØπË±°HttpSession session = request.getSession(); // 2„ÄÅÂàõÂª∫SessionÂØπË±°HttpSession session = request.getSession(true); Ëøô‰∏§ÁßçÊòØ‰∏ÄÊ†∑ÁöÑÔºõÂ¶ÇÊûúsession‰∏çÂ≠òÂú®ÔºåÂ∞±Êñ∞Âª∫‰∏Ä‰∏™ÔºõÂ¶ÇÊûúÊòØfalseÁöÑËØùÔºåÊ†áËØÜÂ¶ÇÊûú‰∏çÂ≠òÂú®Â∞±ËøîÂõûnullÔºõ ÁîüÂëΩÂë®ÊúüsessionÁöÑÁîüÂëΩÂë®ÊúüÊåáÁöÑÊòØ‰ªéServletÂÆπÂô®ÂàõÂª∫sessionÂØπË±°Âà∞ÈîÄÊØÅÁöÑËøáÁ®ã„ÄÇServletÂÆπÂô®‰ºö‰æùÊçÆsessionÂØπË±°ËÆæÁΩÆÁöÑÂ≠òÊ¥ªÊó∂Èó¥ÔºåÂú®ËææÂà∞sessionÊó∂Èó¥ÂêéÂ∞ÜsessionÂØπË±°ÈîÄÊØÅ„ÄÇsessionÁîüÊàêÂêéÔºåÂè™Ë¶ÅÁî®Êà∑ÁªßÁª≠ËÆøÈóÆÔºåÊúçÂä°Âô®Â∞±‰ºöÊõ¥Êñ∞sessionÁöÑÊúÄÂêéËÆøÈóÆÊó∂Èó¥ÔºåÂπ∂Áª¥Êä§ËØ•session„ÄÇ ‰πãÂâçÂú®ÂçïËøõÁ®ãÂ∫îÁî®‰∏≠ÔºåsessionÊàë‰∏ÄËà¨ÊòØÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºå‰∏ç‰ºöÂÅöÊåÅ‰πÖÂåñÊìç‰ΩúÊàñËÄÖËØ¥‰ΩøÁî®‰∏âÊñπÁöÑÊúçÂä°Êù•Â≠òsession‰ø°ÊÅØÔºåÂ¶Çredis„ÄÇ‰ΩÜÊòØÂú®ÂàÜÂ∏ÉÂºèÂú∫ÊôØ‰∏ãÔºåËøôÁßçÂ≠òÂú®Êú¨Êú∫ÂÜÖÂ≠ò‰∏≠ÁöÑÊñπÂºèÊòæÁÑ∂ÊòØ‰∏çÈÄÇÁî®ÁöÑÔºåÂõ†‰∏∫sessionÊó†Ê≥ïÂÖ±‰∫´„ÄÇËøô‰∏™ÂêéÈù¢ËØ¥„ÄÇ sessionÁöÑÊúâÊïàÊúüsession‰∏ÄËà¨Âú®ÂÜÖÂ≠ò‰∏≠Â≠òÊîæÔºåÂÜÖÂ≠òÁ©∫Èó¥Êú¨Ë∫´Â§ßÂ∞èÂ∞±Êúâ‰∏ÄÂÆöÁöÑÂ±ÄÈôêÊÄßÔºåÂõ†Ê≠§sessionÈúÄË¶ÅÈááÁî®‰∏ÄÁßçËøáÊúüÂà†Èô§ÁöÑÊú∫Âà∂Êù•Á°Æ‰øùsession‰ø°ÊÅØ‰∏ç‰ºö‰∏ÄÁõ¥Á¥ØÁßØÔºåÊù•Èò≤Ê≠¢ÂÜÖÂ≠òÊ∫¢Âá∫ÁöÑÂèëÁîü„ÄÇ sessionÁöÑË∂ÖÊó∂Êó∂Èó¥ÂèØ‰ª•ÈÄöËøámaxInactiveIntervalÂ±ûÊÄßÊù•ËÆæÁΩÆ„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ËÆ©sessionÂ§±ÊïàÁöÑËØùÔºå‰πüÂèØ‰ª•ÂΩìÈÄöËøáË∞ÉÁî®sessionÁöÑinvalidate()Êù•ÂÆåÊàê„ÄÇ ÂàÜÂ∏ÉÂºèsessionÈ¶ñÂÖàÊòØ‰∏∫‰ªÄ‰πà‰ºöÊúâËøôÊ†∑ÁöÑÊ¶ÇÂøµÂá∫Áé∞Ôºü ÂÖàËÄÉËôëËøôÊ†∑‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁé∞Âú®ÊàëÁöÑÂ∫îÁî®ÈúÄË¶ÅÈÉ®ÁΩ≤Âú®3Âè∞Êú∫Âô®‰∏ä„ÄÇÊòØ‰∏çÊòØÂá∫Áé∞ËøôÊ†∑‰∏ÄÁßçÊÉÖÂÜµÔºåÊàëÁ¨¨‰∏ÄÊ¨°ÁôªÈôÜÔºåËØ∑Ê±ÇÂéª‰∫ÜÊú∫Âô®1ÔºåÁÑ∂ÂêéÂÜçÊú∫Âô®1‰∏äÂàõÂª∫‰∫Ü‰∏Ä‰∏™sessionÔºõ‰ΩÜÊòØÊàëÁ¨¨‰∫åÊ¨°ËÆøÈóÆÊó∂ÔºåËØ∑Ê±ÇË¢´Ë∑ØÁî±Âà∞Êú∫Âô®2‰∫ÜÔºå‰ΩÜÊòØÊú∫Âô®2‰∏äÂπ∂Ê≤°ÊúâÊàëÁöÑsession‰ø°ÊÅØÔºåÊâÄ‰ª•ÂæóÈáçÊñ∞ÁôªÂΩï„ÄÇÂΩìÁÑ∂ËøôÁßçÂèØ‰ª•ÈÄöËøánginxÁöÑIP HASHË¥üËΩΩÁ≠ñÁï•Êù•Ëß£ÂÜ≥„ÄÇÂØπ‰∫éÂêå‰∏Ä‰∏™IPËØ∑Ê±ÇÈÉΩ‰ºöÂéªÂêå‰∏Ä‰∏™Êú∫Âô®„ÄÇ ‰ΩÜÊòØ‰∏öÂä°ÂèëÂ±ïÁöÑË∂äÊù•Ë∂äÂ§ßÔºåÊãÜÂàÜÁöÑË∂äÊù•Ë∂äÂ§öÔºåÊú∫Âô®Êï∞‰∏çÊñ≠Â¢ûÂä†ÔºõÂæàÊòæÁÑ∂ÈÇ£ÁßçÊñπÊ°àÂ∞±‰∏çË°å‰∫Ü„ÄÇÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅËÄÉËôëÊòØ‰∏çÊòØÂ∫îËØ•Â∞Üsession‰ø°ÊÅØÊîæÂú®‰∏Ä‰∏™Áã¨Á´ãÁöÑÊú∫Âô®‰∏äÔºåÊâÄ‰ª•ÂàÜÂ∏ÉÂºèsessionË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÂÖ∂ÂÆûÂ∞±ÊòØÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÁöÑsessionÂÖ±‰∫´ÁöÑÈóÆÈ¢ò„ÄÇ ‰∏äÂõæ‰∏≠ÁöÑÂÖ≥‰∫ésessionÁã¨Á´ãÈÉ®ÁΩ≤ÁöÑÊñπÂºèÊúâÂæàÂ§öÁßçÔºåÂèØ‰ª•ÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑÊï∞ÊçÆÂ∫ìÊúçÂä°Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÁºìÂ≠òÊúçÂä°(redisÔºåÁõÆÂâçÊØîËæÉÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÊñπÂºèÔºåÂç≥‰ΩøÁî®RedisÊù•‰Ωú‰∏∫sessionÁºìÂ≠òÊúçÂä°Âô®)„ÄÇ ÂèÇËÄÉ https://www.cnblogs.com/icelin/p/3974935.html https://www.nczonline.net/blog/2008/05/17/browser-cookie-restrictions/ https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE]]></content>
      <categories>
        <category>session</category>
      </categories>
      <tags>
        <tag>ËÅä‰∏ÄËÅä</tag>
        <tag>session</tag>
        <tag>cookie</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅä AOPÔºöAdvice Ê∫êÁ†ÅËß£Êûê]]></title>
    <url>%2F2018%2F11%2F10%2Fspringaoptwo%2F</url>
    <content type="text"><![CDATA[Âú®Á¨¨‰∏ÄÁØá‰∏≠ÁöÑ‰æãÂ≠êÂíåÊ¶ÇÂøµ‰ªãÁªç‰∏≠Êàë‰ª¨ÂØπ Advice Êúâ‰∫Ü‰∏Ä‰∏™ÂàùÊ≠•ÁöÑËÆ§Áü•„ÄÇÂú®Spring AOP‰∏≠ÔºåAdviceÁöÑ‰ΩúÁî®Â∞±ÊòØÁî®Êù•ÊèèËø∞ Spring AOP Âõ¥ÁªïÊñπÊ≥ïË∞ÉÁî®ËÄåÊ≥®ÂÖ•ÁöÑÂàáÈù¢Ë°å‰∏∫„ÄÇ Êú¨ÁØáÊñáÁ´†Â∞Ü‰ªéÊ∫êÁ†ÅÁöÑËßíÂ∫¶Êù•Áúã‰∏ÄÁúã Advice Âà∞Â∫ïÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºüÂèàÊòØÊÄé‰πàÂÆåÊàêÈÄöÁü•ÁöÑÔºü Advice Êé•Âè£1234567891011package org.aopalliance.aop;/** * Tag interface for Advice. Implementations can be any type * of advice, such as Interceptors. * @author Rod Johnson * @version $Id: Advice.java,v 1.1 2004/03/19 17:02:16 johnsonr Exp $ */public interface Advice &#123;&#125; Advice Êé•Âè£ÁöÑÂÆö‰πâÊòØÂú® org.aopalliance.aop ÂåÖ‰∏ãÈù¢ÁöÑÔºõ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÔºåAdvice Êé•Âè£Âπ∂Ê≤°ÊúâÊèê‰æõ‰ªª‰ΩïÁöÑÊñπÊ≥ïÔºõÁ±ª‰ººÁöÑÊé•Âè£ÂÆö‰πâËøòÊúâjava ‰∏≠ÁöÑÂ¶ÇSerializableÊé•Âè£ÔºåËøôÁ±ªÊé•Âè£‰∏ÄËà¨Áß∞‰πã‰∏∫Ê†áËØÜÊé•Âè£ÔºõÊ†áËØÜÊé•Âè£ÂØπÂÆûÁé∞ÂÆÉÁöÑÁ±ªÊ≤°Êúâ‰ªª‰ΩïÁöÑËØ≠‰πâË¶ÅÊ±Ç,‰ªÖ‰ªÖÊòØÂÖÖÂΩì‰∏Ä‰∏™Ê†áÁ§∫ÁöÑ‰ΩúÁî®,Áî®Êù•Ë°®ÊòéÂÆûÁé∞ÂÆÉÁöÑÁ±ªÂ±û‰∫é‰∏Ä‰∏™ÁâπÂÆöÁöÑÁ±ªÂûãÔºà‰ªéËøôÁßçÊ†áËØÜÊÄßËßíÂ∫¶Êù•ËØ¥ÔºåÂíåÊ≥®Ëß£ÂÖ∂ÂÆûÊå∫ÂÉèÁöÑÔºâÔºõ Spring AOP‰∏≠ÈÄöËøáÂÆö‰πâÂíå‰ΩøÁî®ËøôÊ†∑‰∏Ä‰∏™Áªü‰∏ÄÁöÑÊé•Âè£Ôºå‰∏∫ÁöÑÂ∞±ÊòØËÉΩÂ§ü‰∏∫ÂàáÈù¢Â¢ûÂº∫ÁöÑÁªáÂÖ•ÂäüËÉΩÂÅöÊõ¥Â§öÁöÑÁªÜÂåñÂíåÊâ©Â±ï„ÄÇ‰∏ãÈù¢Â∞±ÂØπÂ∏∏ËßÅÁöÑ‰∏â‰∏™AdviceËøõË°åÂàÜÊûê„ÄÇ BeforeAdvice12public interface BeforeAdvice extends Advice &#123;&#125; Ëøô‰∏™Êé•Âè£‰πüÊòØ‰∏Ä‰∏™Ê†áËØÜÊé•Âè£„ÄÇÁúã‰∏ã BeforeAdvice ÁöÑÁªßÊâøÂÖ≥Á≥ªÔºö MethodBeforeAdvice ÊòØ BeforeAdvice ‰∏∫ÂæÖÂ¢ûÂº∫ÁöÑÁõÆÊ†áÊñπÊ≥ïËÆæÁΩÆÁöÑÂâçÁΩÆÂ¢ûÂº∫Êé•Âè£„ÄÇ 1234public interface MethodBeforeAdvice extends BeforeAdvice &#123; void before(Method method, Object[] args, Object target) throws Throwable;&#125; MethodBeforeAdvice ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞ before(‚Ä¶) Ôºõ ‰Ωú‰∏∫ÂõûË∞ÉÂáΩÊï∞Ôºåbefore ÊñπÊ≥ïÁöÑÂÆûÁé∞Âú® Advice ‰∏≠Ë¢´ÈÖçÁΩÆÂà∞ÁõÆÊ†áÊñπÊ≥ïÂêéÔºå‰ºöÂú®Ë∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ïÊó∂Ë¢´ÂõûË∞É„ÄÇÊù•Áúã‰∏ãbeforeÊñπÊ≥ïÁöÑÂá†‰∏™ÂèÇÊï∞Ôºö Method method ÔºöÔºà method being invokedÔºâËøô‰∏™ÂèÇÊï∞ÊòØÁõÆÊ†áÊñπÊ≥ïÁöÑÂèçÂ∞ÑÂØπË±°Ôºõ Object[] args ÔºöÔºàarguments to the methodÔºâÁõÆÊ†áÊñπÊ≥ïÁöÑËæìÂÖ•ÂèÇÊï∞Ôºõ Object target ÔºöÔºàtarget of the method invocationÔºâÊñπÊ≥ïË∞ÉÁî®ÁöÑÁõÆÊ†á AspectJMethodBeforeAdviceAspectJMethodBeforeAdvice ÁªßÊâø‰∫Ü AbstractAspectJAdvice ÊäΩË±°Á±ªÔºåÂπ∂ÂÆûÁé∞‰∫Ü MethodBeforeAdvice Êé•Âè£„ÄÇ‰ªé AspectJMethodBeforeAdvice Á±ª‰∏≠‰ª£Á†ÅÂèØ‰ª•ÂæóÁü•ÔºåAspectJMethodBeforeAdvice ÈáçÂÜô before ÊñπÊ≥ïÁöÑÂÆûÁé∞ÊòØ ÈÄöËøáË∞ÉÁî®Áà∂Á±ªÁöÑ invokeAdviceMethod ÊñπÊ≥ïÂÆåÊàêÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥Spring AOP ÁöÑAdviceÂåÖË£Ö‰∫ÜAspectJÁöÑbeforeÊñπÊ≥ï„ÄÇ Spring AOPÁöÑÂÆûÁé∞ÂêéÈù¢ÂÜçËØ¥ÔºåÊàë‰ª¨ÂÖàËá™Â∑±Êù•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈÄöÁü•„ÄÇ Ëá™ÂÆö‰πâ AdviceÂÆûÁé∞ MethodBeforeAdviceÂÆö‰πâÊàë‰ª¨Ëá™Â∑±ÁöÑ GlmapperBeforeMethodAdvice ÔºõËøôÈáåÂÆûÁé∞ MethodBeforeAdvice Êé•Âè£ÔºåÁÑ∂ÂêéÈáçÂÜô before Ëøô‰∏™ÊñπÊ≥ï„ÄÇ 1234567891011121314151617181920212223/** * @description: Ëá™ÂÆö‰πâÁöÑ GlmapperBeforeMethodAdvice * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: glmapper@leishu * @date: 18/6/23 */public class GlmapperBeforeMethodAdvice implementsMethodBeforeAdvice,MethodInterceptor &#123; private static final Logger LOGGER = LoggerFactory.getLogger(GlmapperBeforeMethodAdvice.class.getSimpleName()); @Override public void before(Method method, Object[] args, Object target) throws Throwable &#123; LOGGER.info("invoke BeforeAdvice successfully..."); &#125; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; Object result=invocation.proceed(); return result; &#125;&#125; OKÔºåÊúâ‰∫ÜËøô‰∏™ GlmapperBeforeMethodAdvice ÔºåÂÜçÊù•ÁúãÁúãÊÄé‰πàÁî®ÂÆÉÔºõÂêåÊ†∑Êú¨ÁØáÊñáÁ´†ÊâÄ‰ΩøÁî®ÁöÑÊ°à‰æãÂùá‰ΩøÁî®Ââç‰∏ÄÁØáÂçöÂÆ¢‰∏≠ÁöÑÈÇ£‰∏™ËÑöÊâãÊû∂Êù•ÂÆåÊàê„ÄÇ 12345678910111213141516171819202122232425262728293031&lt;!--Êàë‰ª¨ÁöÑÁõÆÊ†áÁ±ª--&gt;&lt;bean id="goodsService" class="com.glmapper.framerwork.service.impl.GoodsServiceImpl"/&gt;&lt;!--Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑAdvice--&gt;&lt;bean id="glmapperBeforeMethodAdvice" class="com.glmapper.framerwork.Advice.GlmapperBeforeMethodAdvice"&gt;&lt;/bean&gt;&lt;!-- Â£∞ÊòéÂàáÂÖ•ÁÇπadviser --&gt;&lt;bean id="adviser" class="org.springframework.aop.support.RegexpMethodPointcutAdvisor"&gt; &lt;!--ËøôÈáå‰ΩøÁî®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑadvice--&gt; &lt;property name="advice" ref="glmapperBeforeMethodAdvice"&gt;&lt;/property&gt; &lt;!-- patternÊåáÂÆöqueryAllÊñπÊ≥ï‰Ωú‰∏∫ÂàáÂÖ•ÁÇπÔºõ \. Ëøô‰∏™ÊòØËΩ¨‰πâ‰ΩøÁî®--&gt; &lt;property name="pattern" value="com\.glmapper\.framerwork\.service\.impl\.GoodsServiceImpl\.queryAll"&gt; &lt;/property&gt;&lt;/bean&gt;&lt;!-- ÂÆö‰πâ‰ª£ÁêÜÂØπË±° ËøîÂõûÂÆû‰æãÊòØÁõÆÊ†áÂØπË±° targetÂ±ûÊÄßÊåáÂÆöÁöÑgoodsServiceÂØπË±°--&gt;&lt;bean id="proxyService"class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;property name="target"&gt; &lt;ref bean="goodsService" /&gt; &lt;/property&gt; &lt;!--Ê∫êÁ†ÅÂÜÖÂõ∫ÂÆöÁöÑÂ±ûÊÄßprivate String[] interceptorNames; --&gt; &lt;property name="interceptorNames"&gt; &lt;value&gt;adviser&lt;/value&gt; &lt;/property&gt;&lt;/bean&gt; ÂÆ¢Êà∑Á´ØÈÉ®ÂàÜÔºåÈÄöËøáSpringContextUtilÊù•Êãø‰ª£ÁêÜÂØπË±°Ôºõ 1234567891011@RequestMapping("/initPage")public ModelAndView initPage(HttpServletRequest request, HttpServletResponse response, ModelAndView view) &#123; //Ëé∑Âèñ‰ª£ÁêÜbean GoodsService proxyService= (GoodsService) SpringContextUtil.getBean("proxyService"); //Ë∞ÉÁî® List&lt;Goods&gt; goods = proxyService.queryAll(10,10); view.addObject("goodsList", goods); view.setViewName("goodslist"); return view;&#125; Êó•ÂøóËæìÂá∫Êª°Ë∂≥Êàë‰ª¨ÁöÑÊúüÊúõÔºàÂ¶Ç‰∏ãÔºâÔºö ÂêåÊ†∑ÁöÑÔºåÂú®GlmapperBeforeMethodAdviceÂü∫Á°Ä‰∏äÂÜçÂÆûÁé∞ AfterReturningAdvice Êé•Âè£ÔºåÈáçÂÜôafterReturningÊñπÊ≥ïÔºåÂ∞±ËÉΩÂÆûÁé∞ÂêéÁΩÆÈÄöÁü•„ÄÇ 12345@Overridepublic void afterReturning(Object returnValue, Method method, Object[]args, Object target) throws Throwable &#123; LOGGER.info("invoke AfterAdvice successfully...");&#125; Ëøô‰∏™ÊñπÂºèÂú®ËÅä‰∏ÄËÅä AOP ÔºöË°®Áé∞ÂΩ¢Âºè‰∏éÂü∫Á°ÄÊ¶ÇÂøµ‰∏≠ÊúâËØ¥ÈÅì„ÄÇ Advice Âú® Aop ‰∏≠ÁöÑÂÆûÁé∞ÂéüÁêÜËøôÈáåÊÑüËßâÊ≤°‰ªÄ‰πàÂ•ΩËØ¥ÁöÑÔºå‰∏äÈù¢ÁöÑÊ°à‰æãÂÖ∂ÂÆûÂ∞±ÊòØSpringÊèê‰æõÁªôÊàë‰ª¨‰ΩøÁî®ÁöÑÊé•Âè£„ÄÇÂõ†‰∏∫MethodBeforeAdviceÁ≠âÈÉΩÊòØÁªßÊâøËá™ AbstractAspectJAdvice Ëøô‰∏™ÊäΩË±°Á±ªÔºõÊàë‰ª¨Â∞±Êù•Áúã‰∏ãËøô‰∏™ÊäΩË±°Á±ªÈáåÈù¢ÁöÑ‰∏Ä‰∫õÊ†∏ÂøÉÈÄªËæëÂêß„ÄÇÊàë‰ª¨ÊåâÁÖßAspectJMethodBeforeAdviceËøôÈáåËøô‰∏™Á±ªÈáåÈù¢beforeÊèê‰æõÁöÑÁ∫øÁ¥¢Êù•‰∏ÄÊ≠•Ê≠•ÂàÜÊûê„ÄÇ È¶ñÂÖàÂú®AspectJMethodBeforeAdviceÈáåbeforeÊñπÊ≥ï‰∏≠Ë∞ÉÁî®ÁöÑÊòØËøô‰∏™ÈÄªËæëÔºö 12345678910111213/** * Invoke the advice method. * @param jpMatch the JoinPointMatch that matched this execution join point * @param returnValue the return value from the method execution (may be null) * @param ex the exception thrown by the method execution (may be null) * @return the invocation result * @throws Throwable in case of invocation failure */protected Object invokeAdviceMethod(JoinPointMatch jpMatch, ObjectreturnValue, Throwable ex) throws Throwable &#123; return invokeAdviceMethodWithGivenArgs(argBinding(getJoinPoint(), jpMatch, returnValue, ex));&#125; ËøôÈáå argBinding ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØËé∑ÂèñÊñπÊ≥ïÊâßË°åËøûÊé•ÁÇπ‰∏äÁöÑÂèÇÊï∞ÔºåÂπ∂Â∞Ü‰∏ÄÁªÑÂèÇÊï∞ËæìÂá∫ÁªôAdviceÊñπÊ≥ï„ÄÇ ÁªßÁª≠Êù•ÁúãinvokeAdviceMethodWithGivenArgsËøô‰∏™ÊñπÊ≥ïÔºö 1234567891011121314151617181920212223protected Object invokeAdviceMethodWithGivenArgs(Object[] args) throwsThrowable &#123; //‰øùÂ≠ò‰∏Ä‰ªΩÂèÇÊï∞ÂâØÊú¨ Object[] actualArgs = args; //È™åËØÅ‰∏ãÂèÇÊï∞ÊòØÂê¶‰∏çÂ≠òÂú® if (this.aspectJAdviceMethod.getParameterTypes().length == 0) &#123; actualArgs = null; &#125; try &#123; //ËÆæÁΩÆ‰∏ãÊñπÊ≥ïÁöÑËÆøÈóÆÊùÉÈôê ReflectionUtils.makeAccessible(this.aspectJAdviceMethod); // invokeÊâßË°åÔºõËøôÈáåÂÖàÈÄöËøáaspectInstanceFactoryÂØπÂÉèÊãøÂà∞Êàë‰ª¨ÁöÑÁõÆÊ†áÂØπË±°ÂÆû‰æãÔºåÁÑ∂ÂêéÂÜçËøõË°åinvokeË∞ÉÁî®ÊâßË°å return this.aspectJAdviceMethod.invoke(this.aspectInstanceFactory.getAspectInstance(), actualArgs); &#125; catch (IllegalArgumentException ex) &#123; throw new AopInvocationException("Mismatch on arguments to advice method [" + this.aspectJAdviceMethod + "]; pointcut expression [" + this.pointcut.getPointcutExpression() + "]", ex); &#125; catch (InvocationTargetException ex) &#123; throw ex.getTargetException(); &#125;&#125; ‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÂÖ∂ÂÆûÂ∞±ÊòØÈÄöËøáÂèçÂ∞ÑÁöÑÊñπÂºèÊâßË°å‰∫ÜÊàë‰ª¨ÁöÑÁõÆÊ†áÊñπÊ≥ï„ÄÇÊàë‰ª¨ÂÜçÂõûËøáÂ§¥Êù•Áúã‰∏ãÊàë‰ª¨ÁöÑÁõÆÊ†áÊñπÊ≥ïÂà∞Â∫ïÂú®Âì™ÈáåÂéªËøõË°åÂ¢ûÂº∫ÁöÑÔºõËøôÈáåÊàë‰ª¨ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂Êù•ÁúãÔºö 123456789101112&lt;!-- ‰ª£ÁêÜÂØπË±° ËøîÂõûÂÆû‰æãÊòØÁõÆÊ†áÂØπË±° targetÂ±ûÊÄßÊåáÂÆöÁöÑAOPserviceÂØπË±°--&gt;&lt;bean id="proxyService"class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;property name="target"&gt; &lt;ref bean="goodsService" /&gt; &lt;/property&gt; &lt;!--Ê∫êÁ†ÅÂÜÖÂõ∫ÂÆöÁöÑÂ±ûÊÄßprivate String[] interceptorNames; --&gt; &lt;property name="interceptorNames"&gt; &lt;value&gt;adviser&lt;/value&gt; &lt;/property&gt;&lt;/bean&gt; ‰ª£ÁêÜÂØπË±°proxyServiceÂÆûÁé∞‰∏äÊòØProxyFactoryBean‰∫ßÁîüÁöÑÔºõËøôÈáåÂ∞±‰∏çÂú®ÈòêËø∞BeanFactoryÂíåFactoryBeanÁöÑÂå∫Âà´‰∫Ü„ÄÇ ‰ªé‰∏äÈù¢ÁöÑÈÖçÁΩÆÊñá‰ª∂Êàë‰ª¨ÂèØ‰ª•ÁÆÄÂçïÁöÑ‰∫ÜËß£Âà∞Ôºå‰ª£ÁêÜÂØπË±°ÂÆûÈôÖ‰∏äÊòØÊàë‰ª¨ÁõÆÊ†áÂØπË±°+adviserÂÖ±ÂêåÁªÑÊàêÔºõËÄåÂú®adviserÈáåÈù¢ÂèàÂåÖÊã¨‰∫ÜÊàë‰ª¨ÁöÑÈÄöÁü•„ÄÇ ProxyFactoryBeanÁªßÊâø‰∫ÜFactoryBeanÔºåÊàë‰ª¨Áü•ÈÅìFactoryBean‰πüÊòØÁî®Êù•ÁîüÊàêbeanÁöÑÔºå‰ΩÜÊòØÂÆÉÁîüÊàêÁöÑbeanÊòØÈÄöËøáÂÖ∂getObjectÊñπÊ≥ïÊù•Ëé∑ÂèñÁöÑ„ÄÇOKÔºåÈÇ£Êàë‰ª¨Êù•Áúã‰∏ãProxyFactoryBeanÁöÑgetObjectÊñπÊ≥ïÔºö 1234567891011121314151617181920212223/** * Return a proxy. Invoked when clients obtain beans from this factory bean. * Create an instance of the AOP proxy to be returned by this factory. * The instance will be cached for a singleton, and create on each call to * &#123;@code getObject()&#125; for a proxy. * @return a fresh AOP proxy reflecting the current state of this factory */@Overridepublic Object getObject() throws BeansException &#123; //ÂàùÂßãÂåñAdvisorÈìæ initializeAdvisorChain(); //Â¶ÇÊûúÊòØÂçï‰æãÔºåÂàôËé∑ÂèñÂçï‰æãÂØπË±° if (isSingleton()) &#123; return getSingletonInstance(); &#125; else &#123; if (this.targetName == null) &#123; logger.warn("Using non-singleton proxies with singleton targets is often undesirable. " + "Enable prototype proxies by setting the 'targetName' property."); &#125; return newPrototypeInstance(); &#125;&#125; ËøîÂõû‰∏Ä‰∏™‰ª£ÁêÜ„ÄÇÂΩìÂÆ¢Êà∑Á´Ø‰ªéËøô‰∏™Â∑•ÂéÇbeanËé∑ÂèñbeanÊó∂Ë∞ÉÁî®„ÄÇÂàõÂª∫ËØ•Â∑•ÂéÇËøîÂõûÁöÑAOP‰ª£ÁêÜÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇËØ•ÂÆû‰æãÂ∞ÜË¢´ÁºìÂ≠ò‰∏∫‰∏Ä‰∏™Âçï‰æãÔºåÂπ∂Âú®ÊØèÊ¨°Ë∞ÉÁî®Êó∂ÂàõÂª∫„ÄÇ initializeAdvisorChainÔºöÂàõÂª∫ advisorÔºàÊã¶Êà™Âô®ÔºâÈìæ„ÄÇÊØèÊ¨°Ê∑ªÂä†Êñ∞ÁöÑ prototype ÂÆû‰æãÊó∂ÔºåÊ∫êËá™ BeanFactory ÁöÑ Advisor ÈÉΩÂ∞ÜË¢´Âà∑Êñ∞„ÄÇÈÄöËøáÂ∑•ÂéÇ API ‰ª•ÁºñÁ®ãÊñπÂºèÊ∑ªÂä†ÁöÑÊã¶Êà™Âô®‰∏çÂèóÊ≠§Á±ªÊõ¥ÊîπÁöÑÂΩ±Âìç„ÄÇÔºàËØëÊ≥®ÔºâÔºõÂÖ∂ÂÆûÂ∞±ÊòØÊ†πÊçÆÊàë‰ª¨ÈÖçÁΩÆÁöÑinterceptorNamesÊù•ÂàùÂßãÂåñÊàë‰ª¨ÁöÑadvisorÔºàÊã¶Êà™Âô®ÔºâÈìæÔºåÁî®Êù•Â¢ûÂº∫Êàë‰ª¨ÁöÑÁõÆÊ†áË∞ÉÁî®ÊñπÊ≥ï„ÄÇ ‰∏ãÈù¢ÊòØgetSingletonInstanceËøô‰∏™ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324/** * Return the singleton instance of this class's proxy object, * lazily creating it if it hasn't been created already. * @return the shared singleton proxy */private synchronized Object getSingletonInstance() &#123; if (this.singletonInstance == null) &#123; //ÂàõÂª∫ÁõÆÊ†áÂØπË±°ÁöÑ‰ª£ÁêÜ this.targetSource = freshTargetSource(); if (this.autodetectInterfaces &amp;&amp; getProxiedInterfaces().length == 0 &amp;&amp; !isProxyTargetClass()) &#123; // Rely on AOP infrastructure to tell us what interfaces to proxy. //Ëé∑ÂèñÁõÆÊ†áÁ±ª Class&lt;?&gt; targetClass = getTargetClass(); if (targetClass == null) &#123; throw new FactoryBeanNotInitializedException("Cannot determine target class for proxy"); &#125; setInterfaces(ClassUtils.getAllInterfacesForClass(targetClass, this.proxyClassLoader)); &#125; // Initialize the shared singleton instance. super.setFrozen(this.freezeProxy); this.singletonInstance = getProxy(createAopProxy()); &#125; return this.singletonInstance;&#125; ‰∏äÈù¢‰ª£Á†ÅÊúÄÊ†∏ÂøÉÁöÑÊòØgetProxyËøô‰∏™ÊñπÊ≥ïÔºåËøôÈáåÊñπÂºèÊúâ‰∏§‰∏™ÊñπÂºèÔºå‰∏Ä‰∏™ÊòØcglibÔºåÂè¶Â§ñ‰∏ÄÁßçÊòØjdkÂä®ÊÄÅ‰ª£ÁêÜÔºö ËøôÈáåÊàë‰ª¨‰ª•ÈªòËÆ§ÁöÑÂä®ÊÄÅ‰ª£ÁêÜÁöÑÊñπÂºèÊù•ËØ¥Ôºö(org.springframework.aop.framework.JdkDynamicAopProxyÁ±ª‰∏≠) 1234567891011@Overridepublic Object getProxy(ClassLoader classLoader) &#123; if (logger.isDebugEnabled()) &#123; logger.debug("Creating JDK dynamic proxy: target source is " + this.advised.getTargetSource()); &#125; Class&lt;?&gt;[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised); findDefinedEqualsAndHashCodeMethods(proxiedInterfaces); return Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);&#125; Ëøô‰∏™ÊñπÊ≥ïËøîÂõûÁöÑÂ∞±ÊòØÊåáÂÆöÊé•Âè£ÁöÑ‰ª£ÁêÜÁ±ªÂÆû‰æãÔºåËØ•Êé•Âè£Â∞ÜÊñπÊ≥ïË∞ÉÁî®ÂàÜÊ¥æÁªôÊåáÂÆöÁöÑË∞ÉÁî®Â§ÑÁêÜÁ®ãÂ∫è„ÄÇ Âà∞Ê≠§Êï¥‰∏™AOP‰ª£ÁêÜÁîüÊàêÈÄªËæëÂ∞±ÂÆå‰∫Ü„ÄÇ ÊÄªÁªì‰∏Ä‰∏ãÂ∞±ÊòØÊàë‰ª¨ÁöÑ‰ª£ÁêÜÁ±ª‰∏≠ÂÖ∂ÂÆûÂåÖÊã¨‰∫ÜÊàë‰ª¨AOPÂ¢ûÂº∫ÁöÑÈÇ£ÈÉ®ÂàÜÈÄªËæëÁöÑÔºåËøô‰∏™ÂÖ∂ÂÆû‰ªé‰∏äÈù¢ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Â∞±ÂæàÊ∏ÖÊ•öÁöÑÂèØ‰ª•ÁúãÂá∫Êù•ÔºõÊâÄ‰ª•‰ªéAdivce‰ªã‰∏™ËßíÂ∫¶Êù•ËØ¥ÔºåÂÆÉÂÖ∂ÂÆû‰ºöË¢´Êä±Âú®advisor‰∏≠ÔºåÁÑ∂ÂêéÂú®Ë¢´‰º†ÈÄíÂà∞‰ª£ÁêÜÂØπË±°‰∏≠Ôºå‰ª£ÁêÜÂØπË±°Èô§‰∫ÜÊã•ÊúâÊàë‰ª¨ÁõÆÊ†áÂØπË±°ÁöÑËÉΩÂäõ‰πãÂ§ñÔºåËøòÂåÖÊã¨‰∫ÜAdivceÁöÑËÉΩÂäõÔºõÈÄöËøáËøôÁßçÊñπÂºèÂ∞±ÂÆûÁé∞‰∫ÜÂ¢ûÂº∫„ÄÇ ÂÖ≥‰∫éAdviceÂ∞±Âà∞ËøôÈáå‰∫ÜÔºå‰∏ã‰∏ÄÁ´†‰ºöÊù•ÂçïÁã¨ËØ¥‰∏Ä‰∏ã PointCut „ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>ËÅä‰∏ÄËÅä</tag>
        <tag>aop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅä AOP ÔºöË°®Áé∞ÂΩ¢Âºè‰∏éÂü∫Á°ÄÊ¶ÇÂøµ]]></title>
    <url>%2F2018%2F11%2F10%2Fspringaopone%2F</url>
    <content type="text"><![CDATA[aop Áªà‰∫éÊèê‰∏äÊó•Á®ãÊù•ÂÜô‰∏ÄÂÜô‰∫Ü„ÄÇ Á≥ªÂàóÁõÆÂΩïÊú¨Á≥ªÂàóÂàÜ‰∏∫ ‰∏ä„ÄÅ‰∏≠„ÄÅ‰∏ã‰∏âÁØá„ÄÇ‰∏äÁØá‰∏ªË¶ÅÊòØ‰ªãÁªçÂ¶ÇÊûú‰ΩøÁî® AOP ÔºåÊèê‰æõ‰∫ÜdemoÂíåÈÖçÁΩÆÊñπÂºèËØ¥ÊòéÔºõ‰∏≠ÁØáÊù•ÂØπÂÆûÁé∞ AOP ÁöÑÊäÄÊúØÂéüÁêÜËøõË°åÂàÜÊûêÔºõ‰∏ãÁØá‰∏ªË¶ÅÈíàÂØπSpring‰∏≠ÂØπ‰∫éAOPÁöÑÂÆûÁé∞ËøõË°åÊ∫êÁ†ÅÂàÜÊûê„ÄÇ ‰ªé‰∏Ä‰∏™‰æãÂ≠êËØ¥Ëµ∑ Âü∫‰∫é‰ª£ÁêÜÁöÑÊñπÂºè Á∫ØPOJOÂàáÈù¢ ÈÖçÁΩÆÊñπÂºè AspectJ Ê≥®Ëß£ÊñπÂºè AspectJ XML ÈÖçÁΩÆÊñπÂºè Ë°®ËææÂºèËØ¥Êòé Âü∫Á°ÄÊ¶ÇÂøµ AOPÊ¶ÇÂøµ Target Object ÁªáÂÖ•ÔºàWeave Proxy Introduction Aspect Joinpoint Pointcut Advice Ê¶ÇÂøµ ÂàÜÁ±ª ÂÖ≥Á≥ª ‰∏Ä‰∫õÂùë È°πÁõÆÂú∞ÂùÄÈ°πÁõÆÂú∞ÂùÄÔºöglmapper-ssm-parent Ëøô‰∏™È°πÁõÆÈáåÈù¢ÂåÖÂê´‰∫Ü‰∏ãÈù¢Âá†Áßç AOP ÂÆûÁé∞ÊñπÂºèÁöÑÊâÄÊúâ‰ª£Á†ÅÔºåÊúâÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ÂèØ‰ª•forkË∑ë‰∏Ä‰∏ã„ÄÇËøô‰∏™demo‰∏≠Âàó‰∏æ‰∫Ü4‰∏≠ÊñπÂºèÁöÑÂÆûÁé∞Ôºö Âü∫‰∫é‰ª£Á†ÅÁöÑÊñπÂºè Âü∫‰∫éÁ∫ØPOJOÁ±ªÁöÑÊñπÂºè Âü∫‰∫éAspectÊ≥®Ëß£ÁöÑÊñπÂºè Âü∫‰∫éÊ≥®ÂÖ•ÂºèAspectÁöÑÊñπÂºè ÁõÆÂâçÊàë‰ª¨ÁªèÂ∏∏Áî®Âà∞ÁöÑÊòØÂü∫‰∫éAspectÊ≥®Ëß£ÁöÑÊñπÂºèÁöÑÊñπÂºè„ÄÇ‰∏ãÈù¢Êù•‰∏Ä‰∏™‰∏™‰∫ÜËß£‰∏ã‰∏çÂêåÊñπÂºèÁöÑË°®Áé∞ÂΩ¢Âºè„ÄÇ Âü∫‰∫é‰ª£ÁêÜÁöÑÊñπÂºèËøôÁßçÊñπÂºèÁúãËµ∑Êù•ÂæàÂ•ΩÁêÜËß£Ôºå‰ΩÜÊòØÈÖçÁΩÆËµ∑Êù•Áõ∏ÂΩìÈ∫ªÁÉ¶ÔºõÂ∞è‰ºô‰º¥‰ª¨ÂèØ‰ª•ÂèÇËÄÉÈ°πÁõÆÊù•ÁúãÔºåËøôÈáåÂè™Ë¥¥Âá∫ÊØîËæÉÂÖ≥ÈîÆÁöÑÊµÅÁ®ã‰ª£Á†Å„ÄÇ 1„ÄÅÈ¶ñÂÖàÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£ÔºöGoodsService12345678910public interface GoodsService &#123; /** * Êü•ËØ¢ÊâÄÊúâÂïÜÂìÅ‰ø°ÊÅØ * * @param offset Êü•ËØ¢Ëµ∑Âßã‰ΩçÁΩÆ * @param limit Êü•ËØ¢Êù°Êï∞ * @return */ List&lt;Goods&gt; queryAll(int offset,int limit);&#125; 2„ÄÅGoodsService ÂÆûÁé∞Á±ª123456789101112@Service@Qualifier("goodsService")public class GoodsServiceImpl implements GoodsService &#123; @Autowired private GoodsDao goodsDao; public List&lt;Goods&gt; queryAll(int offset, int limit) &#123; System.out.println("ÊâßË°å‰∫ÜqueryAllÊñπÊ≥ï"); List&lt;Goods&gt; list = new ArrayList&lt;Goods&gt;(); return list; &#125;&#125; 3„ÄÅÂÆö‰πâ‰∏Ä‰∏™ÈÄöÁü•Á±ª LoggerHelperÔºåËØ•Á±ªÁªßÊâø MethodBeforeAdviceÂíå AfterReturningAdvice„ÄÇ123456789101112131415//ÈÄöÁü•Á±ª LoggerHelperpublic class LoggerHelper implements MethodBeforeAdvice,AfterReturningAdvice &#123; private static final Logger LOGGER = LoggerFactory.getLogger(LoggerHelper.class); //MethodBeforeAdviceÁöÑbeforeÊñπÊ≥ïÂÆûÁé∞ public void before(Method method, Object[] objects, Object o) throws Throwable &#123; LOGGER.info("before current time:"+System.currentTimeMillis()); &#125; //AfterReturningAdviceÁöÑafterReturningÊñπÊ≥ïÂÆûÁé∞ public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable &#123; LOGGER.info("afterReturning current time:"+System.currentTimeMillis()); &#125;&#125; 4„ÄÅÈáçÁÇπÔºåËøô‰∏™ÈÖçÁΩÆÈúÄË¶ÅÂÖ≥Ê≥®‰∏ã„ÄÇËøô‰∏™È°πÁõÆÈáåÈù¢ÊàëÊòØÈÖçÁΩÆÂú®applicationContext.xmlÊñá‰ª∂‰∏≠ÁöÑ„ÄÇ12345678910111213141516171819202122232425262728&lt;!-- ÂÆö‰πâË¢´‰ª£ÁêÜËÄÖ --&gt;&lt;bean id="goodsServiceImpl" class="com.glmapper.framerwork.service.impl.GoodsServiceImpl"&gt;&lt;/bean&gt;&lt;!-- ÂÆö‰πâÈÄöÁü•ÂÜÖÂÆπÔºå‰πüÂ∞±ÊòØÂàáÂÖ•ÁÇπÊâßË°åÂâçÂêéÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ --&gt;&lt;bean id="loggerHelper" class="com.glmapper.framerwork.aspect.LoggerHelper"&gt;&lt;/bean&gt;&lt;!-- ÂÆö‰πâÂàáÂÖ•ÁÇπ‰ΩçÁΩÆ --&gt;&lt;bean id="loggerPointcut" class="org.springframework.aop.support.JdkRegexpMethodPointcut"&gt; &lt;property name="pattern" value=".*query.*"&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- ‰ΩøÂàáÂÖ•ÁÇπ‰∏éÈÄöÁü•Áõ∏ÂÖ≥ËÅîÔºåÂÆåÊàêÂàáÈù¢ÈÖçÁΩÆ --&gt;&lt;!-- ‰ªéËøôÈáåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨ÁêÜËß£AdvisorÔºåadviceÂíåpointcut‰πãÈó¥ÁöÑÂÖ≥Á≥ª--&gt;&lt;!--adivceÂíåpointcutÊòØAdvisorÁöÑ‰∏§‰∏™Â±ûÊÄß--&gt;&lt;bean id="loggerHelperAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor"&gt; &lt;property name="advice" ref="loggerHelper"&gt;&lt;/property&gt; &lt;property name="pointcut" ref="loggerPointcut"&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- ËÆæÁΩÆ‰ª£ÁêÜ --&gt;&lt;bean id="proxy" class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;!-- ‰ª£ÁêÜÁöÑÂØπË±° Ôºå‰πüÂ∞±ÊòØÁõÆÊ†áÁ±ª--&gt; &lt;property name="target" ref="goodsServiceImpl"&gt;&lt;/property&gt; &lt;!-- ‰ΩøÁî®ÂàáÈù¢ --&gt; &lt;property name="interceptorNames" value="loggerHelperAdvisor"&gt;&lt;/property&gt; &lt;!-- ‰ª£ÁêÜÊé•Âè£ÔºåÂïÜÂìÅÊé•Âè£ --&gt; &lt;property name="proxyInterfaces" value="com.glmapper.framerwork.service.GoodsService"&gt;&lt;/property&gt;&lt;/bean&gt; 5„ÄÅ‰ΩøÁî®ÔºöÊ≥®Ëß£Ê≥®ÂÖ•ÊñπÂºè1234567891011121314151617181920@Controller@RequestMapping("/buy")public class BuyController &#123; @Autowired private OrderService orderService; //Âõ†‰∏∫Êàë‰ª¨Â∑≤ÁªèÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆ‰∫ÜproxyÔºå //ÊâÄ‰ª•ËøôÈáåÂèØ‰ª•Áõ¥Êé•Ê≥®ÂÖ•ÊãøÂà∞Êàë‰ª¨ÁöÑ‰ª£ÁêÜÁ±ª @Autowired private GoodsService proxy; @RequestMapping("/initPage") public ModelAndView initPage(HttpServletRequest request, HttpServletResponse response, ModelAndView view) &#123; //ËøôÈáå‰ΩøÁî®proxyÊâßË°å‰∫Ü*query*, List&lt;Goods&gt; goods = proxy.queryAll(10,10); view.addObject("goodsList", goods); view.setViewName("goodslist"); return view; &#125;&#125; 6„ÄÅ‰ΩøÁî®ÔºöÂ∑•ÂÖ∑Á±ªÊñπÂºèÊâãÂä®Ëé∑ÂèñbeanËøô‰∏™ÊñπÂºèÊòØÈÄöËøá‰∏Ä‰∏™SpringContextUtilÂ∑•ÂÖ∑Á±ªÊù•Ëé∑Âèñ‰ª£ÁêÜÂØπË±°ÁöÑ„ÄÇ12345678910@RequestMapping(&quot;/initPage&quot;)public ModelAndView initPage(HttpServletRequest request, HttpServletResponse response, ModelAndView view) &#123; //ËøôÈáåÈÄöËøáÂ∑•ÂÖ∑Á±ªÊù•ÊãøÔºåÊïàÊûú‰∏ÄÊ†∑ÁöÑ„ÄÇ GoodsService proxy= (GoodsService) SpringContextUtil.getBean(&quot;proxy&quot;); List&lt;Goods&gt; goods = proxy.queryAll(10,10); view.addObject(&quot;goodsList&quot;, goods); view.setViewName(&quot;goodslist&quot;); return view;&#125; 7„ÄÅSpringContextUtil Á±ªÁöÑÂÆö‰πâËøô‰∏™ËøòÊòØÊúâÁÇπÂùëÁöÑÔºåÈ¶ñÂÖàSpringContextUtilÊòØÁªßÊâøApplicationContextAwareËøô‰∏™Êé•Âè£ÔºåÊàë‰ª¨Â∏åÊúõËÉΩÂ§üSpringContextUtilÂèØ‰ª•Ë¢´SpringÂÆπÂô®Áõ¥Êé•ÁÆ°ÁêÜÔºåÊâÄ‰ª•ÔºåÈúÄË¶Å‰ΩøÁî® @Component Ê†áÊ≥®„ÄÇÊ†áÊ≥®‰∫Ü‰πãÂêéÊúÄÂÖ≥ÈîÆÁöÑÊòØÂÆÉÂæóËÉΩÂ§üË¢´Êàë‰ª¨ÈÖçÁΩÆÁöÑÊ≥®ÂÖ•Êâ´ÊèèÊâ´Âà∞Ôºà‰∫≤Ëá™Ë∏©ÁöÑÂùëÔºåÊàëÊääÂÆÉÊîæÂú®‰∏Ä‰∏™Êâ´‰∏çÂà∞ÁöÑÂåÖ‰∏ãÈù¢Ôºå‰∏ÄÁõ¥debugÈÉΩÊòØnullÔºõÂ∑ÆÁÇπÁ†∏ÁîµËÑë‚Ä¶Ôºâ 123456789101112131415161718192021222324252627282930313233@Componentpublic class SpringContextUtil implements ApplicationContextAware &#123; // SpringÂ∫îÁî®‰∏ä‰∏ãÊñáÁéØÂ¢É private static ApplicationContext applicationContext; /** * ÂÆûÁé∞ApplicationContextAwareÊé•Âè£ÁöÑÂõûË∞ÉÊñπÊ≥ïÔºåËÆæÁΩÆ‰∏ä‰∏ãÊñáÁéØÂ¢É * * @param applicationContext */ public void setApplicationContext(ApplicationContext applicationContext) &#123; SpringContextUtil.applicationContext = applicationContext; &#125; /** * @return ApplicationContext */ public static ApplicationContext getApplicationContext() &#123; return applicationContext; &#125; /** * Ëé∑ÂèñÂØπË±° * ËøôÈáåÈáçÂÜô‰∫ÜbeanÊñπÊ≥ïÔºåËµ∑‰∏ªË¶Å‰ΩúÁî® * @param name * @return Object ‰∏Ä‰∏™‰ª•ÊâÄÁªôÂêçÂ≠óÊ≥®ÂÜåÁöÑbeanÁöÑÂÆû‰æã * @throws BeansException */ public static Object getBean(String name) throws BeansException &#123; return applicationContext.getBean(name); &#125;&#125; 8„ÄÅËøêË°åÁªìÊûú12345678921:04:47.940 [http-nio-8080-exec-7] INFO c.g.framerwork.aspect.LoggerHelper - before currenttime:1529413487940ÊâßË°å‰∫ÜqueryAllÊñπÊ≥ï21:04:47.940 [http-nio-8080-exec-7] INFO c.g.framerwork.aspect.LoggerHelper - afterReturning currenttime:1529413487940 ‰∏äÈù¢Â∞±ÊòØÊúÄÊúÄÁªèÂÖ∏ÁöÑÊñπÂºèÔºåÂ∞±ÊòØÈÄöËøá‰ª£ÁêÜÁöÑÊñπÂºèÊù•ÂÆûÁé∞AOPÁöÑËøáÁ®ã„ÄÇ Á∫ØPOJOÂàáÈù¢ aop:configÊ≥®ÊÑèËøôÈáåÂíåLoggerHelperÁöÑÂå∫Âà´ÔºåËøôÈáåÁöÑLoggerAspectÂπ∂Ê≤°ÊúâÁªßÊâø‰ªª‰ΩïÊé•Âè£ÊàñËÄÖÊäΩË±°Á±ª„ÄÇ 1„ÄÅPOJO Á±ªÂÆö‰πâ123456789101112131415161718/** * @description: [ÊèèËø∞ÊñáÊú¨] * @email: &lt;a href="guolei.sgl@antfin.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/6/20 */public class LoggerAspect &#123; private static final Logger LOGGER = LoggerFactory.getLogger(LoggerHelper.class); public void before()&#123; LOGGER.info("before current time:"+System.currentTimeMillis()); &#125; public void afterReturning() &#123; LOGGER.info("afterReturning current time:"+System.currentTimeMillis()); &#125;&#125; 2„ÄÅÈÖçÁΩÆÊñá‰ª∂123456789101112131415161718&lt;!-- ÂÆö‰πâÈÄöÁü•ÂÜÖÂÆπÔºå‰πüÂ∞±ÊòØÂàáÂÖ•ÁÇπÊâßË°åÂâçÂêéÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ --&gt;&lt;bean id="loggerAspect" class="com.glmapper.framerwork.aspect.LoggerAspect"&gt;&lt;/bean&gt;&lt;aop:config&gt; &lt;!--ÂÆö‰πâÂàáÈù¢--&gt; &lt;aop:aspect ref="loggerAspect"&gt; &lt;aop:pointcut id="loggerPointCut" expression= "execution(* com.glmapper.framerwork.service.impl.*.*(..)) " /&gt; &lt;!-- ÂÆö‰πâ Advice --&gt; &lt;!-- ÂâçÁΩÆÈÄöÁü• --&gt; &lt;aop:before pointcut-ref="loggerPointCut" method="before" /&gt; &lt;!-- ÂêéÁΩÆÈÄöÁü• --&gt; &lt;aop:after-returning pointcut-ref="loggerPointCut" method="afterReturning"/&gt; &lt;/aop:aspect&gt;&lt;/aop:config&gt; Ê≥®ÊÑèËøôÈáåLoggerAspect‰∏≠ÁöÑbeforeÂíåafterReturningÂ¶ÇÊûúÊúâÂèÇÊï∞ÔºåËøôÈáåÈúÄË¶ÅÂ§ÑÁêÜ‰∏ãÔºåÂê¶Âàô‰ºöÊä• 0 formal unbound in pointcut ÂºÇÂ∏∏„ÄÇ @AspectJ Ê≥®Ëß£È©±Âä®ÊñπÂºèËøôÁßçÊñπÂºèÊòØÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåÁõ¥Êé•‰ΩøÁî® @Aspect Ê≥®Ëß£Ê†áÊ≥®Êàë‰ª¨ÁöÑÂàáÈù¢Á±ªÂç≥ÂèØ„ÄÇ 1„ÄÅÂÆö‰πâÂàáÈù¢Á±ªÔºåÂπ∂‰ΩøÁî® @Aspect ËøõË°åÊ†áÊ≥®123456789101112131415161718192021222324/** * @description: ‰ΩøÁî®AspectÊ≥®Ëß£È©±Âä®ÁöÑÊñπÂºè * @email: &lt;a href="guolei.sgl@antfin.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/6/20 */@Aspectpublic class LoggerAspectInject &#123; private static final Logger LOGGER = LoggerFactory.getLogger(LoggerAspectInject.class); @Pointcut("execution(* com.glmapper.framerwork.service.impl.*.*(..))") public void cutIn()&#123;&#125; @Before("cutIn()") public void before()&#123; LOGGER.info("before current time:"+System.currentTimeMillis()); &#125; @AfterReturning("cutIn()") public void AfterReturning()&#123; LOGGER.info("afterReturning current time:"+System.currentTimeMillis()); &#125;&#125; 2„ÄÅ‰ΩøÁî®ÊñπÂºè1ÔºöÈÖçÁΩÆÊñá‰ª∂ÊñπÂºèÂ£∞Êòé bean123456789&lt;aop:aspectj-autoproxy /&gt;&lt;!-- ÂÆö‰πâÈÄöÁü•ÂÜÖÂÆπÔºå‰πüÂ∞±ÊòØÂàáÂÖ•ÁÇπÊâßË°åÂâçÂêéÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ --&gt;&lt;bean id="loggerAspectInject" class="com.glmapper.framerwork.aspect.LoggerAspectInject"&gt;&lt;/bean&gt;&lt;!-- ÂÆö‰πâË¢´‰ª£ÁêÜËÄÖ --&gt;&lt;bean id="goodsServiceImpl" class="com.glmapper.framerwork.service.impl.GoodsServiceImpl"&gt;&lt;/bean&gt; 3„ÄÅÂÆ¢Êà∑Á´Ø‰ΩøÁî®Ôºö1234567891011121314151617181920@Controller@RequestMapping("/buy")public class BuyController &#123; @Autowired private OrderService orderService; @RequestMapping("/initPage") public ModelAndView initPage(HttpServletRequest request, HttpServletResponse response, ModelAndView view) &#123; //ÈÄöËøáSpringContextUtilÊâãÂä®Ëé∑Âèñ ‰ª£ÁêÜbean GoodsService goodsService=(GoodsService) SpringContextUtil.getBean("goodsServiceImpl"); List&lt;Goods&gt; goods = goodsService.queryAll(10,10); view.addObject("goodsList", goods); view.setViewName("goodslist"); return view; &#125;&#125; 4„ÄÅ‰ΩøÁî®ÊñπÂºè2Ôºö‰ΩøÁî®@componentÊ≥®Ëß£ÊâòÁÆ°ÁªôIOC1234567891011121314151617181920@Aspect@Component //ËøôÈáåÂä†‰∏ä‰∫ÜComponentÊ≥®Ëß£ÔºåÂ∞±‰∏çÈúÄË¶ÅÂú®xml‰∏≠ÈÖçÁΩÆ‰∫Üpublic class LoggerAspectInject &#123; private static final Logger LOGGER = LoggerFactory.getLogger(LoggerAspectInject.class); @Pointcut("execution(* com.glmapper.framerwork.service.impl.*.*(..))") public void cutIn()&#123;&#125; @Before("cutIn()") public void before()&#123; LOGGER.info("before current time:"+System.currentTimeMillis()); &#125; @AfterReturning("cutIn()") public void AfterReturning()&#123; LOGGER.info("afterReturning current time:"+System.currentTimeMillis()); &#125;&#125; 5„ÄÅÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÔºö1234567891011121314151617181920@Controller@RequestMapping("/buy")public class BuyController &#123; @Autowired private OrderService orderService; //Áõ¥Êé•Ê≥®ÂÖ• @Autowired private GoodsService goodsService; @RequestMapping("/initPage") public ModelAndView initPage(HttpServletRequest request, HttpServletResponse response, ModelAndView view) &#123; List&lt;Goods&gt; goods = goodsService.queryAll(10,10); view.addObject("goodsList", goods); view.setViewName("goodslist"); return view; &#125;&#125; 6„ÄÅÊØîËæÉÂÆåÊï¥ÁöÑ‰∏Ä‰∏™LoggerAspectInjectÔºåÂú®ÂÆûÈôÖÂ∑•Á®ã‰∏≠ÂèØ‰ª•Áõ¥Êé•ÂèÇËÄÉ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * @description: aop * @email: &lt;a href="henugl@1992.163.com"&gt;&lt;/a&gt; * @author: glmapper@Á£äÂèî * @date: 18/6/4 */@Aspect@Componentpublic class LoggerAspectInject &#123; private static final Logger LOGGER= LoggerFactory.getLogger(LoggerAspectInject.class); @Pointcut("execution(* com.glmapper.book.web.controller.*.*(..))") public void cutIn()&#123; &#125; @Around("cutIn()") // ÂÆö‰πâPointcutÔºåÂêçÁß∞Âç≥‰∏ãÈù¢ÁöÑÊ†áËØÜ"aroundAdvice public Object aroundAdvice(ProceedingJoinPoint poin)&#123; System.out.println("ÁéØÁªïÈÄöÁü•"); Object object = null; try&#123; object = poin.proceed(); &#125;catch (Throwable e)&#123; e.printStackTrace(); &#125; return object; &#125; // ÂÆö‰πâ advise //Ëøô‰∏™ÊñπÊ≥ïÂè™ÊòØ‰∏Ä‰∏™Ê†áËØÜÔºåÁõ∏ÂΩì‰∫éÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÆö‰πâ‰∫ÜpointcutÁöÑid,Ê≠§ÊñπÊ≥ïÊ≤°ÊúâËøîÂõûÂÄºÂíåÂèÇÊï∞ @Before("cutIn()") public void beforeAdvice()&#123; System.out.println("ÂâçÁΩÆÈÄöÁü•"); &#125; @After("cutIn()") public void afterAdvice()&#123; System.out.println("ÂêéÁΩÆÈÄöÁü•"); &#125; @AfterReturning("cutIn()") public void afterReturning()&#123; System.out.println("ÂêéÁΩÆËøîÂõû "); &#125; @AfterThrowing("cutIn()") public void afterThrowing()&#123; System.out.println("ÂêéÁΩÆÂºÇÂ∏∏"); &#125;&#125; ÂÖ≥‰∫éÂëΩÂêçÂàáÂÖ•ÁÇπÔºö‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠cutInÊñπÊ≥ïÂèØ‰ª•Ë¢´Áß∞‰πã‰∏∫ÂëΩÂêçÂàáÂÖ•ÁÇπÔºåÂëΩÂêçÂàáÂÖ•ÁÇπÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÂàáÂÖ•ÁÇπÂºïÁî®ÔºåËÄåÂåøÂêçÂàáÂÖ•ÁÇπÊòØ‰∏çÂèØ‰ª•ÁöÑ„ÄÇÂè™Êúâ@AspectJÊîØÊåÅÂëΩÂêçÂàáÂÖ•ÁÇπÔºåËÄåSchemaÈ£éÊ†º‰∏çÊîØÊåÅÂëΩÂêçÂàáÂÖ•ÁÇπ„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫Ôºå@AspectJ‰ΩøÁî®Â¶Ç‰∏ãÊñπÂºèÂºïÁî®ÂëΩÂêçÂàáÂÖ•ÁÇπÔºö 12345678@Pointcut("execution(* com.glmapper.book.web.controller.*.*(..))")public void cutIn()&#123;&#125;//ÂºïÂÖ•ÂëΩÂêçÂàáÂÖ•ÁÇπ@Before("cutIn()")public void beforeAdvice()&#123; System.out.println("ÂâçÁΩÆÈÄöÁü•");&#125; Ê≥®ÂÖ•Âºè AspectJ ÂàáÈù¢ËøôÁßçÊñπÂºèÊàëÊÑüËßâÊòØÁ¨¨‰∫åÁßçÂíåÁ¨¨‰∏âÁßçÁöÑÁªìÂêàÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇ 1„ÄÅÂÆö‰πâÂàáÈù¢Á±ª1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/*** @description: Ê≥®ÂÖ•Âºè ‰πüÊòØ‰∏ÄÁßçÈÄöËøáXMLÊñπÂºèÈÖçÁΩÆÁöÑÊñπÂºè* @email: &lt;a href="guolei.sgl@antfin.com"&gt;&lt;/a&gt;* @author: guolei.sgl* @date: 18/6/20*/public class LoggerAspectHelper &#123; private static final Logger LOGGER = LoggerFactory.getLogger(LoggerAspectHelper.class); /** * Ë∞ÉÂä®ÊñπÊ≥ïÂâçÊâßË°å * @param point * @throws Throwable */ public void doBefore(JoinPoint point) throws Throwable &#123; LOGGER.info("before current time:"+System.currentTimeMillis()); &#125; /** * Âú®Ë∞ÉÁî®ÊñπÊ≥ïÂâçÂêéÊâßË°å * @param point * @return * @throws Throwable */ public Object doAround(ProceedingJoinPoint point) throws Throwable &#123; LOGGER.info("around current time:"+System.currentTimeMillis()); if(point.getArgs().length&gt;0) &#123; return point.proceed(point.getArgs()); &#125;else&#123; return point.proceed(); &#125; &#125; /** * Âú®Ë∞ÉÁî®ÊñπÊ≥ï‰πãÂêéÊâßË°å * @param point * @throws Throwable */ public void doAfter(JoinPoint point) throws Throwable &#123; LOGGER.info("after current time:"+System.currentTimeMillis()); &#125; /** * ÂºÇÂ∏∏ÈÄöÁü• * @param point * @param ex */ public void doThrowing(JoinPoint point, Throwable ex) &#123; LOGGER.info("throwing current time:"+System.currentTimeMillis()); &#125;&#125; 2„ÄÅXML ÈÖçÁΩÆ12345678910111213141516171819&lt;bean id="loggerAspectHelper" class="com.glmapper.framerwork.aspect.LoggerAspectHelper"&gt;&lt;/bean&gt;&lt;aop:config&gt; &lt;aop:aspect id="configAspect" ref="loggerAspectHelper"&gt; &lt;!--ÈÖçÁΩÆcom.glmapper.framerwork.service.imp ÂåÖ‰∏ãÊâÄÊúâÁ±ªÊàñÊé•Âè£ÁöÑÊâÄÊúâÊñπÊ≥ï --&gt; &lt;aop:pointcut id="cutIn" expression= "execution(* com.glmapper.framerwork.service.impl.*.*(..))" /&gt; &lt;aop:before pointcut-ref="cutIn" method="doBefore" /&gt; &lt;aop:after pointcut-ref="cutIn" method="doAfter" /&gt; &lt;aop:around pointcut-ref="cutIn" method="doAround" /&gt; &lt;aop:after-throwing pointcut-ref="cutIn" method="doThrowing" throwing="ex" /&gt; &lt;/aop:aspect&gt;&lt;/aop:config&gt; 3„ÄÅÁªìÊûú123456723:39:48.756 [http-nio-8080-exec-4] INFO c.g.f.aspect.LoggerAspectHelper- before current time:152950918875623:39:48.757 [http-nio-8080-exec-4] INFO c.g.f.aspect.LoggerAspectHelper- around current time:1529509188757excute queryAll method...23:39:48.757 [http-nio-8080-exec-4] INFO c.g.f.aspect.LoggerAspectHelper- after current time:1529509188757 Ë°®ËææÂºè ‰ªé‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êàë‰ª¨ÈÉΩÊòØ‰ΩøÁî®‰∏Ä‰∫õÊ≠£ÂàôË°®ËææÂºèÊù•ÊåáÂÆöÊàë‰ª¨ÁöÑÂàáÂÖ•ÁÇπÁöÑ„ÄÇÂú®ÂÆûÈôÖÁöÑ‰ΩøÁî®‰∏≠Ôºå‰∏ç‰ªÖ‰ªÖÊòØexecutionÔºåËøòÊúâÂÖ∂‰ªñÂæàÂ§öÁßçÁ±ªÂûãÁöÑË°®ËææÂºè„ÄÇ‰∏ãÈù¢Â∞±Âàó‰∏æ‰∏Ä‰∫õÔºö 1„ÄÅexecutionÁî®‰∫éÂåπÈÖçÊñπÊ≥ïÊâßË°åÁöÑËøûÊé•ÁÇπ; 1execution(* com.glmapper.book.web.controller.*.*(..)) executionÔºàÔºâË°®ËææÂºèÁöÑ‰∏ª‰ΩìÔºõ Á¨¨‰∏Ä‰∏™ ‚Äú*‚Äù Á¨¶Âè∑Ë°®Á§∫ËøîÂõûÂÄºÁöÑÁ±ªÂûã‰ªªÊÑèÔºõ com.glmapper.book.web.controller AOPÊâÄÂàáÁöÑÊúçÂä°ÁöÑÂåÖÂêçÔºåÂç≥ÔºåÊàë‰ª¨ÁöÑ‰∏öÂä°ÈÉ®ÂàÜ ÂåÖÂêçÂêéÈù¢ÁöÑ‚Äù.‚Äù Ë°®Á§∫ÂΩìÂâçÂåÖÂèäÂ≠êÂåÖ Á¨¨‰∫å‰∏™‚Äù*‚Äù Ë°®Á§∫Á±ªÂêçÔºåÂç≥ÊâÄÊúâÁ±ª .*(..) Ë°®Á§∫‰ªª‰ΩïÊñπÊ≥ïÂêçÔºåÊã¨Âè∑Ë°®Á§∫ÂèÇÊï∞Ôºå‰∏§‰∏™ÁÇπË°®Á§∫‰ªª‰ΩïÂèÇÊï∞Á±ªÂûã 2„ÄÅwithinÁî®‰∫éÂåπÈÖçÊåáÂÆöÁ±ªÂûãÂÜÖÁöÑÊñπÊ≥ïÊâßË°å; 123456//Â¶ÇÊûúÂú®com.glmapper.book.web.controllerÂåÖÊàñÂÖ∂‰∏ãÁöÑ‰ªª‰ΩïÂ≠êÂåÖ‰∏≠//ÂÆö‰πâ‰∫ÜËØ•Á±ªÂûãÔºåÂàôÂú®WebÂ±Ç‰∏≠Êúâ‰∏Ä‰∏™ËøûÊé•ÁÇπ„ÄÇwithin(com.glmapper.book.web.controller..*)@Pointcut("within(com.glmapper.book.web.controller..*)")public void cutIn()&#123;&#125; @withinÔºöÁî®‰∫éÂåπÈÖçÊâÄ‰ª•ÊåÅÊúâÊåáÂÆöÊ≥®Ëß£Á±ªÂûãÂÜÖÁöÑÊñπÊ≥ïÔºõ 12345678910/** * @description: Ê≥®Ëß£ÂÆö‰πâ * @email: &lt;a href="henugl@1992.163.com"&gt;&lt;/a&gt; * @author: glmapper@Á£äÂèî * @date: 18/6/4 */@Retention(RetentionPolicy.RUNTIME)@Target(&#123;ElementType.METHOD,ElementType.FIELD&#125;)public @interface AuthAnnotation &#123;&#125; ‰ªª‰ΩïÁõÆÊ†áÂØπË±°ÂØπÂ∫îÁöÑÁ±ªÂûãÊåÅÊúâAuthAnnotationÊ≥®Ëß£ÁöÑÁ±ªÊñπÊ≥ïÔºõÂøÖÈ°ªÊòØÂú®ÁõÆÊ†áÂØπË±°‰∏äÂ£∞ÊòéËøô‰∏™Ê≥®Ëß£ÔºåÂú®Êé•Âè£‰∏äÂ£∞ÊòéÁöÑÂØπÂÆÉ‰∏çËµ∑‰ΩúÁî®„ÄÇ12345@within(com.glmapper.book.common.annotaion.AuthAnnotation)//ÊâÄÊúâË¢´@AdviceAnnotationÊ†áÊ≥®ÁöÑÁ±ªÈÉΩÂ∞ÜÂåπÈÖç@Pointcut("@within(com.glmapper.book.common.annotaion.AuthAnnotation)") public void cutIn()&#123;&#125; 3„ÄÅthisÁî®‰∫éÂåπÈÖçÂΩìÂâçAOP‰ª£ÁêÜÂØπË±°Á±ªÂûãÁöÑÊâßË°åÊñπÊ≥ïÔºõÊ≥®ÊÑèÊòØAOP‰ª£ÁêÜÂØπË±°ÁöÑÁ±ªÂûãÂåπÈÖçÔºåËøôÊ†∑Â∞±ÂèØËÉΩÂåÖÊã¨ÂºïÂÖ•Êé•Âè£‰πüÁ±ªÂûãÂåπÈÖçÔºõthis‰∏≠‰ΩøÁî®ÁöÑË°®ËææÂºèÂøÖÈ°ªÊòØÁ±ªÂûãÂÖ®ÈôêÂÆöÂêçÔºå‰∏çÊîØÊåÅÈÄöÈÖçÁ¨¶Ôºõ 12345678//ÂΩìÂâçÁõÆÊ†áÂØπË±°ÔºàÈùûAOPÂØπË±°ÔºâÂÆûÁé∞‰∫Ü UserService Êé•Âè£ÁöÑ‰ªª‰ΩïÊñπÊ≥ïthis(com.glmapper.book.web.service.UserService)//Áî®‰∫éÂêëÈÄöÁü•ÊñπÊ≥ï‰∏≠‰º†ÂÖ•‰ª£ÁêÜÂØπË±°ÁöÑÂºïÁî®„ÄÇ@Before("cutIn() &amp;&amp; this(proxy)")public void beforeAdvice(ProceedingJoinPoint poin,Object proxy)&#123; System.out.println("ÂâçÁΩÆÈÄöÁü•");&#125; 4„ÄÅtargetÁî®‰∫éÂåπÈÖçÂΩìÂâçÁõÆÊ†áÂØπË±°Á±ªÂûãÁöÑÊâßË°åÊñπÊ≥ïÔºõÊ≥®ÊÑèÊòØÁõÆÊ†áÂØπË±°ÁöÑÁ±ªÂûãÂåπÈÖçÔºåËøôÊ†∑Â∞±‰∏çÂåÖÊã¨ÂºïÂÖ•Êé•Âè£‰πüÁ±ªÂûãÂåπÈÖçÔºõtarget‰∏≠‰ΩøÁî®ÁöÑË°®ËææÂºèÂøÖÈ°ªÊòØÁ±ªÂûãÂÖ®ÈôêÂÆöÂêçÔºå‰∏çÊîØÊåÅÈÄöÈÖçÁ¨¶Ôºõ12345678//ÂΩìÂâçÁõÆÊ†áÂØπË±°ÔºàÈùûAOPÂØπË±°ÔºâÂÆûÁé∞‰∫Ü UserService Êé•Âè£ÁöÑ‰ªª‰ΩïÊñπÊ≥ïtarget(com.glmapper.book.web.service.UserService)//Áî®‰∫éÂêëÈÄöÁü•ÊñπÊ≥ï‰∏≠‰º†ÂÖ•‰ª£ÁêÜÂØπË±°ÁöÑÂºïÁî®„ÄÇ@Before("cutIn() &amp;&amp; target(proxy)")public void beforeAdvice(ProceedingJoinPoint poin,Object proxy)&#123; System.out.println("ÂâçÁΩÆÈÄöÁü•");&#125; @targetÔºöÁî®‰∫éÂåπÈÖçÂΩìÂâçÁõÆÊ†áÂØπË±°Á±ªÂûãÁöÑÊâßË°åÊñπÊ≥ïÔºåÂÖ∂‰∏≠ÁõÆÊ†áÂØπË±°ÊåÅÊúâÊåáÂÆöÁöÑÊ≥®Ëß£Ôºõ‰ªª‰ΩïÁõÆÊ†áÂØπË±°ÊåÅÊúâSecureÊ≥®Ëß£ÁöÑÁ±ªÊñπÊ≥ïÔºõËøô‰∏™Âíå@within‰∏ÄÊ†∑ÂøÖÈ°ªÊòØÂú®ÁõÆÊ†áÂØπË±°‰∏äÂ£∞ÊòéËøô‰∏™Ê≥®Ëß£ÔºåÂú®Êé•Âè£‰∏äÂ£∞ÊòéÁöÑÂØπÂÆÉÂêåÊ†∑‰∏çËµ∑‰ΩúÁî®„ÄÇ1234@target(com.glmapper.book.common.annotaion.AuthAnnotation)@Pointcut("@target(com.glmapper.book.common.annotaion.AuthAnnotation)")public void cutIn()&#123;&#125; 5„ÄÅargsÁî®‰∫éÂåπÈÖçÂΩìÂâçÊâßË°åÁöÑÊñπÊ≥ï‰º†ÂÖ•ÁöÑÂèÇÊï∞‰∏∫ÊåáÂÆöÁ±ªÂûãÁöÑÊâßË°åÊñπÊ≥ïÔºõÂèÇÊï∞Á±ªÂûãÂàóË°®‰∏≠ÁöÑÂèÇÊï∞ÂøÖÈ°ªÊòØÁ±ªÂûãÂÖ®ÈôêÂÆöÂêçÔºåÈÄöÈÖçÁ¨¶‰∏çÊîØÊåÅÔºõargsÂ±û‰∫éÂä®ÊÄÅÂàáÂÖ•ÁÇπÔºåËøôÁßçÂàáÂÖ•ÁÇπÂºÄÈîÄÈùûÂ∏∏Â§ßÔºåÈùûÁâπÊÆäÊÉÖÂÜµÊúÄÂ•Ω‰∏çË¶Å‰ΩøÁî®Ôºõ 12345678910//‰ªª‰Ωï‰∏Ä‰∏™‰ª•Êé•Âèó‚Äú‰º†ÂÖ•ÂèÇÊï∞Á±ªÂûã‰∏∫java.io.Serializable‚ÄùÂºÄÂ§¥Ôºå//‰∏îÂÖ∂ÂêéÂèØË∑ü‰ªªÊÑè‰∏™‰ªªÊÑèÁ±ªÂûãÁöÑÂèÇÊï∞ÁöÑÊñπÊ≥ïÊâßË°åÔºå//argsÊåáÂÆöÁöÑÂèÇÊï∞Á±ªÂûãÊòØÂú®ËøêË°åÊó∂Âä®ÊÄÅÂåπÈÖçÁöÑargs (java.io.Serializable,..)//Áî®‰∫éÂ∞ÜÂèÇÊï∞‰º†ÂÖ•Âà∞ÈÄöÁü•ÊñπÊ≥ï‰∏≠„ÄÇ@Before("cutIn() &amp;&amp; args(age,username)")public void beforeAdvide(JoinPoint point, int age, String username)&#123; //...&#125; @argsÔºöÁî®‰∫éÂåπÈÖçÂΩìÂâçÊâßË°åÁöÑÊñπÊ≥ï‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊåÅÊúâÊåáÂÆöÊ≥®Ëß£ÁöÑÊâßË°åÔºõ‰ªª‰Ωï‰∏Ä‰∏™Âè™Êé•Âèó‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÊñπÊ≥ïÔºå‰∏îÊñπÊ≥ïËøêË°åÊó∂‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊåÅÊúâÊ≥®Ëß£AuthAnnotationÔºõÂä®ÊÄÅÂàáÂÖ•ÁÇπÔºåÁ±ª‰ºº‰∫éargÊåáÁ§∫Á¨¶Ôºõ 123456@args (com.glmapper.book.common.annotaion.AuthAnnotation)@Before("@args(com.glmapper.book.common.annotaion.AuthAnnotation)")public void beforeAdvide(JoinPoint point)&#123; //...&#125; 6„ÄÅ@annotation‰ΩøÁî®‚Äú@annotation(Ê≥®Ëß£Á±ªÂûã)‚ÄùÂåπÈÖçÂΩìÂâçÊâßË°åÊñπÊ≥ïÊåÅÊúâÊåáÂÆöÊ≥®Ëß£ÁöÑÊñπÊ≥ïÔºõÊ≥®Ëß£Á±ªÂûã‰πüÂøÖÈ°ªÊòØÂÖ®ÈôêÂÆöÁ±ªÂûãÂêçÔºõ1234567//ÂΩìÂâçÊâßË°åÊñπÊ≥ï‰∏äÊåÅÊúâÊ≥®Ëß£ AuthAnnotationÂ∞ÜË¢´ÂåπÈÖç@annotation(com.glmapper.book.common.annotaion.AuthAnnotation)//ÂåπÈÖçËøûÊé•ÁÇπË¢´ÂÆÉÂèÇÊï∞ÊåáÂÆöÁöÑAuthAnnotationÊ≥®Ëß£ÁöÑÊñπÊ≥ï„ÄÇ//‰πüÂ∞±ÊòØËØ¥ÔºåÊâÄÊúâË¢´ÊåáÂÆöÊ≥®Ëß£Ê†áÊ≥®ÁöÑÊñπÊ≥ïÈÉΩÂ∞ÜÂåπÈÖç„ÄÇ@Pointcut("@annotation(com.glmapper.book.common.annotaion.AuthAnnotation)")public void cutIn()&#123;&#125; ËøòÊúâ‰∏ÄÁßçÊòØbeanÁöÑÊñπÂºèÔºåÊ≤°Áî®Ëøá„ÄÇÊúâÂÖ¥Ë∂£ÂèØ‰ª•ÁúãÁúã„ÄÇ ‰æãÂ≠êÂú®‰∏ãÈù¢ËØ¥Âà∞ÁöÑÂü∫Á°ÄÊ¶ÇÂøµÈÉ®ÂàÜÂØπÂ∫îÁªôÂá∫„ÄÇ Âü∫Á°ÄÊ¶ÇÂøµÂü∫Á°ÄÊ¶ÇÂøµÈÉ®ÂàÜ‰∏ªË¶ÅÂ∞Ü AOP ‰∏≠ÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµÁÇπÊçã‰∏ÄÊçãÔºåËøôÈÉ®ÂàÜ‰∏ªË¶ÅÂèÇËÄÉ‰∫ÜÂÆòÁΩë‰∏äÁöÑ‰∏Ä‰∫õËß£Èáä„ÄÇ AOPAOP(Aspect-Oriented Programming)Ôºå Âç≥ Èù¢ÂêëÂàáÈù¢ÁºñÁ®ã, ÂÆÉ‰∏é OOP( Object-Oriented Programming, Èù¢ÂêëÂØπË±°ÁºñÁ®ã) Áõ∏ËæÖÁõ∏Êàê, Êèê‰æõ‰∫Ü‰∏é OOP ‰∏çÂêåÁöÑÊäΩË±°ËΩØ‰ª∂ÁªìÊûÑÁöÑËßÜËßí„ÄÇÂú® OOP ‰∏≠,Êàë‰ª¨‰ª•Á±ª(class)‰Ωú‰∏∫Êàë‰ª¨ÁöÑÂü∫Êú¨ÂçïÂÖÉ, ËÄå AOP ‰∏≠ÁöÑÂü∫Êú¨ÂçïÂÖÉÊòØ Aspect(ÂàáÈù¢)„ÄÇ Ê®™ÂàáÂÖ≥Ê≥®ÁÇπ(Cross Cutting Concern)ÔºöÁã¨Á´ãÊúçÂä°ÔºåÂ¶ÇÁ≥ªÁªüÊó•Âøó„ÄÇÂ¶ÇÊûú‰∏çÊòØÁã¨Á´ãÊúçÂä°ÔºàÂ∞±ÊòØ‰∏é‰∏öÂä°ËÄ¶ÂêàÊØîËæÉÂº∫ÁöÑÊúçÂä°ÔºâÂ∞±‰∏çËÉΩÊ®™Âàá‰∫Ü„ÄÇÈÄöÂ∏∏ËøôÁßçÁã¨Á´ãÊúçÂä°ÈúÄË¶ÅÈÅçÂ∏ÉÁ≥ªÁªüÂêÑ‰∏™ËßíËêΩÔºåÈÅçÂ∏ÉÂú®‰∏öÂä°ÊµÅÁ®ã‰πã‰∏≠„ÄÇ Target ObjectÁõÆÊ†áÂØπË±°„ÄÇÁªáÂÖ• advice ÁöÑÁõÆÊ†áÂØπË±°„ÄÇ ÁõÆÊ†áÂØπË±°‰πüË¢´Áß∞‰∏∫ advised object„ÄÇÂõ†‰∏∫ Spring AOP ‰ΩøÁî®ËøêË°åÊó∂‰ª£ÁêÜÁöÑÊñπÂºèÊù•ÂÆûÁé∞ aspect, Âõ†Ê≠§ adviced object ÊÄªÊòØ‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°(proxied object)ÔºõÊ≥®ÊÑèÔºå adviced object ÊåáÁöÑ‰∏çÊòØÂéüÊù•ÁöÑÁ±ª, ËÄåÊòØÁªáÂÖ• advice ÂêéÊâÄ‰∫ßÁîüÁöÑ‰ª£ÁêÜÁ±ª„ÄÇ ÁªáÂÖ•ÔºàWeaveÔºâÂç≥AdviceÂ∫îÁî®Âú®JoinPointÁöÑËøáÁ®ãÔºåËøô‰∏™ËøáÁ®ãÂè´ÁªáÂÖ•„ÄÇ‰ªéÂè¶Â§ñ‰∏Ä‰∏™ËßíÂ∫¶ËÄÅËØ¥Â∞±ÊòØÂ∞Ü aspect ÂíåÂÖ∂‰ªñÂØπË±°ËøûÊé•Ëµ∑Êù•, Âπ∂ÂàõÂª∫ adviced object ÁöÑËøáÁ®ã„ÄÇ Ê†πÊçÆ‰∏çÂêåÁöÑÂÆûÁé∞ÊäÄÊúØÔºå AOPÁªáÂÖ•Êúâ‰∏âÁßçÊñπÂºè: ÁºñËØëÂô®ÁªáÂÖ•ÔºåËøôË¶ÅÊ±ÇÊúâÁâπÊÆäÁöÑJavaÁºñËØëÂô® Á±ªË£ÖËΩΩÊúüÁªáÂÖ•Ôºå ËøôÈúÄË¶ÅÊúâÁâπÊÆäÁöÑÁ±ªË£ÖËΩΩÂô® Âä®ÊÄÅ‰ª£ÁêÜÁªáÂÖ•, Âú®ËøêË°åÊúü‰∏∫ÁõÆÊ†áÁ±ªÊ∑ªÂä†Â¢ûÂº∫( Advice )ÁîüÊàêÂ≠êÁ±ªÁöÑÊñπÂºè„ÄÇ Spring ÈááÁî®Âä®ÊÄÅ‰ª£ÁêÜÁªáÂÖ•, ËÄåAspectJÈááÁî®ÁºñËØëÂô®ÁªáÂÖ•ÂíåÁ±ªË£ÖËΩΩÊúü ‰ª£ÁêÜSpring AOPÈªòËÆ§‰ΩøÁî®‰ª£ÁêÜÁöÑÊòØÊ†áÂáÜÁöÑJDKÂä®ÊÄÅ‰ª£ÁêÜ„ÄÇËøô‰ΩøÂæó‰ªª‰ΩïÊé•Âè£ÔºàÊàñ‰∏ÄÁªÑÊé•Âè£ÔºâÈÉΩÂèØ‰ª•‰ª£ÁêÜ„ÄÇ Spring AOP‰πüÂèØ‰ª•‰ΩøÁî®CGLIB‰ª£ÁêÜ„ÄÇÂ¶ÇÊûú‰∏öÂä°ÂØπË±°‰∏çÂÆûÁé∞Êé•Âè£ÔºåÂàôÈªòËÆ§‰ΩøÁî®CGLIB„ÄÇÂØπÊé•Âè£ÁºñÁ®ãËÄå‰∏çÊòØÂØπÁ±ªÁºñÁ®ãÊòØ‰∏ÄÁßçÂæàÂ•ΩÁöÑÂÅöÊ≥ïÔºõ‰∏öÂä°Á±ªÈÄöÂ∏∏‰ºöÂÆûÁé∞‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰∏öÂä°Êé•Âè£„ÄÇÂú®‰∏Ä‰∫õÁâπÊÆäÁöÑÊÉÖÂÜµ‰∏ãÔºåÂç≥ÈúÄË¶ÅÈÄöÁü•ÁöÑÊé•Âè£‰∏äÊ≤°ÊúâÂ£∞ÊòéÁöÑÊñπÊ≥ïÔºåÊàñËÄÖÈúÄË¶ÅÂ∞Ü‰ª£ÁêÜÂØπË±°‰º†ÈÄíÁªôÂÖ∑‰ΩìÁ±ªÂûãÁöÑÊñπÊ≥ïÔºåÊúâÂèØËÉΩÂº∫Âà∂‰ΩøÁî®CGLIB„ÄÇ IntroductionsÊàë‰ª¨Áü•ÈÅìJavaËØ≠Ë®ÄÊú¨Ë∫´Âπ∂ÈùûÊòØÂä®ÊÄÅÁöÑÔºåÂ∞±ÊòØÊàë‰ª¨ÁöÑÁ±ª‰∏ÄÊó¶ÁºñËØëÂÆåÊàêÔºåÂ∞±ÂæàÈöæÂÜç‰∏∫‰ªñÊ∑ªÂä†Êñ∞ÁöÑÂäüËÉΩ„ÄÇ‰ΩÜÊòØÂú®‰∏ÄÂºÄÂßãÁªôÂá∫ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËôΩÁÑ∂Êàë‰ª¨Ê≤°ÊúâÂêëÂØπË±°‰∏≠Ê∑ªÂä†Êñ∞ÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂ∑≤ÁªèÂêëÂÖ∂‰∏≠Ê∑ªÂä†‰∫ÜÊñ∞ÁöÑÂäüËÉΩ„ÄÇËøôÁßçÂ±û‰∫éÂêëÁé∞ÊúâÁöÑÊñπÊ≥ïÊ∑ªÂä†Êñ∞ÁöÑÂäüËÉΩÔºåÈÇ£ËÉΩ‰∏çËÉΩ‰∏∫‰∏Ä‰∏™ÂØπË±°Ê∑ªÂä†Êñ∞ÁöÑÊñπÊ≥ïÂë¢ÔºüÁ≠îÊ°àËÇØÂÆöÊòØÂèØ‰ª•ÁöÑÔºå‰ΩøÁî®introductionÂ∞±ËÉΩÂ§üÂÆûÁé∞„ÄÇ introductionÔºöÂä®ÊÄÅ‰∏∫Êüê‰∏™Á±ªÂ¢ûÂä†ÊàñÂáèÂ∞ëÊñπÊ≥ï„ÄÇ‰∏∫‰∏Ä‰∏™Á±ªÂûãÊ∑ªÂä†È¢ùÂ§ñÁöÑÊñπÊ≥ïÊàñÂ≠óÊÆµ„ÄÇSpring AOP ÂÖÅËÆ∏Êàë‰ª¨‰∏∫ ÁõÆÊ†áÂØπË±° ÂºïÂÖ•Êñ∞ÁöÑÊé•Âè£(ÂíåÂØπÂ∫îÁöÑÂÆûÁé∞)„ÄÇ AspectÂàáÈù¢ÔºöÈÄöÁü•ÂíåÂàáÂÖ•ÁÇπÁöÑÁªìÂêà„ÄÇ ÂàáÈù¢ÂÆûÁé∞‰∫Ücross-cuttingÔºàÊ®™ÂàáÔºâÂäüËÉΩ„ÄÇÊúÄÂ∏∏ËßÅÁöÑÊòØloggingÊ®°Âùó„ÄÅÊñπÊ≥ïÊâßË°åËÄóÊó∂Ê®°ÂùóÔºåËøôÊ†∑ÔºåÁ®ãÂ∫èÊåâÂäüËÉΩË¢´ÂàÜ‰∏∫Â•ΩÂá†Â±ÇÔºåÂ¶ÇÊûúÊåâ‰º†ÁªüÁöÑÁªßÊâøÁöÑËØùÔºåÂïÜ‰∏öÊ®°ÂûãÁªßÊâøÊó•ÂøóÊ®°ÂùóÁöÑËØùÈúÄË¶ÅÊèíÂÖ•‰øÆÊîπÁöÑÂú∞ÊñπÂ§™Â§öÔºåËÄåÈÄöËøáÂàõÂª∫‰∏Ä‰∏™ÂàáÈù¢Â∞±ÂèØ‰ª•‰ΩøÁî®AOPÊù•ÂÆûÁé∞Áõ∏ÂêåÁöÑÂäüËÉΩ‰∫ÜÔºåÊàë‰ª¨ÂèØ‰ª•ÈíàÂØπ‰∏çÂêåÁöÑÈúÄÊ±ÇÂÅöÂá∫‰∏çÂêåÁöÑÂàáÈù¢„ÄÇ ËÄåÂ∞ÜÊï£ËêΩ‰∫éÂêÑ‰∏™‰∏öÂä°ÂØπË±°‰πã‰∏≠ÁöÑCross-cutting concerns Êî∂ÈõÜËµ∑Êù•ÔºåËÆæËÆ°ÂêÑ‰∏™Áã¨Á´ãÂèØÈáçÁî®ÁöÑÂØπË±°ÔºåËøô‰∫õÂØπË±°Áß∞‰πã‰∏∫AspectÔºõÂú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êàë‰ª¨Ê†πÊçÆ‰∏çÂêåÁöÑÈÖçÁΩÆÊñπÂºèÔºåÂÆö‰πâ‰∫ÜÂõõÁßç‰∏çÂêåÂΩ¢ÂºèÁöÑÂàáÈù¢„ÄÇ JoinpointAspect Âú®Â∫îÁî®Á®ãÂ∫èÊâßË°åÊó∂Âä†ÂÖ•‰∏öÂä°ÊµÅÁ®ãÁöÑÁÇπÊàñÊó∂Êú∫Áß∞‰πã‰∏∫ Joinpoint ÔºåÂÖ∑‰ΩìÊù•ËØ¥ÔºåÂ∞±ÊòØ Advice Âú®Â∫îÁî®Á®ãÂ∫è‰∏≠Ë¢´ÂëºÂè´ÊâßË°åÁöÑÊó∂Êú∫ÔºåËøô‰∏™Êó∂Êú∫ÂèØËÉΩÊòØÊüê‰∏™ÊñπÊ≥ïË¢´ÂëºÂè´‰πãÂâçÊàñ‰πãÂêéÔºàÊàñ‰∏§ËÄÖÈÉΩÊúâÔºâÔºåÊàñÊòØÊüê‰∏™ÂºÇÂ∏∏ÂèëÁîüÁöÑÊó∂ÂÄô„ÄÇ Joinpoint &amp; ProceedingJoinPointÁéØÁªïÈÄöÁü• = ÂâçÁΩÆ+ÁõÆÊ†áÊñπÊ≥ïÊâßË°å+ÂêéÁΩÆÈÄöÁü•ÔºåproceedÊñπÊ≥ïÂ∞±ÊòØÁî®‰∫éÂêØÂä®ÁõÆÊ†áÊñπÊ≥ïÊâßË°åÁöÑ„ÄÇ ÁéØÁªïÈÄöÁü• ProceedingJoinPoint ÊâßË°å proceed ÊñπÊ≥ï ÁöÑ‰ΩúÁî®ÊòØËÆ©ÁõÆÊ†áÊñπÊ≥ïÊâßË°å ÔºåËøô ‰πüÊòØÁéØÁªïÈÄöÁü•ÂíåÂâçÁΩÆ„ÄÅÂêéÁΩÆÈÄöÁü•ÊñπÊ≥ïÁöÑ‰∏Ä‰∏™ÊúÄÂ§ßÂå∫Âà´„ÄÇ Proceedingjoinpoint ÁªßÊâø‰∫Ü JoinPoint „ÄÇÊòØÂú®JoinPointÁöÑÂü∫Á°Ä‰∏äÊö¥Èú≤Âá∫ proceed Ëøô‰∏™ÊñπÊ≥ï„ÄÇproceedÂæàÈáçË¶ÅÔºåËøô‰∏™ÊòØaop‰ª£ÁêÜÈìæÊâßË°åÁöÑÊñπÊ≥ïÔºõÊö¥Èú≤Âá∫Ëøô‰∏™ÊñπÊ≥ïÔºåÂ∞±ËÉΩÊîØÊåÅaop:around ËøôÁßçÂàáÈù¢ÔºàÂÖ∂‰ªñÁöÑÂá†ÁßçÂàáÈù¢Âè™ÈúÄË¶ÅÁî®Âà∞JoinPointÔºåËøôË∑üÂàáÈù¢Á±ªÂûãÊúâÂÖ≥ÔºâÔºå ËÉΩÂÜ≥ÂÆöÊòØÂê¶Ëµ∞‰ª£ÁêÜÈìæËøòÊòØËµ∞Ëá™Â∑±Êã¶Êà™ÁöÑÂÖ∂‰ªñÈÄªËæë„ÄÇ Âú®ÁéØÁªïÈÄöÁü•ÁöÑÊñπÊ≥ï‰∏≠ÊòØÈúÄË¶ÅËøîÂõû‰∏Ä‰∏™ObjectÁ±ªÂûãÂØπË±°ÁöÑÔºåÂ¶ÇÊûúÊääÁéØÁªïÈÄöÁü•ÁöÑÊñπÊ≥ïËøîÂõûÁ±ªÂûãÊòØvoidÔºåÂ∞Ü‰ºöÂØºËá¥‰∏Ä‰∫õÊó†Ê≥ïÈ¢Ñ‰º∞ÁöÑÊÉÖÂÜµÔºåÊØîÂ¶ÇÔºö404„ÄÇ PointcutÂåπÈÖç join pointsÁöÑË∞ìËØç„ÄÇAdvice‰∏éÂàáÂÖ•ÁÇπË°®ËææÂºèÁõ∏ÂÖ≥ËÅî, Âπ∂Âú®ÂàáÂÖ•ÁÇπÂåπÈÖçÁöÑ‰ªª‰ΩïËøûÊé•ÁÇπ‰∏äËøêË°å„ÄÇÔºà‰æãÂ¶ÇÔºåÂÖ∑ÊúâÁâπÂÆöÂêçÁß∞ÁöÑÊñπÊ≥ïÁöÑÊâßË°åÔºâ„ÄÇÁî±ÂàáÂÖ•ÁÇπË°®ËææÂºèÂåπÈÖçÁöÑËøûÊé•ÁÇπÁöÑÊ¶ÇÂøµÊòØAOPÁöÑÊ†∏ÂøÉÔºåSpringÈªòËÆ§‰ΩøÁî®AspectJÂàáÂÖ•ÁÇπË°®ËææÂºèËØ≠Ë®Ä„ÄÇ Âú® Spring ‰∏≠, ÊâÄÊúâÁöÑÊñπÊ≥ïÈÉΩÂèØ‰ª•ËÆ§‰∏∫ÊòØJoinpoint, ‰ΩÜÊòØÊàë‰ª¨Âπ∂‰∏çÂ∏åÊúõÂú®ÊâÄÊúâÁöÑÊñπÊ≥ï‰∏äÈÉΩÊ∑ªÂä† Advice, ËÄå Pointcut ÁöÑ‰ΩúÁî®Â∞±ÊòØÊèê‰æõ‰∏ÄÁªÑËßÑÂàô(‰ΩøÁî® AspectJ pointcut expression language Êù•ÊèèËø∞) Êù•ÂåπÈÖçJoinpoint, ÁªôÊª°Ë∂≥ËßÑÂàôÁöÑJoinpoint Ê∑ªÂä† Advice„ÄÇ Pointcut Âíå JoinpointÂú®Spring AOP ‰∏≠, ÊâÄÊúâÁöÑÊñπÊ≥ïÊâßË°åÈÉΩÊòØ join point„ÄÇ ËÄå point cut ÊòØ‰∏Ä‰∏™ÊèèËø∞‰ø°ÊÅØÔºåÂÆÉ‰øÆÈ•∞ÁöÑÊòØ join pointÔºå ÈÄöËøá point cutÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Á°ÆÂÆöÂì™‰∫õ join point ÂèØ‰ª•Ë¢´ÁªáÂÖ•Advice„ÄÇ Âõ†Ê≠§join point Âíå point cutÊú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏§‰∏™‰∏çÂêåÁª¥Â∫¶‰∏äÁöÑ‰∏úË•ø„ÄÇ advice ÊòØÂú® join point ‰∏äÊâßË°åÁöÑ, ËÄå point cut ËßÑÂÆö‰∫ÜÂì™‰∫õ join point ÂèØ‰ª•ÊâßË°åÂì™‰∫õ advice„ÄÇ AdviceÊ¶ÇÂøµAdvice ÊòØÊàë‰ª¨ÂàáÈù¢ÂäüËÉΩÁöÑÂÆûÁé∞ÔºåÂÆÉÊòØÂàáÁÇπÁöÑÁúüÊ≠£ÊâßË°åÁöÑÂú∞Êñπ„ÄÇÊØîÂ¶ÇÂÉèÂâçÈù¢‰æãÂ≠ê‰∏≠ÊâìÂç∞Êó∂Èó¥ÁöÑÂá†‰∏™ÊñπÊ≥ïÔºàË¢´@BeforeÁ≠âÊ≥®Ëß£Ê†áÊ≥®ÁöÑÊñπÊ≥ïÈÉΩÊòØ‰∏Ä‰∏™ÈÄöÁü•ÔºâÔºõAdvice Âú® Jointpoint Â§ÑÊèíÂÖ•‰ª£Á†ÅÂà∞Â∫îÁî®Á®ãÂ∫è‰∏≠„ÄÇ ÂàÜÁ±ªBeforeAdviceÔºåAfterAdviceÔºåÂå∫Âà´Âú®‰∫éAdviceÂú®ÁõÆÊ†áÊñπÊ≥ï‰πãÂâçË∞ÉÁî®ËøòÊòØ‰πãÂêéË∞ÉÁî®ÔºåThrow Advice Ë°®Á§∫ÂΩìÁõÆÊ†áÂèëÁîüÂºÇÂ∏∏Êó∂Ë∞ÉÁî®Advice„ÄÇ before adviceÔºö Âú® join point ÂâçË¢´ÊâßË°åÁöÑ advice. ËôΩÁÑ∂ before advice ÊòØÂú® join point ÂâçË¢´ÊâßË°å, ‰ΩÜÊòØÂÆÉÂπ∂‰∏çËÉΩÂ§üÈòªÊ≠¢ join point ÁöÑÊâßË°å, Èô§ÈùûÂèëÁîü‰∫ÜÂºÇÂ∏∏(Âç≥Êàë‰ª¨Âú® before advice ‰ª£Á†Å‰∏≠, ‰∏çËÉΩ‰∫∫‰∏∫Âú∞ÂÜ≥ÂÆöÊòØÂê¶ÁªßÁª≠ÊâßË°å join point ‰∏≠ÁöÑ‰ª£Á†Å) after return adviceÔºö Âú®‰∏Ä‰∏™ join point Ê≠£Â∏∏ËøîÂõûÂêéÊâßË°åÁöÑ advice after throwing adviceÔºö ÂΩì‰∏Ä‰∏™ join point ÊäõÂá∫ÂºÇÂ∏∏ÂêéÊâßË°åÁöÑ advice after(final) adviceÔºö Êó†ËÆ∫‰∏Ä‰∏™ join point ÊòØÊ≠£Â∏∏ÈÄÄÂá∫ËøòÊòØÂèëÁîü‰∫ÜÂºÇÂ∏∏, ÈÉΩ‰ºöË¢´ÊâßË°åÁöÑ advice. around adviceÔºöÂú® join point ÂâçÂíå joint point ÈÄÄÂá∫ÂêéÈÉΩÊâßË°åÁöÑ advice. Ëøô‰∏™ÊòØÊúÄÂ∏∏Áî®ÁöÑ advice. Advice„ÄÅJoinPoint„ÄÅPointCut ÂÖ≥Á≥ª ‰∏ãÈù¢ËøôÂº†ÂõæÊòØÂú®ÁΩë‰∏ä‰∏Ä‰ΩçÂ§ß‰Ω¨ÁöÑÂçöÂÆ¢ÈáåÂèëÁé∞ÁöÑÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Êõ¥Â•ΩÁöÑÁêÜËß£Ëøô‰∫õÊ¶ÇÂøµ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ ‰∏äÈù¢ÊòØÂØπ‰∫éAOP‰∏≠Ê∂âÂèäÂà∞ÁöÑ‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµÂèäÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂÅö‰∫ÜÁÆÄÂçïÁöÑÊ¢≥ÁêÜ„ÄÇ ‰∏Ä‰∫õÂùëÂú®Ë∞ÉËØïÁ®ãÂ∫èËøáÁ®ã‰∏≠Âá∫Áé∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òËÆ∞ÂΩï 1„ÄÅ‰ΩøÁî®AOPÊã¶Êà™controllerÂ±ÇÁöÑÊúçÂä°ÊàêÂäüÔºå‰ΩÜÊòØÈ°µÈù¢Êä•Èîô4041234@Around("cutIn()")public void aroundAdvice(ProceedingJoinPoint poin) &#123; System.out.println("ÁéØÁªïÈÄöÁü•");&#125; ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂÜç‰ΩøÁî®ÁéØÁªïÈÄöÁü•Êó∂ÔºåÈúÄË¶ÅÁªôÊñπÊ≥ï‰∏Ä‰∏™ËøîÂõûÂÄº„ÄÇ 12345@Around("cutIn()")public Object aroundAdvice(ProceedingJoinPoint poin) throws Throwable &#123; System.out.println("ÁéØÁªïÈÄöÁü•"); return poin.proceed();&#125; 2„ÄÅ0 formal unbound in pointcutÂú®spring 4.x‰∏≠ Êèê‰æõ‰∫ÜaopÊ≥®Ëß£ÊñπÂºè Â∏¶ÂèÇÊï∞ÁöÑÊñπÂºè„ÄÇÁúã‰∏ãÈù¢‰æãÂ≠êÔºö 1234567@Pointcut(value = "execution(* com.glmapper.framerwork.service.impl.*(int,int)) &amp;&amp; args(i,j)") public void cutIn(int i, int j) &#123;&#125; @Before(value="cutIn(i, j)",argNames = "i,j") public void beforeMethod( int i, int j) &#123; System.out.println("---------begins with " + i + "-" +j); &#125; ÊØîÂ¶ÇËØ¥ËøôÈáåÔºåBefore‰∏≠Êúâ‰∏§‰∏™intÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåÂ¶ÇÊûúÊ≠§Êó∂Êàë‰ª¨Âú®‰ΩøÁî®Êó∂Ê≤°ÊúâÁªôÂÖ∂ÊåáÂÆöÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞±‰ºöÊäõÂá∫ÔºöCaused by: java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut ÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇ Êú¨Êù•ÊòØÊÉ≥ÊîæÂú®‰∏ÄÁØáÈáåÈù¢ÁöÑÔºå‰ΩÜÊòØÂÆûÂú®Â§™Èïø‰∫ÜÔºåÂ∞±ÂàÜÂºÄÂêßÔºõÂë®Êú´Êõ¥Êñ∞‰∏ã]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>ËÅä‰∏ÄËÅä</tag>
        <tag>aop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Google Guava Âú®ÂÆûÈôÖÂú∫ÊôØ‰∏≠ÁöÑÂ∫îÁî®Â∞ÅË£Ö]]></title>
    <url>%2F2018%2F11%2F10%2Fguavacacheone%2F</url>
    <content type="text"><![CDATA[ÊØïÁ´üË•øÊπñÂÖ≠Êúà‰∏≠ÔºåÈ£éÂÖâ‰∏ç‰∏éÂõõÊó∂Âêå„ÄÇ Êé•Â§©Ëé≤Âè∂Êó†Á©∑Á¢ßÔºåÊò†Êó•Ëç∑Ëä±Âà´Ê†∑Á∫¢„ÄÇ ÊôìÂá∫ÂáÄÊÖàÂØ∫ÈÄÅÊûóÂ≠êÊñπ-Êù®‰∏áÈáå Âë®Êú´‰∏éÂ∞è‰ºô‰º¥Á∫¶‰∫Ü‰∏ÄÊ≥¢Ë•øÊπñÔºåËøô‰∏™Êó∂Èó¥Ëç∑Ëä±ÂºÄÁöÑÊ≠£Â•Ω‚Ä¶ÔºåÂú®ÂºÄÂßãÊñáÁ´†‰πãÂâçÂÖàÊîæ‰∏ÄÂº†‚Äú‰ΩõÁ≥ª‚ÄùÁæéÂõæÊù•ÈïáÊ•ºÔºÅÔºÅÔºÅ ÊúÄËøëËøôÊÆµÊó∂Èó¥Áî®‰∫Ü‰∏ãË∞∑Ê≠åÁöÑguavaÔºåËá™Â∑±Â∞Å‰∫Ü‰∏Ä‰∏™ÁºìÂ≠òÊ®°ÊùøÊñπÊ°àÔºåÁâπÊ≠§ËÆ∞ÂΩïÔºå‰ª•Â§áÂêéÁª≠ÊâÄÈúÄ„ÄÇ ‰∏Ä‰∏™ÁºìÂ≠òÂÆöÊó∂Ê∏ÖÈô§‰ªªÂä°Â∏¶Êù•ÁöÑGCÈóÆÈ¢ò‰∏∫‰ªÄ‰πàË¶Å‰ªéËøô‰∏™Êù•ËØ¥Ëµ∑ÔºåÂõ†‰∏∫‰∏çËØ¥Ëøô‰∏™Â∞±Ê≤°guava‰ªÄ‰πà‰∫ã‰∫ÜÔºÅ ÊúÄËøëÈ°πÁõÆ‰∏≠ÈúÄË¶Å‰ΩøÁî®ÁºìÂ≠òÊù•ÂØπ‰∏ÄÊü•Êü•ËØ¢È¢ëÁπÅÁöÑÊï∞ÊçÆÂÅöÁºìÂ≠òÂ§ÑÁêÜÔºõÈ¶ñÂÖàÊàë‰ª¨‰πü‰∏çÂ∏åÊúõÂºïÂÖ•‰∏âÊñπÁöÑÂ¶ÇredisÊàñËÄÖmemcacheËøôÊ†∑ÁöÑÊúçÂä°ËøõÊù•ÔºåÂÖ∂Ê¨°ÊòØÊàë‰ª¨ÂØπ‰∫éÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑË¶ÅÊ±ÇÂπ∂‰∏çÊòØÂæàÈ´òÔºå‰∏çÈúÄË¶ÅÈõÜÁæ§ÂÜÖÁöÑÊü•ËØ¢Êé•Âè£ÂÖ±‰∫´Âà∞‰∏Ä‰ªΩÁºìÂ≠òÊï∞ÊçÆÔºõÊâÄ‰ª•ËøôÊ†∑‰∏ÄÊù•Êàë‰ª¨Âè™Ë¶ÅÂÆûÁé∞‰∏Ä‰∏™Âü∫‰∫éÂÜÖÂ≠òÁöÑÁºìÂ≠òÂç≥ÂèØ„ÄÇ ÊúÄÂºÄÂßãÊàëÂπ∂Ê≤°ÊúâËÄÉËôë‰ΩøÁî®guavaÊù•ÂÅöËøô‰∏™‰∫ãÊÉÖÔºåËÄåÊòØËá™Â∑±ÂÜô‰∫Ü‰∏ÄÂ•óÂü∫‰∫éCurrentHashMapÁöÑÁºìÂ≠òÊñπÊ°àÔºõËøôÈáåÈúÄË¶ÅÊòéÁ°Æ‰∏ÄÁÇπÔºåÂõ†‰∏∫ÁºìÂ≠òÂú®Ëøô‰∏™Âú∫ÊôØÈáåÈù¢Â∏åÊúõÊèê‰æõË∂ÖÊó∂Ê∏ÖÈô§ÁöÑËÉΩÂäõÔºåËÄåÂü∫‰∫éÊâÄ‰ª•Âú®Ëá™Â∑±ÁºìÂ≠òÊ°ÜÊû∂‰∏≠Â¢ûÂä†‰∫ÜÂÆöÊó∂Ê∏ÖÈô§ËøáÊúüÊï∞ÊçÆÁöÑËÉΩÂäõ„ÄÇ ËøôÈáåÊàëÂ∞±Áõ¥Êé•ÊääÂÆöÊó∂Ê∏ÖÊ•öÁöÑËøôÊÆµ‰ª£Á†ÅÊîæ‰∏äÊù•Ôºö 123456789101112131415161718192021222324252627 /** * ÈùôÊÄÅÂÜÖÈÉ®Á±ªÊù•ËøõË°åË∂ÖÊó∂Â§ÑÁêÜ */private class ClearCacheThread extends Thread &#123; @Override public void run() &#123; while (true)&#123; try &#123; long now = System.currentTimeMillis(); Object[] keys = map.keySet().toArray(); for (Object key : keys) &#123; CacheEntry entry = map.get(key); if (now - entry.time &gt;= cacheTimeout) &#123; synchronized (map) &#123; map.remove(key); if (LOGGER.isDebugEnabled())&#123; LOGGER.debug("language cache timeout clear"); &#125; &#125; &#125; &#125; &#125;catch (Exception e)&#123; LOGGER.error("clear out time cache value error;",e); &#125; &#125; &#125;&#125; Ëøô‰∏™Á∫øÁ®ãÊòØÁî®Êù•ÂçïÁã¨Â§ÑÁêÜËøáÊúüÊï∞ÊçÆÁöÑ„ÄÇÁºìÂ≠òÂàùÂßãÂåñÊó∂Â∞±‰ºöËß¶ÂèëËøô‰∏™Á∫øÁ®ãÁöÑstartÊñπÊ≥ïÂºÄÂßãÊâßË°å„ÄÇ Ê≠£ÂºèÁî±‰∫éËøôÊÆµ‰ª£Á†ÅÁöÑ‰∏çÂêàÁêÜÂØºËá¥ÊàëÂú®ÂèëÂ∏ÉdevÁéØÂ¢É‰πãÂêéÔºåÊú∫Âô®GCËß¶ÂèëÁöÑÈ¢ëÊ¨°È´òÁöÑÁ¶ªË∞±„ÄÇÂú®Â∞ùËØï‰∫Ü‰∏çÂêåÁöÑ‰øÆÂ§çÊñπÊ°à‰πãÂêéÔºåÊúÄÂêéÈÄâÊã©ÊîæÂºÉ‰∫ÜÔºõÊîπÁî®guava‰∫ÜÔºÅ Â∞è‰ºô‰º¥‰ª¨ÂèØ‰ª•Âú®‰∏ãÈù¢ÁïôË®ÄÊù•ËÆ®ËÆ∫‰∏ãËøôÈáå‰∏∫‰ªÄ‰πà‰ºöÂ≠òÂú®È¢ëÁπÅGCÁöÑÈóÆÈ¢òÔºõÊàë‰ºöÊääÁªìËÆ∫ÊîæÂú®ËØÑËÆ∫ÂõûÂ§çÈáåÈù¢„ÄÇ guava‰∏∫‰ªÄ‰πàÈÄâÁî®guavaÂë¢ÔºåÂæàÊòæÁÑ∂ÔºåÊòØÂ§ß‰Ω¨Êé®ËçêÁöÑÔºÅÔºÅÔºÅ guavaÊòØË∞∑Ê≠åÊèê‰æõÁöÑ‰∏Ä‰∏™Âü∫‰∫éÂÜÖÂ≠òÁöÑÁºìÂ≠òÂ∑•ÂÖ∑ÂåÖÔºåGuava Cache Êèê‰æõ‰∫Ü‰∏ÄÁßçÊääÊï∞ÊçÆÔºàkey-valueÂØπÔºâÁºìÂ≠òÂà∞Êú¨Âú∞ÔºàJVMÔºâÂÜÖÂ≠ò‰∏≠ÁöÑÊú∫Âà∂ÔºåÈÄÇÁî®‰∫éÂæàÂ∞ë‰ºöÊîπÂä®ÁöÑÊï∞ÊçÆ„ÄÇGuava Cache ‰∏é ConcurrentMap ÂæàÁõ∏‰ººÔºå‰ΩÜ‰πü‰∏çÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇÊúÄÂü∫Êú¨ÁöÑÂå∫Âà´ÊòØ ConcurrentMap ‰ºö‰∏ÄÁõ¥‰øùÂ≠òÊâÄÊúâÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÔºåÁõ¥Âà∞ÊòæÂºèÂú∞ÁßªÈô§„ÄÇÁõ∏ÂØπÂú∞ÔºåGuava Cache ‰∏∫‰∫ÜÈôêÂà∂ÂÜÖÂ≠òÂç†Áî®ÔºåÈÄöÂ∏∏ÈÉΩËÆæÂÆö‰∏∫Ëá™Âä®ÂõûÊî∂ÂÖÉÁ¥†„ÄÇ ÂØπ‰∫éÊàë‰ª¨ÁöÑÂú∫ÊôØÔºåguava Êèê‰æõÁöÑËÉΩÂäõÊª°Ë∂≥‰∫ÜÊàë‰ª¨ÁöÑÈúÄË¶ÅÔºö Êï∞ÊçÆÊîπÂä®Â∞è Âü∫‰∫éÂÜÖÂ≠ò ÂèØ‰ª•Ëá™Âä®ÂõûÊî∂ Êó¢ÁÑ∂ÈÄâÊã©ÂÆÉ‰∫ÜÔºåÊàë‰ª¨ËøòÊòØÊúâÂøÖË¶ÅÊù•ÂÖàÂØπÂÆÉÊúâ‰∏™Â§ßËá¥ÁöÑ‰∫ÜËß£ÔºõÂÖàÊù•ÁúãÁúãÂÆÉÊèê‰æõÁöÑ‰∏Ä‰∫õÁ±ªÂíåÊé•Âè£Ôºö Êé•Âè£/Á±ª ËØ¶ÁªÜËß£Èáä Cache „ÄêI„Äë;ÂÆö‰πâget„ÄÅput„ÄÅinvalidateÁ≠âÊìç‰ΩúÔºåËøôÈáåÂè™ÊúâÁºìÂ≠òÂ¢ûÂà†ÊîπÁöÑÊìç‰ΩúÔºåÊ≤°ÊúâÊï∞ÊçÆÂä†ËΩΩÁöÑÊìç‰Ωú„ÄÇ AbstractCache „ÄêC„Äë;ÂÆûÁé∞CacheÊé•Âè£„ÄÇÂÖ∂‰∏≠ÊâπÈáèÊìç‰ΩúÈÉΩÊòØÂæ™ÁéØÊâßË°åÂçïÊ¨°Ë°å‰∏∫ÔºåËÄåÂçïÊ¨°Ë°å‰∏∫ÈÉΩÊ≤°ÊúâÂÖ∑‰ΩìÂÆö‰πâ„ÄÇ LoadingCache „ÄêI„Äë;ÁªßÊâøËá™Cache„ÄÇÂÆö‰πâget„ÄÅgetUnchecked„ÄÅgetAllÁ≠âÊìç‰ΩúÔºåËøô‰∫õÊìç‰ΩúÈÉΩ‰ºö‰ªéÊï∞ÊçÆÊ∫êloadÊï∞ÊçÆ„ÄÇ AbstractLoadingCache „ÄêC„Äë;ÁªßÊâøËá™AbstractCacheÔºåÂÆûÁé∞LoadingCacheÊé•Âè£„ÄÇ LocalCache „ÄêC„Äë;Êï¥‰∏™guava cacheÁöÑÊ†∏ÂøÉÁ±ªÔºåÂåÖÂê´‰∫Üguava cacheÁöÑÊï∞ÊçÆÁªìÊûÑ‰ª•ÂèäÂü∫Êú¨ÁöÑÁºìÂ≠òÁöÑÊìç‰ΩúÊñπÊ≥ï„ÄÇ LocalManualCache „ÄêC„Äë;LocalCacheÂÜÖÈÉ®ÈùôÊÄÅÁ±ªÔºåÂÆûÁé∞CacheÊé•Âè£„ÄÇÂÖ∂ÂÜÖÈÉ®ÁöÑÂ¢ûÂà†ÊîπÁºìÂ≠òÊìç‰ΩúÂÖ®ÈÉ®Ë∞ÉÁî®ÊàêÂëòÂèòÈáèlocalCacheÔºàLocalCacheÁ±ªÂûãÔºâÁöÑÁõ∏Â∫îÊñπÊ≥ï„ÄÇ LocalLoadingCache „ÄêC„Äë;LocalCacheÂÜÖÈÉ®ÈùôÊÄÅÁ±ªÔºåÁªßÊâøËá™LocalManualCacheÁ±ªÔºåÂÆûÁé∞LoadingCacheÊé•Âè£„ÄÇÂÖ∂ÊâÄÊúâÊìç‰Ωú‰πüÊòØË∞ÉÁî®ÊàêÂëòÂèòÈáèlocalCacheÔºàLocalCacheÁ±ªÂûãÔºâÁöÑÁõ∏Â∫îÊñπÊ≥ï CacheBuilder „ÄêC„Äë;ÁºìÂ≠òÊûÑÂª∫Âô®„ÄÇÊûÑÂª∫ÁºìÂ≠òÁöÑÂÖ•Âè£ÔºåÊåáÂÆöÁºìÂ≠òÈÖçÁΩÆÂèÇÊï∞Âπ∂ÂàùÂßãÂåñÊú¨Âú∞ÁºìÂ≠ò„ÄÇCacheBuilderÂú®buildÊñπÊ≥ï‰∏≠Ôºå‰ºöÊääÂâçÈù¢ËÆæÁΩÆÁöÑÂèÇÊï∞ÔºåÂÖ®ÈÉ®‰º†ÈÄíÁªôLocalCacheÔºåÂÆÉËá™Â∑±ÂÆûÈôÖ‰∏çÂèÇ‰∏é‰ªª‰ΩïËÆ°ÁÆó CacheLoader „ÄêC„Äë;Áî®‰∫é‰ªéÊï∞ÊçÆÊ∫êÂä†ËΩΩÊï∞ÊçÆÔºåÂÆö‰πâload„ÄÅreload„ÄÅloadAllÁ≠âÊìç‰Ωú„ÄÇ Êï¥‰∏™Êù•ÁúãÁöÑËØùÔºåguavaÈáåÈù¢ÊúÄÊ†∏ÂøÉÁöÑÂ∫îËØ•ÁÆóÊòØ LocalCache Ëøô‰∏™Á±ª‰∫Ü„ÄÇ 123@GwtCompatible(emulated = true)class LocalCache&lt;K, V&gt; extends AbstractMap&lt;K, V&gt; implementsConcurrentMap&lt;K, V&gt; ÂÖ≥‰∫éËøô‰∏™Á±ªÁöÑÊ∫êÁ†ÅËøôÈáåÂ∞±‰∏çÁªÜËØ¥‰∫ÜÔºåÁõ¥Êé•Êù•Áúã‰∏ãÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÊàëÁöÑÂ∞ÅË£ÖÊÄùË∑Ø„ÄêÂ∞ÅË£ÖÊª°Ë∂≥ÊàëÂΩìÂâçÁöÑÈúÄÊ±ÇÔºåÂ¶ÇÊûúÊúâÂ∞è‰ºô‰º¥ÈúÄË¶ÅÂÄüÈâ¥ÔºåÂèØ‰ª•Ëá™Â∑±Âú®ÂÅöÊâ©Â±ï„Äë 12345678910111213141516private static final int MAX_SIZE = 1000;private static final int EXPIRE_TIME = 10;private static final int DEFAULT_SIZE = 100;private int maxSize = MAX_SIZE;private int expireTime = EXPIRE_TIME;/** Êó∂Èó¥Âçï‰ΩçÔºàÂàÜÈíüÔºâ */private TimeUnit timeUnit = TimeUnit.MINUTES;/** CacheÂàùÂßãÂåñÊàñË¢´ÈáçÁΩÆÁöÑÊó∂Èó¥ */private Date resetTime;/** ÂàÜÂà´ËÆ∞ÂΩïÂéÜÂè≤ÊúÄÂ§öÁºìÂ≠ò‰∏™Êï∞ÂèäÊó∂Èó¥ÁÇπ*/private long highestSize = 0;private Date highestTime;private volatile LoadingCache&lt;K, V&gt; cache; ËøôÈáåÂÖàÊòØÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂ∏∏ÈáèÂíåÂü∫Êú¨ÁöÑÂ±ûÊÄß‰ø°ÊÅØÔºåÂΩìÁÑ∂Ëøô‰∫õÂ±ûÊÄß‰ºöÊèê‰æõset&amp;getÊñπÊ≥ïÔºå‰æõÂÆûÈôÖ‰ΩøÁî®Êó∂ÂéªËá™Ë°åËÆæÁΩÆ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738public LoadingCache&lt;K, V&gt; getCache() &#123; //‰ΩøÁî®ÂèåÈáçÊ†°È™åÈîÅ‰øùËØÅÂè™Êúâ‰∏Ä‰∏™cacheÂÆû‰æã if(cache == null)&#123; synchronized (this) &#123; if(cache == null)&#123; //CacheBuilderÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊòØÁßÅÊúâÁöÑÔºåÂè™ËÉΩÈÄöËøáÂÖ∂ÈùôÊÄÅÊñπÊ≥ïnewBuilder()Êù•Ëé∑ÂæóCacheBuilderÁöÑÂÆû‰æã cache = CacheBuilder.newBuilder() //ËÆæÁΩÆÁºìÂ≠òÂÆπÂô®ÁöÑÂàùÂßãÂÆπÈáè‰∏∫100 .initialCapacity(DEFAULT_SIZE) //ÁºìÂ≠òÊï∞ÊçÆÁöÑÊúÄÂ§ßÊù°ÁõÆ .maximumSize(maxSize) //ÂÆöÊó∂ÂõûÊî∂:ÁºìÂ≠òÈ°πÂú®ÁªôÂÆöÊó∂Èó¥ÂÜÖÊ≤°ÊúâË¢´ÂÜôËÆøÈóÆÔºàÂàõÂª∫ÊàñË¶ÜÁõñÔºâÔºåÂàôÂõûÊî∂„ÄÇ .expireAfterWrite(expireTime, timeUnit) //ÂêØÁî®ÁªüËÆ°-&gt;ÁªüËÆ°ÁºìÂ≠òÁöÑÂëΩ‰∏≠ÁéáÁ≠â .recordStats() //ËÆæÁΩÆÁºìÂ≠òÁöÑÁßªÈô§ÈÄöÁü• .removalListener((notification)-&gt; &#123; if (LOGGER.isDebugEnabled())&#123; LOGGER.debug("&#123;&#125; was removed, cause is &#123;&#125;" ,notification.getKey(), notification.getCause()); &#125; &#125;) .build(new CacheLoader&lt;K, V&gt;() &#123; @Override public V load(K key) throws Exception &#123; return fetchData(key); &#125; &#125;); this.resetTime = new Date(); this.highestTime = new Date(); if (LOGGER.isInfoEnabled())&#123; LOGGER.info("Êú¨Âú∞ÁºìÂ≠ò&#123;&#125;ÂàùÂßãÂåñÊàêÂäü.", this.getClass().getSimpleName()); &#125; &#125; &#125; &#125; return cache;&#125; ‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÊòØÊï¥‰∏™ÁºìÂ≠òÁöÑÊ†∏ÂøÉÔºåÈÄöËøáËøôÊÆµ‰ª£Á†ÅÊù•ÁîüÊàêÊàë‰ª¨ÁöÑÁºìÂ≠òÂØπË±°„Äê‰ΩøÁî®‰∫ÜÂçï‰æãÊ®°Âºè„Äë„ÄÇÂÖ∑‰ΩìÁöÑÂ±ûÊÄßÂèÇÊï∞ÁúãÊ≥®Èáä„ÄÇ Âõ†‰∏∫‰∏äÈù¢ÁöÑÈÇ£‰∫õÈÉΩÊòØÂ∞ÅË£ÖÂú®‰∏Ä‰∏™ÊäΩË±°Á±ªAbstractGuavaCacheÈáåÈù¢ÁöÑÔºåÊâÄ‰ª•ÊàëÂèàÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∏™CacheMangerÁî®Êù•ÁÆ°ÁêÜÁºìÂ≠òÔºåÂπ∂ÂØπÂ§ñÊèê‰æõÂÖ∑‰ΩìÁöÑÂäüËÉΩÊé•Âè£ÔºõÂú®CacheManger‰∏≠ÔºåÊàë‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÈùôÊÄÅÂÜÖÈÉ®Á±ªÊù•ÂàõÂª∫ÂΩìÂâçÈªòËÆ§ÁöÑÁºìÂ≠ò„ÄÇ 12345678910111213141516171819202122232425262728/** * ‰ΩøÁî®ÈùôÊÄÅÂÜÖÈÉ®Á±ªÂÆûÁé∞‰∏Ä‰∏™ÈªòËÆ§ÁöÑÁºìÂ≠òÔºåÂßîÊâòÁªômanagerÊù•ÁÆ°ÁêÜ * * DefaultGuavaCache ‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂçï‰æãÊ®°Âºè * @param &lt;String&gt; * @param &lt;Object&gt; */private static class DefaultGuavaCache&lt;String, Object&gt; extendsAbstractGuavaCache&lt;String, Object&gt; &#123; private static AbstractGuavaCache cache = new DefaultGuavaCache(); /** * Â§ÑÁêÜËá™Âä®ËΩΩÂÖ•ÁºìÂ≠òÔºåÊåâÂÆûÈôÖÊÉÖÂÜµËΩΩÂÖ• * ËøôÈáå * @param key * @return */ @Override protected Object fetchData(String key) &#123; return null; &#125; public static AbstractGuavaCache getInstance() &#123; return DefaultGuavaCache.cache; &#125;&#125; Â§ßÊ¶ÇÊÄùË∑ØÂ∞±ÊòØËøôÊ†∑ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊâ©Â±ïÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊåâÁÖßÂÆûÈôÖÁöÑÈúÄÊ±ÇÂéªÊâ©Â±ïAbstractGuavaCacheËøô‰∏™ÊäΩË±°Á±ªÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅË¥¥Âú®‰∏ãÈù¢‰∫Ü„ÄÇ ÂÆåÊï¥ÁöÑ‰∏§‰∏™Á±ªAbstractGuavaCache123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137public abstract class AbstractGuavaCache&lt;K, V&gt; &#123; protected final Logger LOGGER = LoggerFactory.getLogger(AbstractGuavaCache.class); private static final int MAX_SIZE = 1000; private static final int EXPIRE_TIME = 10; /** Áî®‰∫éÂàùÂßãÂåñcacheÁöÑÂèÇÊï∞ÂèäÂÖ∂Áº∫ÁúÅÂÄº */ private static final int DEFAULT_SIZE = 100; private int maxSize = MAX_SIZE; private int expireTime = EXPIRE_TIME; /** Êó∂Èó¥Âçï‰ΩçÔºàÂàÜÈíüÔºâ */ private TimeUnit timeUnit = TimeUnit.MINUTES; /** CacheÂàùÂßãÂåñÊàñË¢´ÈáçÁΩÆÁöÑÊó∂Èó¥ */ private Date resetTime; /** ÂàÜÂà´ËÆ∞ÂΩïÂéÜÂè≤ÊúÄÂ§öÁºìÂ≠ò‰∏™Êï∞ÂèäÊó∂Èó¥ÁÇπ*/ private long highestSize = 0; private Date highestTime; private volatile LoadingCache&lt;K, V&gt; cache; public LoadingCache&lt;K, V&gt; getCache() &#123; //‰ΩøÁî®ÂèåÈáçÊ†°È™åÈîÅ‰øùËØÅÂè™Êúâ‰∏Ä‰∏™cacheÂÆû‰æã if(cache == null)&#123; synchronized (this) &#123; if(cache == null)&#123; //CacheBuilderÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊòØÁßÅÊúâÁöÑÔºåÂè™ËÉΩÈÄöËøáÂÖ∂ÈùôÊÄÅÊñπÊ≥ïne //wBuilder()Êù•Ëé∑ÂæóCacheBuilderÁöÑÂÆû‰æã cache = CacheBuilder.newBuilder() //ËÆæÁΩÆÁºìÂ≠òÂÆπÂô®ÁöÑÂàùÂßãÂÆπÈáè‰∏∫100 .initialCapacity(DEFAULT_SIZE) //ÁºìÂ≠òÊï∞ÊçÆÁöÑÊúÄÂ§ßÊù°ÁõÆ .maximumSize(maxSize) //ÂÆöÊó∂ÂõûÊî∂:ÁºìÂ≠òÈ°πÂú®ÁªôÂÆöÊó∂Èó¥ÂÜÖÊ≤°ÊúâË¢´ÂÜôËÆøÈóÆ //ÔºàÂàõÂª∫ÊàñË¶ÜÁõñÔºâÔºåÂàôÂõûÊî∂„ÄÇ .expireAfterWrite(expireTime, timeUnit) //ÂêØÁî®ÁªüËÆ°-&gt;ÁªüËÆ°ÁºìÂ≠òÁöÑÂëΩ‰∏≠ÁéáÁ≠â .recordStats() //ËÆæÁΩÆÁºìÂ≠òÁöÑÁßªÈô§ÈÄöÁü• .removalListener((notification)-&gt; &#123; if (LOGGER.isDebugEnabled())&#123; //... &#125; &#125;) .build(new CacheLoader&lt;K, V&gt;() &#123; @Override public V load(K key) throws Exception &#123; return fetchData(key); &#125; &#125;); this.resetTime = new Date(); this.highestTime = new Date(); if (LOGGER.isInfoEnabled())&#123; //... &#125; &#125; &#125; &#125; return cache; &#125; /** * Ê†πÊçÆkey‰ªéÊï∞ÊçÆÂ∫ìÊàñÂÖ∂‰ªñÊï∞ÊçÆÊ∫ê‰∏≠Ëé∑Âèñ‰∏Ä‰∏™valueÔºåÂπ∂Ë¢´Ëá™Âä®‰øùÂ≠òÂà∞ÁºìÂ≠ò‰∏≠„ÄÇ * * ÊîπÊñπÊ≥ïÊòØÊ®°ÊùøÊñπÊ≥ïÔºåÂ≠êÁ±ªÈúÄË¶ÅÂÆûÁé∞ * * @param key * @return value,ËøûÂêåkey‰∏ÄËµ∑Ë¢´Âä†ËΩΩÂà∞ÁºìÂ≠ò‰∏≠ÁöÑ„ÄÇ */ protected abstract V fetchData(K key); /** * ‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºàÁ¨¨‰∏ÄÊ¨°Ëá™Âä®Ë∞ÉÁî®fetchData‰ªéÂ§ñÈÉ®Ëé∑ÂèñÊï∞ÊçÆÔºâÔºåÂπ∂Â§ÑÁêÜÂºÇÂ∏∏ * @param key * @return Value * @throws ExecutionException */ protected V getValue(K key) throws ExecutionException &#123; V result = getCache().get(key); if (getCache().size() &gt; highestSize) &#123; highestSize = getCache().size(); highestTime = new Date(); &#125; return result; &#125; public int getMaxSize() &#123; return maxSize; &#125; public void setMaxSize(int maxSize) &#123; this.maxSize = maxSize; &#125; public int getExpireTime() &#123; return expireTime; &#125; public void setExpireTime(int expireTime) &#123; this.expireTime = expireTime; &#125; public TimeUnit getTimeUnit() &#123; return timeUnit; &#125; public void setTimeUnit(TimeUnit timeUnit) &#123; this.timeUnit = timeUnit; &#125; public Date getResetTime() &#123; return resetTime; &#125; public void setResetTime(Date resetTime) &#123; this.resetTime = resetTime; &#125; public long getHighestSize() &#123; return highestSize; &#125; public void setHighestSize(long highestSize) &#123; this.highestSize = highestSize; &#125; public Date getHighestTime() &#123; return highestTime; &#125; public void setHighestTime(Date highestTime) &#123; this.highestTime = highestTime; &#125;&#125; DefaultGuavaCacheManager123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687public class DefaultGuavaCacheManager &#123; private static final Logger LOGGER = LoggerFactory.getLogger(DefaultGuavaCacheManager.class); //ÁºìÂ≠òÂåÖË£ÖÁ±ª private static AbstractGuavaCache&lt;String, Object&gt; cacheWrapper; /** * ÂàùÂßãÂåñÁºìÂ≠òÂÆπÂô® */ public static boolean initGuavaCache() &#123; try &#123; cacheWrapper = DefaultGuavaCache.getInstance(); if (cacheWrapper != null) &#123; return true; &#125; &#125; catch (Exception e) &#123; LOGGER.error("Failed to init Guava cache;", e); &#125; return false; &#125; public static void put(String key, Object value) &#123; cacheWrapper.getCache().put(key, value); &#125; /** * ÊåáÂÆöÁºìÂ≠òÊó∂Êïà * @param key */ public static void invalidate(String key) &#123; cacheWrapper.getCache().invalidate(key); &#125; /** * ÊâπÈáèÊ∏ÖÈô§ * @param keys */ public static void invalidateAll(Iterable&lt;?&gt; keys) &#123; cacheWrapper.getCache().invalidateAll(keys); &#125; /** * Ê∏ÖÈô§ÊâÄÊúâÁºìÂ≠òÈ°π Ôºö ÊÖéÁî® */ public static void invalidateAll() &#123; cacheWrapper.getCache().invalidateAll(); &#125; public static Object get(String key) &#123; try &#123; return cacheWrapper.getCache().get(key); &#125; catch (Exception e) &#123; LOGGER.error("Failed to get value from guava cache;", e); &#125; return null; &#125; /** * ‰ΩøÁî®ÈùôÊÄÅÂÜÖÈÉ®Á±ªÂÆûÁé∞‰∏Ä‰∏™ÈªòËÆ§ÁöÑÁºìÂ≠òÔºåÂßîÊâòÁªômanagerÊù•ÁÆ°ÁêÜ * * DefaultGuavaCache ‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂçï‰æãÊ®°Âºè * @param &lt;String&gt; * @param &lt;Object&gt; */ private static class DefaultGuavaCache&lt;String, Object&gt; extends AbstractGuavaCache&lt;String, Object&gt; &#123; private static AbstractGuavaCache cache = new DefaultGuavaCache(); /** * Â§ÑÁêÜËá™Âä®ËΩΩÂÖ•ÁºìÂ≠òÔºåÊåâÂÆûÈôÖÊÉÖÂÜµËΩΩÂÖ• * @param key * @return */ @Override protected Object fetchData(String key) &#123; return null; &#125; public static AbstractGuavaCache getInstance() &#123; return DefaultGuavaCache.cache; &#125; &#125;&#125; ÂèÇËÄÉGoogle GuavaÂÆòÊñπÊïôÁ®ãÔºà‰∏≠ÊñáÁâàÔºâ]]></content>
      <categories>
        <category>ÁºìÂ≠ò</category>
      </categories>
      <tags>
        <tag>cache</tag>
        <tag>guava</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÈìæË∑ØË∑üË∏™ÁªÑ‰ª∂ SOFATracer Âíå Zipkin Ê®°ÂûãËΩ¨Êç¢ÂéüÁêÜ]]></title>
    <url>%2F2018%2F11%2F10%2Fsofatracertwo%2F</url>
    <content type="text"><![CDATA[SOFATracer ÊòØ‰∏Ä‰∏™Áî®‰∫éÂàÜÂ∏ÉÂºèÁ≥ªÁªüË∞ÉÁî®Ë∑üË∏™ÁöÑÁªÑ‰ª∂ÔºåÈÄöËøáÁªü‰∏ÄÁöÑ traceId Â∞ÜË∞ÉÁî®ÈìæË∑Ø‰∏≠ÁöÑÂêÑÁßçÁΩëÁªúË∞ÉÁî®ÊÉÖÂÜµ‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩï‰∏ãÊù•ÊàñËÄÖ‰∏äÊä•Âà∞ zipkinÔºå‰ª•ËææÂà∞ÈÄèËßÜÂåñÁΩëÁªúË∞ÉÁî®ÁöÑÁõÆÁöÑ„ÄÇËøôÁßç‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩï‰∏ãÊù•ÊàñËÄÖ‰∏äÊä•Âà∞zipkinÈÄöÂ∏∏Áß∞‰∏∫ ReportÔºåÂç≥Êï∞ÊçÆ‰∏äÊä• SOFATracer ÁöÑÊï∞ÊçÆ‰∏äÊä•ÊòØÂú®ÈÅµÂæ™ OpenTracing ËßÑËåÉÂü∫Á°Ä‰∏äÊâ©Â±ïÂá∫Êù•ÁöÑËÉΩÂäõÔºåOpenTracing ËßÑËåÉÊú¨Ë∫´Âè™ÊòØÁ∫¶ÂÆö‰∫ÜÊï∞ÊçÆÊ®°ÂûãÂíåË°å‰∏∫„ÄÇÊú¨Êñá‰∏ªË¶ÅÁõÆÁöÑÂú®‰∫éÂàÜÊûê SOFATracer ÁöÑÊï∞ÊçÆ‰∏äÊä•ÂäüËÉΩÈÉ®ÂàÜÔºå‰∏ªË¶ÅÂÜÖÂÆπÂ¶Ç‰∏ãÔºö Âü∫‰∫é OpenTracing ËßÑËåÉÁöÑÂàÜÂ∏ÉÂºèÈìæË∑ØË∑üË∏™Ëß£ÂÜ≥ÊñπÊ°à SOFATracer Report Êï∞ÊçÆ‰∏äÊä•Ê®°Âûã SOFATracer Âíå Zipkin Ê®°ÂûãËΩ¨Êç¢ÂéüÁêÜ Âü∫‰∫é OpenTracing ËßÑËåÉÁöÑÂàÜÂ∏ÉÂºèÈìæË∑ØË∑üË∏™Ëß£ÂÜ≥ÊñπÊ°à OpenTracing ÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑÊ†áÂáÜÂåñÂ±ÇÔºåÂÆÉ‰Ωç‰∫éÂ∫îÁî®Á®ãÂ∫è/Á±ªÂ∫ìÂíåËøΩË∏™ÊàñÊó•ÂøóÂàÜÊûêÁ®ãÂ∫è‰πãÈó¥„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥‰∏çÂêåÁöÑÂàÜÂ∏ÉÂºèËøΩË∏™Á≥ªÁªü API ‰∏çÂÖºÂÆπÁöÑÈóÆÈ¢òÔºåOpenTracing Êèê‰æõ‰∫Ü‰∏ÄÂ•óÂπ≥Âè∞Êó†ÂÖ≥„ÄÅÂéÇÂïÜÊó†ÂÖ≥ÁöÑ APIÔºåÂêåÊó∂‰πüÊèê‰æõ‰∫ÜÁªü‰∏ÄÁöÑÊ¶ÇÂøµÂíåÊï∞ÊçÆÊ†áÂáÜ„ÄÇÂÖ≥‰∫éÂØπ OpenTracing Ê†áÂáÜÁöÑÁâàÊú¨ÂåñÊèèËø∞ÂèØ‰ª•ÂèÇËÄÉ specification.mdÔºàhttps://github.com/opentracing/specification/blob/master/specification.mdÔºâ„ÄÇ‰∏Ä‰∫õÂÖ∑‰ΩìÁöÑÊ¶ÇÂøµ‰∏ãÈù¢Â∞ÜÁªìÂêàSOFATracer ÁöÑÂÆûÁé∞Êù•‰∏Ä‰∏ÄËØ¥Êòé„ÄÇ ÁõÆÂâçÂü∫‰∫é OpenTracing ËßÑËåÉÂÆûÁé∞ÁöÑÈìæË∑ØË∑üË∏™ÁªÑ‰ª∂Êúâ JaegerÔºåAppdashÔºåApache SkyWalking ÔºåDatadog Á≠â„ÄÇÂÉèË∞∑Ê≠åÁöÑ StackDriver Tracer ÂÆûÈôÖ‰∏äÂπ∂‰∏çÊòØÈÅµÂæ™ OpenTracing ËßÑËåÉÁöÑÔºå‰ΩÜÊòØÈÉΩÊ∫êËá™‰∫é Dapper ËøôÁØáËÆ∫Êñá„ÄÇ ËßÑËåÉÂÖ∂ÂÆûÂ∞±ÊòØÊ®°ÂûãÂíåË°å‰∏∫ÁöÑÁ∫¶ÊùüÔºåÂú® OpenTracing ËßÑËåÉ‰∏≠Êúâ‰∏âÁßçÂÖ≥ÈîÆÂíåÁõ∏‰∫íÂÖ≥ËÅîÁöÑÊ®°ÂûãÔºöTracer„ÄÅSpan ÂíåSpanContextÔºõÂπ∂‰∏îÂú®ËßÑËåÉ‰∏≠ÂØπ‰∫éÊØè‰∏™Ê®°ÂûãÁöÑË°å‰∏∫‰πüÂÅö‰∫ÜÁ∫¶ÂÆö„ÄÇ Tracer Tracer ÂèØ‰ª•Ë¢´ËÆ§‰∏∫ÊòØ‰∏Ä‰∏™Áî±Â§ö‰∏™ Span ÁªÑÊàêÁöÑÊúâÂêëÊó†ÁéØÂõæ„ÄÇ‰∏Ä‰∏™ Tracer ÂèØ‰ª•Áî®Êù•ÊèèËø∞‰∏Ä‰∏™ËØ∑Ê±Ç‰ªéÂèëÂá∫Âà∞Êî∂Âà∞ÂìçÂ∫îÊï¥‰∏™ÈìæË∑ØËøáÁ®ã„ÄÇÂâçÊèêÊòØÈúÄË¶ÅÂú®ÈÄÇÂΩìÁöÑÂú∞ÊñπËøõË°åÂüãÁÇπ„ÄÇ‰∏ãÂõæÂ∞±ÊòØ‰∏ÄÊù°ÂÆåÊï¥ÁöÑÈìæË∑ØÁöÑÂ±ïÁ§∫Ôºö Âú® SOFATracer ‰∏≠ ÔºåSofaTracer ÂÆûÁé∞‰∫Ü Tracer Êé•Âè£ÔºåÂÆûÁé∞‰∫ÜÊûÑÂª∫ spanÔºåÊï∞ÊçÆËΩΩÂÖ•ÔºàInjectÔºâÂíå Êï∞ÊçÆÊèêÂèñÔºàExtract ) ÁöÑËÉΩÂäõ„ÄÇ Start a new Span ÔºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ Span „ÄÇÈÄöËøáÊåáÂÆöÁöÑ operationName Êù•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ Span„ÄÇoperationName Ë°®Á§∫Áî± Span ÂÆåÊàêÁöÑÂÖ∑‰ΩìÁöÑÂ∑•‰Ωú ( ‰æãÂ¶ÇÔºåRPC ÊñπÊ≥ïÂêçÁß∞„ÄÅÂáΩÊï∞ÂêçÁß∞Êàñ‰∏Ä‰∏™ËæÉÂ§ßÁöÑËÆ°ÁÆó‰ªªÂä°‰∏≠ÁöÑÈò∂ÊÆµÁöÑÂêçÁß∞)„ÄÇ Inject a SpanContextÔºöÂ∞Ü SpanContext Ê≥®ÂÖ•Âà∞ÁªôÂÆöÁ±ªÂûãÁöÑ ‚Äúcarrier‚Äù ‰∏≠ÔºåÁî®‰∫éËøõË°åË∑®ËøõÁ®ãÁöÑ‰º†Ëæì„ÄÇ Extract a SpanContext Ôºö‰ªéËΩΩ‰Ωì‰∏≠ÊèêÂèñ‰∏≠ spanContext ÂÆû‰æãÂØπË±°„ÄÇËøô‰∏™ËøáÁ®ãÊòØÊ≥®ÂÖ•ÁöÑÈÄÜËøáÁ®ã„ÄÇspanContext ‰∏≠ÂåÖÊã¨‰∫ÜË¥ØÁ©øÊï¥‰∏™ÈìæË∑ØÁöÑ traceId ÔºåÂèòÂåñÁöÑ spanId ÔºåÁà∂ spanId ‰ª•ÂèäÈÄè‰º†Êï∞ÊçÆÁ≠â„ÄÇ Span ‰∏Ä‰∏™ span ‰ª£Ë°®Á≥ªÁªü‰∏≠ÂÖ∑ÊúâÂºÄÂßãÊó∂Èó¥ÂíåÊâßË°åÊó∂ÈïøÁöÑÈÄªËæëËøêË°åÂçïÂÖÉ„ÄÇspan ‰πãÈó¥ÈÄöËøáÂµåÂ•óÊàñËÄÖÈ°∫Â∫èÊéíÂàóÂª∫Á´ãÈÄªËæëÂõ†ÊûúÂÖ≥Á≥ªÔºåÁÑ∂ÂêéÂÜçÈÄöËøáËøôÁßçÂÖ≥Á≥ªÊù•ÊûÑÂª∫Êï¥‰∏™Ë∞ÉÁî®ÈìæË∑ØÔºàTracerÔºâ„ÄÇ OpenTracing ËßÑËåÉ API Á∫¶ÂÆö Span ÁöÑÊ®°ÂûãÂ¶Ç‰∏ãÔºàÂÆûÈôÖ‰∏äÂ∞±ÊòØ Span Êé•Âè£‰∏≠ÂØπÂ∫îÁöÑÊñπÊ≥ïÔºåÈúÄË¶ÅÁî±ÈÅµÂæ™ËØ•ËßÑËåÉÁöÑÂÆûÁé∞ËÄÖÂøÖÈ°ªÊèê‰æõÁöÑÊúÄÂ∞èËÉΩÂäõÁöÑÈõÜÂêàÔºâÔºö Get the Span‚Äôs SpanContextÔºö ÈÄöËøá Span Ëé∑Âèñ SpanContext ÔºàÂç≥‰Ωø span Â∑≤ÁªèÁªìÊùüÔºåÊàñËÄÖÂç≥Â∞ÜÁªìÊùüÔºâ FinishÔºöÁªìÊùü‰∏Ä‰∏™ Span „ÄÇFinish ÂøÖÈ°ªÊòØ span ÂÆû‰æãÁöÑÊúÄÂêé‰∏Ä‰∏™Ë¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂú®‰∏ªÁ∫øÁ®ãÂ§ÑÁêÜÂ§±Ë¥•ÊàñËÄÖÂÖ∂‰ªñÁ®ãÂ∫èÈîôËØØÂèëÁîüÊó∂ÔºåFinish ÊñπÊ≥ïÂèØËÉΩ‰∏ç‰ºöË¢´Ë∞ÉÁî®„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆûÁé∞ËÄÖÂ∫îËØ•ÊòéÁ°ÆÁöÑËÆ∞ÂΩï SpanÔºå‰øùËØÅÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÔºàËøô‰∏ÄÁÇπ SOFATracer ÂÖ∂ÂÆûÊòØÊ≤°ÊúâÂÅöÁöÑÔºâ„ÄÇ Set a K:V tag on the SpanÔºö‰∏∫ Span ËÆæÁΩÆ tag „ÄÇtag ÁöÑ key ÂøÖÈ°ªÊòØ string Á±ªÂûãÔºõvalue ÂøÖÈ°ªÊòØ string„ÄÅboolean ÊàñÊï∞Â≠óÁ±ªÂûã„ÄÇÈÄöÂ∏∏‰ºö‰ΩøÁî® Tag Êù•ËÆ∞ÂΩïË∑üË∏™Á≥ªÁªüÊÑüÂÖ¥Ë∂£ÁöÑ‰∏Ä‰∫õÊåáÊ†áÊï∞ÊçÆ„ÄÇ Add a new log eventÔºö‰∏∫ Span Â¢ûÂä†‰∏Ä‰∏™ log ‰∫ã‰ª∂ÔºåÁî®‰∫éËÆ∞ÂΩï Span ÁîüÂëΩÂë®Êúü‰∏≠ÂèëÁîüÁöÑ‰∫ã‰ª∂„ÄÇ Set a Baggage itemÔºö ËÆæÁΩÆ‰∏Ä‰∏™ string:string Á±ªÂûãÁöÑÈîÆÂÄºÂØπÔºå‰∏ÄËà¨ÊòØ‰∏öÂä°Êï∞ÊçÆÂú®ÂÖ®ÈìæË∑ØÊï∞ÊçÆÈÄèÊòé‰º†ËæìÔºåÂ≠òÂÇ®Âú® SpanContext ‰∏≠„ÄÇ Get a Baggage itemÔºö ÈÄöËøá key Ëé∑Âèñ Baggage ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇ SpanContext Span ‰∏ä‰∏ãÊñáÔºåÂá†‰πéÂåÖÂê´‰∫ÜÈúÄË¶ÅÂú®ÈìæË∑Ø‰∏≠‰º†ÈÄíÁöÑÂÖ®ÈÉ®‰ø°ÊÅØ„ÄÇÂè¶Â§ñÔºåSpan Èó¥ References Â∞±ÊòØÈÄöËøá SpanContext Êù•Âª∫Á´ãÂÖ≥Á≥ªÁöÑ„ÄÇÊ†πÊçÆ OpenTracing ËßÑËåÉË¶ÅÊ±ÇÔºåSpanContext ÊòØ‰∏çÂèØÂèòÁöÑÔºåÁõÆÁöÑÊòØÈò≤Ê≠¢Áî±‰∫é Span ÁöÑÁªìÊùüÂíåÁõ∏‰∫íÂÖ≥Á≥ªÔºåÈÄ†ÊàêÁöÑÂ§çÊùÇÁîüÂëΩÂë®ÊúüÈóÆÈ¢ò„ÄÇ SpanContext Ë°®Á§∫ÂøÖÈ°ª‰º†Êí≠Âà∞Âêé‰ª£ Spans ÂíåË∑®ËøõÁ®ãËæπÁïåÁöÑ Span Áä∂ÊÄÅ„ÄÇSpanContext Âú®ÈÄªËæë‰∏äÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºö Ë∑® Span ËæπÁïå‰º†Êí≠ÁöÑÁî®Êà∑Á∫ß ‚ÄúBaggage‚Äù ËØÜÂà´Êàñ‰ª•ÂÖ∂‰ªñÊñπÂºèÂÖ≥ËÅî Span ÂÆû‰æãÊâÄÈúÄÁöÑ‰ªª‰Ωï Tracer ÂÆûÁé∞ÁâπÂÆöÂ≠óÊÆµÔºà‰æãÂ¶ÇÔºåtrace_idÔºåspan_idÔºåsamplingÔºåÂÖÉÁªÑÔºâ Opentracing ‰∏≠ SpanContext Êé•Âè£‰∏≠Âè™Êúâ‰∏Ä‰∏™ baggageItems ÊñπÊ≥ïÔºåÈÄöËøáËøô‰∏™ÊñπÊ≥ïÊù•ÈÅçÂéÜÊâÄÊúâÁöÑ baggage ÂÖÉÁ¥†„ÄÇ 123public interface SpanContext &#123; Iterable&lt;Map.Entry&lt;String, String&gt;&gt; baggageItems();&#125; SOFATracer Êâ©Â±ïÁöÑ Tracer ÁöÑËÉΩÂäõ‰∏äÈù¢ÁÆÄÂçï‰ªãÁªç‰∫Ü OpenTracing ËßÑËåÉ API ÂØπ‰∫é Tracer„ÄÅSpan„ÄÅSpanContext ‰∏â‰∏™Ê†∏ÂøÉÊ®°ÂûãÁöÑËßÑËåÉÂÆö‰πâ„ÄÇ‰∏ãÈù¢Êù•Áúã‰∏ã SOFATracer ÊòØÂ¶Ç‰ΩïÈÅµÂæ™ËßÑËåÉÂπ∂ÂÅöÊâ©Â±ïÁöÑ„ÄÇ Âú® OpenTracing ËßÑËåÉ Âü∫Á°Ä‰∏äÔºåSOFATracer Êèê‰æõ‰∫ÜÂÆûÁé∞ÔºåÂπ∂Âú®ËßÑËåÉÂü∫Á°Ä‰∏äÊèê‰æõ‰∫ÜÊâ©Â±ïÂäüËÉΩ„ÄÇÊú¨Êñá‰∏ªË¶Å‰ªãÁªç‰∏äÂõæ‰∏≠Ê†áÁªøËâ≤ÁöÑÈÉ®ÂàÜÔºåÂç≥Êï∞ÊçÆ‰∏äÊä•ÂäüËÉΩ„ÄÇ SOFATracer ‰∏≠Êèê‰æõ‰∫Ü Report Êé•Âè£ÔºåÁÑ∂ÂêéÂü∫‰∫éÊ≠§Êé•Âè£Êâ©Â±ï‰∫Ü‰∏§‰∏™ÂÆûÁé∞Ôºö Á¨¨‰∏ÄÁßç Report Êâ©Â±ïÊòØÂü∫‰∫é DisruptorÔºàhttps://github.com/LMAX-Exchange/disruptorÔºâ È´òÊÄßËÉΩÊó†ÈîÅÂæ™ÁéØÈòüÂàóÁöÑÂºÇÊ≠•ËêΩÂú∞Á£ÅÁõòÁöÑÊó•ÂøóÊâìÂç∞„ÄÇ Á¨¨‰∫åÁßç Report Êâ©Â±ïÊòØÊèê‰æõËøúÁ®ã‰∏äÊä•ÔºåËÉΩÂ§üÂ∞Ü SOFATracer ÁöÑÈìæË∑ØÊï∞ÊçÆÊ®°ÂûãÊ±áÊä•Âà∞ Zipkin ‰∏≠ÂÅöË∞ÉÁî®ÈìæË∑ØÁöÑÂ±ïÁ§∫„ÄÇ ÂΩìÁÑ∂ÔºåSOFATracer ‰πüÂÖÅËÆ∏Áî®Êà∑Ëá™ÂÆö‰πâ‰∏äÊä•ÂäüËÉΩÔºåÂè™ÈúÄË¶ÅÂú®Ëá™Â∑±ÁöÑÂ∑•Á®ã‰ª£Á†Å‰∏≠ÂÆûÁé∞ Report Êé•Âè£Âç≥ÂèØÔºå‰∏ãÈù¢ÊòØ Report Êé•Âè£ÁöÑÂÆö‰πâÔºö 123456789101112public interface Reporter &#123; // ‰∏äÊä•Âà∞ËøúÁ®ãÊúçÂä°Âô®ÁöÑÊåÅ‰πÖÂåñÁ±ªÂûã String REMOTE_REPORTER = "REMOTE_REPORTER"; // ÁªÑÂêàÁ±ªÂûã String COMPOSITE_REPORTER = "COMPOSITE_REPORTER"; // Ëé∑Âèñ Reporter ÂÆû‰æãÁ±ªÂûã String getReporterType(); // ‰∏äÊä• span void report(SofaTracerSpan span); // ÂÖ≥Èó≠‰∏äÊä• span ÁöÑËÉΩÂäõ void close();&#125; SOFATracer Report Êï∞ÊçÆ‰∏äÊä•Ê®°Âûã ‰∏äÈù¢ÊèêÂà∞ SOFATracer ÁöÑ Report Êúâ‰∏§ÁßçÊú∫Âà∂Ôºå‰∏ÄÁßçÊòØËêΩÂà∞Á£ÅÁõòÔºåÂè¶Â§ñ‰∏ÄÁßçÊòØ‰∏äÊä•Âà∞ zipkin„ÄÇSOFATracer ‰∏≠Ëøô‰∏§ÁßçÊñπÊ°àÂπ∂‰∏çÊòØ‰∫åÈÄâ‰∏ÄÁöÑÔºåËÄåÊòØÂèØ‰ª•ÂêåÊó∂‰ΩøÁî®Â§ö‰∏™ÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨Â∏åÊúõ‰∏äÊä•Êï∞ÊçÆÂà∞ zipkinÔºåÂÖàÂºïÂÖ• tracer-sofa-boot-starter Ëøô‰∏™‰æùËµñÔºåÂπ∂ËøõË°åÁõ∏ÂÖ≥ zipkin ÁöÑÈÖçÁΩÆ‰πãÂêéÂ∞±ÂèØ‰ª•Â∞ÜÈìæË∑ØÊï∞ÊçÆ‰∏äÊä•Âà∞ zipkinÔºåÂ¶ÇÊûúÊ≤°ÊúâÂºïÂÖ•‰æùËµñÂàô‰∏ç‰ºö‰∏äÊä•„ÄÇÊú¨ËäÇÊù•ÂàÜÊûê‰∏ã SOFATracer ‰∏äÊä•Êï∞ÊçÆËøáÁ®ãÁöÑÂÖ∑‰ΩìÈÄªËæë„ÄÇ ‰∏äÈù¢ËøôÂº†ÂõæÊèèËø∞‰∫ÜÊï∞ÊçÆ‰∏äÊä•ÁöÑÂá†ÁßçÊñπÂºèÔºö ÁªøËâ≤ÈÉ®ÂàÜÔºå‰∏äÊä• zipkinÔºöËøôÈáåÂÖ∂ÂÆûÂ∞±ÊòØÂÆûÁé∞‰∏äÊä• zipkin ÁöÑ‰∏Ä‰∏™ÂõûË∞ÉÔºåÂΩìËøõË°å reportSpan Êìç‰ΩúÊó∂Ôºå‰ºöÊâßË°å‰∏Ä‰∏™invokeReportListeners ÔºåËøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØÈÄöÁü•ÊâÄÊúâÂÆûÁé∞‰∫Ü SpanReportListener Êé•Âè£ÁöÑÁ±ªÊâßË°åÂõûË∞ÉÊñπÊ≥ïÔºåÁÑ∂ÂêéÂú®Ëøô‰∏™ÂõûË∞ÉÊñπÊ≥ï‰∏≠Â∞Ü span Êï∞ÊçÆ‰∏äÊä•Âà∞ zipkin„ÄÇ Á∫¢Ëâ≤ÈÉ®ÂàÜÔºåËæìÂá∫Âà∞Á£ÅÁõòÔºöSOFATracer ‰∏∫‰∫ÜÊèê‰æõÊõ¥Â•ΩÁöÑÊâ©Â±ïËÉΩÂäõÔºåÂ∞ÜËæìÂá∫Êó•ÂøóÁöÑ Report ÁªÜÂàÜ‰∏∫ client Âíå server ‰∏§ÁßçÔºõÂπ∂Âú® Tracer Âü∫Á±ª‰∏≠Êèê‰æõ generateClientStatReporter Âíå generateServerStatReporter ‰∏§‰∏™ÊäΩË±°ÊñπÊ≥ïÔºå‰æõ‰∏çÂêåÁöÑÁªÑ‰ª∂Ëá™Â∑±Êù•ÂÆûÁé∞‰∏Ä‰∫õÁâπÊÆäÂåñÁöÑÂÆöÂà∂„ÄÇ ÂÖ≥‰∫é‰ΩïÊó∂ËøõË°å‰∏äÊä•ÔºåÂÖ∂ÂÆûËøô‰∏™Âú® Opentracing API ÁöÑËßÑËåÉ‰∏≠Â∑≤ÁªèÁªôÂá∫‰∫ÜÊòéÁ°ÆÁöÑÊó∂Êú∫„ÄÇÂú®‰∏äÈù¢ÁöÑ‰ªãÁªç‰∏≠ÊèêÂà∞Ôºå‚ÄúFinishÂøÖÈ°ªÊòØ span ÂÆû‰æãÁöÑÊúÄÂêé‰∏Ä‰∏™Ë¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ï‚ÄùÔºåÂΩì finish ÊñπÊ≥ïË¢´Ë∞ÉÁî®Êó∂‰πüÂ∞±ÊÑèÂë≥ÁùÄ‰∏Ä‰∏™ span ÁîüÂëΩÂë®ÊúüÁöÑÁªìÊùüÔºå‰∏∫‰∫Ü‰øùËØÅ span Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíåÊ≠£Á°ÆÊÄßÔºåSOFATracer reportSpan ÁöÑÈÄªËæëÂ∞±ÊòØÂú® finish ÊñπÊ≥ïË¢´Ë∞ÉÁî®Êó∂Ëß¶ÂèëÊâßË°å„ÄÇ Êï∞ÊçÆËêΩÂú∞Á£ÅÁõò SOFATracer Êó•ÂøóËêΩÁõòÊòØÂü∫‰∫éDisruptorÈ´òÊÄßËÉΩÊó†ÈîÅÂæ™ÁéØÈòüÂàóÂÆûÁé∞ÁöÑÔºåÊèê‰æõ‰∫ÜÂºÇÊ≠•ÊâìÂç∞Êó•ÂøóÂà∞Êú¨Âú∞Á£ÅÁõòÁöÑËÉΩÂäõ„ÄÇ append : ËøΩÊ∫Ø ReportÔºåÊó†ËÆ∫ÊòØ clientReport ËøòÊòØ serverReport ÔºåÂ∫ïÂ±ÇÂùá‰æùËµñ DiskReporterImpl ÁöÑÂÆûÁé∞„ÄÇDiskReporterImpl ÊòØ SOFATracer ÁªüÁ≠πÂ§ÑÁêÜÊó•ÂøóËêΩÁõòÁöÑÁ±ª„ÄÇclientReport Âíå serverReport ÁöÑÊúÄÁªàË∞ÉÁî®ÈÉΩ‰ºöËµ∞Âà∞DiskReporterImpl ‰∏≠ÁöÑ digestReport Ëøô‰∏™ÊñπÊ≥ï„ÄÇdigestReport ‰∏≠‰ºöÂ∞ÜÂΩìÂâç span append Âà∞ÁéØÂΩ¢ÁºìÂÜ≤ÈòüÂàó‰∏≠Ôºåappend Êìç‰ΩúÂ∞±ÊòØÂèëÂ∏É‰∏Ä‰∏™‰∫ã‰ª∂ÁöÑËøáÁ®ã„ÄÇ consumeÔºöconsume ÊòØ Disruptor ‰∏≠ÁöÑÂØπÂ∫îÁöÑÊ∂àË¥πÊ®°ÂûãÔºõSOFATracer ‰∏≠Ëøô‰∏™Ê∂àË¥πËÄÖÂ∞±ÊòØÂ∞Ü SofaTracerSpan ‰∏≠ÁöÑÊï∞ÊçÆÂÜôÂà∞Êó•ÂøóÊñá‰ª∂‰∏≠ÁöÑ„ÄÇ ‰∫ã‰ª∂ÂèëÂ∏ÉËøáÁ®ãÔºö Êï∞ÊçÆ‰∏äÊä• zipkin ÂâçÈù¢ÊèêÂà∞Ôºå‰∏äÊä• zipkin ÁöÑÊòØÈÄöËøá onSpanReport Ëøô‰∏™ÂõûË∞ÉÂáΩÊï∞ÂÆåÊàêÁöÑ„ÄÇtracer-sofa-boot-starter Ëøô‰∏™‰æùËµñ‰∏≠Êèê‰æõ‰∫Ü SpanReportListener Êé•Âè£ÂÆûÁé∞ ZipkinSofaTracerSpanRemoteReporter „ÄÇËÄåÂú® onSpanReport Ëøô‰∏™ÂõûË∞ÉÂáΩÊï∞‰∏≠ÔºåÂèàÂ∞ÜÂÖ∑‰Ωì‰∏äÊä•ÂßîÊâòÁªô‰∫Ü AsyncReporter Êù•Â§ÑÁêÜ„ÄÇ 123456789@Overridepublic void onSpanReport(SofaTracerSpan span) &#123; if (span == null) &#123; return; &#125; //convert Span zipkinSpan = convertToZipkinSpan(span); this.delegate.report(zipkinSpan);&#125; ÊûÑÂª∫ AsyncReporter ÂØπË±°ÈúÄË¶Å‰∏§‰∏™ÂèÇÊï∞Ôºö senderÔºö Êï∞ÊçÆÂèëÈÄÅÂô®ÔºåSOFATracer ‰∏≠Ôºåsender ÁöÑÊòØÈÄöËøá RestTemplate ‰ª• http ÊñπÂºè Êù•‰∏é zipkin ËøõË°åÈÄö‰ø°‰º†ËæìÁöÑ„ÄÇ urlÔºöZipkin ÈªòËÆ§ÁöÑ Collector ‰ΩøÁî® http ÂçèËÆÆÈáåÊî∂ÈõÜ Trace ‰ø°ÊÅØÔºåÂÆ¢Êà∑Á´ØË∞ÉÁî® /api/v1/spans Êàñ /api/v2/spans Êù•‰∏äÊä• tracer ‰ø°ÊÅØ„ÄÇËøôÈáåÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØ Zipkin V2 ÁöÑ API„ÄÇ AsyncReporter ‰∏≠ÂÆûÈôÖÊûÑÂª∫ÁöÑÊòØ BoundedAsyncReporter ÂØπË±° Ôºå Âπ∂‰∏îÂú®ÊûÑÂª∫‰∏Ä‰∏™ÂºÇÊ≠•Êä•ÂëäÂô®ÊòØÔºå‰ºöÊ†πÊçÆmessageTimeoutNanos ÊòØÂê¶Â§ß‰∫é 0 Êù•ÂÜ≥ÂÆöÊòØÂê¶Ëµ∑‰∏Ä‰∏™ÂÆàÊä§Á∫øÁ®ã flushThreadÔºõflushThread ‰ΩúÁî®ÊòØ‰∏ÄÁõ¥Âæ™ÁéØË∞ÉÁî® BoundedAsyncReporter ÁöÑ flush ÊñπÊ≥ïÔºåÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑ Span ‰ø°ÊÅØ‰∏äÊä•Áªô Zipkin„ÄÇÂÖ∑‰ΩìÁªÜËäÇËøôÈáå‰∏çÂ±ïÂºÄÂàÜÊûê„ÄÇ SOFATracer Âíå Zipkin Ê®°ÂûãËΩ¨Êç¢ÂéüÁêÜ Âú®‰∏äÂ∞èËäÇ‰∏≠Ë¥¥Âá∫ÁöÑÂ∞èÊÆµ‰ª£Á†Å‰∏≠ÔºåÈô§‰∫ÜÊûÑÂª∫ delegate ÂØπË±°Áî®‰∫éÊâßË°å‰∏äÊä•Â§ñÔºõÂè¶‰∏Ä‰∏™ÂÖ≥ÈîÆÂ∞±ÊòØ SOFATracer ÁöÑ Span Ê®°ÂûãËΩ¨Êç¢Êàê Zipkin Span Ê®°Âûã„ÄÇSOFATracer ‰ªé 2.2.0 ÁâàÊú¨‰πãÂêéÊîØÊåÅ Zipkin v2 ÁöÑÊ®°Âûã ÔºåÂØπ‰∫é Zipkin v1 ÁöÑÊ®°Âûã‰∏çÂú®Êèê‰æõÊîØÊåÅ„ÄÇ Zipkin v2ÁöÑÊ®°Âûã ‰∏ãÈù¢ÊòØ zipkin GitHub ‰∏äÊèê‰æõÁöÑ Zipkin v2 ÁöÑÊ®°ÂûãÁöÑÁªìÊûÑÂåñÊï∞ÊçÆ Demo„ÄÇÂÖ≥‰∫é Zipkin ÁöÑ Span Ê®°ÂûãÊîØÊåÅÂèØ‰ª•Êü•Áúã Simplified span2 format #1499 12345678910111213141516171819202122&#123; "kind": "CLIENT", "traceId": "5af7183fb1d4cf5f", "parentId": "6b221d5bc9e6496c", "id": "352bff9a74ca9ad2", "name": "query", "timestamp": 1461750040359000, "duration": 5000, "localEndpoint": &#123; "serviceName": "zipkin-server", "ipv4": "172.19.0.3", "port": 9411 &#125;, "remoteEndpoint": &#123; "serviceName": "mysql", "ipv4": "172.19.0.2", "port": 3306 &#125;, "tags": &#123; "jdbc.query": "//....discard" &#125;&#125; Zipkin v2 ÁöÑÊ®°ÂûãÁªìÊûÑËæÉ‰∏∫ÁÆÄÊ¥ÅÔºåÊï¥‰ΩìÁúãËµ∑Êù•Âπ∂Ê≤°Êúâ‰ªÄ‰πàÁπÅÈáçÔºåËøôÁßçÂØπ‰∫é‰ΩøÁî®ËÄÖÊù•ËØ¥ÊòØÂæàÂèãÂ•ΩÁöÑÔºåÊñπ‰æøÁêÜËß£„ÄÇÂÖ∂ÂÆûÂú®Zipkin v1 Ê®°ÂûãÊó∂ÔºåÂÖ∂Êï¥‰∏™Ê®°Âûã‰πüÊòØÊØîËæÉÂ§çÊùÇÁöÑÔºåzipkin Á§æÂå∫ÂØπ‰∫é Zipkin Êï∞ÊçÆÊ®°ÂûãÁöÑÂèòÊõ¥‰πüÊúâËÆ®ËÆ∫ÔºåËßÅ Zipkin v2 span model #939 ÔºõÂÉèÁé∞Âú® v2 Ê®°Âûã‰∏≠ÁöÑ tagsÔºåÊõøÊç¢‰∫ÜÂéüÊú¨ v1 ‰∏≠ÁöÑ binaryAnnotationsÔºåbinaryAnnotations ÁöÑÂ≠òÂú®ÊòØ v1 Ê®°ÂûãÂ§çÊùÇÁöÑÈáçË¶ÅÂéüÂõ†„ÄÇËØ¶ËßÅ ÂéªÈô§ÂéüÂõ†„ÄÇ SofaTracerSpan Ê®°ÂûãSofaTracerSpan ÊòØÂü∫‰∫é Opentracing Ê†áÂáÜÊù•ÁöÑ„ÄÇ‰ΩÜÊòØ Opentracing Ê†áÂáÜÂπ∂Ê≤°ÊúâËßÑÂÆö‰∏Ä‰∏™ Span Ê®°ÂûãÂøÖÈ°ªÊúâÂì™‰∫õÂ±ûÊÄß„ÄÇÊâÄ‰ª•ÂêÑ‰∏™Âü∫‰∫éËØ•Ê†áÂáÜÁöÑ‰∫ßÂìÅÂú®‰∫é Span ÁöÑÊ®°Âûã‰∏äÊòØ‰∏çÁªü‰∏ÄÁöÑÔºåÂ§ßÂ§ö‰ºöÂü∫‰∫éÂÖ∂Êú¨Ë∫´‰∫ßÁîüÁöÑÂú∫ÊôØÂ∏¶Êúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÂ±ûÊÄß„ÄÇ 12345678910111213141516171819202122232425&#123; "client":true, "server":false, "durationMicroseconds":775, "endTime":1536288243446, "logType":"httpclient-digest.log", "operationName":"GET", "logs":[ // ... ], "sofaTracer":&#123; "clientReporter":&#123;&#125;, "tracerTags":&#123;&#125;, "tracerType":"httpclient" &#125;, "sofaTracerSpanContext":&#123; // sofaTracerSpanContext info &#125;, "spanReferences":[], "startTime":1536288242671, "tagsWithBool":&#123;&#125;, "tagsWithNumber":&#123;&#125;, "tagsWithStr":&#123;&#125;, "thisAsParentWhenExceedLayer":&#123;&#125;&#125; SOFATracer ÁöÑ Span Ê®°ÂûãÁõ∏ËæÉ‰∫é Opentracing ËßÑËåÉÊ®°ÂûãÂíå Zipkin v2 ÁöÑÊ®°ÂûãÊù•ËØ¥ÔºåËÆ∞ÂΩïÁöÑÊï∞ÊçÆ‰ø°ÊÅØÊõ¥Âä†‰∏∞ÂØåÔºå‰∏îÂú® Opentracing ËßÑËåÉÁöÑÂü∫Á°Ä‰∏äÊâ©Â±ï‰∫Ü‰∏ÄÂ•óËá™Â∑±ÁöÑ APIÔºåÂèØ‰ª•ËÆ©‰ΩøÁî®ËÄÖËÉΩÂ§üÊõ¥Âä†Êñπ‰æøÁöÑÂú®Ëá™Â∑±ÁöÑ‰ª£Á†Å‰∏≠Êù•Ëé∑ÂèñÈìæË∑Ø‰∏≠ÁöÑ‰ø°ÊÅØÔºõÂú®Êó•Âøó‰∏≠Â±ïÁ§∫Êõ¥Â§öÁöÑ span ‰ø°ÊÅØÔºåËÉΩÂ§üÂ∏ÆÂä©Êàë‰ª¨Âéª‰∫ÜËß£‰∏Ä‰∫õË∞ÉÁî®ÁªÜËäÇÔºåÂú®ÂèëÁîüÈóÆÈ¢òÊó∂Ôºå‰πüÊèê‰æõ‰∫ÜÊõ¥Â§öÊéíÊü•ÈóÆÈ¢òÁöÑ‰æùÊçÆ‰ø°ÊÅØ„ÄÇ Ê®°ÂûãËΩ¨Êç¢ÂØπÁÖß‰∏∫‰∫Ü‰ΩøÂæó SOFATracer ÁöÑÊï∞ÊçÆËÉΩÂ§üË¢´ zipkin Ëß£ÊûêÔºåÈúÄË¶ÅÂ∞Ü SOFATracer ÁöÑ Span Ê®°ÂûãËΩ¨Êç¢Êàê zipkin v2 ÁöÑÊï∞ÊçÆÊ®°Âûã„ÄÇ Zipkin v2 Span Model SOFATracer Span Model Â§áÊ≥® traceId traceId traceId id spanId spanId parentId parentId Áà∂spanId name operationName span ÂêçÔºåÁî®Êù•ÊèèËø∞ÂΩìÂâçspan ÁöÑË°å‰∏∫ duration - ÂΩìÂâçspanÁöÑÊó∂Èó¥Ë∑®Â∫¶;ËøôÈáåÈÄöËøáspanÁöÑÔºàÁªìÊùüÊó∂Èó¥-ÂºÄÂßãÊó∂Èó¥ÔºâËé∑Âèñ timestamp timestamp ÂΩìÂâçspanÁöÑÂºÄÂßãÊó∂Èó¥ localEndPoint operationName&amp;host&amp;logData Ê†áÊòéËøô‰∏™spanÁöÑÊù•Ê∫ê remoteEndPoint - Ë¢´Ë∞ÉÁî®ÊñπÁöÑÊúçÂä°ÂêçÂíåÂú∞ÂùÄ tags bizBaggage &amp; tags È¢ùÂ§ñÁöÑÁî®‰∫éÊèèËø∞spanÁöÑ‰ø°ÊÅØ Êï¥‰ΩìÊù•ÁúãÔºåSpan Ê®°ÂûãÁõ∏‰ººÂ∫¶ÊòØÂæàÈ´òÔºå‰ΩÜÊòØÂÆûÈôÖ‰∏äÂπ∂‰∏çËÉΩÁõ¥Êé•Â∞ÜÊüê‰∫õÁõ∏ÂêåÁöÑÂ≠óÊÆµÁõ¥Êé•ËøõË°åÂÄºÂ§çÂà∂ÔºõËøôÈáåÊúâ‰∏Ä‰∏™ Ê°à‰æãÔºöISSUE#57 „ÄÇ traceId Âíå spanId Â§ÑÁêÜzipkin Âú®Ëá™Â∑±ÁöÑÊ®°ÂûãÈáåÂÅö‰∫ÜÂæàÂ§öÁâπÊÆäÁöÑÂ§ÑÁêÜ„ÄÇÊØîÂ¶Ç traceId ÈúÄÊª°Ë∂≥16 ÊàñËÄÖ 32 ‰ΩçÔºåÈïøÂ∫¶‰∏çÂ§üÁöÑ‰ºöÈ´ò‰ΩçË°• 0ÔºõÊâÄ‰ª•Âú®‰ΩøÁî® SOFATracer Êó∂ÔºåÊó•Âøó‰∏≠ÁöÑ traceId Âíå‰∏äÊä•Âà∞ zipkin ÁöÑ traceId ÈïøÂ∫¶‰∏ç‰∏ÄËá¥ÊòØÂêàÁêÜÁöÑ„ÄÇ ÂÖ≥‰∫é spanIdÔºåÊàë‰ª¨ÊúüÊúõÂú® zipkin ‰∏≠Â±ïÁ§∫ÊòØ‰ª•Ôºà0.1,0.1.1,‚Ä¶ÔºâËøôÁßçÂΩ¢ÂºèÊù•ÊèèËø∞ÔºåËÉΩÂ§üÁõ¥ËßÇÁöÑÁúãÂà∞ span ‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ‰ΩÜÊòØÁõÆÂâç‰ΩøÁî®ÁöÑ zipkin Ê®°ÂûãÂπ∂‰∏çËÉΩÊª°Ë∂≥Êàë‰ª¨ÁöÑÈúÄÊ±ÇÔºå‰∏ªË¶ÅÂéüÂõ†Âú®‰∫éËôΩÁÑ∂ zipkin Âú® v2 Ê®°Âûã‰∏≠ËôΩÁÑ∂ÊîØÊåÅ string Á±ªÂûãÁöÑ id Ôºå‰ΩÜÊòØÂÖ∂ÈïøÂ∫¶ÈôêÂà∂ÊòØ16‰ΩçÔºåÂØπ‰∫é SOFATracer Êù•ËØ¥ÔºåÂ¶ÇÊûúÂ≠òÂú®ËæÉÈïøÁöÑÈìæË∑ØË∞ÉÁî®Ôºå‰ºöÂØºËá¥Â±ÇÊ¨°‰∏¢Â§±„ÄÇÂè¶Â§ñÔºåÂ¶ÇÊûú‰∏äÊä• zipkin ÁöÑ span ÁöÑ parentId ‰∏∫ 0ÔºåÈÇ£‰πà zipkin Â∞Ü‰ºö‰∏çËøõË°åËÆæÁΩÆÔºõËÄå SOFATracer ÁöÑÁ¨¨‰∏Ä‰∏™ span ÁöÑ id Â∞±ÊòØ‰ªé 0 ÂºÄÂßãÁöÑÔºåÊâÄ‰ª•‰ºöÂØºËá¥ÈìæË∑ØÊûÑÂª∫Â§±Ë¥•ÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ùËØïÈÄöËøáÊîπÂèòËµ∑Âßã id Êù•ÊîπÂèòÔºå‰ºöÂØπÊï¥‰∏™Ê®°Âûã‰∫ßÁîüÂΩ±Âìç„ÄÇÁªèËøáÈ™åËØÅÊµãËØïÔºåÊàë‰ª¨ÊúÄÁªàÈááÁî®ÁöÑÊñπÊ°àÊòØ‰ΩøÁî®ÂÜ≤Á™ÅËæÉÂ∞èÁöÑ FNV64 Hash ÁÆóÊ≥ïÂ∞Ü String Á±ªÂûãËΩ¨Êç¢Êàê long ÂûãÊù•ÊèèËø∞Êàë‰ª¨ÁöÑ spanId„ÄÇ SOFARPC ‰∏äÊä•ÁöÑÊï∞ÊçÆÂ§ÑÁêÜÂú®Êï¥‰∏™Ê®°ÂûãËΩ¨Êç¢‰∏≠ÔºåÊØîËæÉÊ†∏ÂøÉÁöÑÂ∞±ÊòØÂ¶Ç‰ΩïÂÖºÂÆπ SOFARPC ‰∏äÊä•ÁöÑÊï∞ÊçÆ„ÄÇZipkin Âú®ÊûÑÂª∫ÈìæË∑ØÊï∞Êó∂ÔºåÂÖ∂Âü∫Êú¨ÁöÑÊ®°ÂûãÊòØ client-server-client-server-.. ËøôÁßçÊ®°ÂºèÔºõ‰∏ç‰ºöÂá∫Áé∞ a server calling a server ËøôÁßçÊÉÖÂÜµÔºå‰πüÂ∞±ÊòØÂ∏¶Êúâkind = server ÁöÑ span ÁöÑ Áà∂span Â∫îËØ•ÊòØ kind = client„ÄÇ SOFARPC ÂØπ‰∫é‰∏Ä‰∏™ rpc span ‰∏äÊä•‰∫Ü‰∏§‰∏™ span ‰ø°ÊÅØÔºåËøô‰∏§‰∏™ span Èô§‰∫Ü kind Á±ªÂûã‰∏çÂêå‰πãÂ§ñÔºåÂÖ∂‰ªñÁöÑ‰ø°ÊÅØÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇÂΩìÊï∞ÊçÆ‰∏äÊä•Áªô zipkin ‰πãÂêéÔºåzipkin ÈÄöËøáËá™Â∑±ÁöÑÁÆóÊ≥ïÊù•ÊûÑÂª∫‰æùËµñÊ†ëÊó∂Ôºå‰ºöÂØπ‰∏äÊä•ÁöÑ SOFARPC Êï∞ÊçÆÂ§ÑÁêÜÊúâÈóÆÈ¢ò„ÄÇ‰∏ãÂõæÊòØÊ≤°ÊúâÈÄÇÈÖç SOFARPC ÁîüÊàêÁöÑÈìæË∑Ø: ËøôÈáåÂèØ‰ª•ÁúãÂá∫Ôºå‰ªé mvc Âà∞ rpc ‰πãÈó¥ÁöÑÂÖ≥Á≥ªË¢´‚ÄòÂàáÊñ≠‚Äô‰∫Ü„ÄÇ ÈÄ†Êàê‰∏äËø∞ÈóÆÈ¢òÁöÑÂéüÂõ†Âú®‰∫éÔºåSOFATracer ‰∏äÊä•Êï∞ÊçÆÂà∞ zipkin Êó∂ÔºåÂú® v2 Ê®°Âûã‰∏≠Ôºåzipkin ‰ºöÈÄöËøáÂπøÂ∫¶‰ºòÂÖàÈÅçÂéÜÊù•ÊûÑÂª∫‰æùËµñÊ†ëÔºåÂÆûÈôÖ‰∏äÂú®Â±ïÁ§∫ services ÊàñËÄÖ dependencies Êó∂Ôºåzipkin ui ‰∏≠ÁöÑÂ±ïÁ§∫‰ºö‰æùËµñ endpiont ‰∏≠ÁöÑ serviceName Ôºõ‰∏§‰∏™Êù°‰ª∂Ôºö SOFARPC ÁöÑ span Êúâ‰∏§‰∏™Ôºàclient&amp;serverÔºâÔºå‰ΩÜÊòØËøô‰∏§‰∏™ span ÂÖ∑ÊúâÁõ∏ÂêåÁöÑ spanId Âíå parentIdÔºåspan.kind ‰∏çÂêå„ÄÇ zipkin Âú®ÊûÑÂª∫‰æùËµñÊ†ëÊó∂Ôºå‰æùËµñ‰∫é endpiont ‰∏≠ÁöÑ serviceName„ÄÇËØ• servieName ‰æùËµñ‰∫é idToNodeÔºàNode.TreeBuilder ‰∏≠ÁöÑÂ±ûÊÄßÔºåMap ÁªìÊûÑÔºåÊò†Â∞ÑÂÖ≥Á≥ª‰∏∫ spanId -&gt; spanÔºâ„ÄÇ 123Node&lt;V&gt; previous = idToNode.put(id, node);if (previous != null) node.setValue(mergeFunction.merge(previous.value, node.value)); ËøôÈáåÂΩìÂâç node ‰∏∫ rpc server Á±ªÂûãÊó∂Ôºåprevious ËøîÂõûÁªìÊûú‰∏ç‰∏∫ nullÔºå‰ºöÊâßË°å merge Êìç‰ΩúÔºåËØ• merge Êìç‰ΩúÁöÑÊ†∏ÂøÉÂ∞±ÊòØËÆæÁΩÆÂΩìÂâç rpc node ÁöÑ remoteEndpointÔºåÂÄº‰∏∫ rpc client ÁöÑ localEndpoint„ÄÇ ËøôÊ†∑‰ºöÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØ RPC ÁöÑ client Âíå server Span Âú® Zipkin Ê®°Âûã‰∏≠ÁöÑ‰ºöË¢´ÂêàÂπ∂Êàê‰∏Ä‰∏™ spanÔºõËøôÊ†∑Â∞±‰ºöÂØºËá¥ server -&gt; server ÁöÑÊÉÖÂÜµÔºå‰∏é zipkin ÁöÑ client -&gt; server ÈìæË∑ØÊ®°ÂûãÊúâÂÜ≤Á™Å„ÄÇÂ¶Ç‰∏ãÂõæÔºàÁªøËâ≤‰∏∫SOFATracer spanÔºåÈªÑËâ≤‰∏∫ zipkin spanÔºâÔºö ÈÄöËøáÂàÜÊûê zipkin ÁöÑÊûÑÂª∫ËøáÁ®ãÔºåÈÄÇÈÖç SOFARPC ‰∏äÊä•Êï∞ÊçÆÊó∂ÔºåSOFARPC server span ÁöÑ remoteEndpoint ‰∏çËÉΩ‰æùËµñ SOFARPC client span ÁöÑ localEndpointÔºåËÄåÂ∫îËØ•‰æùËµñ SOFARPC client parentSpan ÁöÑ localEndpoint„ÄÇ‰∏ãÂõæ‰∏∫ SOFARPC ÈÄÇÈÖç‰πãÂêéÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæÔºö ÊÄªÁªì Êú¨Êñá‰ªé OpenTracing ËßÑËåÉËØ¥Ëµ∑ÔºåÂØπ OpenTracing ËßÑËåÉ‰∏≠ÁöÑÊ®°ÂûãÂíåË°å‰∏∫ËøõË°å‰∫ÜÁÆÄÂçïÁöÑÊèèËø∞„ÄÇÁªìÂêà OpenTracing ËßÑËåÉÔºå‰ªãÁªç‰∫ÜËöÇËöÅÈáëÊúç SOFATracer ÂàÜÂ∏ÉÂºèÈìæË∑ØË∑üË∏™ÁöÑÊ®°ÂûãÂÆûÁé∞„ÄÇÂú®Ê≠§Âü∫Á°Ä‰∏äÔºåÂØπ SOFATracer ÁöÑÊï∞ÊçÆ‰∏äÊä•ÂäüËÉΩËøõË°å‰∫ÜËØ¶ÁªÜÁöÑÂàÜÊûêÔºåÂåÖÊã¨Âü∫‰∫é disruptor ÂÆûÁé∞ÁöÑÂºÇÊ≠•Êó•ÂøóËêΩÁõòÂíå‰∏äÊä•Êï∞ÊçÆÂà∞zipkinÔºõÊúÄÂêéÂØπ SOFATracer Âíå Zipkin Ê®°ÂûãËΩ¨Êç¢ÂéüÁêÜËøõË°å‰∫ÜËØ¥ÊòéÔºåÂπ∂ÂØπ SOFARPC Ê®°ÂûãÊï∞ÊçÆÁöÑ‰∏äÊä•Â§ÑÁêÜËøõË°å‰∫ÜËß£Êûê„ÄÇ Áõ∏ÂÖ≥ÊñáÊ°£ÈìæÊé• SOFATracer GitHub Zipkin ÂÆòÁΩë Zipkin GitHub opentracing ËßÑËåÉ opentracing ÂÆòÁΩë disruptor]]></content>
      <categories>
        <category>SOFA</category>
      </categories>
      <tags>
        <tag>ÈìæË∑ØË∑üË∏™</tag>
        <tag>OpenTracing</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁúãÂÆåËøô‰∏™‰∏ç‰ºöÈÖçÁΩÆ logback ÔºåËØ∑‰Ω†ÂêÉÁìúÔºÅ]]></title>
    <url>%2F2018%2F11%2F10%2Flogone%2F</url>
    <content type="text"><![CDATA[‰πãÂâçÂú® Êó•ÂøóÔºüËÅä‰∏ÄËÅäslf4jÂêß ËøôÁØáÊñáÁ´†‰∏≠ËÅä‰∫Ü‰∏ãslf4j„ÄÇÊú¨Êñá‰πü‰ªéÂÆûÈôÖÁöÑ‰æãÂ≠êÂá∫ÂèëÔºåÈíàÂØπlogbackÁöÑÊó•ÂøóÈÖçÁΩÆËøõË°åÂ≠¶‰π†„ÄÇ logack ÁÆÄ‰ªã logback ÂÆòÁΩëÔºöhttps://logback.qos.ch/ ÁõÆÂâçËøòÊ≤°ÊúâÁúãËøáÊó•ÂøóÁ±ªÊ°ÜÊû∂ÁöÑÊ∫êÁ†ÅÔºå‰ªÖÈôê‰∫éÂ¶Ç‰Ωï‰ΩøÁî®„ÄÇÊâÄ‰ª•Â∞±‰∏çËØ¥ÈÇ£‰∫õ‚ÄúÁ©∫ËØù‚Äù‰∫Ü„ÄÇÊúÄÁõ¥ËßÇÁöÑËÆ§Áü•ÊòØÔºö logbackÂíålog4jÊòØ‰∏Ä‰∏™‰∫∫ÂÜôÁöÑ springbootÈªòËÆ§‰ΩøÁî®ÁöÑÊó•ÂøóÊ°ÜÊû∂ÊòØlogback„ÄÇ ‰∏â‰∏™Ê®°ÂùóÁªÑÊàê logback-core logback-classic logback-access ÂÖ∂‰ªñÁöÑÂÖ≥‰∫éÊÄßËÉΩÔºåÂÖ≥‰∫éÂÜÖÂ≠òÂç†Áî®ÔºåÂÖ≥‰∫éÊµãËØïÔºåÂÖ≥‰∫éÊñáÊ°£ËØ¶ËßÅÊ∫êÁ†ÅÂèäÂÆòÁΩëËØ¥Êòé logback-core ÊòØÂÖ∂ÂÆÉÊ®°ÂùóÁöÑÂü∫Á°ÄËÆæÊñΩÔºåÂÖ∂ÂÆÉÊ®°ÂùóÂü∫‰∫éÂÆÉÊûÑÂª∫ÔºåÊòæÁÑ∂Ôºålogback-core Êèê‰æõ‰∫Ü‰∏Ä‰∫õÂÖ≥ÈîÆÁöÑÈÄöÁî®Êú∫Âà∂„ÄÇlogback-classic ÁöÑÂú∞‰ΩçÂíå‰ΩúÁî®Á≠âÂêå‰∫é Log4JÔºåÂÆÉ‰πüË¢´ËÆ§‰∏∫ÊòØ Log4J ÁöÑ‰∏Ä‰∏™ÊîπËøõÁâàÔºåÂπ∂‰∏îÂÆÉÂÆûÁé∞‰∫ÜÁÆÄÂçïÊó•ÂøóÈó®Èù¢ SLF4JÔºõËÄå logback-access ‰∏ªË¶Å‰Ωú‰∏∫‰∏Ä‰∏™‰∏é Servlet ÂÆπÂô®‰∫§‰∫íÁöÑÊ®°ÂùóÔºåÊØîÂ¶ÇËØ¥tomcatÊàñËÄÖ jettyÔºåÊèê‰æõ‰∏Ä‰∫õ‰∏é HTTP ËÆøÈóÆÁõ∏ÂÖ≥ÁöÑÂäüËÉΩ„ÄÇ ÈÖçÁΩÆÊñá‰ª∂ËØ¶Ëß£ËøôÈÉ®ÂàÜ‰∏ªË¶ÅÊù•Â≠¶‰π†‰∏ãlogbackÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÈ°π„ÄÇ configurationÂÖàÊù•ÁúãËøôÂº†ÂõæÔºåËøô‰∏™ÁªìÊûÑÂ∞±ÊòØÊï¥‰∏™logback.xmlÈÖçÁΩÆÊñá‰ª∂ÁöÑÁªìÊûÑ„ÄÇ ÂØπÂ∫îÊù•Áúã‰∏ãÈÖçÁΩÆÊñá‰ª∂Ôºö 1234567891011121314151617&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; &lt;property name="glmapper-name" value="glmapper-demo" /&gt; &lt;contextName&gt;$&#123;glmapper-name&#125;&lt;/contextName&gt; &lt;appender&gt; //xxxx &lt;/appender&gt; &lt;logger&gt; //xxxx &lt;/logger&gt; &lt;root&gt; //xxxx &lt;/root&gt; &lt;/configuration&gt; psÔºöÊÉ≥‰ΩøÁî®springÊâ©Â±ïprofileÊîØÊåÅÔºåË¶Å‰ª•logback-spring.xmlÂëΩÂêçÔºåÂÖ∂‰ªñÂ¶ÇpropertyÈúÄË¶ÅÊîπ‰∏∫springProperty scan:ÂΩìÊ≠§Â±ûÊÄßËÆæÁΩÆ‰∏∫trueÊó∂ÔºåÈÖçÁΩÆÊñá‰ª∂Â¶ÇÊûúÂèëÁîüÊîπÂèòÔºåÂ∞Ü‰ºöË¢´ÈáçÊñ∞Âä†ËΩΩÔºåÈªòËÆ§ÂÄº‰∏∫true„ÄÇ scanPeriod:ËÆæÁΩÆÁõëÊµãÈÖçÁΩÆÊñá‰ª∂ÊòØÂê¶Êúâ‰øÆÊîπÁöÑÊó∂Èó¥Èó¥ÈöîÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªôÂá∫Êó∂Èó¥Âçï‰ΩçÔºåÈªòËÆ§Âçï‰ΩçÊòØÊØ´Áßí„ÄÇÂΩìscan‰∏∫trueÊó∂ÔºåÊ≠§Â±ûÊÄßÁîüÊïà„ÄÇÈªòËÆ§ÁöÑÊó∂Èó¥Èó¥Èöî‰∏∫1ÂàÜÈíü„ÄÇ debug:ÂΩìÊ≠§Â±ûÊÄßËÆæÁΩÆ‰∏∫trueÊó∂ÔºåÂ∞ÜÊâìÂç∞Âá∫logbackÂÜÖÈÉ®Êó•Âøó‰ø°ÊÅØÔºåÂÆûÊó∂Êü•ÁúãlogbackËøêË°åÁä∂ÊÄÅ„ÄÇÈªòËÆ§ÂÄº‰∏∫false„ÄÇ contextNameÊØè‰∏™loggerÈÉΩÂÖ≥ËÅîÂà∞logger‰∏ä‰∏ãÊñáÔºåÈªòËÆ§‰∏ä‰∏ãÊñáÂêçÁß∞‰∏∫‚Äúdefault‚Äù„ÄÇ‰ΩÜÂèØ‰ª•‰ΩøÁî®contextNameÊ†áÁ≠æËÆæÁΩÆÊàêÂÖ∂‰ªñÂêçÂ≠óÔºåÁî®‰∫éÂå∫ÂàÜ‰∏çÂêåÂ∫îÁî®Á®ãÂ∫èÁöÑËÆ∞ÂΩï propertyÁî®Êù•ÂÆö‰πâÂèòÈáèÂÄºÁöÑÊ†áÁ≠æÔºåpropertyÊ†áÁ≠æÊúâ‰∏§‰∏™Â±ûÊÄßÔºånameÂíåvalueÔºõÂÖ∂‰∏≠nameÁöÑÂÄºÊòØÂèòÈáèÁöÑÂêçÁß∞ÔºåvalueÁöÑÂÄºÊó∂ÂèòÈáèÂÆö‰πâÁöÑÂÄº„ÄÇÈÄöËøápropertyÂÆö‰πâÁöÑÂÄº‰ºöË¢´ÊèíÂÖ•Âà∞logger‰∏ä‰∏ãÊñá‰∏≠„ÄÇÂÆö‰πâÂèòÈáèÂêéÔºåÂèØ‰ª•‰Ωø‚Äú${name}‚ÄùÊù•‰ΩøÁî®ÂèòÈáè„ÄÇÂ¶Ç‰∏äÈù¢ÁöÑxmlÊâÄÁ§∫„ÄÇ loggerÁî®Êù•ËÆæÁΩÆÊüê‰∏Ä‰∏™ÂåÖÊàñËÄÖÂÖ∑‰ΩìÁöÑÊüê‰∏Ä‰∏™Á±ªÁöÑÊó•ÂøóÊâìÂç∞Á∫ßÂà´‰ª•ÂèäÊåáÂÆöappender„ÄÇ rootÊ†πloggerÔºå‰πüÊòØ‰∏ÄÁßçloggerÔºå‰∏îÂè™Êúâ‰∏Ä‰∏™levelÂ±ûÊÄß appenderË¥üË¥£ÂÜôÊó•ÂøóÁöÑÁªÑ‰ª∂Ôºå‰∏ãÈù¢‰ºöÁªÜËØ¥ filterfilterÂÖ∂ÂÆûÊòØappenderÈáåÈù¢ÁöÑÂ≠êÂÖÉÁ¥†„ÄÇÂÆÉ‰Ωú‰∏∫ËøáÊª§Âô®Â≠òÂú®ÔºåÊâßË°å‰∏Ä‰∏™ËøáÊª§Âô®‰ºöÊúâËøîÂõûDENYÔºåNEUTRALÔºåACCEPT‰∏â‰∏™Êûö‰∏æÂÄº‰∏≠ÁöÑ‰∏Ä‰∏™„ÄÇ DENYÔºöÊó•ÂøóÂ∞ÜÁ´ãÂç≥Ë¢´ÊäõÂºÉ‰∏çÂÜçÁªèËøáÂÖ∂‰ªñËøáÊª§Âô® NEUTRALÔºöÊúâÂ∫èÂàóË°®ÈáåÁöÑ‰∏ã‰∏™ËøáÊª§Âô®ËøáÊé•ÁùÄÂ§ÑÁêÜÊó•Âøó ACCEPTÔºöÊó•Âøó‰ºöË¢´Á´ãÂç≥Â§ÑÁêÜÔºå‰∏çÂÜçÁªèËøáÂâ©‰ΩôËøáÊª§Âô® Ê°à‰æãÂàÜÊûêÈ¶ñÂÖàÊù•ÈÖçÁΩÆ‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÊñá‰ª∂„ÄÇËøôÈáåÁî≥ËØ∑‰∏ãÔºåÊàë‰ΩøÁî®ÁöÑÊòØ logback-spring.xml„ÄÇÂíå logback.xml Âú®properties‰∏äÊúâÁï•ÂæÆÂ∑ÆÂà´„ÄÇÂÖ∂‰ªñÈÉΩ‰∏ÄÊ†∑„ÄÇ Â∑•Á®ãÔºöspringboot+web ÂÖàÊù•Áúã‰∏ãÈ°πÁõÆÁõÆÂΩï properties‰∏≠Â∞±ÊòØÊåáÂÆö‰∫ÜÊó•ÂøóÁöÑÊâìÂç∞Á∫ßÂà´ÂíåÊó•ÂøóÁöÑËæìÂá∫‰ΩçÁΩÆÔºö 1234#ËÆæÁΩÆÂ∫îÁî®ÁöÑÊó•ÂøóÁ∫ßÂà´logging.level.com.glmapper.spring.boot=INFO#Ë∑ØÂæÑlogging.path=./logs ÈÄöËøáÊéßÂà∂Âè∞ËæìÂá∫ÁöÑloglogback-spring.xmlÁöÑÈÖçÁΩÆÂ¶Ç‰∏ãÔºö123456789101112&lt;configuration&gt; &lt;!-- ÈªòËÆ§ÁöÑÊéßÂà∂Âè∞Êó•ÂøóËæìÂá∫Ôºå‰∏ÄËà¨Áîü‰∫ßÁéØÂ¢ÉÈÉΩÊòØÂêéÂè∞ÂêØÂä®ÔºåËøô‰∏™Ê≤°Â§™Â§ß‰ΩúÁî® --&gt; &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;Pattern&gt;%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;80&#125; - %msg%n&lt;/Pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;root level="info"&gt; &lt;appender-ref ref="STDOUT"/&gt; &lt;/root&gt;&lt;/configuration&gt; ÊâìÂç∞Êó•ÂøóÁöÑcontroller123456789101112private static final Logger LOGGER =LoggerFactory.getLogger(HelloController.class);@Autowiredprivate TestLogService testLogService;@GetMapping("/hello")public String hello()&#123; LOGGER.info("GLMAPPER-SERVICE:info"); LOGGER.error("GLMAPPER-SERVICE:error"); testLogService.printLogToSpecialPackage(); return "hello spring boot";&#125; È™åËØÅÁªìÊûúÔºö123401:50:39.633 INFO com.glmapper.spring.boot.controller.HelloController- GLMAPPER-SERVICE:info01:50:39.633 ERROR com.glmapper.spring.boot.controller.HelloController- GLMAPPER-SERVICE:error ‰∏äÈù¢ÁöÑÂ∞±ÊòØÈÄöËøáÊéßÂà∂Âè∞ÊâìÂç∞Âá∫Êù•ÁöÑÔºåËøô‰∏™Êó∂ÂÄôÂõ†‰∏∫Êàë‰ª¨Ê≤°ÊúâÊåáÂÆöÊó•ÂøóÊñá‰ª∂ÁöÑËæìÂá∫ÔºåÂõ†‰∏∫‰∏ç‰ºöÂú®Â∑•Á®ãÁõÆÂΩï‰∏ãÁîü‰∫ßlogsÊñá‰ª∂Â§π„ÄÇ ÊéßÂà∂Âè∞‰∏çÊâìÂç∞ÔºåÁõ¥Êé•ËæìÂá∫Âà∞Êó•ÂøóÊñá‰ª∂ÂÖàÊù•Áúã‰∏ãÈÖçÁΩÆÊñá‰ª∂Ôºö 1234567891011121314151617181920212223242526272829303132333435&lt;configuration&gt; &lt;!-- Â±ûÊÄßÊñá‰ª∂:Âú®propertiesÊñá‰ª∂‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÈÖçÁΩÆÈ°π --&gt; &lt;springProperty scope="context" name="logging.path" source="logging.path"/&gt; &lt;springProperty scope="context" name="logging.level" source="logging.level.com.glmapper.spring.boot"/&gt; &lt;!-- ÈªòËÆ§ÁöÑÊéßÂà∂Âè∞Êó•ÂøóËæìÂá∫Ôºå‰∏ÄËà¨Áîü‰∫ßÁéØÂ¢ÉÈÉΩÊòØÂêéÂè∞ÂêØÂä®ÔºåËøô‰∏™Ê≤°Â§™Â§ß‰ΩúÁî® --&gt; &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;Pattern&gt;%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;80&#125; - %msg%n&lt;/Pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name="GLMAPPER-LOGGERONE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log &lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;root level="info"&gt; &lt;appender-ref ref="GLMAPPER-LOGGERONE"/&gt; &lt;/root&gt;&lt;/configuration&gt; ËøôÈáåÊàë‰ª¨appender-refÊåáÂÆöÁöÑappenderÊòØGLMAPPER-LOGGERONEÔºåÂõ†‰∏∫‰πãÂâçÊ≤°ÊúâÂêçÂ≠ó‰∏∫GLMAPPER-LOGGERONEÁöÑappenderÔºåÊâÄ‰ª•Ë¶ÅÂ¢ûÂä†‰∏Ä‰∏™name‰∏∫GLMAPPER-LOGGERONEÁöÑappender„ÄÇ Ê≥®ÊÑè‰∏äÈù¢Ëøô‰∏™ÈÖçÁΩÆÔºåÊàë‰ª¨ÊòØÁõ¥Êé•Êé•Â∞ÜrootÁöÑappender-refÁõ¥Êé•ÊåáÂÆöÂà∞Êàë‰ª¨ÁöÑGLMAPPER-LOGGERONEËøô‰∏™appenderÁöÑ„ÄÇÊâÄ‰ª•ÊéßÂà∂Âè∞‰∏≠Â∞ÜÂè™‰ºöÊâìÂç∞Âá∫bannar‰πãÂêéÂ∞±Âï•‰πü‰∏çÊâìÂç∞‰∫ÜÔºåÊâÄÊúâÁöÑÂêØÂä®‰ø°ÊÅØÈÉΩ‰ºöË¢´ÊâìÂç∞Âú®Êó•ÂøóÊñá‰ª∂glmapper-loggerone.log‰∏≠„ÄÇ ‰ΩÜÊòØÂÆûÈôÖ‰∏äÊàë‰ª¨‰∏çÂ∏åÊúõÊàëÁöÑ‰∏öÂä°Êó•Âøó‰∏≠‰ºöÂåÖÊã¨Ëøô‰∫õÂêØÂä®‰ø°ÊÅØ„ÄÇÊâÄ‰ª•Ëøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±ÈúÄË¶ÅÈÄöËøáloggerÊ†áÁ≠æÊù•Êêû‰∫ãÊÉÖ‰∫Ü„ÄÇÂ∞Ü‰∏äÈù¢ÁöÑÈÖçÁΩÆÊñá‰ª∂ËøõË°åÁÆÄÂçï‰øÆÊîπÔºö 12345678&lt;logger name="com.glmapper.spring.boot.controller" level="$&#123;logging.level&#125;" additivity="false"&gt; &lt;appender-ref ref="GLMAPPER-LOGGERONE" /&gt;&lt;/logger&gt;&lt;root level="$&#123;logging.level&#125;"&gt; &lt;appender-ref ref="STDOUT"/&gt;&lt;/root&gt; ËÆ©rootÊåáÂêëÊéßÂà∂Âè∞ËæìÂá∫ÔºõloggerË¥üË¥£ÊâìÂç∞ÂåÖcom.glmapper.spring.boot.controller‰∏ãÁöÑÊó•Âøó„ÄÇ È™åËØÅÁªìÊûúËøòÊòØÈÄöËøáÊàë‰ª¨ÁöÑÊµãËØïcontrollerÊù•ÊâìÂç∞Êó•Âøó‰∏∫‰æãÔºå‰ΩÜÊòØËøôÈáå‰∏ç‰ºöÂú®ÊéßÂà∂Âè∞Âá∫Áé∞Êó•Âøó‰ø°ÊÅØ‰∫Ü„ÄÇÊúüÊúõÁöÑÊó•ÂøóÊñá‰ª∂Âú®./logs/glmapper-spring-boot/glmapper-loggerone.log„ÄÇ loggerÂíåappenderÁöÑÂÖ≥Á≥ª‰∏äÈù¢‰∏§ÁßçÊòØ‰∏Ä‰∏™Âü∫Êú¨ÁöÑÈÖçÁΩÆÊñπÂºèÔºåÈÄöËøá‰∏äÈù¢‰∏§‰∏™Ê°à‰æãÔºåÊàë‰ª¨ÂÖàÊù•‰∫ÜËß£‰∏ãlogger/appender/root‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÁÑ∂ÂêéÂÜçËØ¶ÁªÜÁöÑËØ¥‰∏ãloggerÂíåappenderÁöÑÈÖçÁΩÆÁªÜËäÇ„ÄÇ Âú®ÊúÄÂâçÈù¢‰ªãÁªç‰∏≠ÊèêÂà∞ÔºårootÊòØÊ†πlogger,ÊâÄ‰ª•‰ªñ‰∏§ÊòØ‰∏ÄÂõû‰∫ãÔºõÂè™‰∏çËøároot‰∏≠‰∏çËÉΩÊúânameÂíåadditivityÂ±ûÊÄßÔºåÊòØÊúâ‰∏Ä‰∏™level„ÄÇ appenderÊòØ‰∏Ä‰∏™Êó•ÂøóÊâìÂç∞ÁöÑÁªÑ‰ª∂ÔºåËøôÈáåÁªÑ‰ª∂ÈáåÈù¢ÂÆö‰πâ‰∫ÜÊâìÂç∞ËøáÊª§ÁöÑÊù°‰ª∂„ÄÅÊâìÂç∞ËæìÂá∫ÊñπÂºè„ÄÅÊªöÂä®Á≠ñÁï•„ÄÅÁºñÁ†ÅÊñπÂºè„ÄÅÊâìÂç∞Ê†ºÂºèÁ≠âÁ≠â„ÄÇ‰ΩÜÊòØÂÆÉ‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™ÊâìÂç∞ÁªÑ‰ª∂ÔºåÂ¶ÇÊûúÊàë‰ª¨‰∏ç‰ΩøÁî®‰∏Ä‰∏™loggerÊàñËÄÖrootÁöÑappender-refÊåáÂÆöÊüê‰∏™ÂÖ∑‰ΩìÁöÑappenderÊó∂ÔºåÂÆÉÂ∞±Ê≤°Êúâ‰ªÄ‰πàÊÑè‰πâ„ÄÇ Âõ†Ê≠§appenderËÆ©Êàë‰ª¨ÁöÑÂ∫îÁî®Áü•ÈÅìÊÄé‰πàÊâì„ÄÅÊâìÂç∞Âà∞Âì™Èáå„ÄÅÊâìÂç∞Êàê‰ªÄ‰πàÊ†∑ÔºõËÄåloggerÂàôÊòØÂëäËØâÂ∫îÁî®Âì™‰∫õÂèØ‰ª•Ëøô‰πàÊâì„ÄÇ‰æãÂ¶ÇÊüê‰∏™Á±ª‰∏ãÁöÑÊó•ÂøóÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™appenderÊâìÂç∞ÊàñËÄÖÊüê‰∏™ÂåÖ‰∏ãÁöÑÊó•ÂøóÂèØ‰ª•Ëøô‰πàÊâìÂç∞„ÄÇ appender ÈÖçÁΩÆËØ¶Ëß£ËøôÈáå‰ª•‰∏äÈù¢Ê°à‰æã‰∏≠ÁöÑÂêç‰∏∫GLMAPPER-LOGGERONEÁöÑappenderËØ¥ÊòéÔºö 123456789101112131415161718&lt;appender name="GLMAPPER-LOGGERONE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log &lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt; appender Êúâ‰∏§‰∏™Â±ûÊÄß nameÂíåclass;nameÊåáÂÆöappenderÂêçÁß∞ÔºåclassÊåáÂÆöappenderÁöÑÂÖ®ÈôêÂÆöÂêç„ÄÇ‰∏äÈù¢Â£∞ÊòéÁöÑÊòØÂêç‰∏∫GLMAPPER-LOGGERONEÔºåclass‰∏∫ch.qos.logback.core.rolling.RollingFileAppenderÁöÑ‰∏Ä‰∏™appender„ÄÇ appender ÁöÑÁßçÁ±ª ConsoleAppenderÔºöÊääÊó•ÂøóÊ∑ªÂä†Âà∞ÊéßÂà∂Âè∞ FileAppenderÔºöÊääÊó•ÂøóÊ∑ªÂä†Âà∞Êñá‰ª∂ RollingFileAppenderÔºöÊªöÂä®ËÆ∞ÂΩïÊñá‰ª∂ÔºåÂÖàÂ∞ÜÊó•ÂøóËÆ∞ÂΩïÂà∞ÊåáÂÆöÊñá‰ª∂ÔºåÂΩìÁ¨¶ÂêàÊüê‰∏™Êù°‰ª∂Êó∂ÔºåÂ∞ÜÊó•ÂøóËÆ∞ÂΩïÂà∞ÂÖ∂‰ªñÊñá‰ª∂„ÄÇÂÆÉÊòØFileAppenderÁöÑÂ≠êÁ±ª append Â≠êÊ†áÁ≠æ1&lt;append&gt;true&lt;/append&gt; Â¶ÇÊûúÊòØ trueÔºåÊó•ÂøóË¢´ËøΩÂä†Âà∞Êñá‰ª∂ÁªìÂ∞æÔºåÂ¶ÇÊûúÊòØfalseÔºåÊ∏ÖÁ©∫Áé∞Â≠òÊñá‰ª∂ÔºåÈªòËÆ§ÊòØtrue„ÄÇ filter Â≠êÊ†áÁ≠æÂú®ÁÆÄ‰ªã‰∏≠ÊèêÂà∞‰∫ÜfilterÔºõ‰ΩúÁî®Â∞±ÊòØ‰∏äÈù¢ËØ¥ÁöÑ„ÄÇÂèØ‰ª•‰∏∫appender Ê∑ªÂä†‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËøáÊª§Âô®ÔºåÂèØ‰ª•Áî®‰ªªÊÑèÊù°‰ª∂ÂØπÊó•ÂøóËøõË°åËøáÊª§„ÄÇappender ÊúâÂ§ö‰∏™ËøáÊª§Âô®Êó∂ÔºåÊåâÁÖßÈÖçÁΩÆÈ°∫Â∫èÊâßË°å„ÄÇ ThresholdFilter‰∏¥ÁïåÂÄºËøáÊª§Âô®ÔºåËøáÊª§Êéâ‰Ωé‰∫éÊåáÂÆö‰∏¥ÁïåÂÄºÁöÑÊó•Âøó„ÄÇÂΩìÊó•ÂøóÁ∫ßÂà´Á≠â‰∫éÊàñÈ´ò‰∫é‰∏¥ÁïåÂÄºÊó∂ÔºåËøáÊª§Âô®ËøîÂõûNEUTRALÔºõÂΩìÊó•ÂøóÁ∫ßÂà´‰Ωé‰∫é‰∏¥ÁïåÂÄºÊó∂ÔºåÊó•Âøó‰ºöË¢´ÊãíÁªù„ÄÇ 123&lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;INFO&lt;/level&gt;&lt;/filter&gt; LevelFilterÁ∫ßÂà´ËøáÊª§Âô®ÔºåÊ†πÊçÆÊó•ÂøóÁ∫ßÂà´ËøõË°åËøáÊª§„ÄÇÂ¶ÇÊûúÊó•ÂøóÁ∫ßÂà´Á≠â‰∫éÈÖçÁΩÆÁ∫ßÂà´ÔºåËøáÊª§Âô®‰ºöÊ†πÊçÆonMath(Áî®‰∫éÈÖçÁΩÆÁ¨¶ÂêàËøáÊª§Êù°‰ª∂ÁöÑÊìç‰Ωú) Âíå onMismatch(Áî®‰∫éÈÖçÁΩÆ‰∏çÁ¨¶ÂêàËøáÊª§Êù°‰ª∂ÁöÑÊìç‰Ωú)Êé•Êî∂ÊàñÊãíÁªùÊó•Âøó„ÄÇ 12345&lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;INFO&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; ÂÖ≥‰∫éNEUTRAL„ÄÅACCEPT„ÄÅDENY ËßÅ‰∏äÊñáÁÆÄ‰ªã‰∏≠ÂÖ≥‰∫éfilterÁöÑ‰ªãÁªç„ÄÇ file Â≠êÊ†áÁ≠æfile Ê†áÁ≠æÁî®‰∫éÊåáÂÆöË¢´ÂÜôÂÖ•ÁöÑÊñá‰ª∂ÂêçÔºåÂèØ‰ª•ÊòØÁõ∏ÂØπÁõÆÂΩïÔºå‰πüÂèØ‰ª•ÊòØÁªùÂØπÁõÆÂΩïÔºåÂ¶ÇÊûú‰∏äÁ∫ßÁõÆÂΩï‰∏çÂ≠òÂú®‰ºöËá™Âä®ÂàõÂª∫ÔºåÊ≤°ÊúâÈªòËÆ§ÂÄº„ÄÇ 123&lt;file&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log&lt;/file&gt; Ëøô‰∏™Ë°®Á§∫ÂΩìÂâçappenderÂ∞Ü‰ºöÂ∞ÜÊó•ÂøóÂÜôÂÖ•Âà∞${logging.path}/glmapper-spring-boot/glmapper-loggerone.logËøô‰∏™ÁõÆÂΩï‰∏ã„ÄÇ rollingPolicy Â≠êÊ†áÁ≠æËøô‰∏™Â≠êÊ†áÁ≠æÁî®Êù•ÊèèËø∞ÊªöÂä®Á≠ñÁï•ÁöÑ„ÄÇËøô‰∏™Âè™ÊúâappenderÁöÑclassÊòØRollingFileAppenderÊó∂ÊâçÈúÄË¶ÅÈÖçÁΩÆ„ÄÇËøô‰∏™‰πü‰ºöÊ∂âÂèäÊñá‰ª∂ÁöÑÁßªÂä®ÂíåÈáçÂëΩÂêçÔºàa.log-&gt;a.log.2018.07.22Ôºâ„ÄÇ TimeBasedRollingPolicyÊúÄÂ∏∏Áî®ÁöÑÊªöÂä®Á≠ñÁï•ÔºåÂÆÉÊ†πÊçÆÊó∂Èó¥Êù•Âà∂ÂÆöÊªöÂä®Á≠ñÁï•ÔºåÊó¢Ë¥üË¥£ÊªöÂä®‰πüË¥üË¥£Âá∫ÂèëÊªöÂä®„ÄÇËøô‰∏™‰∏ãÈù¢ÂèàÂåÖÊã¨‰∫Ü‰∏§‰∏™Â±ûÊÄßÔºö FileNamePattern maxHistory 123456789&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Êó•ÂøóÊñá‰ª∂ËæìÂá∫ÁöÑÊñá‰ª∂Âêç:ÊåâÂ§©ÂõûÊªö daily --&gt; &lt;FileNamePattern&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-loggerone.log.%d&#123;yyyy-MM-dd&#125; &lt;/FileNamePattern&gt; &lt;!--Êó•ÂøóÊñá‰ª∂‰øùÁïôÂ§©Êï∞--&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt;&lt;/rollingPolicy&gt; ‰∏äÈù¢ÁöÑËøôÊÆµÈÖçÁΩÆË°®ÊòéÊØèÂ§©ÁîüÊàê‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂Ôºå‰øùÂ≠ò30Â§©ÁöÑÊó•ÂøóÊñá‰ª∂ FixedWindowRollingPolicyÊ†πÊçÆÂõ∫ÂÆöÁ™óÂè£ÁÆóÊ≥ïÈáçÂëΩÂêçÊñá‰ª∂ÁöÑÊªöÂä®Á≠ñÁï•„ÄÇ encoder Â≠êÊ†áÁ≠æÂØπËÆ∞ÂΩï‰∫ã‰ª∂ËøõË°åÊ†ºÂºèÂåñ„ÄÇÂÆÉÂπ≤‰∫Ü‰∏§‰ª∂‰∫ãÔºö ÊääÊó•Âøó‰ø°ÊÅØËΩ¨Êç¢ÊàêÂ≠óËäÇÊï∞ÁªÑ ÊääÂ≠óËäÇÊï∞ÁªÑÂÜôÂÖ•Âà∞ËæìÂá∫ÊµÅ 12345&lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt;&lt;/encoder&gt; ÁõÆÂâçencoderÂè™ÊúâPatternLayoutEncoder‰∏ÄÁßçÁ±ªÂûã„ÄÇ ÂÆö‰πâ‰∏Ä‰∏™Âè™ÊâìÂç∞errorÁ∫ßÂà´Êó•ÂøóÁöÑappcener1234567891011121314151617181920212223 &lt;!-- ÈîôËØØÊó•Âøó appender Ôºö ÊåâÁÖßÊØèÂ§©ÁîüÊàêÊó•ÂøóÊñá‰ª∂ --&gt;&lt;appender name="ERROR-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;!-- ËøáÊª§Âô®ÔºåÂè™ËÆ∞ÂΩï error Á∫ßÂà´ÁöÑÊó•Âøó --&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;error&lt;/level&gt; &lt;/filter&gt; &lt;!-- Êó•ÂøóÂêçÁß∞ --&gt; &lt;file&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-error.log&lt;/file&gt; &lt;!-- ÊØèÂ§©ÁîüÊàê‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂Ôºå‰øùÂ≠ò30Â§©ÁöÑÊó•ÂøóÊñá‰ª∂ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Êó•ÂøóÊñá‰ª∂ËæìÂá∫ÁöÑÊñá‰ª∂Âêç:ÊåâÂ§©ÂõûÊªö daily --&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-error.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;!--Êó•ÂøóÊñá‰ª∂‰øùÁïôÂ§©Êï∞--&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;!--Ê†ºÂºèÂåñËæìÂá∫Ôºö%dË°®Á§∫Êó•ÊúüÔºå%threadË°®Á§∫Á∫øÁ®ãÂêçÔºå%-5levelÔºöÁ∫ßÂà´‰ªéÂ∑¶ÊòæÁ§∫5‰∏™Â≠óÁ¨¶ÂÆΩÂ∫¶%msgÔºöÊó•ÂøóÊ∂àÊÅØÔºå%nÊòØÊç¢Ë°åÁ¨¶--&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;!-- ÁºñÁ†Å --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt; ÂÆö‰πâ‰∏Ä‰∏™ËæìÂá∫Âà∞ÊéßÂà∂Âè∞ÁöÑappender123456&lt;!-- ÈªòËÆ§ÁöÑÊéßÂà∂Âè∞Êó•ÂøóËæìÂá∫Ôºå‰∏ÄËà¨Áîü‰∫ßÁéØÂ¢ÉÈÉΩÊòØÂêéÂè∞ÂêØÂä®ÔºåËøô‰∏™Ê≤°Â§™Â§ß‰ΩúÁî® --&gt;&lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;Pattern&gt;%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;80&#125; - %msg%n&lt;/Pattern&gt; &lt;/encoder&gt;&lt;/appender&gt; logger ÈÖçÁΩÆËØ¶Ëß£1234&lt;logger name="com.glmapper.spring.boot.controller" level="$&#123;logging.level&#125;" additivity="false"&gt; &lt;appender-ref ref="GLMAPPER-LOGGERONE" /&gt;&lt;/logger&gt; ‰∏äÈù¢ÁöÑËøô‰∏™ÈÖçÁΩÆÊñá‰ª∂ÊèèËø∞ÁöÑÊòØÔºöcom.glmapper.spring.boot.controllerËøô‰∏™ÂåÖ‰∏ãÁöÑ${logging.level}Á∫ßÂà´ÁöÑÊó•ÂøóÂ∞Ü‰ºö‰ΩøÁî®GLMAPPER-LOGGERONEÊù•ÊâìÂç∞„ÄÇloggerÊúâ‰∏â‰∏™Â±ûÊÄßÂíå‰∏Ä‰∏™Â≠êÊ†áÁ≠æÔºö name:Áî®Êù•ÊåáÂÆöÂèóÊ≠§loggerÁ∫¶ÊùüÁöÑÊüê‰∏Ä‰∏™ÂåÖÊàñËÄÖÂÖ∑‰ΩìÁöÑÊüê‰∏Ä‰∏™Á±ª„ÄÇ level:Áî®Êù•ËÆæÁΩÆÊâìÂç∞Á∫ßÂà´ÔºàTRACE, DEBUG, INFO, WARN, ERROR, ALL Âíå OFFÔºâÔºåËøòÊúâ‰∏Ä‰∏™ÂÄºINHERITEDÊàñËÄÖÂêå‰πâËØçNULLÔºå‰ª£Ë°®Âº∫Âà∂ÊâßË°å‰∏äÁ∫ßÁöÑÁ∫ßÂà´„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÊ≠§Â±ûÊÄßÔºåÈÇ£‰πàÂΩìÂâçloggerÂ∞Ü‰ºöÁªßÊâø‰∏äÁ∫ßÁöÑÁ∫ßÂà´„ÄÇ addtivity:Áî®Êù•ÊèèËø∞ÊòØÂê¶Âêë‰∏äÁ∫ßlogger‰º†ÈÄíÊâìÂç∞‰ø°ÊÅØ„ÄÇÈªòËÆ§ÊòØtrue„ÄÇ appender-refÂàôÊòØÁî®Êù•ÊåáÂÆöÂÖ∑‰ΩìappenderÁöÑ„ÄÇ ‰∏çÂêåÊó•ÂøóÈöîÁ¶ªÊâìÂç∞Ê°à‰æãÂú®ÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êàë‰ª¨Êúâ‰∏âÁßçappender,‰∏Ä‰∏™ÊòØÊåáÂÆöÂåÖÁ∫¶ÊùüÁöÑÔºå‰∏Ä‰∏™ÊòØÊéßÂà∂errorÁ∫ßÂà´ÁöÑÔºå‰∏Ä‰∏™ÊòØÊéßÂà∂Âè∞ÁöÑ„ÄÇÁÑ∂ÂêéËøôÂ∞èËäÇÊàë‰ª¨Â∞±Êù•ÂÆûÁé∞‰∏ã‰∏çÂêåÊó•ÂøóÊâìÂç∞Âà∞‰∏çÂêåÁöÑlogÊñá‰ª∂‰∏≠„ÄÇ Ê†πÊçÆÂåÖËøõË°åÊó•ÂøóÊñá‰ª∂ÈöîÁ¶ªËøô‰∏™‰æãÂ≠êÈáåÊàë‰ª¨Â∞Ücom.glmapper.spring.boot.controller‰∏≠ÁöÑÊó•ÂøóËæìÂá∫Âà∞glmapper-controller.logÔºõÂ∞Ücom.glmapper.spring.boot.service‰∏≠ÁöÑÊó•ÂøóËæìÂá∫Âà∞glmapper-service.log„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!--ÊâìÂç∞Êó•ÂøóÂà∞glmapper-service.logÁöÑappender--&gt;&lt;appender name="GLMAPPER-SERVICE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-service.log &lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-service.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt;&lt;!--ÊâìÂç∞Êó•ÂøóÂà∞glmapper-controller.logÁöÑappender--&gt;&lt;appender name="GLMAPPER-CONTROLLER" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt; $&#123;logging.path&#125;/glmapper-spring-boot/glmapper-controller.log &lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-controller.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt;&lt;!--Ê≠§loggerÁ∫¶ÊùüÂ∞Ü.controllerÂåÖ‰∏ãÁöÑÊó•ÂøóËæìÂá∫Âà∞GLMAPPER-CONTROLLERÔºåÈîôËØØÊó•ÂøóËæìÂá∫Âà∞GERROR-APPENDEÔºõGERROR-APPENDEËßÅ‰∏äÈù¢--&gt;&lt;logger name="com.glmapper.spring.boot.controller" level="$&#123;logging.level&#125;" additivity="false"&gt; &lt;appender-ref ref="GLMAPPER-CONTROLLER" /&gt; &lt;appender-ref ref="GERROR-APPENDER" /&gt;&lt;/logger&gt;&lt;!--Ê≠§loggerÁ∫¶ÊùüÂ∞Ü.serviceÂåÖ‰∏ãÁöÑÊó•ÂøóËæìÂá∫Âà∞GLMAPPER-SERVICEÔºåÈîôËØØÊó•ÂøóËæìÂá∫Âà∞GERROR-APPENDEÔºõGERROR-APPENDEËßÅ‰∏äÈù¢--&gt;&lt;logger name="com.glmapper.spring.boot.service" level="$&#123;logging.level&#125;" additivity="false"&gt; &lt;appender-ref ref="GLMAPPER-SERVICE" /&gt; &lt;appender-ref ref="GERROR-APPENDER" /&gt;&lt;/logger&gt; Êù•ÁúãËøêË°åÁªìÊûú 1„ÄÅglmaper-controller 2„ÄÅglmapper-service 3„ÄÅglmapper-error Êª°Ë∂≥Êàë‰ª¨ÁöÑÈ¢ÑÊúüÔºå‰ΩÜÊòØËøôÈáåÊúâ‰∏™Â∞èÈóÆÈ¢ò„ÄÇÂú®infoÊó•ÂøóÈáåÂá∫Áé∞‰∫Üerror,ÂΩìÁÑ∂ËøôÊòØÊ≠£Â∏∏ÁöÑ„ÄÇÂÅáÂ¶ÇÊàë‰ª¨‰∏çÊÉ≥Âú®infoÈáåÈù¢Âá∫Áé∞errorÊÄé‰πàÂäûÂë¢ÔºüÂæàÁÆÄÂçïÔºåÊàë‰ª¨‰ª•APPENDER-SERVICE‰∏∫‰æãÔºåÂ∞ÜfilterËøáÊª§Âô®ËøõË°å‰øÆÊîπÔºö Â∞Ü‰∏ãÈù¢ÁöÑÔºö123&lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt;&lt;/filter&gt; ‰øÆÊîπ‰∏∫Ôºö 1234567&lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;!-- Â¶ÇÊûúÂëΩ‰∏≠Â∞±Á¶ÅÊ≠¢ËøôÊù°Êó•Âøó --&gt; &lt;onMatch&gt;DENY&lt;/onMatch&gt; &lt;!-- Â¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Â∞±‰ΩøÁî®ËøôÊù°ËßÑÂàô --&gt; &lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt; &lt;/filter&gt; ËøôÈáåÂêåÊó∂Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂú®logger‰∏≠levelÈúÄË¶ÅËÆæÁΩÆ‰∏∫infoÁ∫ßÂà´„ÄÇ Ê†πÊçÆÁ±ªËøõË°åÊó•ÂøóÊñá‰ª∂ÈöîÁ¶ªËøô‰∏™ÂÖ∂ÂÆû‰πüÊòØÂíå‰∏äÈù¢ÈÇ£‰∏™Â∑Æ‰∏çËøáÔºåÂè™‰∏çËøáÁ≤íÂ∫¶Êõ¥ÁªÜ‰∏ÄÁÇπÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊØîÂ¶ÇËØ¥Êàë‰ª¨Êúâ‰∏™ÂÆöÊó∂‰ªªÂä°Á±ªÈúÄË¶ÅÂçïÁã¨Êù•ËÆ∞ÂΩïÂÖ∂Êó•Âøó‰ø°ÊÅØÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ËÄÉËôë‰ΩøÁî®Âü∫‰∫éÁ±ªÁª¥Â∫¶Êù•Á∫¶ÊùüÊâìÂç∞„ÄÇ 123456789101112131415161718192021222324252627&lt;!--ÁâπÊÆäÂäüËÉΩÂçïÁã¨appender ‰æãÂ¶ÇË∞ÉÂ∫¶Á±ªÁöÑÊó•Âøó--&gt;&lt;appender name="SCHEDULERTASKLOCK-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt;$&#123;logging.path&#125;/glmapper-spring-boot/scheduler-task-lock.log&lt;/file&gt; &lt;!-- ÊØèÂ§©ÁîüÊàê‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂Ôºå‰øùÂ≠ò30Â§©ÁöÑÊó•ÂøóÊñá‰ª∂ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Êó•ÂøóÊñá‰ª∂ËæìÂá∫ÁöÑÊñá‰ª∂Âêç:ÊåâÂ§©ÂõûÊªö daily --&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/scheduler-task-lock.log.%d&#123;yyyy-MM-dd&#125;&lt;/FileNamePattern&gt; &lt;!--Êó•ÂøóÊñá‰ª∂‰øùÁïôÂ§©Êï∞--&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;!--Ê†ºÂºèÂåñËæìÂá∫Ôºö%dË°®Á§∫Êó•ÊúüÔºå%threadË°®Á§∫Á∫øÁ®ãÂêçÔºå%-5levelÔºöÁ∫ßÂà´‰ªéÂ∑¶ÊòæÁ§∫5‰∏™Â≠óÁ¨¶ÂÆΩÂ∫¶%msgÔºöÊó•ÂøóÊ∂àÊÅØÔºå%nÊòØÊç¢Ë°åÁ¨¶--&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;!-- ÁºñÁ†Å --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt;&lt;!--ËøôÈáåÊåáÂÆöÂà∞‰∫ÜÂÖ∑‰ΩìÁöÑÊüê‰∏Ä‰∏™Á±ª--&gt;&lt;logger name="com.glmapper.spring.boot.task.TestLogTask" level="$&#123;logging.level&#125;" additivity="true"&gt; &lt;appender-ref ref="SCHEDULERTASKLOCK-APPENDER" /&gt; &lt;appender-ref ref="ERROR-APPENDER" /&gt; &lt;/logger&gt; ÊúÄÁªàTestLogTask‰∏≠ÁöÑÊó•ÂøóÂ∞Ü‰ºöË¢´ÊâìÂç∞Âà∞Ëøô‰∏™Ëá™Â∑±Áã¨Á´ãÁöÑlogÊñá‰ª∂‰∏≠„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö Ê†πÊçÆËá™ÂÆö‰πâ logger ÁöÑ name ËøõË°åÊó•ÂøóÊñá‰ª∂ÈöîÁ¶ªloggerÁöÑnameÈô§‰∫ÜÁ±ª„ÄÅÂåÖÁ≠âÁ∫¶Êùü‰πãÂ§ñÔºåÂΩìÁÑ∂ËøòÂèØ‰ª•ËøôÊ†∑Êù•Áé©„ÄÇ„ÄÇ„ÄÇ Âú®ËøõË°åÊ°à‰æã‰πãÂâçÔºåËøôÈáåÂÖàÊääÂâçÈù¢Ê°à‰æã‰∏≠loggerÂ£∞ÊòéÁöÑ‰ª£Á†ÅË¥¥‰∏Ä‰∏ãÔºå‰ª•‰ΩúÂØπÊØî,‰ª•TestLogTaskÁ±ª‰∏≠ÁöÑÊó•Âøó‰∏∫‰æãÔºö 12private static final Logger LOGGER =LoggerFactory.getLogger(TestLogTask.class); Âú®getLogger‰∏≠Êàë‰ª¨ÊòØÂ∞ÜÂΩìÂâçÂØπË±°ÁöÑclass‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÔºåËøô‰∏™ÊòØ‰∏∫‰∫ÜÊâìÂç∞Êó∂Ëé∑ÂèñÂÖ∂ÂÖ®ÈôêÂÆöÂêçÁöÑÔºàËßÅ‰∏ãÈù¢3-Ôºâ„ÄÇ 12341-2018-07-21 11:15:42.003 [pool-1-thread-1] 2-INFO 3-com.glmapper.spring.boot.task.TestLogTask -4-com.glmapper.spring.boot.task:info ‰∏öÂä°Á±ªÂÆö‰πâÊàë‰ª¨ÂêåÊ†∑ÊòØserviceÂåÖ‰∏ãÂÆö‰πâ‰∏Ä‰∏™Á±ªTestLogNameServiceImpl 1234567891011121314package com.glmapper.spring.boot.service;@Service("testLogNameService")public class TestLogNameServiceImpl implements TestLogNameService &#123; private static final Logger LOGGER = LoggerFactory.getLogger("GLMAPPER-TEST-LOG"); @Override public void print() &#123; LOGGER.info("GLMAPPER-TEST-LOG:this is special logger-----info"); LOGGER.error("GLMAPPER-TEST-LOG:this is special logger-------error"); &#125;&#125; appenderÂíåloggerÈÖçÁΩÆ123456789101112131415161718192021222324252627&lt;appender name="ROOT-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;append&gt;true&lt;/append&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;$&#123;logging.level&#125;&lt;/level&gt; &lt;/filter&gt; &lt;file&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-test.log&lt;/file&gt; &lt;!-- ÊØèÂ§©ÁîüÊàê‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂Ôºå‰øùÂ≠ò30Â§©ÁöÑÊó•ÂøóÊñá‰ª∂ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--Êó•ÂøóÊñá‰ª∂ËæìÂá∫ÁöÑÊñá‰ª∂Âêç:ÊåâÂ§©ÂõûÊªö daily --&gt; &lt;FileNamePattern&gt;$&#123;logging.path&#125;/glmapper-spring-boot/glmapper-test.log.%d&#123;yyyy-MM-dd&#125; &lt;/FileNamePattern&gt; &lt;!--Êó•ÂøóÊñá‰ª∂‰øùÁïôÂ§©Êï∞--&gt; &lt;MaxHistory&gt;30&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt; &lt;!--Ê†ºÂºèÂåñËæìÂá∫Ôºö%dË°®Á§∫Êó•ÊúüÔºå%threadË°®Á§∫Á∫øÁ®ãÂêçÔºå%-5levelÔºöÁ∫ßÂà´‰ªéÂ∑¶ÊòæÁ§∫5‰∏™Â≠óÁ¨¶ÂÆΩÂ∫¶%msgÔºöÊó•ÂøóÊ∂àÊÅØÔºå%nÊòØÊç¢Ë°åÁ¨¶--&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;!-- ÁºñÁ†Å --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt;&lt;/appender&gt;&lt;!--ËøôÈáåÁöÑnameÂíå‰∏öÂä°Á±ª‰∏≠ÁöÑgetLogger‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØ‰∏ÄÊ†∑ÁöÑ--&gt;&lt;logger name="GLMAPPER-TEST-LOG" level="$&#123;logging.level&#125;" additivity="true"&gt; &lt;appender-ref ref="ROOT-APPENDER" /&gt; &lt;appender-ref ref="ERROR-APPENDER" /&gt; &lt;/logger&gt; Êàë‰ª¨Ëøô‰∏™È¢ÑÊúüÁöÑÊòØTestLogNameServiceImpl‰∏≠ÁöÑÊó•Âøó‰∏çÊâìÂç∞Âà∞glmapper-service.log‰∏≠ÔºåËÄåÊòØÊâìÂç∞Âà∞glmapper-test.log‰∏≠„ÄÇ 1„ÄÅglmapper-test.log 2„ÄÅglmapper-service.log Êª°Ë∂≥Êàë‰ª¨ÁöÑÈ¢ÑÊúü„ÄÇ Â¶Ç‰Ωï‰ΩøÁî®logbackÊâìÂç∞mybatisÁöÑsqlËØ≠Âè•Ëøô‰∏™ËøòÊòØÊØîËæÉÂùëÁöÑ„ÄÇ‰∏∫‰ªÄ‰πà„ÄÇÁúã‰∏ãËøô‰∏™Ôºö 123&lt;settings&gt; &lt;setting name="logImpl" value="slf4j" /&gt;&lt;/settings&gt; Âú®mybatis-configration.xml‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáËøôÊ†∑‰∏Ä‰∏™ÈÖçÁΩÆÈ°πÊù•ÂÖ≥ËÅîÂà∞ÂÖ∑‰ΩìÁöÑÊó•ÂøóÁªÑ‰ª∂„ÄÇ‰ΩÜÊòØlogImplÁöÑÂÆûÁé∞‰∏≠ÊòØÊ≤°ÊúâlogbackÁöÑ„ÄÇÈÇ£‰πàÊÄé‰πàÂäûÂë¢ÔºüËøôÈáåÂè™ËÉΩÈÄöËøáslf4jÁöÑÊñπÂºèÊ°•Êé•Âà∞logback„ÄÇ ÁÑ∂ÂêéÂú®Êàë‰ª¨ÁöÑlogback-spring.xml‰∏≠ËøõË°åÂ¶Ç‰∏ãÈÖçÁΩÆÔºö 1234 &lt;!-- Â∞ÜsqlËØ≠Âè•ËæìÂá∫Âà∞ÂÖ∑‰ΩìÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠ --&gt;&lt;logger name="com.alipay.sofa.cloudplatform.common.dao" level="$&#123;logging.sql.level&#125;" additivity="false"&gt; &lt;appender-ref ref="SQL-APPENDER"/&gt;&lt;/logger&gt; ËøôÈáåÊúâÂá†‰∏™ÁÇπÈúÄË¶ÅÊ≥®ÊÑèÁöÑ„ÄÇÈ¶ñÂÖàÊòØ${logging.sql.level}Ëøô‰∏™ÂøÖÈ°ªÊòØdebugÔºåËøô‰∏™ÊòØÁî±mybatisÊú¨Ë∫´ÂÆûÁé∞ÂÜ≥ÂÆöÁöÑ„ÄÇËÄåËøôÈáåÁöÑnameËÆæÂÆöÁöÑcom.alipay.sofa.cloudplatform.common.daoÂÄºÂ∞±ÊòØÊàë‰ª¨daoÊé•Âè£ÁöÑÂåÖË∑ØÂæÑ„ÄÇ ÁΩë‰∏äÁúã‰∫Ü‰∏Ä‰∏™ÊØîËæÉÂÖ∏ÂûãÁöÑÊ°à‰æãÔºåËøôÁßçÊñπÂºèÂè™ËÉΩËæìÂá∫Âà∞ÊéßÂà∂Âè∞ÔºåÂπ∂‰∏çËÉΩÂ∞ÜÊñá‰ª∂ËæìÂá∫Âà∞Êó•ÂøóÊñá‰ª∂ÔºõÂÆÉÊòØÊ†πÊçÆÂÜÖÈÉ®ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Êú∫Âà∂ÂÅ∑‰∫Ü‰∏™Êáí„ÄÇmybatisÁî®logbackÊó•Âøó‰∏çÊòæÁ§∫sqlÁöÑËß£ÂÜ≥ÂäûÊ≥ï„ÄÇ ÊÄªÁªìÊú¨ÁØáÂçöÂÆ¢‰∏ªË¶ÅÊòØÊï¥ÁêÜÊúÄËøëÂ∑•‰Ωú‰∏≠ÁöÑ‰∏Ä‰∫õÊó•ÂøóÈÖçÁΩÆÁßØÁ¥ØÔºåÂ∞ÜÊØè‰∏™ÁªÜËäÇËøõË°åÊÄªÁªì‰∏Ä‰∏ãÔºå‰ª•‰ΩúÂ§áÂøò„ÄÇÂ¶ÇÊûúÊúâÊó∂Èó¥ÁöÑËØù‰ºöËÄÉËôëÁúã‰∏Ä‰∏™Êó•ÂøóÊ°ÜÊû∂ÁöÑÊ∫êÁ†Å„ÄÇÂÖ∂ÂÆûÊàëËßâÂæóËøòÊòØÂæàÊúâÂøÖË¶ÅÁöÑÔºåÊó•ÂøóÁªÑ‰ª∂ÊØïÁ´üÊòØÈúÄË¶ÅËøõË°åÊó•ÂøóÊñá‰ª∂ËêΩÁõòÁöÑÔºåËøô‰∏™‰ºöÊ∂âÂèäÂà∞ËÆ∏Â§öÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÅÁºìÂÜ≤Âå∫ÈóÆÈ¢ò„ÄÅÈòüÂàóÈóÆÈ¢ò„ÄÅÂΩìÁÑ∂ËøòÊúâ‰∏Ä‰∫õÈîÅÁöÑÈóÆÈ¢ò„ÄÅÂêåÊ≠•ÊâìÂç∞ÊàñËÄÖÂºÇÊ≠•ÊâìÂç∞Á≠âÈóÆÈ¢ò„ÄÇÊúâÂÖ¥Ë∂£ÁöÑÂ∞è‰ºô‰º¥ÂèØ‰ª•ÁúãÁúãÔºåÁÑ∂ÂêéÂàÜ‰∫´ÁªôÊàë‰ª¨„ÄÇ ÂêéÈù¢ÂáÜÂ§áÂÜô‰∏ÄÂÜôËöÇËöÅÈáëÊúçSOFABootÂíåSpringBootÁöÑ‰∏Ä‰∫õÊñáÁ´†ÔºåÂ¶ÇÊûúÊúâÂÖ¥Ë∂£ÂèØ‰ª•ÂÖàÁúã‰∏ÄÊ≥¢„ÄÇ SOFABoot GitHub ‰º†ÈÄÅÈó®]]></content>
      <categories>
        <category>Êó•Âøó</category>
      </categories>
      <tags>
        <tag>logback</tag>
        <tag>slf4j</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SOFATracer ‰∏≠ Disruptor ÂÆûË∑µ]]></title>
    <url>%2F2018%2F11%2F10%2Fsofatracerone%2F</url>
    <content type="text"><![CDATA[OpenTraceing ËßÑËåÉ OpenTracingËØ≠‰πâÊ†áÂáÜ ËØ≠‰πâÊÉØ‰æã ÂÆòÊñπÊñáÊ°£ SOFATracer ÂØπ OpenTraceing ÁöÑÂÆûÁé∞ SOFATracer Â∞±ÊòØÊ†πÊçÆ OpenTracing ËßÑËåÉ Ë°çÁîüÂá∫Êù•ÁöÑÂàÜÂ∏ÉÂºè ÈìæË∑ØË∑ü Ë∏™ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ GitHub SOFATrcer Ê¶ÇÂøµOpenTracing Ê†áÂáÜ‰∏≠Êúâ‰∏â‰∏™ÈáçË¶ÅÁöÑÁõ∏‰∫íÂÖ≥ËÅîÁöÑÁ±ªÂûãÔºåÂàÜÂà´ÊòØTracer, SpanÂíå SpanContext„ÄÇ „Äê‰∏ãÈù¢ÁöÑÊ¶ÇÂøµËØ¥ÊòéËøáÁ®ã‰∏≠ÔºåÂ¶Ç‰∏çÂÅöËØ¥ÊòéÔºåÊâÄ‰ΩøÁî®ÁöÑÊ°à‰æã‰ª£Á†ÅÂùá‰ª•SOFATracer‰∏≠ÁöÑÂÆûÁé∞‰∏∫‰æã„ÄÇ„Äë Tracer‰∏Ä‰∏™ trace ‰ª£Ë°®‰∏Ä‰∏™ÊΩúÂú®ÁöÑÔºåÂàÜÂ∏ÉÂºèÁöÑÔºåÂ≠òÂú®Âπ∂Ë°åÊï∞ÊçÆÊàñÂπ∂Ë°åÊâßË°åËΩ®ËøπÔºàÊΩúÂú®ÁöÑÂàÜÂ∏ÉÂºè„ÄÅÂπ∂Ë°åÔºâÁöÑÁ≥ªÁªü„ÄÇ‰∏Ä‰∏™traceÂèØ‰ª•ËÆ§‰∏∫ÊòØÂ§ö‰∏™spanÁöÑÊúâÂêëÊó†ÁéØÂõæÔºàDAGÔºâ„ÄÇ TracerÊé•Âè£Áî®Êù•ÂàõÂª∫SpanÔºå‰ª•ÂèäÂ§ÑÁêÜÂ¶Ç‰ΩïÂ§ÑÁêÜInject(serialize) Âíå Extract (deserialize)ÔºåÁî®‰∫éË∑®ËøõÁ®ãËæπÁïå‰º†ÈÄí„ÄÇ SOFATracer ‰∏≠ SofaTracerËøô‰∏™Á±ªÂÆûÁé∞‰∫Ü opentracing ÁöÑ Tracer Êé•Âè£ÔºåÂπ∂Âú®Ê≠§ËßÑËåÉÊé•Âè£‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÊâ©Â±ï„ÄÇÁúã‰∏ãTracer ‰∏≠Â£∞ÊòéÁöÑÊñπÊ≥ïÔºö 123456789101112public interface Tracer &#123; //ÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑspan SpanBuilder buildSpan(String operationName); //Â∞ÜSpanContext‰∏ä‰∏ãÊñáInjectÔºàÊ≥®ÂÖ•ÔºâÂà∞carrier &lt;C&gt; void inject(SpanContext spanContext, Format&lt;C&gt; format, C carrier); //Â∞ÜSpanContext‰∏ä‰∏ãÊñá‰ªécarrier‰∏≠ExtractÔºàÊèêÂèñÔºâ &lt;C&gt; SpanContext extract(Format&lt;C&gt; format, C carrier); interface SpanBuilder &#123; // ÁúÅÁï• &#125; &#125; ÊâÄ‰ª•‰ªéÊé•Âè£ÂÆö‰πâÊù•ÁúãÔºåË¶ÅÂÆûÁé∞‰∏Ä‰∏™TracerÔºåÂøÖÈ°ªË¶ÅÂÆûÁé∞ÂÖ∂‰ª•‰∏ãÁöÑÂá†‰∏™ËÉΩÂäõÔºö ÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑspanSOFATracer ÂÆûÁé∞‰∫Ü Tracer ‰∏≠ buildSpan ÊñπÊ≥ïÔºö 1234@Overridepublic SpanBuilder buildSpan(String operationName) &#123; return new SofaTracerSpanBuilder(operationName);&#125; operationName :Êìç‰ΩúÂêçÁß∞ÔºåÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåË°®Á§∫Áî±SpanÂÆåÊàêÁöÑÂ∑•‰Ωú (‰æãÂ¶ÇÔºåRPCÊñπÊ≥ïÂêçÁß∞„ÄÅÂáΩÊï∞ÂêçÁß∞Êàñ‰∏Ä‰∏™ËæÉÂ§ßÁöÑËÆ°ÁÆó‰ªªÂä°‰∏≠ÁöÑÈò∂ÊÆµÁöÑÂêçÁß∞)„ÄÇÊìç‰ΩúÂêçÁß∞Â∫îËØ•Áî®Ê≥õÂåñÁöÑÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÊ†áËØÜÂá∫‰∏Ä‰∏™SpanÂÆû‰æã„ÄÇ ‰Ωï‰∏∫Ê≥õÂåñÁöÑÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÔºåÊØîÂ¶ÇÁé∞Âú®Êúâ‰∏Ä‰∏™Êìç‰ΩúÔºöËé∑ÂèñÁî®Êà∑ Ôºõ‰∏ãÈù¢ÊúâÂá†ÁßçÊ†áËØÜÊñπÂºèÔºö 1„ÄÅ/get 2„ÄÅ/get/user 3„ÄÅ/get/user/123 ÊñπÂºè1Ëøá‰∫éÊäΩË±°ÔºåÊñπÂºè3Ëøá‰∫éÂÖ∑‰Ωì„ÄÇÊñπÂºè2ÊòØÊ≠£Á°ÆÁöÑÊìç‰ΩúÂêç„ÄÇ Â∞ÜSpanContext‰∏ä‰∏ãÊñáInjectÔºàÊ≥®ÂÖ•ÔºâÂà∞carrier12345678@Overridepublic &lt;C&gt; void inject(SpanContext spanContext, Format&lt;C&gt; format, C carrier) &#123; RegistryExtractorInjector&lt;C&gt; registryInjector = TracerFormatRegistry.getRegistry(format); if (registryInjector == null) &#123; throw new IllegalArgumentException("Unsupported injector format: " + format); &#125; registryInjector.inject((SofaTracerSpanContext) spanContext, carrier);&#125; SpanContext :ÂÆû‰æã formatÔºàÊ†ºÂºèÂåñÔºâÊèèËø∞Ôºå‰∏ÄËà¨‰ºöÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºå‰ΩÜ‰∏çÂÅöÂº∫Âà∂Ë¶ÅÊ±Ç„ÄÇÈÄöËøáÊ≠§ÊèèËø∞ÔºåÈÄöÁü•TracerÂÆûÁé∞ÔºåÂ¶Ç‰ΩïÂØπSpanContextËøõË°åÁºñÁ†ÅÊîæÂÖ•Âà∞carrier‰∏≠„ÄÇcarrierÔºåÊ†πÊçÆformatÁ°ÆÂÆö„ÄÇTracerÂÆûÁé∞Ê†πÊçÆformatÂ£∞ÊòéÁöÑÊ†ºÂºèÔºåÂ∞ÜSpanContextÂ∫èÂàóÂåñÂà∞carrierÂØπË±°‰∏≠„ÄÇ RegistryExtractorInjector ËßÅÂêéÈù¢ Â∞ÜSpanContext‰∏ä‰∏ãÊñá‰ªécarrier‰∏≠ExtractÔºàÊèêÂèñÔºâ12345678@Overridepublic &lt;C&gt; SpanContext extract(Format&lt;C&gt; format, C carrier) &#123; RegistryExtractorInjector&lt;C&gt; registryExtractor = TracerFormatRegistry.getRegistry(format); if (registryExtractor == null) &#123; throw new IllegalArgumentException("Unsupported extractor format: " + format); &#125; return registryExtractor.extract(carrier);&#125; Ê†ºÂºèÊèèËø∞Á¨¶(format descriptor)(ÈÄöÂ∏∏‰ΩÜ‰∏ç‰∏ÄÂÆöÊòØÂ≠óÁ¨¶‰∏≤Â∏∏Èáè)ÔºåÂëäËØâTracerÁöÑÂÆûÁé∞Â¶Ç‰ΩïÂú®ËΩΩ‰ΩìÂØπË±°‰∏≠ÂØπSpanContextËøõË°åÁºñÁ†Å ËΩΩ‰Ωì(carrier)ÔºåÂÖ∂Á±ªÂûãÁî±Ê†ºÂºèÊèèËø∞Á¨¶ÊåáÂÆö„ÄÇTracerÁöÑÂÆûÁé∞Â∞ÜÊ†πÊçÆÊ†ºÂºèÊèèËø∞ÂØπÊ≠§ËΩΩ‰ΩìÂØπË±°‰∏≠ÁöÑSpanContextËøõË°åÁºñÁ†Å ËøîÂõû‰∏Ä‰∏™SpanContextÂÆû‰æãÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™SpanContextÂÆû‰æãÔºåÈÄöËøáTracerÂàõÂª∫Êñ∞ÁöÑSpan„ÄÇ Format‰ªéTracerÁöÑÊ≥®ÂÖ•ÂíåÊèêÂèñÊù•ÁúãÔºåformatÈÉΩÊòØÂøÖÈ°ªÁöÑ„ÄÇ InjectÔºàÊ≥®ÂÖ•ÔºâÂíåExtractÔºàÊèêÂèñÔºâ‰æùËµñ‰∫éÂèØÊâ©Â±ïÁöÑformatÂèÇÊï∞„ÄÇformatÂèÇÊï∞ËßÑÂÆö‰∫ÜÂè¶‰∏Ä‰∏™ÂèÇÊï∞&quot;carrier&quot;ÁöÑÁ±ªÂûãÔºåÂêåÊó∂Á∫¶Êùü‰∫Ü&quot;carrier&quot;‰∏≠SpanContextÊòØÂ¶Ç‰ΩïÁºñÁ†ÅÁöÑ„ÄÇÊâÄÊúâÁöÑTracerÂÆûÁé∞ÔºåÈÉΩÂøÖÈ°ªÊîØÊåÅ‰∏ãÈù¢ÁöÑformat„ÄÇ Text Map: Âü∫‰∫éÂ≠óÁ¨¶‰∏≤ÔºöÂ≠óÁ¨¶‰∏≤ÁöÑmap,ÂØπ‰∫ékeyÂíåvalue‰∏çÁ∫¶ÊùüÂ≠óÁ¨¶ÈõÜ„ÄÇ HTTP Headers: ÈÄÇÂêà‰Ωú‰∏∫HTTPÂ§¥‰ø°ÊÅØÁöÑÔºåÂü∫‰∫éÂ≠óÁ¨¶‰∏≤ÔºöÂ≠óÁ¨¶‰∏≤ÁöÑmap„ÄÇÔºàRFC 7230.Âú®Â∑•Á®ãÂÆûË∑µ‰∏≠ÔºåÂ¶Ç‰ΩïÂ§ÑÁêÜHTTPÂ§¥ÂÖ∑ÊúâÂ§öÊ†∑ÊÄßÔºåÂº∫ÁÉàÂª∫ËÆÆtracerÁöÑ‰ΩøÁî®ËÄÖË∞®ÊÖé‰ΩøÁî®HTTPÂ§¥ÁöÑÈîÆÂÄºÁ©∫Èó¥ÂíåËΩ¨‰πâÁ¨¶Ôºâ Binary: ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰∫åËøõÂà∂Â§ßÂØπË±°ÔºåËÆ∞ÂΩïSpanContextÁöÑ‰ø°ÊÅØ„ÄÇ Âú®‰∏äÈù¢ÁöÑÊ≥®ÂÖ•ÂíåÊèêÂèñ‰ª£Á†Å‰∏≠ÔºåÊúâÂ¶Ç‰∏ã‰ª£Á†ÅÁâáÊÆµÔºö 123456//Ê≥®ÂÖ•RegistryExtractorInjector&lt;C&gt; registryInjector = TracerFormatRegistry.getRegistry(format);//ÊèêÂèñRegistryExtractorInjector&lt;C&gt; registryExtractor = TracerFormatRegistry.getRegistry(format); Êù•ÈÄöËøáTracerFormatRegistryËøô‰∏™Á±ªÊù•Êù•Áúã‰∏ã SOFATracer ‰∏≠ÁöÑ Format ÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ X-B3Âú®ÁúãFormat‰πãÂâçÔºåÂÖà‰∫ÜËß£‰∏ãX-B3„ÄÇ 12Access-Control-Expose-Headers: X-B3-TraceId,X-B3-ParentSpanId,X-B3-SpanId HTTPËØ∑Ê±ÇÊó∂ÂÖ∂spanÂèÇÊï∞ÈÄöËøáhttp headersÊù•‰º†ÈÄíËøΩË∏™‰ø°ÊÅØÔºõheader‰∏≠ÂØπÂ∫îÁöÑkeyÂàÜÂà´ÊòØ: X-B3-TraceId: 64 encoded bitsÔºàidË¢´encode‰∏∫hex StringsÔºâ X-B3-SpanId : 64 encoded bits X-B3-ParentSpanId: 64 encoded bits X-B3-Sampled:(ÊòØÂê¶ÈááÊ†∑) Boolean (either ‚Äú1‚Äù or ‚Äú0‚Äù)Ôºà‰∏ãÈù¢ÁöÑË∞ÉÁî®ÊòØÂê¶ËøõË°åÈááÊ†∑Ôºâ X-B3-Flags:a Long SOFATracer ‰∏≠ÁöÑ FormatÂÖ∑‰Ωì‰ª£Á†ÅÂú® tracer-core -&gt; com.alipay.common.tracer.core.registy ÂåÖ‰∏ã: TextMapFormatter TextMapB3Formatter HttpHeadersFormatter HttpHeadersB3Formatter BinaryFormater BinaryFormaterÔºöËøô‰∏™ÁöÑÊ≥®ÂÖ•ÂíåÊèêÂèñÂÆûÁé∞Ê≤°ÊúâÁºñËß£Á†Å‰∏ÄËØ¥ÔºõÊú¨Ë∫´Â∞±ÊòØÂü∫‰∫é‰∫åËøõÂà∂ÊµÅÁöÑÊìç‰Ωú„ÄÇ TextMapB3Formatter/TextMapFormatter Âíå HttpHeadersB3Formatter/HttpHeadersFormatter Âå∫Âà´Â∞±Âú®‰∫éÁºñËß£Á†Å‰∏çÂêå„ÄÇHttpHeadersB3Formatter‰ΩøÁî®ÁöÑÊòØ URLDecoder.decode &amp;&amp; URLDecoder.encode ; TextMapB3Formatter ËøîÂõûÁöÑÊòØÂÄºÊú¨Ë∫´ÔºàÂ¶ÇÊûú‰∏∫Á©∫ÊàñËÄÖnullÂàôËøîÂõûÁ©∫Â≠óÁ¨¶‰∏≤Ôºâ„ÄÇ TextMapFormatterÂíåTextMapB3FormatterÂå∫Âà´Âú®‰∫éÊ≥®ÂÖ•ÊàñËÄÖÊèêÂèñÊòØ‰ΩøÁî®ÁöÑkey‰∏çÁî®„ÄÇTextMapB3Formatter‰∏≠‰ΩøÁî®ÁöÑÊòØ x-b3-{} ÁöÑÂ≠óÁ¨¶‰∏≤‰Ωú‰∏∫key„ÄÇ Span‰∏Ä‰∏™span‰ª£Ë°®Á≥ªÁªü‰∏≠ÂÖ∑ÊúâÂºÄÂßãÊó∂Èó¥ÂíåÊâßË°åÊó∂ÈïøÁöÑÈÄªËæëËøêË°åÂçïÂÖÉ„ÄÇspan‰πãÈó¥ÈÄöËøáÂµåÂ•óÊàñËÄÖÈ°∫Â∫èÊéíÂàóÂª∫Á´ãÈÄªËæëÂõ†ÊûúÂÖ≥Á≥ª„ÄÇÂΩìSpanÁªìÊùüÂêé(span.finish())ÔºåÈô§‰∫ÜÈÄöËøáSpanËé∑ÂèñSpanContextÂ§ñÔºå‰∏ãÂàóÂÖ∂‰ªñÊâÄÊúâÊñπÊ≥ïÈÉΩ‰∏çÂÖÅËÆ∏Ë¢´Ë∞ÉÁî®„ÄÇ ÂêåÊ†∑ÂÖàÊù•Áúã‰∏ãopentracingËßÑËåÉapi ÂÆö‰πâÁöÑ span ÁöÑÂÆö‰πâÂèäÊñπÊ≥ïÔºö 123456789101112131415161718public interface Span extends Closeable &#123; SpanContext context(); void finish(); void finish(long finishMicros); void close(); Span setTag(String key, String value); Span setTag(String key, boolean value); Span setTag(String key, Number value); Span log(Map&lt;String, ?&gt; fields); Span log(long timestampMicroseconds, Map&lt;String, ?&gt; fields); Span log(String event); Span log(long timestampMicroseconds, String event); Span setBaggageItem(String key, String value); String getBaggageItem(String key); Span setOperationName(String operationName); Span log(String eventName, /* @Nullable */ Object payload); Span log(long timestampMicroseconds, String eventName, /* @Nullable */ Object payload);&#125; ÈÄöËøáSpanËé∑ÂèñSpanContext12345//SOFATracerSpan@Overridepublic SpanContext context() &#123; return this.sofaTracerSpanContext;&#125; ËøîÂõûÂÄºÔºåSpanÊûÑÂª∫Êó∂‰º†ÂÖ•ÁöÑSpanContext„ÄÇËøô‰∏™ËøîÂõûÂÄºÂú®SpanÁªìÊùüÂêé(span.finish())Ôºå‰æùÁÑ∂ÂèØ‰ª•‰ΩøÁî®„ÄÇ Â§çÂÜôÊìç‰ΩúÂêç12345@Overridepublic Span setOperationName(String operationName) &#123; this.operationName = operationName; return this;&#125; operationName:Êñ∞ÁöÑÊìç‰ΩúÂêçÔºåË¶ÜÁõñÊûÑÂª∫SpanÊó∂Ôºå‰º†ÂÖ•ÁöÑÊìç‰ΩúÂêç„ÄÇ ÁªìÊùüSpan123456789101112@Overridepublic void finish() &#123; this.finish(System.currentTimeMillis());&#125;@Overridepublic void finish(long endTime) &#123; this.setEndTime(endTime); //ÂÖ≥ÈîÆËÆ∞ÂΩï:report span this.sofaTracer.reportSpan(this); SpanExtensionFactory.logStoppedSpan(this);&#125; Êúâ‰∏Ä‰∏™ÂèØÈÄâÂèÇÊï∞ÔºåÂ¶ÇÊûúÊåáÂÆöÂÆåÊàêÊó∂Èó¥Âàô‰ΩøÁî®ÂΩìÂâçÊåáÂÆöÁöÑÊó∂Èó¥ÔºõÂ¶ÇÊûúÁúÅÁï•Ê≠§ÂèÇÊï∞Ôºå‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥‰Ωú‰∏∫ÂÆåÊàêÊó∂Èó¥„ÄÇfinishÊñπÊ≥ï‰∏≠‰ºöÂ∞ÜÂΩìÂâçspanËøõË°åreportÊìç‰Ωú„ÄÇ ‰∏∫SpanËÆæÁΩÆtagTagÊòØ‰∏Ä‰∏™key:valueÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇkeyÂøÖÈ°ªÊòØStringÁ±ªÂûãÔºåvalueÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤„ÄÅÂ∏ÉÂ∞îÊàñËÄÖÊï∞Â≠ó„ÄÇ Â≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑvalue ËÆæÁΩÆtag 1234567891011121314151617181920@Overridepublic Span setTag(String key, String value) &#123; if (StringUtils.isBlank(key) || StringUtils.isBlank(value)) &#123; return this; &#125; this.tagsWithStr.put(key, value); //Ê≥®ÊÑè:server ËøòÊòØ client Âú® OpenTracing Ê†áÂáÜ‰∏≠ÊòØÁî® tags Ê†áËØÜÁöÑ,ÊâÄ‰ª•Âú®ËøôÈáåËøõË°åÂà§Êñ≠ if (isServer()) &#123; Reporter serverReporter = this.sofaTracer.getServerReporter(); if (serverReporter != null) &#123; this.setLogType(serverReporter.getReporterType()); &#125; &#125; else if (isClient()) &#123; Reporter clientReporter = this.sofaTracer.getClientReporter(); if (clientReporter != null) &#123; this.setLogType(clientReporter.getReporterType()); &#125; &#125; return this;&#125; Â∏ÉÂ∞îÁ±ªÂûãÁöÑvalue ËÆæÁΩÆtag 1234public Span setTag(String key, boolean value) &#123; this.tagsWithBool.put(key, value); return this;&#125; Êï∞Â≠óÁ±ªÂûãÁöÑvalue ËÆæÁΩÆtag 1234567public Span setTag(String key, Number number) &#123; if (number == null) &#123; return this; &#125; this.tagsWithNumber.put(key, number); return this;&#125; LogÁªìÊûÑÂåñÊï∞ÊçÆ1234567891011@Overridepublic Span log(long currentTime, Map&lt;String, ?&gt; map) &#123; AssertUtils.isTrue(currentTime &gt;= startTime, "current time must greater than start time"); this.logs.add(new LogData(currentTime, map)); return this;&#125;@Overridepublic Span log(Map&lt;String, ?&gt; map) &#123; return this.log(System.currentTimeMillis(), map);&#125; Map&lt;String, ?&gt; map : ÈîÆÂøÖÈ°ªÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÂÄºÂèØ‰ª•ÊòØ‰ªªÊÑèÁ±ªÂûã currentTime : Êó∂Èó¥Êà≥„ÄÇÂ¶ÇÊûúÊåáÂÆöÊó∂Èó¥Êà≥ÔºåÈÇ£‰πàÂÆÉÂøÖÈ°ªÂú®spanÁöÑÂºÄÂßãÂíåÁªìÊùüÊó∂Èó¥‰πãÂÜÖ„ÄÇ ËÆæÁΩÆ‰∏Ä‰∏™baggageÔºàÈöèË°åÊï∞ÊçÆÔºâÂÖÉÁ¥†BaggageÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™ÈîÆÂÄºÂØπÈõÜÂêàÔºåÂ∞ÜËøô‰∫õÂÄºËÆæÁΩÆÁªôÁªôÂÆöÁöÑSpanÔºåSpanÁöÑSpanContextÔºå‰ª•ÂèäÊâÄÊúâÂíåÊ≠§SpanÊúâÁõ¥Êé•ÊàñËÄÖÈó¥Êé•ÂÖ≥Á≥ªÁöÑÊú¨Âú∞Span„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåbaggageÂÖÉÁ¥†Èöètrace‰∏ÄËµ∑‰øùÊåÅÂú®Â∏¶ÂÜÖ‰º†ÈÄí„ÄÇÔºàËØëËÄÖÊ≥®ÔºöÂ∏¶ÂÜÖ‰º†ÈÄíÔºåÂú®ËøôÈáåÊåáÔºåÈöèÂ∫îÁî®Á®ãÂ∫èË∞ÉÁî®ËøáÁ®ã‰∏ÄËµ∑‰º†ÈÄíÔºâ BaggageÂÖÉÁ¥†‰∏∫OpenTracingÁöÑÂÆûÁé∞ÂÖ®Ê†àÈõÜÊàêÔºåÊèê‰æõ‰∫ÜÂº∫Â§ßÁöÑÂäüËÉΩ Ôºà‰æãÂ¶ÇÔºö‰ªªÊÑèÁöÑÂ∫îÁî®Á®ãÂ∫èÊï∞ÊçÆÔºåÂèØ‰ª•Âú®ÁßªÂä®Á´ØÂàõÂª∫ÂÆÉÔºåÊòæÁÑ∂ÁöÑÔºåÂÆÉ‰ºö‰∏ÄÁõ¥‰º†ÈÄí‰∫ÜÁ≥ªÁªüÊúÄÂ∫ïÂ±ÇÁöÑÂ≠òÂÇ®Á≥ªÁªü„ÄÇÁî±‰∫éÂÆÉÂ¶ÇÊ≠§Âº∫Â§ßÁöÑÂäüËÉΩÔºå‰ªñ‰πü‰ºö‰∫ßÁîüÂ∑®Â§ßÁöÑÂºÄÈîÄÔºåËØ∑Â∞èÂøÉ‰ΩøÁî®Ê≠§ÁâπÊÄß„ÄÇ ÂÜçÊ¨°Âº∫Ë∞ÉÔºåËØ∑Ë∞®ÊÖé‰ΩøÁî®Ê≠§ÁâπÊÄß„ÄÇÊØè‰∏Ä‰∏™ÈîÆÂÄºÈÉΩ‰ºöË¢´Êã∑Ë¥ùÂà∞ÊØè‰∏Ä‰∏™Êú¨Âú∞ÂíåËøúÁ®ãÁöÑ‰∏ãÁ∫ßÁõ∏ÂÖ≥ÁöÑspan‰∏≠ÔºåÂõ†Ê≠§ÔºåÊÄª‰Ωì‰∏äÔºå‰ªñ‰ºöÊúâÊòéÊòæÁöÑÁΩëÁªúÂíåCPUÂºÄÈîÄ„ÄÇ 12345@Overridepublic Span setBaggageItem(String key, String value) &#123; this.sofaTracerSpanContext.setBizBaggageItem(key, value); return this;&#125; SofaTracerSpan ‰∏≠ÁöÑÂ±ûÊÄß sofaTracer : ÂΩìÂâç tracer spanReferences : ÂΩìÂâçspanÁöÑÂÖ≥Á≥ªÔºåChildOf(ÂºïÁî®) or FollowsFromÔºàË∑üÈöèÔºâ tagsWithStr : String Á±ªÂûãÁöÑtag ÈõÜÂêà tagsWithBool : Â∏ÉÂ∞îÁ±ªÂûãÁöÑtagÈõÜÂêà tagsWithNumber : Êï∞ÂÄºÁ±ªÂûãÁöÑtagÈõÜÂêà logs : logÁªìÊûÑÂåñÊï∞ÊçÆÂàóË°®ÔºåÈÄöËøáspan.logÔºàmapÔºâÊìç‰ΩúÁöÑmap,ÂùáÂ≠òÂÇ®Âú®logs‰∏≠„ÄÇ operationNameÔºöÂΩìÂâçspanÁöÑÊìç‰ΩúÂêç sofaTracerSpanContextÔºöÂΩìÂâç spanContext startTime : ÂΩìÂâçspan ÂºÄÂßãÊó∂Èó¥ endTime : ÂΩìÂâçspan ÁªìÊùüÊó∂Èó¥ÔºåÂú®finishÊñπÊ≥ï‰∏≠‰º†ÂÖ•„ÄÇ logType : reportÊó∂ÊâçÊúâÊÑè‰πâ:ÊëòË¶ÅÊó•ÂøóÁ±ªÂûã,Êó•ÂøóËÉΩÂ§üÊ≠£Á°ÆÊâìÂç∞ÁöÑÂÖ≥ÈîÆ‰ø°ÊÅØÔºõÂΩìÂâç span ÁöÑÊó•ÂøóÁ±ªÂûã,Â¶Ç:ÂÆ¢Êà∑Á´Ø‰∏∫ rpc-client-digest.log,ÊúçÂä°Á´Ø‰∏∫ rpc-server-digest.log parentSofaTracerSpanÔºöÁà∂‰∫≤ span,ÂΩì‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÁªìÊùüÂπ∂ÂºπÂá∫Á∫øÁ®ã‰∏ä‰∏ãÊñáÊó∂,ÈúÄË¶ÅÂ∞ÜÁà∂‰∫≤ span ÂÜçÊîæÂÖ• SpanContextopentracing ‰∏≠ SpanContext Êé•Âè£‰∏≠Âè™Êúâ‰∏Ä‰∏™baggageItemsÊñπÊ≥ïÔºåÈÄöËøáËøô‰∏™ÊñπÊ≥ïÊù•ÈÅçÂéÜÊâÄÊúâÁöÑbaggageÂÖÉÁ¥†„ÄÇ 123public interface SpanContext &#123; Iterable&lt;Map.Entry&lt;String, String&gt;&gt; baggageItems();&#125; Áõ∏ÂØπ‰∫éOpenTracing‰∏≠ÂÖ∂‰ªñÁöÑÂäüËÉΩÔºåSpanContextÊõ¥Â§öÁöÑÊòØ‰∏Ä‰∏™‚ÄúÊ¶ÇÂøµ‚Äù„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåOpenTracingÂÆûÁé∞‰∏≠ÔºåÈúÄË¶ÅÈáçÁÇπËÄÉËôëÔºåÂπ∂Êèê‰æõ‰∏ÄÂ•óËá™Â∑±ÁöÑAPI„ÄÇ OpenTracingÁöÑ‰ΩøÁî®ËÄÖ‰ªÖ‰ªÖÈúÄË¶ÅÔºåÂú®ÂàõÂª∫span„ÄÅÂêë‰º†ËæìÂçèËÆÆInjectÔºàÊ≥®ÂÖ•ÔºâÂíå‰ªé‰º†ËæìÂçèËÆÆ‰∏≠ExtractÔºàÊèêÂèñÔºâÊó∂Ôºå‰ΩøÁî®SpanContextÂíåreferencesÔºå OpenTracingË¶ÅÊ±ÇÔºåSpanContextÊòØ‰∏çÂèØÂèòÁöÑÔºåÁõÆÁöÑÊòØÈò≤Ê≠¢Áî±‰∫éSpanÁöÑÁªìÊùüÂíåÁõ∏‰∫íÂÖ≥Á≥ªÔºåÈÄ†ÊàêÁöÑÂ§çÊùÇÁîüÂëΩÂë®ÊúüÈóÆÈ¢ò„ÄÇ Disruptor ÁÆÄ‰ªã A High Performance Inter-Thread Messaging Library È´òÊÄßËÉΩÁöÑÁ∫øÁ®ãÈó¥Ê∂àÊÅØ‰º†ÈÄíÂ∫ì ÂÖ≥‰∫é Disruptor ÁöÑ ‰∏Ä‰∫õÂéüÁêÜÂàÜÊûêÂèØ‰ª•ÂèÇËÄÉÔºödisruptor Ê°à‰æãÂÖàÈÄöËøá Disruptor ÁöÑ‰∏Ä‰∏™Â∞è‰æãÂ≠êÊù•Êúâ‰∏™Áõ¥ËßÇÁöÑËÆ§ËØÜÔºõÂÖàÁúã‰∏ãÂÆÉÁöÑÊûÑÈÄ†ÂáΩÊï∞Ôºö 1234567891011public Disruptor( final EventFactory&lt;T&gt; eventFactory, final int ringBufferSize, final ThreadFactory threadFactory, final ProducerType producerType, final WaitStrategy waitStrategy)&#123; this( RingBuffer.create(producerType, eventFactory, ringBufferSize, waitStrategy), new BasicExecutor(threadFactory));&#125; eventFactory : Âú®ÁéØÂΩ¢ÁºìÂÜ≤Âå∫‰∏≠ÂàõÂª∫‰∫ã‰ª∂ÁöÑ factory ringBufferSize:ÁéØÂΩ¢ÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÔºåÂøÖÈ°ªÊòØ2ÁöÑÂπÇ„ÄÇ threadFactoryÔºöÁî®‰∫é‰∏∫Â§ÑÁêÜÂô®ÂàõÂª∫Á∫øÁ®ã„ÄÇ producerTypeÔºöÁîüÊàêÂô®Á±ªÂûã‰ª•ÊîØÊåÅ‰ΩøÁî®Ê≠£Á°ÆÁöÑsequencerÂíåpublisherÂàõÂª∫RingBufferÔºõÊûö‰∏æÁ±ªÂûãÔºåSINGLE„ÄÅMULTI‰∏§‰∏™È°π„ÄÇÂØπÂ∫î‰∫é SingleProducerSequencerÂíåMultiProducerSequencer‰∏§ÁßçSequencer„ÄÇ waitStrategy : Á≠âÂæÖÁ≠ñÁï•Ôºõ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊûÑÈÄ†‰∏Ä‰∏™disruptor,ÈÇ£‰πàÊàë‰ª¨Â∞±ÈúÄË¶Å‰∏äÈù¢ÁöÑËøô‰∫õÁªÑ‰ª∂„ÄÇ‰ªéeventFactoryÊù•ÁúãÔºåËøòÈúÄË¶Å‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑEventÊù•‰Ωú‰∏∫Ê∂àÊÅØ‰∫ã‰ª∂ÁöÑËΩΩ‰Ωì„ÄÇ„Äê‰∏ãÈù¢ÊåâÁÖßÂÆòÊñπÁªôÁöÑÊ°à‰æãËøõË°åÁÆÄÂçïÁöÑ‰øÆÊîπ‰Ωú‰∏∫Á§∫‰æã„Äë Ê∂àÊÅØ‰∫ã‰ª∂ LongEvent ÔºåËÉΩÂ§üË¢´Ê∂àË¥πÁöÑÊï∞ÊçÆËΩΩ‰Ωì123456789public class LongEvent &#123; private long value; public void set(long value) &#123; this.value = value; &#125; public long getValue() &#123; return value; &#125;&#125; ÂàõÂª∫Ê∂àÊÅØ‰∫ã‰ª∂ÁöÑfactory123456public class LongEventFactory implements EventFactory&lt;LongEvent&gt; &#123; @Override public LongEvent newInstance() &#123; return new LongEvent(); &#125;&#125; ConsumerThreadFactory1234567public class ConsumerThreadFactory implements ThreadFactory &#123; private final AtomicInteger index = new AtomicInteger(1); @Override public Thread newThread(Runnable r) &#123; return new Thread(r, "disruptor-thread-" + index.getAndIncrement()); &#125;&#125; OK Ôºå‰∏äÈù¢ÁöÑËøô‰∫õÂèØ‰ª•Êª°Ë∂≥ÂàõÂª∫‰∏Ä‰∏™disruptor‰∫ÜÔºö 123456789101112131415private int ringBufferCapacity = 8;//Ê∂àÊÅØ‰∫ã‰ª∂Áîü‰∫ßFactoryLongEventFactory longEventFactory = new LongEventFactory();//ÊâßË°å‰∫ã‰ª∂Â§ÑÁêÜÂô®Á∫øÁ®ãFactoryConsumerThreadFactory consumerThreadFactory = new ConsumerThreadFactory();//Áî®‰∫éÁéØÂΩ¢ÁºìÂÜ≤Âå∫ÁöÑÁ≠âÂæÖÁ≠ñÁï•„ÄÇWaitStrategy waitStrategy = new BlockingWaitStrategy();//ÊûÑÂª∫disruptorDisruptor&lt;LongEvent&gt; disruptor = new Disruptor&lt;&gt;( longEventFactory, ringBufferCapacity, longEventThreadFactory, ProducerType.SINGLE, waitStrategy); Áé∞Âú®ÊòØÂ∑≤ÁªèÊúâ‰∫Ü disruptor ‰∫ÜÔºåÁÑ∂ÂêéÈÄöËøáÔºöstart Êù•ÂêØÂä®Ôºö 12//ÂêØÂä® disruptor disruptor.start(); Âà∞ËøôÈáåÔºåÂ∑≤ÁªèÊûÑÂª∫‰∫Ü‰∏Ä‰∏™disruptorÔºõ‰ΩÜÊòØÁõÆÂâçÊÄé‰πà‰ΩøÁî®ÂÆÉÊù•ÂèëÂ∏ÉÊ∂àÊÅØÂíåÊ∂àË¥πÊ∂àÊÅØÂë¢Ôºü ÂèëÂ∏ÉÊ∂àÊÅØ‰∏ãÈù¢Âú® for Âæ™ÁéØ‰∏≠ ÂèëÂ∏É 5 Êù°Êï∞ÊçÆÔºö 12345678910RingBuffer&lt;LongEvent&gt; ringBuffer = disruptor.getRingBuffer();for (long l = 0; l &lt; 5; l++)&#123; long sequence = ringBuffer.next(); LongEvent event = ringBuffer.get(sequence); event.set(100+l); System.out.println("publish event :" + l); ringBuffer.publish(sequence); Thread.sleep(1000);&#125; Ê∂àÊÅØÂ∑≤ÁªèÂèëÂ∏ÉÔºå‰∏ãÈù¢ÈúÄË¶ÅËÆæÂÆöÂΩìÂâçdisruptorÁöÑÊ∂àË¥πÂ§ÑÁêÜÂô®„ÄÇÂâçÈù¢Â∑≤ÁªèÊúâ‰∏™LongEvent Âíå EventFactory ; Âú®disruptor‰∏≠ÊòØÈÄöËøá EventHandler Êù•ËøõË°åÊ∂àÊÅØÊ∂àË¥πÁöÑ„ÄÇ ÁºñÂÜôÊ∂àË¥πËÄÖ‰ª£Á†Å1234567public class LongEventHandler implements EventHandler&lt;LongEvent&gt; &#123; @Override public void onEvent(LongEvent event, long sequence, boolean endOfBatch) throws Exception &#123; System.out.println("Event: " + event.getValue()+" -&gt; " + Thread.currentThread().getName()); Thread.sleep(2000); &#125;&#125; Â∞Ü eventHandler ËÆæÁΩÆÂà∞ disruptor ÁöÑÂ§ÑÁêÜÈìæ‰∏ä 123//Â∞ÜÂ§ÑÁêÜ‰∫ã‰ª∂ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫è -&gt; Ê∂àË¥π‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜÁ®ãÂ∫èLongEventHandler longEventHandler = new LongEventHandler();disruptor.handleEventsWith(longEventHandler); ËøêË°åÁªìÊûúÔºàËøôÈáåÔºâÔºö123456789101112131415publish event :0Event: 0 -&gt; disruptor-thread-1--------------------------------&gt;publish event :1Event: 1 -&gt; disruptor-thread-1--------------------------------&gt;publish event :2Event: 2 -&gt; disruptor-thread-1--------------------------------&gt;publish event :3Event: 3 -&gt; disruptor-thread-1--------------------------------&gt;publish event :4Event: 4 -&gt; disruptor-thread-1--------------------------------&gt; Âü∫Êú¨Ê¶ÇÂøµÂíåÂéüÁêÜDisruptorÊï¥‰∏™Âü∫‰∫éringBufferÂÆûÁé∞ÁöÑÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°ÂºèÁöÑÂÆπÂô®„ÄÇ‰∏ªË¶ÅÂ±ûÊÄß 12345private final RingBuffer&lt;T&gt; ringBuffer;private final Executor executor;private final ConsumerRepository&lt;T&gt; consumerRepository = new ConsumerRepository&lt;&gt;();private final AtomicBoolean started = new AtomicBoolean(false);private ExceptionHandler&lt;? super T&gt; exceptionHandler = new ExceptionHandlerWrapper&lt;&gt;(); ringBufferÔºöÂÜÖÈÉ®ÊåÅÊúâ‰∏Ä‰∏™ RingBuffer ÂØπË±°ÔºåDisruptor ÂÜÖÈÉ®ÁöÑ‰∫ã‰ª∂ÂèëÂ∏ÉÈÉΩÊòØ‰æùËµñËøô‰∏™RingBufferÂØπË±°ÂÆåÊàêÁöÑ„ÄÇ executorÔºöÊ∂àË¥π‰∫ã‰ª∂ÁöÑÁ∫øÁ®ãÊ±† consumerRepositoryÔºöÊèê‰æõÂ≠òÂÇ®Â∫ìÊú∫Âà∂ÔºåÁî®‰∫éÂ∞ÜEventHandler‰∏éEventProcessorÂÖ≥ËÅîËµ∑Êù• started : Áî®‰∫éÊ†áÂøóÂΩìÂâçDisruptorÊòØÂê¶Â∑≤ÁªèÂêØÂä® exceptionHandler : ÂºÇÂ∏∏Â§ÑÁêÜÂô®ÔºåÁî®‰∫éÂ§ÑÁêÜBatchEventProcessor‰∫ã‰ª∂Âë®Êúü‰∏≠ uncaught exceptions „ÄÇ RingBufferÁéØÂΩ¢ÈòüÂàó[ÂÆûÁé∞‰∏äÊòØ‰∏Ä‰∏™Êï∞ÁªÑ]ÔºåÂèØ‰ª•Á±ªÊØî‰∏∫BlockingQueue‰πãÁ±ªÁöÑÈòüÂàóÔºåringBufferÁöÑ‰ΩøÁî®Ôºå‰ΩøÂæóÂÜÖÂ≠òË¢´Âæ™ÁéØ‰ΩøÁî®ÔºåÂáèÂ∞ë‰∫ÜÊüê‰∫õÂú∫ÊôØÁöÑÂÜÖÂ≠òÂàÜÈÖçÂõûÊî∂Êâ©ÂÆπÁ≠âËÄóÊó∂Êìç‰Ωú„ÄÇ 12public final class RingBuffer&lt;E&gt; extends RingBufferFields&lt;E&gt; implements Cursored, EventSequencer&lt;E&gt;, EventSink&lt;E&gt; EÔºöÂú®‰∫ã‰ª∂ÁöÑ‰∫§Êç¢ÊàñÂπ∂Ë°åÂçèË∞ÉÊúüÈó¥Â≠òÂÇ®Áî®‰∫éÂÖ±‰∫´ÁöÑÊï∞ÊçÆÁöÑÂÆûÁé∞ -&gt; Ê∂àÊÅØ‰∫ã‰ª∂ Sequencer RingBuffer ‰∏≠ Áîü‰∫ßËÄÖÁöÑÈ°∂Á∫ßÁà∂Êé•Âè£ÔºåÂÖ∂Áõ¥Êé•ÂÆûÁé∞ÊúâSingleProducerSequencerÂíåMultiProducerSequencerÔºõÂØπÂ∫î SINGLE„ÄÅMULTI ‰∏§‰∏™Êûö‰∏æÂÄº„ÄÇ EventHandler‰∫ã‰ª∂Â§ÑÁΩÆÂô®ÔºåÊîπÊé•Âè£Áî®‰∫éÂØπÂ§ñÊâ©Â±ïÊù•ÂÆûÁé∞ÂÖ∑‰ΩìÁöÑÊ∂àË¥πÈÄªËæë„ÄÇÂ¶Ç‰∏äÈù¢ demo ‰∏≠ÁöÑ LongEventHandler ; 1234//ÂõûË∞ÉÊé•Âè£ÔºåÁî®‰∫éÂ§ÑÁêÜ&#123;@link RingBuffer&#125;‰∏≠ÂèØÁî®ÁöÑ‰∫ã‰ª∂public interface EventHandler&lt;T&gt; &#123; void onEvent(T event, long sequence, boolean endOfBatch) throws Exception;&#125; event : RingBuffer Â∑≤ÁªèÂèëÂ∏ÉÁöÑ‰∫ã‰ª∂ sequence : Ê≠£Âú®Â§ÑÁêÜÁöÑ‰∫ã‰ª∂ ÁöÑÂ∫èÂàóÂè∑ endOfBatch : Áî®Êù•Ê†áËØÜÂê¶ÊòØÊù•Ëá™ RingBuffer ÁöÑÊâπÊ¨°‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂ SequenceBarrierÊ∂àË¥πËÄÖË∑ØÈöú„ÄÇËßÑÂÆö‰∫ÜÊ∂àË¥πËÄÖÂ¶Ç‰ΩïÂêë‰∏ãËµ∞„ÄÇ‰∫ãÂÆû‰∏äÔºåËØ•Ë∑ØÈöúÁÆóÊòØÂèòÂêëÁöÑÈîÅ„ÄÇ 12345678910111213final class ProcessingSequenceBarrier implements SequenceBarrier &#123; //ÂΩìÁ≠âÂæÖÔºàÊé¢ÊµãÔºâÁöÑÈúÄË¶Å‰∏çÂèØÁî®Êó∂ÔºåÁ≠âÂæÖÁöÑÁ≠ñÁï• private final WaitStrategy waitStrategy; //‰æùËµñÁöÑÂÖ∂ÂÆÉConsumerÁöÑÂ∫èÂè∑ÔºåËøô‰∏™Áî®‰∫é‰æùËµñÁöÑÊ∂àË¥πÁöÑÊÉÖÂÜµÔºå //ÊØîÂ¶ÇA„ÄÅB‰∏§‰∏™Ê∂àË¥πËÄÖÔºåÂè™ÊúâAÊ∂àË¥πÂÆåÔºåBÊâçËÉΩÊ∂àË¥π„ÄÇ private final Sequence dependentSequence; private volatile boolean alerted = false; //RingbufferÁöÑÂÜôÂÖ•ÊåáÈíà private final Sequence cursorSequence; //RingBufferÂØπÂ∫îÁöÑSequencer private final Sequencer sequencer; //exclude method&#125; waitStrategy ÂÜ≥ÂÆö‰∫ÜÊ∂àË¥πËÄÖÈááÁî®‰ΩïÁßçÁ≠âÂæÖÁ≠ñÁï•„ÄÇ WaitStrategy Strategy employed for making {@link EventProcessor}s wait on a cursor {@link Sequence}. EventProcessor ÁöÑÁ≠âÂæÖÁ≠ñÁï•ÔºõÂÖ∑‰ΩìÂÆûÁé∞Âú® disruptor ‰∏≠Êúâ8ÁßçÔºå Ëøô‰∫õÁ≠âÂæÖÁ≠ñÁï•‰∏çÂêåÁöÑÊ†∏ÂøÉ‰ΩìÁé∞ÊòØÂú®Â¶Ç‰ΩïÂÆûÁé∞ waitFor Ëøô‰∏™ÊñπÊ≥ï‰∏ä„ÄÇ EventProcessor‰∫ã‰ª∂Â§ÑÁêÜÂô®ÔºåÂÆûÈôÖ‰∏äÂèØ‰ª•ÁêÜËß£‰∏∫Ê∂àË¥πËÄÖÊ®°ÂûãÁöÑÊ°ÜÊû∂ÔºåÂÆûÁé∞‰∫ÜÁ∫øÁ®ãRunnableÁöÑrunÊñπÊ≥ïÔºåÂ∞ÜÂæ™ÁéØÂà§Êñ≠Á≠âÊìç‰ΩúÂ∞ÅÂú®‰∫ÜÈáåÈù¢„ÄÇËØ•Êé•Âè£Êúâ‰∏â‰∏™ÂÆûÁé∞Á±ª: 1„ÄÅBatchEventProcessor 12345678910public final class BatchEventProcessor&lt;T&gt; implements EventProcessor &#123; private final AtomicBoolean running = new AtomicBoolean(false); private ExceptionHandler&lt;? super T&gt; exceptionHandler = new FatalExceptionHandler(); private final DataProvider&lt;T&gt; dataProvider; private final SequenceBarrier sequenceBarrier; private final EventHandler&lt;? super T&gt; eventHandler; private final Sequence sequence = new Sequence( Sequencer.INITIAL_CURSOR_VALUE); private final TimeoutHandler timeoutHandler; //exclude method&#125; ExceptionHandlerÔºöÂºÇÂ∏∏Â§ÑÁêÜÂô® DataProviderÔºöÊï∞ÊçÆÊù•Ê∫êÔºåÂØπÂ∫î RingBuffer EventHandlerÔºöÂ§ÑÁêÜ Event ÁöÑÂõûË∞ÉÂØπË±° SequenceBarrierÔºöÂØπÂ∫îÁöÑÂ∫èÂè∑Â±èÈöú TimeoutHandlerÔºöË∂ÖÊó∂Â§ÑÁêÜÂô®ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏∫Á©∫ÔºåÂ¶ÇÊûúË¶ÅËÆæÁΩÆÔºåÂè™ÈúÄË¶ÅË¶ÅÂ∞ÜÂÖ≥ËÅîÁöÑEventHandlerÂÆûÁé∞TimeOutHandlerÂç≥ÂèØ„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÈÄâÊã©‰ΩøÁî® EventHandler ÁöÑÊó∂ÂÄôÔºåÈªòËÆ§‰ΩøÁî®ÁöÑÂ∞±ÊòØ BatchEventProcessorÔºåÂÆÉ‰∏éEventHandlerÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÔºåÂπ∂‰∏îÊòØÂçïÁ∫øÁ®ãÊâßË°å„ÄÇ Â¶ÇÊûúÊüê‰∏™RingBufferÊúâÂ§ö‰∏™BatchEventProcessorÔºåÈÇ£‰πàÂ∞±‰ºöÊØè‰∏™BatchEventProcessorÂØπÂ∫î‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ 2„ÄÅWorkProcessor 1234567891011121314151617public final class WorkProcessor&lt;T&gt; implements EventProcessor &#123; private final AtomicBoolean running = new AtomicBoolean(false); private final Sequence sequence = new Sequence(Sequencer.INITIAL_CURSOR_VALUE); private final RingBuffer&lt;T&gt; ringBuffer; private final SequenceBarrier sequenceBarrier; private final WorkHandler&lt;? super T&gt; workHandler; private final ExceptionHandler&lt;? super T&gt; exceptionHandler; private final Sequence workSequence; private final EventReleaser eventReleaser = new EventReleaser() &#123; @Override public void release() &#123; sequence.set(Long.MAX_VALUE); &#125; &#125;; private final TimeoutHandler timeoutHandler;&#125; Âü∫Êú¨Âíå BatchEventProcessor Á±ª‰ººÔºå‰∏çÂêåÂú®‰∫éÔºåÁî®‰∫éÂ§ÑÁêÜEventÁöÑÂõûË∞ÉÂØπË±°ÊòØWorkHandler„ÄÇ ÂéüÁêÜÂõæ Êó†Ê∂àË¥πËÄÖÊÉÖÂÜµ‰∏ãÔºåÁîü‰∫ßËÄÖ‰øùÊåÅÁîü‰∫ßÔºå‰ΩÜÊòØ remainingCapacity ‰øùÊåÅ‰∏çÂèòÂú®ÂÜôdemoÁöÑËøáÁ®ã‰∏≠ÔºåÊú¨Êù•ÊÉ≥ÈÄöËøá‰∏çËÆæÂÆö Ê∂àË¥πËÄÖ Êù•ËßÇÂØü RingBuffer ÂèØÁî®ÂÆπÈáèÂèòÂåñÁöÑ„ÄÇ‰ΩÜÊòØÈ™åËØÅËøáÁ®ã‰∏≠Ôºå‰∏ÄÁõ¥Âæó‰∏çÂà∞È¢ÑÊúüÁöÑÁªìÊûúÔºå(Ê≥®ÔºöÊ≤°ÊúâËÆæÁΩÆÊ∂àË¥πËÄÖÔºåÂè™ÊúâÁîü‰∫ßËÄÖ)ÔºåÂÖàÁúãÁªìÊûúÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950publish event :0bufferSie:8remainingCapacity:8cursor:0--------------------------------&gt;publish event :1bufferSie:8remainingCapacity:8cursor:1--------------------------------&gt;publish event :2bufferSie:8remainingCapacity:8cursor:2--------------------------------&gt;publish event :3bufferSie:8remainingCapacity:8cursor:3--------------------------------&gt;publish event :4bufferSie:8remainingCapacity:8cursor:4--------------------------------&gt;publish event :5bufferSie:8remainingCapacity:8cursor:5--------------------------------&gt;publish event :6bufferSie:8remainingCapacity:8cursor:6--------------------------------&gt;publish event :7bufferSie:8remainingCapacity:8cursor:7--------------------------------&gt;publish event :8bufferSie:8remainingCapacity:8cursor:8--------------------------------&gt;publish event :9bufferSie:8remainingCapacity:8cursor:9--------------------------------&gt; ‰ªéÁªìÊûúÊù•ÁúãÔºåremainingCapacity ÁöÑÂÄºÂ∫îËØ•ÈöèÁùÄ ÂèëÂ∏ÉÁöÑÊï∞Èáè ÈÄíÂáèÁöÑÔºõ‰ΩÜÊòØÂÆûÈôÖ‰∏äÂÆÉÂπ∂Ê≤°ÊúâÂèëÁîü‰ªª‰ΩïÂèòÂåñ„ÄÇ Êù•Áúã‰∏ãringBuffer.remainingCapacity() Ëøô‰∏™ÊñπÊ≥ïÔºö 123456789/** * Get the remaining capacity for this ringBuffer. * * @return The number of slots remaining. */public long remainingCapacity()&#123; return sequencer.remainingCapacity();&#125; ËøôÈáåÈù¢Âèà‰ΩøÁî® sequencer.remainingCapacity()Ëøô‰∏™ÊñπÊ≥ïÊù•ËÆ°ÁÆóÁöÑ„ÄÇ‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠‰ΩøÁî®ÁöÑÊòØProducerType.SINGLEÔºåÈÇ£Êù•ÁúãSingleProducerSequencer Ëøô‰∏™ÈáåÈù¢remainingCapacityÁöÑÂÆûÁé∞„ÄÇ 1234567891011@Overridepublic long remainingCapacity()&#123; //‰∏äÊ¨°Áî≥ËØ∑ÂÆåÊØïÁöÑÂ∫èÂàóÂÄº long nextValue = this.nextValue; //ËÆ°ÁÆóÂΩìÂâçÂ∑≤ÁªèÊ∂àË¥πÂà∞ÁöÑÂ∫èÂàóÂÄº long consumed = Util.getMinimumSequence(gatingSequences, nextValue); //ÂΩìÂâçÁîü‰∫ßÂà∞ÁöÑÂ∫èÂàóÂÄº long produced = nextValue; return getBufferSize() - (produced - consumed);&#125; Êù•Ëß£Èáä‰∏ãËøôÊÆµ‰ª£Á†ÅÁöÑÂê´‰πâÔºö ÂÅáËÆæÂΩìÂâç ringBuffer ÁöÑ bufferSize ÊòØ 8 Ôºõ‰∏äÊ¨°Áî≥ËØ∑Âà∞ÁöÑÂ∫èÂàóÂè∑ÊòØ 5ÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØËØ¥Â∑≤ÁªèÁîü‰∫ßËøáÂç†Áî®ÁöÑÂ∫èÂàóÂè∑ÊòØ5ÔºõÂÅáËÆæÂΩìÂâçÂ∑≤ÁªèÊ∂àË¥πÂà∞ÁöÑÂ∫èÂàóÂè∑ÊòØ 3ÔºåÈÇ£‰πàÂâ©‰ΩôÁöÑÂÆπÈáè‰∏∫Ôºö 8-Ôºà5-2Ôºâ = 5Ôºõ Âõ†‰∏∫ËøôÈáåÊàë‰ª¨ÂèØ‰ª•Á°ÆÂÆö bufferSize Âíå produced ÁöÑÂÄº‰∫ÜÔºåÈÇ£‰πà remainingCapacity ÁöÑÁªìÊûúÂ∞±ÂèñÂÜ≥‰∫égetMinimumSequenceÁöÑËÆ°ÁÆóÁªìÊûú‰∫Ü„ÄÇ 123456789public static long getMinimumSequence(final Sequence[] sequences, long minimum)&#123; for (int i = 0, n = sequences.length; i &lt; n; i++) &#123; long value = sequences[i].get(); minimum = Math.min(minimum, value); &#125; return minimum;&#125; Ëøô‰∏™ÊñπÊ≥ïÊòØ‰ªé Sequence Êï∞ÁªÑ‰∏≠Ëé∑ÂèñÊúÄÂ∞èÂ∫èÂàó „ÄÇÂ¶ÇÊûúsequences ‰∏∫Á©∫ÔºåÂàôËøîÂõû minimum„ÄÇÂõûÂà∞‰∏ä‰∏ÄÊ≠•ÔºåÁúã‰∏ãsequencesËøô‰∏™Êï∞ÁªÑÊòØ‰ªéÂì™ÈáåËøáÊù•ÁöÑÔºåÂÆÉÁöÑÂÄºÂú®Âì™ÈáåËÆæÁΩÆÁöÑ„ÄÇ 1long consumed = Util.getMinimumSequence(gatingSequences, nextValue); gatingSequencesÊòØ SingleProducerSequencerÁà∂Á±ª AbstractSequencer ‰∏≠ÁöÑÊàêÂëòÂèòÈáèÔºö 1protected volatile Sequence[] gatingSequences = new Sequence[0]; gatingSequences ÊòØÂú®‰∏ãÈù¢Ëøô‰∏™ÊñπÊ≥ïÈáåÈù¢Êù•ÁÆ°ÁêÜÁöÑ„ÄÇ 12345678/** * @see Sequencer#addGatingSequences(Sequence...) */@Overridepublic final void addGatingSequences(Sequence... gatingSequences)&#123; SequenceGroups.addSequences(this, SEQUENCE_UPDATER, this, gatingSequences);&#125; Ëøô‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®Ê†àÂêëÂâçËøΩÊ∫ØÊúâËøôÂá†‰∏™Âú∞ÊñπË∞ÉÁî®‰∫ÜÔºö WorkerPoolÊù•ÁÆ°ÁêÜÂ§ö‰∏™Ê∂àË¥πËÄÖÔºõhangdlerEventsWith Ëøô‰∏™ÊñπÊ≥ï‰πüÊòØÁî®Êù•ËÆæÁΩÆÊ∂àË¥πËÄÖÁöÑ„ÄÇ‰ΩÜÊòØÂú®‰∏äÈù¢ÁöÑÊµãËØïÊ°à‰æã‰∏≠Êàë‰ª¨ÊòØÊÉ≥ÈÄöËøá‰∏çËÆæÂÆöÊ∂àË¥πËÄÖ Âè™ËÆæÂÆöÁîüÊàêËÄÖ Êù•ËßÇÂØü ÁéØÂΩ¢ÈòüÂàóÁöÑÂç†Áî®ÊÉÖÂÜµÔºåÊâÄ‰ª•gatingSequences ‰ºö‰∏ÄÁõ¥ÊòØÁ©∫ÁöÑÔºåÂõ†Ê≠§Âú®ËÆ°ÁÆóÊó∂‰ºöÊää produced ÁöÑÂÄº‰Ωú‰∏∫ minimum ËøîÂõû„ÄÇËøôÊ†∑ÊØèÊ¨°ËÆ°ÁÆóÂ∞±Áõ∏ÂΩì‰∫éÔºö 1return getBufferSize() - (produced - produced) === getBufferSize(); ‰πüÂ∞±È™åËØÅ‰∫Ü‰∏∫‰ΩïÂú®‰∏çËÆæÂÆöÊ∂àË¥πËÄÖÁöÑÊÉÖÂÜµ‰∏ãÔºåremainingCapacity ÁöÑÂÄº‰ºö‰∏ÄÁõ¥‰øùÊåÅ‰∏çÂèò„ÄÇ SOFATracer ‰∏≠ Disruptor ÂÆûË∑µSOFATracer‰∏≠ÔºåAsyncCommonDigestAppenderManager ÂØπ disruptor ËøõË°å‰∫ÜÂ∞ÅË£ÖÔºåÁî®‰∫éÂ§ÑÁêÜÂ§ñÈÉ®ÁªÑ‰ª∂ÁöÑTracerÊëòË¶ÅÊó•Âøó„ÄÇËØ•ÈÉ®ÂàÜÂÄüÂä© AsyncCommonDigestAppenderManager ÁöÑÊ∫êÁ†ÅÊù•ÂàÜÊûê‰∏ãSOFATracerÂ¶Ç‰Ωï‰ΩøÁî®disruptorÁöÑ„ÄÇ SOFATracer‰∏≠‰ΩøÁî®‰∫Ü‰∏§Áßç‰∏çÂêåÁöÑ‰∫ã‰ª∂Ê®°ÂûãÔºå‰∏ÄÁßçÊòØSOFATracerÂÜÖÈÉ®‰ΩøÁî®ÁöÑ StringEvent , ‰∏ÄÁßçÊòØ Â§ñÈÉ®Êâ©Â±ï‰ΩøÁî®ÁöÑ SofaTacerSpanEvent„ÄÇËøôÈáå‰ª• SofaTacerSpanEvent ËøôÁßç‰∫ã‰ª∂Ê®°ÂûãÊù•ÂàÜÊûê„ÄÇStringEvent Ê∂àÊÅØ‰∫ã‰ª∂Ê®°ÂûãÂØπÂ∫îÁöÑÊòØ AsyncCommonAppenderManager Á±ªÂ∞ÅË£ÖÁöÑdisruptor„ÄÇ SofaTracerSpanEvent ( -&gt; LongEvent)ÂÆö‰πâÊ∂àÊÅØ‰∫ã‰ª∂Ê®°ÂûãÔºåSofaTacerSpanEvent Âíå ÂâçÈù¢ demo ‰∏≠ÁöÑ LongEvent Âü∫Êú¨ÁªìÊûÑÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰∏ªË¶ÅÊòØÂÜÖÈÉ®ÊåÅÊúâÁöÑÊ∂àÊÅØÊï∞ÊçÆ‰∏çÂêåÔºåLongEvent ‰∏≠ÊòØ‰∏Ä‰∏™longÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåSofaTacerSpanEvent‰∏≠ÊåÅÊúâÁöÑÊòØ SofaTracerSpan „ÄÇ 123456789public class SofaTracerSpanEvent &#123; private volatile SofaTracerSpan sofaTracerSpan; public SofaTracerSpan getSofaTracerSpan() &#123; return sofaTracerSpan; &#125; public void setSofaTracerSpan(SofaTracerSpan sofaTracerSpan) &#123; this.sofaTracerSpan = sofaTracerSpan; &#125;&#125; Consumer ( -&gt; LongEventHandler)Consumer ÊòØ AsyncCommonDigestAppenderManager ÁöÑÂÜÖÈÉ®Á±ª;ÂÆûÁé∞‰∫Ü EventHandler Êé•Âè£ÔºåËøô‰∏™consumerÂ∞±ÊòØ‰Ωú‰∏∫Ê∂àË¥πËÄÖÂ≠òÂú®ÁöÑ„ÄÇ Âú®AsyncCommonAppenderManager‰∏≠‰πüÊúâ‰∏Ä‰∏™ÔºåËøô‰∏™Âú∞Êñπ‰∏™‰∫∫ËßâÂæóÂèØ‰ª•ÊäΩÂá∫ÂéªÔºåËøôÊ†∑ÂèØ‰ª•‰ΩøÂæóAsyncCommonDigestAppenderManager/AsyncCommonAppenderManagerÁöÑ‰ª£Á†ÅÁúãËµ∑Êù•Êõ¥Âπ≤ÂáÄÔºõ 123456789101112131415161718192021222324252627282930313233343536373839private class Consumer implements EventHandler&lt;SofaTracerSpanEvent&gt; &#123; //Êó•ÂøóÁ±ªÂûãÈõÜÂêàÔºåÈùûËØ•ÈõÜÂêàÂÜÖÁöÑÊó•ÂøóÁ±ªÂûãÂ∞Ü‰∏ç‰ºöË¢´Â§ÑÁêÜ protected Set&lt;String&gt; logTypes = Collections.synchronizedSet(new HashSet&lt;String&gt;()); @Override public void onEvent(SofaTracerSpanEvent event, long sequence, boolean endOfBatch) throws Exception &#123; // ÊãøÂà∞ÂÖ∑‰ΩìÁöÑÊ∂àÊÅØÊï∞ÊçÆ sofaTracerSpan SofaTracerSpan sofaTracerSpan = event.getSofaTracerSpan(); // Â¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆÔºåÂàô‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ if (sofaTracerSpan != null) &#123; try &#123; String logType = sofaTracerSpan.getLogType(); // È™åËØÅÂΩìÂâçÊó•ÂøóÁ±ªÂûãÊòØÂê¶ÂèØ‰ª•Ë¢´ÂΩìÂâçconsumerÊ∂àË¥π if (logTypes.contains(logType)) &#123; // Ëé∑ÂèñÁºñÁ†ÅÁ±ªÂûã SpanEncoder encoder = contextEncoders.get(logType); //Ëé∑Âèñ appender TraceAppender appender = appenders.get(logType); // ÂØπÊï∞ÊçÆËøõË°åÁºñÁ†ÅÂ§ÑÁêÜ String encodedStr = encoder.encode(sofaTracerSpan); if (appender instanceof LoadTestAwareAppender) &#123; ((LoadTestAwareAppender) appender).append(encodedStr, TracerUtils.isLoadTest(sofaTracerSpan)); &#125; else &#123; appender.append(encodedStr); &#125; // Âà∑Êñ∞ÁºìÂÜ≤Âå∫ÔºåÊó•ÂøóËæìÂá∫ appender.flush(); &#125; &#125; catch (Exception e) &#123; // ÂºÇÂ∏∏ÁúÅÁï• &#125; &#125; &#125; public void addLogType(String logType) &#123; logTypes.add(logType); &#125; &#125; SofaTracerSpanEventFactory Ôºà-&gt; LongEventFactoryÔºâÁî®‰∫é‰∫ßÁîüÊ∂àÊÅØ‰∫ã‰ª∂ÁöÑ Factory 123456public class SofaTracerSpanEventFactory implements EventFactory&lt;SofaTracerSpanEvent&gt; &#123; @Override public SofaTracerSpanEvent newInstance() &#123; return new SofaTracerSpanEvent(); &#125;&#125; ConsumerThreadFactory (-&gt; LongEventThreadFactory )Áî®Êù•‰∫ßÁîüÊ∂àË¥πÁ∫øÁ®ãÁöÑ Factory„ÄÇ 123456789101112131415public class ConsumerThreadFactory implements ThreadFactory &#123; private String workName; public String getWorkName() &#123; return workName; &#125; public void setWorkName(String workName) &#123; this.workName = workName; &#125; @Override public Thread newThread(Runnable runnable) &#123; Thread worker = new Thread(runnable, "Tracer-AsyncConsumer-Thread-" + workName); worker.setDaemon(true); return worker; &#125;&#125; ÊûÑÂª∫disruptordisruptor ÁöÑÊûÑÂª∫ÊòØÂú® AsyncCommonDigestAppenderManager ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂÆåÊàêÁöÑ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041public AsyncCommonDigestAppenderManager(int queueSize, int consumerNumber) &#123; // ‰ΩøÁî®Ëøô‰∏™ËÆ°ÁÆóÊù•‰øùËØÅrealQueueSizeÊòØ2ÁöÑÊ¨°ÂπÇÔºàËøîÂõûÂΩìÂâç Â§ß‰∫éÁ≠â‰∫équeueSizeÁöÑÊúÄÂ∞èÁöÑ2ÁöÑÊ¨°ÂπÇÊï∞ Ôºâ int realQueueSize = 1 &lt;&lt; (32 - Integer.numberOfLeadingZeros(queueSize - 1)); //ÊûÑÂª∫disruptorÔºå‰ΩøÁî®ÁöÑÊòØ ProducerType.MULTI //Á≠âÂæÖÁ≠ñÁï•ÊòØ BlockingWaitStrategy disruptor = new Disruptor&lt;SofaTracerSpanEvent&gt;(new SofaTracerSpanEventFactory(), realQueueSize, threadFactory, ProducerType.MULTI, new BlockingWaitStrategy()); //Ê∂àË¥πËÄÖÂàóË°® this.consumers = new ArrayList&lt;Consumer&gt;(consumerNumber); for (int i = 0; i &lt; consumerNumber; i++) &#123; Consumer consumer = new Consumer(); consumers.add(consumer); //ËÆæÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÁ®ãÂ∫è disruptor.setDefaultExceptionHandler(new ConsumerExceptionHandler()); //ÁªëÂÆöÊ∂àË¥πËÄÖ disruptor.handleEventsWith(consumer); &#125; //ÊòØÂê¶ÂÖÅËÆ∏‰∏¢ÂºÉÔºå‰ªéÈÖçÁΩÆÊñá‰ª∂Ëé∑Âèñ this.allowDiscard = Boolean.parseBoolean(SofaTracerConfiguration.getProperty( SofaTracerConfiguration.TRACER_ASYNC_APPENDER_ALLOW_DISCARD, DEFAULT_ALLOW_DISCARD)); if (allowDiscard) &#123; //ÊòØÂê¶ËÆ∞ÂΩï‰∏¢Â§±Êó•ÂøóÁöÑÊï∞Èáè this.isOutDiscardNumber = Boolean.parseBoolean(SofaTracerConfiguration.getProperty( SofaTracerConfiguration.TRACER_ASYNC_APPENDER_IS_OUT_DISCARD_NUMBER, DEFAULT_IS_OUT_DISCARD_NUMBER)); //ÊòØÂê¶ËÆ∞ÂΩï‰∏¢Â§±Êó•ÂøóÁöÑTraceIdÂíåRpcId this.isOutDiscardId = Boolean.parseBoolean(SofaTracerConfiguration.getProperty( SofaTracerConfiguration.TRACER_ASYNC_APPENDER_IS_OUT_DISCARD_ID, DEFAULT_IS_OUT_DISCARD_ID)); //‰∏¢Â§±Êó•ÂøóÁöÑÊï∞ÈáèËææÂà∞ËØ•ÈòàÂÄºËøõË°å‰∏ÄÊ¨°Êó•ÂøóËæìÂá∫ this.discardOutThreshold = Long.parseLong(SofaTracerConfiguration.getProperty( SofaTracerConfiguration.TRACER_ASYNC_APPENDER_DISCARD_OUT_THRESHOLD, DEFAULT_DISCARD_OUT_THRESHOLD)); if (isOutDiscardNumber) &#123; this.discardCount = new PaddedAtomicLong(0L); &#125; &#125;&#125; ÂêØÂä® disruptordisruptorÁöÑÂêØÂä®ÂßîÊâòÁªô‰∫ÜAsyncCommonDigestAppenderManager ÁöÑstartÊñπÊ≥ïÊù•ÊâßË°å„ÄÇ 1234public void start(final String workerName) &#123; this.threadFactory.setWorkName(workerName); this.ringBuffer = this.disruptor.start();&#125; Êù•Áúã‰∏ãÔºåSOFATracer ‰∏≠ ÂÖ∑‰ΩìÊòØÂú®Âì™ÈáåË∞ÉÁî®Ëøô‰∏™start ÁöÑÔºö CommonTracerManager : Ëøô‰∏™ÈáåÈù¢ÊåÅÊúâ‰∫ÜAsyncCommonDigestAppenderManager Á±ªÁöÑ‰∏Ä‰∏™Âçï‰æãÂØπË±°ÔºåÂπ∂‰∏îÊòØstatic ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠Ë∞ÉÁî®‰∫ÜstartÊñπÊ≥ïÔºõËøô‰∏™Áî®Êù•ËæìÂá∫ÊôÆÈÄöÊó•Âøó„ÄÇ SofaTracerDigestReporterAsyncManagerÔºöËøôÈáåÁ±ªÈáåÈù¢‰πüÊòØÊåÅÊúâ‰∫ÜAsyncCommonDigestAppenderManager Á±ªÁöÑ‰∏Ä‰∏™Âçï‰æãÂØπÂÉèÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜgetSofaTracerDigestReporterAsyncManagerÊñπÊ≥ïÊù•Ëé∑ÂèñËØ•Âçï‰æãÔºåÂú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®‰∫ÜstartÊñπÊ≥ïÔºõËØ•ÂØπË±°Áî®Êù•ËæìÂá∫ÊëòË¶ÅÊó•Âøó„ÄÇ ÂèëÂ∏É‰∫ã‰ª∂ÂâçÈù¢ÁöÑdemo‰∏≠ÊòØÈÄöËøá‰∏Ä‰∏™forÂæ™ÁéØÊù•ÂèëÂ∏É‰∫ã‰ª∂ÁöÑÔºåÂú® SOFATracer ‰∏≠ ÁöÑ‰∫ã‰ª∂ÂèëÂ∏ÉÊó†ÈùûÂ∞±ÊòØÂΩìÊúâTracerÊó•ÂøóÈúÄË¶ÅËæìÂá∫Êó∂‰ºöËß¶ÂèëÂèëÂ∏ÉÔºåÈÇ£‰πàÂØπÂ∫îÁöÑÂ∞±ÊòØÊó•ÂøóÁöÑ append Êìç‰ΩúÔºåÂ∞ÜÊó•Âøó append Âà∞ÁéØÂΩ¢ÁºìÂÜ≤Âå∫„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445public boolean append(SofaTracerSpan sofaTracerSpan) &#123; long sequence = 0L; //ÊòØÂê¶ÂÖÅËÆ∏‰∏¢ÂºÉ if (allowDiscard) &#123; try &#123; //ÂÖÅËÆ∏‰∏¢ÂºÉÂ∞±‰ΩøÁî®tryNextÂ∞ùËØïÁî≥ËØ∑Â∫èÂàóÔºåÁî≥ËØ∑‰∏çÂà∞ÊäõÂá∫ÂºÇÂ∏∏ sequence = ringBuffer.tryNext(); &#125; catch (InsufficientCapacityException e) &#123; //ÊòØÂê¶ËæìÂá∫‰∏¢Â§±Êó•ÂøóÁöÑTraceIdÂíåRpcId if (isOutDiscardId) &#123; SofaTracerSpanContext sofaTracerSpanContext = sofaTracerSpan .getSofaTracerSpanContext(); if (sofaTracerSpanContext != null) &#123; SynchronizingSelfLog.warn("discarded tracer: traceId[" + sofaTracerSpanContext.getTraceId() + "];spanId[" + sofaTracerSpanContext.getSpanId() + "]"); &#125; &#125; //ÊòØÂê¶ËæìÂá∫‰∏¢Â§±Êó•ÂøóÁöÑÊï∞Èáè if ((isOutDiscardNumber) &amp;&amp; discardCount.incrementAndGet() == discardOutThreshold) &#123; discardCount.set(0); if (isOutDiscardNumber) &#123; SynchronizingSelfLog.warn("discarded " + discardOutThreshold + " logs"); &#125; &#125; return false; &#125; &#125; else &#123; // ‰∏çÂÖÅËÆ∏‰∏¢ÂºÉÂàô‰ΩøÁî®nextÊñπÊ≥ï sequence = ringBuffer.next(); &#125; try &#123; SofaTracerSpanEvent event = ringBuffer.get(sequence); event.setSofaTracerSpan(sofaTracerSpan); &#125; catch (Exception e) &#123; SynchronizingSelfLog.error("fail to add event"); return false; &#125; //ÂèëÂ∏É ringBuffer.publish(sequence); return true;&#125; SOFATracer ‰∫ã‰ª∂ÂèëÂ∏ÉÁöÑË∞ÉÁî®ÈÄªËæëÔºö ËøΩÊ∫ØË∞ÉÁî®ÁöÑÊµÅÁ®ãÔºåÂèØ‰ª•Áü•ÈÅìÂΩìÂâç span Ë∞ÉÁî® finishÊó∂ÊàñËÄÖ SOFATracer‰∏≠Ë∞ÉÁî®reportSpanÊó∂ Â∞±Áõ∏ÂΩì‰∫éÂèëÂ∏É‰∫Ü‰∏Ä‰∏™Ê∂àÊÅØ‰∫ã‰ª∂„ÄÇ Â∞èÁªìÊú¨ÊñáÂØπ SOFATracer ‰∏≠‰ΩøÁî® Disruptor Êù•ËøõË°åÊó•ÂøóËæìÂá∫ÁöÑ‰ª£Á†ÅËøõË°å‰∫ÜÁÆÄÂçïÁöÑÂàÜÊûêÔºåÊõ¥Â§öÂÜÖÈÉ®ÁªÜËäÇÂéüÁêÜÂèØ‰ª•Ëá™Ë°åÁúã‰∏ãSOFATracerÁöÑ‰ª£Á†Å„ÄÇSOFATracer ‰Ωú‰∏∫‰∏ÄÁßçÊØîËæÉÂ∫ïÂ±ÇÁöÑ‰∏≠Èó¥‰ª∂ÁªÑ‰ª∂ÔºåÂú®ÂÆûÈôÖÁöÑ‰∏öÂä°ÂºÄÂèë‰∏≠Âü∫Êú¨ÊòØÊó†Ê≥ïÊÑüÁü•ÁöÑ„ÄÇ‰ΩÜÊòØ‰Ωú‰∏∫ÊäÄÊúØÊù•Â≠¶‰π†ÔºåËøòÊòØÊúâÂæàÂ§öÁÇπÂèØ‰ª•Êåñ‰∏ÄÊåñ„ÄÇ SOFATracer GitHub ‰º†ÈÄÅÈó®„ÄÇ Â¶ÇÊûúÊúâÂ∞è‰ºô‰º¥ÂØπ‰∏≠Èó¥‰ª∂ÊÑüÂÖ¥Ë∂£ÔºåÊ¨¢ËøéÂä†ÂÖ•Êàë‰ª¨Âõ¢ÈòüÔºåÊ¨¢ËøéÊù•Êí©ÔºõÂØπ SOFA ÊäÄÊúØ‰ΩìÁ≥ªÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ÂÖ≥Ê≥®Êàë‰ª¨ ALIPAY SOFA Á§æÂå∫ÔºõÈôÑÂõ¢ÈòüÈïáÊ•ºÂõæ„ÄÇ]]></content>
      <categories>
        <category>SOFA</category>
      </categories>
      <tags>
        <tag>OpenTracing</tag>
        <tag>SOFATracer</tag>
        <tag>Disruptor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅä RestTemplate]]></title>
    <url>%2F2018%2F11%2F10%2Fresttemplate1%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëËøôÊÆµÊó∂Èó¥Áî®‰∫Ü‰∏ã RestTemplate Ëøô‰∏™Á±ªÔºåÊäΩÁÇπÊó∂Èó¥ÊÄªÁªì‰∏ã‰∏Ä‰∫õ‰∏úË•øÔºåÂ∏åÊúõÂØπÂ§ßÂÆ∂ÊúâÊâÄÂ∏ÆÂä©„ÄÇ ‰ªé 3.0 ÁâàÊú¨ÂºÄÂßãÔºåSpring Êèê‰æõ‰∫Ü RestTemplate ‰Ωú‰∏∫Áî®‰∫éËÆøÈóÆ Rest ÊúçÂä°ÁöÑÂÆ¢Êà∑Á´ØÔºåRestTemplate Êèê‰æõ‰∫ÜÂ§öÁßç‰æøÊç∑ËÆøÈóÆËøúÁ®ã Http ÊúçÂä°ÁöÑÊñπÊ≥ïÔºåËÉΩÂ§üÂ§ßÂ§ßÊèêÈ´òÂÆ¢Êà∑Á´ØÁöÑÁºñÂÜôÊïàÁéá„ÄÇ Êú¨ÁØáÊñáÁ´†Â∞Ü‰ªé RestTemplate Êèê‰æõÁöÑ API ÂÖ•ÊâãÔºåÂÖàÊù•‰∫ÜËß£‰∏ã RestTemplate ÁöÑÂÖ∑‰Ωì‰ΩøÁî®ÔºåÁÑ∂ÂêéÂÜçÂØπÂÖ∂‰∏≠Ê∂âÂèäÂà∞ÁöÑÂá†‰∏™Ê†∏ÂøÉÁ±ªËøõË°åÂàÜÊûêÔºåÊúÄÂêéÂÜçÊù•ÂàÜÊûê‰∏ã RestTemplate ÊâßË°åÁöÑÊï¥‰∏™ÊµÅÁ®ãÔºåÁØáÂπÖÊØîËæÉÈïøÔºåÂª∫ËÆÆÂÖàÁ†Å‰∏∫Âø´ÔºÅ Ê†∏ÂøÉ APIÂú®Âπ≥Êó∂ÁöÑ‰ΩøÁî®‰∏≠ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÈÉΩÊòØ‰ΩøÁî®ÂåÖË£ÖÂ•ΩÁöÑgetForObject/getForEntityÔºåpostForObject/postForEntity/postForLocationÔºåput‰ª•Âèädelete„ÄÇ get ËØ∑Ê±ÇÂ§ÑÁêÜgetForEntityÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØ‰∏Ä‰∏™ResponseEntityÔºåResponseEntityÊòØSpringÂØπHTTPËØ∑Ê±ÇÂìçÂ∫îÁöÑÂ∞ÅË£ÖÔºåÂåÖÊã¨‰∫ÜÂá†‰∏™ÈáçË¶ÅÁöÑÂÖÉÁ¥†ÔºåÂ¶ÇÂìçÂ∫îÁ†Å„ÄÅcontentType„ÄÅcontentLength„ÄÅÂìçÂ∫îÊ∂àÊÅØ‰ΩìÁ≠â„ÄÇ urlÔºöË∞ÉÁî®ÁöÑÊúçÂä°ÁöÑÂú∞ÂùÄ responseTypeÔºöËøîÂõûÁöÑbodyÁ±ªÂûã uriVariablesÔºöÊúâ‰∏§ÁßçÂΩ¢Âºè: ÂèØ‰ª•Áî®‰∏Ä‰∏™Êï∞Â≠óÂÅöÂç†‰ΩçÁ¨¶ÔºåÊúÄÂêéÊòØ‰∏Ä‰∏™ÂèØÂèòÈïøÂ∫¶ÁöÑÂèÇÊï∞ÔºåÊù•‰∏Ä‰∏ÄÊõøÊç¢ÂâçÈù¢ÁöÑÂç†‰ΩçÁ¨¶ ‰πüÂèØ‰ª•ÂâçÈù¢‰ΩøÁî®name={name}ËøôÁßçÂΩ¢ÂºèÔºåÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™mapÔºåmapÁöÑkeyÂç≥‰∏∫ÂâçËæπÂç†‰ΩçÁ¨¶ÁöÑÂêçÂ≠óÔºåmapÁöÑvalue‰∏∫ÂèÇÊï∞ÂÄº responseType ÊµãËØïÊ°à‰æãÂÆö‰πâÁöÑ‰∏Ä‰∏™controllerËµÑÊ∫êÔºö ËøôÈáåÂàÜÂà´‰ΩøÁî®‰∏çÂêåÁöÑ responseType ËøõË°åÊµãËØïÔºö ÁªìÊûúÔºö12getForEntity(responseType=Map.class):&#123;glmapper=hello glmapper&#125;getForEntity(responseType=String.class):&#123;&quot;glmapper&quot;:&quot;hello glmapper&quot;&#125; uriVariables ÊµãËØïÊ°à‰æãÂÖàÊù•Áúã‰∏ãÈùûmapÊñπÂºèÁöÑÔºå‰∏§‰∏™controllerÔºå‰∏§Áßç‰∏çÂêåÊñπÂºèÁöÑÂèÇÊï∞Ëé∑ÂèñÔºàÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ†∑ÁöÑÔºâ ‰ΩøÁî®Âç†‰ΩçÁ¨¶ÁöÑÊñπÂºèÔºö ‰ΩøÁî® map ÁöÑÊñπÂºèÔºö getForObjectgetForObject ÂáΩÊï∞ÂÆûÈôÖ‰∏äÊòØÂØπ getForEntity ÂáΩÊï∞ÁöÑËøõ‰∏ÄÊ≠•Â∞ÅË£ÖÔºåÂ¶ÇÊûúÂè™ÂÖ≥Ê≥®ËøîÂõûÁöÑÊ∂àÊÅØ‰ΩìÁöÑÂÜÖÂÆπÔºåÂØπÂÖ∂‰ªñ‰ø°ÊÅØÈÉΩ‰∏çÂÖ≥Ê≥®ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•‰ΩøÁî® getForObject„ÄÇ ËøôÈáåË∞ÉÁî®Â∞±ÊØîgetForEntityË¶ÅÁÆÄÂçï‰∏ÄÁÇπ‰∫ÜÔºåÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÂØπË±°Ôºö getForObject ÁöÑÂá†‰∏™ÈáçËΩΩÊñπÊ≥ïÂíå getForEntity Âü∫Êú¨ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ post ËØ∑Ê±ÇÂ§ÑÁêÜÂú®RestTemplate‰∏≠ÔºåPOSTËØ∑Ê±ÇÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ã‰∏â‰∏™ÊñπÊ≥ïÊù•ÂèëËµ∑ÔºöpostForEntityÔºåpostForObjectÔºåpostForLocation„ÄÇ postForEntity Ê°à‰æãË∞ÉÁî®Ëé∑ÂèñÔºö 1postForEntity(URI url, @Nullable Object request, Class&lt;T&gt; responseType) ÊñπÊ≥ïÁöÑÁ¨¨‰∏ÄÂèÇÊï∞Ë°®Á§∫Ë¶ÅË∞ÉÁî®ÁöÑÊúçÂä°ÁöÑÂú∞ÂùÄ ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ë°®Á§∫‰∏ä‰º†ÁöÑÂèÇÊï∞ ÊñπÊ≥ïÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞Ë°®Á§∫ËøîÂõûÁöÑÊ∂àÊÅØ‰ΩìÁöÑÊï∞ÊçÆÁ±ªÂûã postForObject Ê°à‰æãÂíå getForObject Áõ∏ÂØπÂ∫îÔºåÂè™ÂÖ≥Ê≥®ËøîÂõûÁöÑÊ∂àÊÅØ‰Ωì„ÄÇ postForLocation Ê°à‰æãpostForLocation‰πüÊòØÊèê‰∫§Êñ∞ËµÑÊ∫êÔºåÊèê‰∫§ÊàêÂäü‰πãÂêéÔºåËøîÂõûÊñ∞ËµÑÊ∫êÁöÑURIÔºåpostForLocationÁöÑÂèÇÊï∞ÂíåÂâçÈù¢‰∏§ÁßçÁöÑÂèÇÊï∞Âü∫Êú¨‰∏ÄËá¥ÔºåÂè™‰∏çËøáËØ•ÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏∫UriÔºåËøô‰∏™Âè™ÈúÄË¶ÅÊúçÂä°Êèê‰æõËÄÖËøîÂõû‰∏Ä‰∏™UriÂç≥ÂèØÔºåËØ•UriË°®Á§∫Êñ∞ËµÑÊ∫êÁöÑ‰ΩçÁΩÆ„ÄÇ ËøôÈáåÊúâÁÇπÂùëÔºåÊàë‰ª¨ÈúÄË¶ÅÊääËøô‰∏™uriÊ∑ªÂä†Âà∞responseÁöÑheader‰∏≠Ôºå‰∏çÁÑ∂ÂêéÈù¢ÊãøÂà∞ÁöÑÊòØnull„ÄÇ exchangeexchange ÊñπÊ≥ïÂíå‰∏äËø∞Ëøô‰∫õÊñπÊ≥ïÂ∑ÆÂà´Âú®‰∫éÈúÄË¶ÅÂ§ö‰∏Ä‰∏™ËØ∑Ê±ÇÁ±ªÂûãÁöÑÂèÇÊï∞Ôºö AsyncRestTemplate ÂºÇÊ≠•ÂÆ¢Êà∑Á´ØRestTemplateÁöÑÂºÇÊ≠•ÂÆûÁé∞ÊñπÂºè„ÄÇÊâÄÊ∂âÂèäÂà∞ÁöÑAPIÂíåRestTemplateÂü∫Êú¨‰∏ÄËá¥„ÄÇÂå∫Âà´Âú®‰∫éRestTemplateÁõ¥Êé•ËøîÂõûÁªìÊûúÔºåËÄåAsyncRestTemplateËøîÂõûÁöÑÊòØListenableFuture„ÄÇ RestTemplate Êã¶Êà™Âô®SpringÊèê‰æõ‰∫ÜClientHttpRequestInterceptorÂíåAsyncClientHttpRequestInterceptor‰∏§‰∏™Êé•Âè£ÔºåÂàÜÂà´ÂèØ‰ª•ÂØπRestTemplateÂíåAsyncRestTemplateÂèëËµ∑ÁöÑËØ∑Ê±ÇËøõË°åÊã¶Êà™ÔºåÂπ∂Âú®ÂÖ∂Ë¢´ÂèëÈÄÅËá≥ÊúçÂä°Á´Ø‰πãÂâç‰øÆÊîπËØ∑Ê±ÇÊàñÊòØÂ¢ûÂº∫Áõ∏Â∫îÁöÑ‰ø°ÊÅØ„ÄÇ ClientHttpRequestInterceptor Êã¶Êà™ RestTemplate AsyncClientHttpRequestInterceptor Êã¶Êà™AsyncRestTemplate ËÆæÁΩÆÊã¶Êà™Âô®Â∞±ÊòØÈÄöËøáÊèê‰æõÁöÑ setInterceptors ËÆæÁΩÆÂç≥ÂèØÔºö Ëá™ÂÆö‰πâ ResponseErrorHandlerResponseErrorHandler Êé•Âè£ÂÆö‰πâ‰∫ÜÂΩìresponseÂèëÁîüÈîôËØØÊó∂ÈúÄË¶ÅËøõË°åÁöÑÊìç‰Ωú„ÄÇËøôÈáåÊàë‰ª¨Ëá™ÂÆö‰πâ‰∏Ä‰∏™CustomResponseErrorHandlerÔºåÂΩìËøîÂõûÁöÑcode‰∏çÊòØ200Êó∂ÔºåÂ∞±Ë°®Á§∫ÊâßË°åÂá∫Èîô‰∫Ü„ÄÇ ËÆæÁΩÆ ResponseErrorHandlerÔºö ÊâßË°åÁªìÊûúÔºö Â§ÑÁêÜÊµÅÁ®ã‰∏ãÈù¢Êù•Ê¢≥ÁêÜ‰∏ã RestTemplate ‰∏≠ËØ∑Ê±ÇÂ§ÑÁêÜÁöÑÊµÅÁ®ã„ÄÇ‰∏ãÂõæ‰∏≠ XXXX Ë°®Á§∫Êàë‰ª¨Ë∞ÉÁî®ÁöÑ API ÊñπÊ≥ï„ÄÇÂ§ß‰ΩìÊµÅÁ®ãÂ∞±ÊòØÔºöapi ÂÜÖÈÉ®ÂÅö‰∏Ä‰∫õËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑÂ§ÑÁêÜÂ∞ÅË£ÖÔºåÁÑ∂Âêé‰∫§Áªô execute ÊñπÊ≥ïÊâßË°åÔºåÊúÄÂêéÁúüÊ≠£Â§ÑÁêÜÂàôÊòØÂú® doExecute ÊñπÊ≥ï‰∏≠ÂÆåÊàê„ÄÇ ‰∏ãÈù¢‰ª• getForEntity ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ãÊù•ÂàÜÊûêÔºö getForEntity ÊñπÊ≥ïÔºö Âü∫‰∫éÁªôÂÆöÂìçÂ∫îÁ±ªÂûãÔºåËøîÂõû‰∏Ä‰∏™ËØ∑Ê±ÇÂõûË∞ÉÂÆûÁé∞ÔºåÂáÜÂ§áËØ∑Ê±Ç„ÄÇ Âü∫‰∫éÁªôÂÆöÂìçÂ∫îÁ±ªÂûãÔºåËøîÂõû ResponseEntity ÁöÑÂìçÂ∫îÊèêÂèñÂô®„ÄÇ execute ÊñπÊ≥ïÔºö Ëøô‰∏™ÊñπÊ≥ïÈáåÈù¢ÊòØÂØπurlËøõË°åurlencodeÁºñÁ†ÅÂ§ÑÁêÜÁöÑÔºåÁªü‰∏ÄËΩ¨‰∏∫URL„ÄÇËøôÈáåÊàë‰ª¨‰πüÂèØ‰ª•ÊâãÂä®ÊääÂèÇÊï∞ËøõË°åÁΩëÁªúÁºñÁ†Å„ÄÇ doExecuteÊòØËØ∑Ê±ÇÁúüÊ≠£Â§ÑÁêÜÁöÑÊñπÊ≥ïÔºåËøôÈáåÊù•ÈáçÁÇπÁúã‰∏ãËøô‰∏™ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ãÔºö createRequest doWithRequest execute handleResponse 1„ÄÅcreateRequestËøô‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®Â∞±ÊòØÂàõÂª∫‰∏Ä‰∏™ ClientHttpRequest ÂØπË±°„ÄÇRestTemplateÈõÜÊàê‰∫Ü HttpAccessorËøô‰∏™ÊäΩË±°Á±ªÔºåÂàõÂª∫ClientHttpRequestÁöÑËøáÁ®ãÂ∞±ÊòØÂú®ÂÖ∂Áà∂Á±ªHttpAccessor‰∏≠ÈÄöËøáÈªòËÆ§ÁöÑ ClientHttpRequestFactory ÂÆûÁé∞Á±ª SimpleClientHttpRequestFactory ÂÆåÊàêÂÖ∑‰ΩìÁöÑËØ∑Ê±ÇÂàõÂª∫„ÄÇ 1„ÄÅÂàõÂª∫ java.net.HttpURLConnection ÂØπË±° 2„ÄÅËÆæÁΩÆ connectionÔºåÂåÖÊã¨ connectTimeout„ÄÅsetDoInput Á≠â„ÄÇ 3„ÄÅbufferRequestBody Áî®‰∫éÊ†áÂøóÊòØÂê¶‰ΩøÁî®ÁºìÂ≠òÊµÅÁöÑÂΩ¢ÂºèÔºåÈªòËÆ§ÊòØ true„ÄÇÁº∫ÁÇπÊòØÂΩìÂèëÈÄÅÂ§ßÈáèÊï∞ÊçÆÊó∂ÔºåÊØîÂ¶Ç put/postÔºåÂ≠òÂú®ÂÜÖÂ≠òÊ∂àËÄó‰∏•Èáç„ÄÇËØ•ÂÄºÂèØ‰ª•ÈÄöËøá SimpleClientHttpRequestFactory#setBufferRequestBodyÊù•‰øÆÊîπ„ÄÇ ‰∏çÂêåÁâàÊú¨ÁöÑÂèòÊõ¥ËøòÊòØÊØîËæÉÂ§ßÁöÑÔºåÂ§ßÂÆ∂Âú®ÈòÖËØªÊ∫êÁ†ÅÊó∂ÔºåËøòÊòØ‰ªéÊúÄÊñ∞ÁöÑ‰ª£Á†ÅÊù•Áúã„ÄÇ 2„ÄÅdoWithRequestRequestCallback Â∞ÅË£Ö‰∫ÜËØ∑Ê±Ç‰ΩìÂíåËØ∑Ê±ÇÂ§¥ÂØπË±°„ÄÇËøôÈáå‰ºöÈÅçÂéÜÊâÄÊúâÁöÑ HttpMessageConverterÔºåËß£ÊûêÊàêÊâÄÊúâÊîØÊåÅÁöÑMediaTypeÔºåÊîæÂú®allSupportedMediaTypes‰∏≠„ÄÇ 1request.getHeaders().setAccept(allSupportedMediaTypes); RestTemplate‰∏≠ÂØπÂ∫î‰∫Ü‰∏§‰∏™ÂÜÖÈÉ®Á±ªÁöÑÂÆûÁé∞Ôºö AcceptHeaderRequestCallback.doWithRequestÁöÑÂ§ÑÁêÜ„ÄÇÂèëÈÄÅËØ∑Ê±ÇÊó∂ÔºåHttpÂ§¥ÈÉ®ÈúÄË¶ÅËÆæÁΩÆAcceptÂ≠óÊÆµÔºåËØ•Â≠óÊÆµË°®Êòé‰∫ÜÂèëÈÄÅËØ∑Ê±ÇÁöÑËøôÊñπÊé•ÂèóÁöÑÂ™í‰ΩìÁ±ªÂûãÔºàÊ∂àÊÅØÊ†ºÂºèÔºâÔºå‰πüÊòØÂìçÂ∫îÁ´ØË¶ÅËøîÂõûÁöÑ‰ø°ÊÅØÁöÑÂ™í‰ΩìÁ±ªÂûãÔºàÊ∂àÊÅØÊ†ºÂºèÔºâ„ÄÇÊ†πÊçÆpostForEntityÊñπÊ≥ïÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞responseTypeÔºåÁ®ãÂ∫èÂ∞ÜÈÄâÊã©ÈÄÇÂêàÁöÑËß£ÊûêÂô®XXXConverterÔºåÂπ∂‰æùÊçÆËØ•Ëß£ÊûêÂô®ÊâæÂá∫ÊâÄÊúâÊîØÊåÅÁöÑÂ™í‰ΩìÁ±ªÂûã„ÄÇ HttpEntityRequestCallback.doWithRequestÁöÑÂ§ÑÁêÜ„ÄÇÂ¶ÇÊûúÊòØPOSTËØ∑Ê±ÇÂπ∂‰∏îÊ∂àÊÅØ‰ΩìÂ≠òÂú®Êó∂ÔºåÈô§‰∫ÜËÆæÁΩÆAcceptÂ≠óÊÆµÔºåËøòÂèØËÉΩÈúÄË¶ÅËÆæÁΩÆContent-TypeÂ≠óÊÆµÔºåËØ•Â≠óÊÆµË°®Êòé‰∫ÜÊâÄÂèëÈÄÅËØ∑Ê±ÇÁöÑÂ™í‰ΩìÁ±ªÂûãÔºàÊ∂àÊÅØÊ†ºÂºèÔºâÔºå‰πüÊòØÂìçÂ∫îÁ´ØÊé•ÂèóÁöÑÂ™í‰ΩìÁ±ªÂûãÔºàÊ∂àÊÅØÊ†ºÂºèÔºâ„ÄÇÊ†πÊçÆpostForEntityÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞requestÔºåÁ®ãÂ∫èÂ∞ÜÈÄâÊã©ÈÄÇÂêàÁöÑËß£ÊûêÂô®XXXConverterÔºåÂ∞ÜËØ∑Ê±ÇÊ∂àÊÅØÂÜôÂÖ•ËæìÂá∫ÊµÅ„ÄÇ 3„ÄÅexecuteËøôÈáå‰ºöÊääËØ∑Ê±ÇÂ§¥/‰ΩìÂ∞ÅË£ÖÂà∞connectÔºåÁÑ∂ÂêéÂèëÈÄÅËØ∑Ê±Ç„ÄÇË∑üË∏™ execute ÊñπÊ≥ïÊâßË°åÔºåÂÆö‰ΩçÂà∞SimpleBufferingClientHttpRequest#executeInternalÊñπÊ≥ïÔºö ËøôÈáåÊòØ‰ΩøÁî®ÂÆû‰æã SimpleBufferingClientHttpRequest Â∞ÅË£ÖËØ∑Ê±Ç‰ΩìÂíåËØ∑Ê±ÇÂ§¥„ÄÇ‰ªé‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞Ôºö delete Êó∂ÈÄöËøáÂâçÈù¢ËÆæÁΩÆÁöÑ DoOutputÂèÇÊï∞ÂíåÊòØÂê¶ÂèØ‰ª•ËÆæÁΩÆËæìÂá∫ÊµÅÊù•Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÂèëÈÄÅËØ∑Ê±Ç‰ΩìÂ¶ÇÊûúÊòØ delete ËØ∑Ê±ÇÔºåÈÇ£‰πàÂæàÊòéÊòæ DoOutput = falseÔºå‰∏ç‰ºöÊúâÂ∞ÅË£ÖËØ∑Ê±Ç‰ΩìÁöÑËøáÁ®ãÔºåÂç≥‰∏çÊâßË°åFileCopyUtils.copy(bufferedOutput, this.connection.getOutputStream())„ÄÇ 4„ÄÅhandleResponseÊúÄÂêéÂ∞±ÊòØ response ÁöÑËß£Êûê‰∫ÜÔºå‰ªé‰ª£Á†ÅÊù•ÁúãÔºå‰∏ªË¶ÅËøòÊòØ Error ÁöÑËß£Êûê„ÄÇËøôÈáåÁöÑErrorHandlerÊàë‰ª¨ÂâçÈù¢‰πüÊèêÂà∞ÔºåÂèØ‰ª•ÈÄöËøáÂÆûÁé∞ ResponseErrorHandler Êù•Ëá™ÂÆö‰πâ ÂºÇÂ∏∏Â§ÑÁêÜ„ÄÇ Â∞èÁªìÊú¨ÁØáÂÖà‰ªãÁªç‰∫ÜRestTemplateÁöÑAPI‰ΩøÁî®ÔºåÊåë‰∫ÜÂá†‰∏™‰ªãÁªç‰∫Ü‰∏ãÔºåÊõ¥Â§ö‰ΩøÁî®ÁªÜËäÇËøòÊòØË¶ÅÈíàÂØπ‰∏çÂêåÁöÑÂú∫ÊôØÊù•ÂÜ≥ÂÆö„ÄÇÊé•ÁùÄÂØπÊã¶Êà™Âô®ÔºåÂºÇÊ≠•RestTemplate‰ª•ÂèäÈîôËØØÂ§ÑÁêÜÂô®ÂÅö‰∫ÜÁÆÄÂçïÁöÑ‰ªãÁªçÂπ∂ÁªôÂá∫‰∫ÜÊ°à‰æã„ÄÇÊúÄÂêéÂàÜÊûê‰∫Ü‰∏ãRestTemplateÁöÑÊâßË°åÊµÅÁ®ãÔºåÁØáÂπÖÂéüÂõ†ÊâßË°åÊµÅÁ®ãÈÉ®ÂàÜÂè™ÊòØÂ§ßÊ¶ÇÊçã‰∫ÜÊçãÔºåÂÖ∂‰∏≠ËøòÊòØÂæàÂ§öÁªÜËäÇÊúâÊó∂Èó¥ÂÜçË°•ÂÖÖÔºåËøôÈÉ®ÂàÜ‰∏ªË¶ÅÂ∞±ÊòØÁúãÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÈÄö‰ø°ÁöÑÔºåÂ∑≤ÁªèËØ∑Ê±ÇÂèÇÊï∞ÁöÑ‰º†ÈÄíÁ≠â„ÄÇ]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>web</tag>
        <tag>restful</tag>
        <tag>ËÅä‰∏ÄËÅä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅä Spring ‰∏≠ÁöÑÊâ©Â±ïÊú∫Âà∂(‰∫å) - NamespaceHandler]]></title>
    <url>%2F2018%2F11%2F10%2Fspringextentiontwo%2F</url>
    <content type="text"><![CDATA[Ââç‰∏ÄÁØá ËÅä‰∏ÄËÅä Spring ‰∏≠ÁöÑÊâ©Â±ïÊú∫Âà∂Ôºà‰∏ÄÔºâ ‰∏≠ËÅäÂà∞‰∫ÜApplicationListener„ÄÅApplicationContextAware„ÄÅBeanFactoryAware‰∏âÁßçÊú∫Âà∂„ÄÇÊú¨ÁØáÂ∞Ü‰ªãÁªç NamespaceHandler ÁöÑÊâ©Â±ï‰ΩøÁî®„ÄÇ Áõ∏‰ø°ÂæàÂ§öÂ∞è‰ºô‰º¥ÂØπ‰∫éËøôÂá†‰∏™Á±ªÈÉΩ‰∏çÈôåÁîüÔºåÂü∫Êú¨Âü∫‰∫éjavaÂÆûÁé∞ÁöÑRPCÊ°ÜÊû∂ÈÉΩ‰ºö‰ΩøÁî®ÔºåÊØîÂ¶Ç Dubbo , SOFARpc Á≠â„ÄÇÊú¨ÊñáÂÖà‰ªéÂá†‰∏™Â∞èdemoÂÖ•ÊâãÔºå‰∫ÜËß£‰∏ãÂü∫Êú¨ÁöÑÊ¶ÇÂøµÂíåÁºñÁ®ãÊµÅÁ®ãÔºåÁÑ∂ÂêéÂàÜÊûê‰∏ã SOFARpc ‰∏≠ÊòØÂ¶Ç‰Ωï‰ΩøÁî®ÁöÑ„ÄÇ NamespaceHandlerNamespaceHandler ÊòØ Spring Êèê‰æõÁöÑ ÂëΩÂêçÁ©∫Èó¥Â§ÑÁêÜÂô®„ÄÇ‰∏ãÈù¢ËøôÂº†Âõæ‰∏≠ÔºåÈô§‰∫Ü‰π±ÂÖ•ÁöÑÊú¨ÁØá demo ‰∏≠Ê∂âÂèäÂà∞ÁöÑ BridgeNameSpaceHandler ‰πãÂ§ñÔºåÂÖ∂‰ªñÂùá‰∏∫ Spring Ëá™Ë∫´Êèê‰æõÁöÑ„ÄÇÂõ†‰∏∫ËøôÈáåÊàëÂè™ÂºïÂÖ•‰∫Ü bean Âíå context ‰æùËµñÔºåÊâÄ‰ª•Ëøô‰πü‰ªÖ‰ªÖÊòØ‰∏ÄÈÉ®ÂàÜ„ÄÇÂõæ‰∏≠Êàë‰ª¨Â∏∏Áî®ÁöÑÂ∫îËØ•ÁÆóÊòØ AopNamespaceHandler„ÄÇ Êàë‰ª¨‰ΩøÁî®Âü∫‰∫éxmlÁöÑspringÈÖçÁΩÆÊó∂ÔºåÂèØËÉΩÈúÄË¶ÅÈÖçÁΩÆÂ¶Ç&lt;aop:config /&gt;ËøôÊ†∑ÁöÑÊ†áÁ≠æÔºåÂú®ÈÖçÁΩÆËøô‰∏™Ê†áÁ≠æ‰πãÂâçÔºåÈÄöÂ∏∏Êàë‰ª¨ÈúÄË¶ÅÂºïÂÖ•Ëøô‰∏™aopÊâÄÂú®ÁöÑÂëΩÂêçÁ©∫Èó¥Ôºö 1234567891011&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/aophttp://www.springframework.org/schema/aop/spring-aop.xsdhttp://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context.xsd" /&gt; ÂÖ≥‰∫éAOP ÂèØ‰ª•‰∫ÜËß£‰∏ã ËÅä‰∏ÄËÅä AOP ÔºöË°®Áé∞ÂΩ¢Âºè‰∏éÂü∫Á°ÄÊ¶ÇÂøµÔºåËøôÈáå‰∏çËøáÂ§öËß£ÈáäÔºå‰∏ãÈù¢Â∞±ÊåâÁÖß ÂÆòÊñπÊñáÊ°£ÁöÑÊµÅÁ®ã Êù•ÂÜô‰∏Ä‰∏™Ëá™ÂÆö‰πâxmlÔºåÊúÄÁªàÊïàÊûúÂ¶Ç‰∏ãÔºö 12345&lt;bridge:application id="bridgeTestApplication" name="bridgeTestApplication" version="1.0" organization="bridge.glmapper.com" owner="leishu@glmapper"/&gt; 1„ÄÅÂÆö‰πâ xsd Êñá‰ª∂ÂÖ≥‰∫é xsd Êñá‰ª∂ÁöÑËØ≠Ê≥ïËßÑÂàô‰∏çÂú®Êú¨ÁØáËåÉÂõ¥‰πãÂÜÖÔºåÊúâÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ÂèØ‰ª•Ëá™Ë°ågoogle„ÄÇ‰∏ãÈù¢Ëøô‰∏™Êñá‰ª∂ÂæàÁÆÄÂçïÔºåÂÆö‰πâÁöÑelement name ‰∏∫applicationÔºåÂØπÂ∫î‰∫é bridge:application‰∏≠ÁöÑapplication„ÄÇattributeÂ∞±ÊòØ‰∏äÈù¢ÊïàÊûúÂ±ïÁ§∫‰∏≠ÂØπÂ∫îÁöÑÂá†‰∏™Â±ûÊÄßÂêç„ÄÇ 12345678910111213141516171819&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;&lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:beans="http://www.springframework.org/schema/beans" xmlns:tool="http://www.springframework.org/schema/tool" xmlns="http://bridge.glmapper.com/schema/bridge" targetNamespace="http://bridge.glmapper.com/schema/bridge"&gt; &lt;xsd:import namespace="http://www.springframework.org/schema/beans"/&gt; &lt;xsd:complexType name="applicationType"&gt; &lt;xsd:attribute name="id" type="xsd:ID"/&gt; &lt;xsd:attribute name="name" type="xsd:string" use="required"/&gt; &lt;xsd:attribute name="version" type="xsd:string"/&gt; &lt;xsd:attribute name="owner" type="xsd:string"/&gt; &lt;xsd:attribute name="organization" type="xsd:string"/&gt; &lt;/xsd:complexType&gt; &lt;xsd:element name="application" type="applicationType"/&gt;&lt;/xsd:schema&gt; 2„ÄÅÁºñÂÜô NamespaceHandler In addition to the schema, we need a NamespaceHandler that will parse all elements of this specific namespace Spring encounters while parsing configuration files. Áî®ÁºñÂÜôÁöÑËøô‰∏™ NamespaceHandler Êù•Ëß£ÊûêÈÖçÁΩÆÊñá‰ª∂„ÄÇ ÂÖ∑‰ΩìËØ¥Êù•NamespaceHandler‰ºöÊ†πÊçÆschemaÂíåËäÇÁÇπÂêçÊâæÂà∞Êüê‰∏™BeanDefinitionParserÔºåÁÑ∂ÂêéÁî±BeanDefinitionParserÂÆåÊàêÂÖ∑‰ΩìÁöÑËß£ÊûêÂ∑•‰Ωú„ÄÇ SpringÊèê‰æõ‰∫ÜÈªòËÆ§ÂÆûÁé∞Á±ªNamespaceHandlerSupportÂíåAbstractSingleBeanDefinitionParserÔºåÊúÄÁÆÄÂçïÁöÑÊñπÂºèÂ∞±ÊòØÂéªÁªßÊâøËøô‰∏§‰∏™Á±ª„ÄÇ ËøôÈáåÈÄöËøáÁªßÊâø NamespaceHandlerSupport Ëøô‰∏™ÊäΩË±°Á±ªÊù•ÂÆåÊàê„ÄÇ 123456public class BridgeNamespaceHandler extends NamespaceHandlerSupport &#123; public void init() &#123; registerBeanDefinitionParser("application", new ApplicationBeanDefinitionParser()); &#125;&#125; ËøôÈáåÂÆûÈôÖ‰∏äÂè™ÊòØÊ≥®ÂÜå‰∫Ü‰∏Ä‰∏™Ëß£ÊûêÂô®ÔºåÂÖ∑‰ΩìÁöÑ BeanDefinitionParser ÊâçÊòØÂ∞Ü XMLÂÖÉÁ¥†Êò†Â∞ÑÂà∞ÁâπÂÆöbeanÁöÑ„ÄÇ 3„ÄÅÁºñÂÜô BeanDefinitionParserËøôÈáåÁõ¥Êé•ÈÄöËøáÂÆûÁé∞BeanDefinitionParserÊé•Âè£ÁöÑÊñπÂºèÂÆö‰πâÊàë‰ª¨ÁöÑBeanDefinitionParserÂÆûÁé∞Á±ª„ÄÇÂÖ≥‰∫éAbstractSingleBeanDefinitionParser ÁöÑ‰ΩøÁî®Âú® SPFARpc ‰∏≠‰ºöÊ∂âÂèäÂà∞„ÄÇ 123456789101112131415161718192021222324252627public class ApplicationBeanDefinitionParser implements BeanDefinitionParser &#123; public BeanDefinition parse(Element element, ParserContext parserContext) &#123; //beanDefinition RootBeanDefinition beanDefinition = new RootBeanDefinition(); beanDefinition.setBeanClass(ApplicationConfig.class); beanDefinition.setLazyInit(false); //Ëß£Êûêid String id = element.getAttribute("id"); beanDefinition.getPropertyValues().add("id", id); //Ëß£Êûêname beanDefinition.getPropertyValues().add("name", element.getAttribute("name")); //Ëß£Êûêversion beanDefinition.getPropertyValues().add("version", element.getAttribute("version")); //owner beanDefinition.getPropertyValues().add("owner", element.getAttribute("owner")); //organization beanDefinition.getPropertyValues().add("organization", element.getAttribute("organization")); parserContext.getRegistry().registerBeanDefinition(id, beanDefinition); return beanDefinition; &#125;&#125; ËøôÈáåÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£ÁöÑÊòØÂºÄÂßãËß£ÊûêËá™ÂÆö‰πâÊ†áÁ≠æÁöÑÊó∂ÂÄôÔºåÊòØÈÄöËøáBeanDefinitionParserDelegate-&gt;parseCustomElementÊñπÊ≥ïÊù•Â§ÑÁêÜÁöÑÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÈÄöËøáeleÂÖÉÁ¥†ÊãøÂà∞ÂΩìÂâçnamespaceUriÔºå‰πüÂ∞±ÊòØÂú®xsd‰∏≠ÂÆö‰πâÁöÑÂëΩÂêçÁ©∫Èó¥ÔºåÊé•ÁùÄÂßîÊâòÁªô DefaultNamespaceResolver ÂæóÂà∞ÂÖ∑‰ΩìÁöÑhandlerÔºàBridgenamspaceHandlerÔºâ ,ÁÑ∂ÂêéÊâßË°åparse Ëß£Êûê„ÄÇ 4„ÄÅÈÖçÁΩÆ spring.handlers Âíå spring.schmas1234http\://bridge.glmapper.com/schema/bridge=com.glmapper.extention.namespacehandler.BridgeNamespaceHandlerhttp\://bridge.glmapper.com/schema/bridge.xsd=META-INF/bridge.xsd ÈÖçÁΩÆËøô‰∏™ÂÖ∂ÂÆûÊòØ‰∏∫‰∫ÜËÆ©SpringÂú®Ëß£ÊûêxmlÁöÑÊó∂ÂÄôËÉΩÂ§üÊÑüÁü•Âà∞Êàë‰ª¨ÁöÑËá™ÂÆö‰πâÂÖÉÁ¥†ÔºåÊàë‰ª¨ÈúÄË¶ÅÊääNamespaceHandlerÂíåxsdÊñá‰ª∂ÊîæÂà∞‰Ωç‰∫éMETA-INFÁõÆÂΩï‰∏ãÁöÑspring.handlers Âíå spring.schmasÊñá‰ª∂‰∏≠„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•Âú®springÈÖçÁΩÆÊñá‰ª∂‰∏≠‰ΩøÁî®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÊ†áÁ≠æ‰∫Ü„ÄÇÂ¶Ç‰∏ãÔºö 123456789101112131415&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:bridge="http://bridge.glmapper.com/schema/bridge" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://bridge.glmapper.com/schema/bridge http://bridge.glmapper.com/schema/bridge.xsd"&gt; &lt;bridge:application id="bridgeTestApplication" name="bridgeTestApplication" version="1.0" organization="bridge.glmapper.com" owner="leishu@glmapper"/&gt;&lt;/beans&gt; È™åËØÅ‰∏ã‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñÊàë‰ª¨ÁöÑbeanÔºö 123456789public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext("classpath:bean.xml"); ApplicationConfig applicationConfig = (ApplicationConfig) applicationContext.getBean("bridgeTestApplication"); System.out.println("applicationConfig = "+applicationConfig);&#125; ËæìÂá∫Á§∫‰æãÔºö1234567applicationConfig = ApplicationConfig &#123; id=bridgeTestApplication, name=&apos;bridgeTestApplication&apos;, version=&apos;1.0&apos;, owner=&apos;leishu@glmapper&apos;, organization=&apos;bridge.glmapper.com&apos;&#125; Êï¥‰ΩìÊù•ÁúãÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅÂÆûÁé∞Ëá™Â∑±ÁöÑ xml Ê†áÁ≠æÔºå‰ªÖÈúÄÂÆåÊàê‰ª•‰∏ãÂá†Ê≠•Âç≥ÂèØÔºö 1„ÄÅÂÆö‰πâ xsd Êñá‰ª∂ 2„ÄÅÁºñÂÜô NamespaceHandler 3„ÄÅÁºñÂÜô BeanDefinitionParser 4„ÄÅÈÖçÁΩÆ spring.handlers Âíå spring.schmas SOFARpc ‰∏≠‰ΩøÁî®ÂàÜÊûêSOFARpc ‰∏≠ÁöÑ rpc.xsd Êñá‰ª∂ÊòØÈõÜÊàêÂú® sofaboot.xsd Êñá‰ª∂‰∏≠ÁöÑÔºåËØ¶ÁªÜÂèØËßÅÔºösofa-boot xsd Êñá‰ª∂ËøôÈáå‰∏çË¥¥‰∫ÜÔºåÊúâÁÇπÈïø spring.handlers Âíå spring.schmasÂÖàÁúã‰∏ã spring.handlers Âíå spring.schmas ÈÖçÁΩÆÔºö 12345678http\://sofastack.io/schema/sofaboot=com.alipay.sofa.infra.config.spring.namespace.handler.SofaBootNamespaceHandlerhttp\://sofastack.io/schema/sofaboot.xsd=META-INF/com/alipay/sofa/infra/config/spring/namespace/schema/sofaboot.xsdhttp\://sofastack.io/schema/rpc.xsd=META-INF/com/alipay/sofa/infra/config/spring/namespace/schema/rpc.xsd ‰ªé spring.handlersÊâæÂà∞ NamespaceHandler : SofaBootNamespaceHandler„ÄÇ SofaBootNamespaceHandlerÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºåËøôÈáåÁúãÂá∫Êù•ÔºåÂπ∂‰∏çÊòØÂÉè‰∏äÈù¢Êàë‰ª¨Ëá™Â∑±ÂÜôÁöÑÈÇ£ÁßçÊñπÂºèÈÇ£Ê†∑Ôºå‰ºöÊúâ‰∏Ä‰∏™ BeanDefinitionParser„ÄÇËøôÈáåÂÖ∂ÂÆûËÆæËÆ°ÁöÑÂæàÂ∑ßÂ¶ôÔºåÈÄöËøáspiÁöÑÊñπÂºèÊù•ËΩΩÂÖ•ÂÖ∑‰ΩìÁöÑBeanDefinitionParser„ÄÇ 12345678910111213141516171819202122public class SofaBootNamespaceHandler extends NamespaceHandlerSupport &#123; @Override public void init() &#123; ServiceLoader&lt;SofaBootTagNameSupport&gt; serviceLoaderSofaBoot = ServiceLoader.load(SofaBootTagNameSupport.class); //SOFABoot for (SofaBootTagNameSupport tagNameSupport : serviceLoaderSofaBoot) &#123; this.registerTagParser(tagNameSupport); &#125; &#125; private void registerTagParser(SofaBootTagNameSupport tagNameSupport) &#123; if (!(tagNameSupport instanceof BeanDefinitionParser)) &#123; // log return; &#125; String tagName = tagNameSupport.supportTagName(); registerBeanDefinitionParser(tagName, (BeanDefinitionParser) tagNameSupport); &#125;&#125; ËøôÈáåÂèØ‰ª•ÁúãÂá∫Êúâ ReferenceDefinitionParser Âíå ServiceDefinitionParser ‰∏§‰∏™Ëß£ÊûêÁ±ªÔºåÂàÜÂà´ÂØπÂ∫îÊúçÂä°ÂºïÁî®ÂíåÊúçÂä°Êö¥Èú≤„ÄÇ ‰∏ãÈù¢‰ª•ReferenceDefinitionParser‰∏∫‰æãÔºåÂÖàÁúã‰∏ãÂÆÉÁöÑÁ±ªÂõæÔºö Ëß£ÊûêÂ∑•‰ΩúÈÉΩÊòØÂú® AbstractContractDefinitionParser Á±ª‰∏≠ÂÆåÊàêÔºå ReferenceDefinitionParser Ëá™Â∑±Âè™ÊòØÂÅö‰∫Ü‰∏Ä‰∫õÁâπÊÆäÂ§ÑÁêÜ„Äêjvm-firstÔºåjvmÊúçÂä°„Äë„ÄÇ Â∞èÁªìÊú¨ÁØáÈÄöËøá NamespaceHandler ‰∫ÜËß£‰∫ÜÂ¶Ç‰ΩïÂéªÁºñÂÜôÊàë‰ª¨Ëá™ÂÆö‰πâÁöÑxmlÊ†áÁ≠æÔºå‰ªéNamespaceHandlerÁöÑËßíÂ∫¶ÂèØ‰ª•ÂæàÂ•ΩÁöÑÁêÜËß£‰∏Ä‰∫õ RPC Ê°ÜÊû∂‰∏≠ÊúÄÂü∫Á°ÄÁöÑÂü∫‰∫éxml ÊñπÂºèÁöÑÊúçÂä°ÂºïÁî®ÂíåÊö¥Èú≤ÁöÑÂÆûÁé∞ÊÄùË∑Ø„ÄÇÂè¶Â§ñÈÄöËøáÂàÜÊûê SOFARpc Ôºå‰πü‰∫ÜËß£‰∫ÜÂú®ÂÆûÈôÖÁöÑÂ∑•Á®ãÁªÑ‰ª∂‰∏≠ÂØπ‰∫éNamespaceHandlerÁöÑÊâ©Â±ï‰ΩøÁî®„ÄÇ Êú¨Êñá‰ª£Á†ÅÔºöglmapper-spring-extention]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>ËÅä‰∏ÄËÅä</tag>
        <tag>spring Êâ©Â±ïÊú∫Âà∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÅä‰∏ÄËÅä Spring ‰∏≠ÁöÑÊâ©Â±ïÊú∫Âà∂Ôºà‰∏ÄÔºâ]]></title>
    <url>%2F2018%2F11%2F10%2Fspringextentionone%2F</url>
    <content type="text"><![CDATA[‰πãÂâç Spring Ê∫êÁ†ÅÁ≥ªÂàóÊñáÁ´†‰∏≠Â§ßÂ§öÊòØÂ∫ïÂ±ÇÊ∫êÁ†ÅÁöÑÂàÜÊûêÔºåÈÄöËøáÊ∫êÁ†ÅÂèØ‰ª•ËÆ©Êàë‰ª¨ËÉΩÂ§üÊ∏ÖÊô∞ÁöÑ‰∫ÜËß£ Spring Âà∞Â∫ïÊòØ‰ªÄ‰πàÔºåËÄå‰∏çÊòØÂÅúÁïô‰∫éË°®Èù¢ÁöÑËÆ§Áü•„ÄÇÊØîÂ¶ÇÂΩìÊàë‰ª¨Ë¶Å‰ΩøÁî® @Autowired Ê≥®Ëß£Êó∂ÔºåÂèØ‰ª•ÊãøÂà∞Êàë‰ª¨ÊÉ≥Ë¶ÅÁöÑ bean ,‰ΩÜÊòØ‰∏∫‰ªÄ‰πàÂèØ‰ª•ÊòØÂÄºÂæóÊÄùËÄÉÁöÑ„ÄÇ‚Äì ÂÖ≥‰∫éÈòÖËØªÊ∫êÁ†Å SpringÊ∫êÁ†ÅÁöÑÈòÖËØªÁªìÂêàÊó•Â∏∏ÁöÑ‰ΩøÁî®ÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Êõ¥Â•ΩÁöÑÊéåÊè°Ëøô‰∏™Â∫ûÂ§ßÁöÑÊäÄÊúØ‰ΩìÁ≥ªÔºåÂÆûÈôÖÁöÑÂºÄÂèëÂ∑•‰Ωú‰∏≠ÊúâÂæàÂ§öÂú∞ÊñπÂèØ‰ª•ÂÄüÈâ¥ÂÆÉÁöÑ‰∏Ä‰∫õÊÄùÊÉ≥Êù•Â∏ÆÂä©Êàë‰ª¨Êõ¥Â•ΩÁöÑÂÆûÁé∞Ëá™Â∑±ÁöÑ‰∏öÂä°ÈÄªËæë„ÄÇÊú¨ÁØáÂ∞Ü‰ª•Êâ©Â±ïÁÇπ‰∏∫ÂàáÂÖ•ÁÇπÔºåÊù•‰∫ÜËß£‰∏ãÂú®SpringÁîüÂëΩÂë®Êúü‰∏≠Êâ©Â±ïSpring‰∏≠ÁöÑBeanÂäüËÉΩ„ÄÇ ApplicationListener Êâ©Â±ïApplicationListener ÂÖ∂ÂÆûÊòØ spring ‰∫ã‰ª∂ÈÄöÁü•Êú∫Âà∂‰∏≠Ê†∏ÂøÉÊ¶ÇÂøµÔºõÂú®javaÁöÑ‰∫ã‰ª∂Êú∫Âà∂‰∏≠Ôºå‰∏ÄËà¨‰ºöÊúâ‰∏â‰∏™Ê¶ÇÂøµÔºö event object : ‰∫ã‰ª∂ÂØπË±° event source Ôºö‰∫ã‰ª∂Ê∫êÔºå‰∫ßÁîü‰∫ã‰ª∂ÁöÑÂú∞Êñπ event listener ÔºöÁõëÂê¨‰∫ã‰ª∂Âπ∂Â§ÑÁêÜ ApplicationListener ÁªßÊâøËá™ java.util.EventListener ÔºåÊèê‰æõ‰∫ÜÂØπ‰∫éSpring‰∏≠‰∫ã‰ª∂Êú∫Âà∂ÁöÑÊâ©Â±ï„ÄÇ ApplicationListener Âú®ÂÆûÈôÖÁöÑ‰∏öÂä°Âú∫ÊôØ‰∏≠‰ΩøÁî®ÁöÑÈùûÂ∏∏Â§öÔºåÊØîÂ¶ÇÊàë‰∏ÄËà¨ÂñúÊ¨¢Âú®ÂÆπÂô®ÂàùÂßãÂåñÂÆåÊàê‰πãÂêéÊù•ÂÅö‰∏Ä‰∫õËµÑÊ∫êËΩΩÂÖ•ÊàñËÄÖ‰∏Ä‰∫õÁªÑ‰ª∂ÁöÑÂàùÂßãÂåñ„ÄÇËøôÈáåÁöÑÂÆπÂô®ÊåáÁöÑÂ∞±ÊòØIocÂÆπÂô®ÔºåÂØπÂ∫îÁöÑ‰∫ã‰ª∂ÊòØContextRefreshedEvent „ÄÇ 1234567891011@Componentpublic class StartApplicationListener implementsApplicationListener&lt;ContextRefreshedEvent&gt; &#123; @Override public void onApplicationEvent(ContextRefreshedEvent contextRefreshedEvent) &#123; //ÂàùÂßãÂåñËµÑÊ∫êÊñá‰ª∂ //ÂàùÂßãÂåñÁªÑ‰ª∂ Â¶ÇÔºöcache &#125;&#125; ‰∏äÈù¢ËøôÊÆµ‰ª£Á†Å‰ºöÂú®ÂÆπÂô®Âà∑Êñ∞ÂÆåÊàê‰πãÂêéÊù•ÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖ„ÄÇ‰∏ãÈù¢ÈÄöËøáËá™ÂÆö‰πâ‰∫ã‰ª∂Êù•ÁúãÁúãÊÄé‰πà‰ΩøÁî®ÔºåÂú®ÁúãÂÖ∑‰ΩìÁöÑdemo‰πãÂâçÔºåÂÖàÊù•‰∫ÜËß£‰∏ã‰∏Ä‰∫õÂÖ≥Ê≥®ÁÇπ„ÄÇ Êó•Â∏∏Â∑•‰Ωú‰∫ÜÔºåÂ¶ÇÊûúË¶Å‰ΩøÁî® Spring ‰∫ã‰ª∂‰º†Êí≠Êú∫Âà∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÁÇπÊúâ‰ª•‰∏ãÂá†ÁÇπÔºö ‰∫ã‰ª∂Á±ªÔºåËøô‰∏™Áî®Êù•ÊèèËø∞‰∫ã‰ª∂Êú¨Ë∫´‰∏Ä‰∫õÂ±ûÊÄßÔºå‰∏ÄËà¨ÁªßÊâøApplicationEvent ÁõëÂê¨Á±ªÔºåÁî®Êù•ÁõëÂê¨ÂÖ∑‰ΩìÁöÑ‰∫ã‰ª∂Âπ∂‰ΩúÂá∫ÂìçÂ∫î„ÄÇÈúÄË¶ÅÂÆûÁé∞ ApplicationListener Êé•Âè£ ‰∫ã‰ª∂ÂèëÂ∏ÉÁ±ªÔºåÈúÄË¶ÅÈÄöËøáËøô‰∏™Á±ªÂ∞ÜÊó∂Èó¥ÂèëÂ∏ÉÂá∫ÂéªÔºåËøôÊ†∑ÊâçËÉΩË¢´ÁõëÂê¨ËÄÖÁõëÂê¨Âà∞ÔºåÈúÄË¶ÅÂÆûÁé∞ApplicationContextAwareÊé•Âè£„ÄÇ Â∞Ü‰∫ã‰ª∂Á±ªÂíåÁõëÂê¨Á±ª‰∫§ÁªôSpringÂÆπÂô®„ÄÇ ÈÇ£‰πà‰∏ãÈù¢Â∞±ÊåâÁÖßËøô‰∏™ÊÄùË∑ØÊù•Áúã‰∏ãdemoÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ ‰∫ã‰ª∂Á±ªÔºöUserRegisterEventUserRegisterEvent ÔºåÁî®Êà∑Ê≥®ÂÜå‰∫ã‰ª∂ÔºõËøôÈáå‰Ωú‰∏∫‰∫ã‰ª∂ÂØπË±°ÔºåÁªßÊâøËá™ ApplicationEvent„ÄÇ 12345678910111213141516171819/** * @description: Áî®Êà∑Ê≥®ÂÜå‰∫ã‰ª∂ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/25 */public class UserRegisterEvent extends ApplicationEvent &#123; public String name; public UserRegisterEvent(Object o) &#123; super(o); &#125; public UserRegisterEvent(Object o, String name) &#123; super(o); this.name=name; &#125;&#125; ‰∫ã‰ª∂ÂèëÂ∏ÉÁ±ªÔºöUserServiceÁî®Êà∑Ê≥®ÂÜåÊúçÂä°ÔºåËøôÈáåÈúÄË¶ÅÂú®Áî®Êà∑Ê≥®ÂÜåÊó∂Â∞ÜÊ≥®ÂÜå‰∫ã‰ª∂ÂèëÂ∏ÉÂá∫ÂéªÔºåÊâÄ‰ª•ÈÄöËøáÂÆûÁé∞ApplicationEventPublisherAwareÊé•Âè£Ôºå‰ΩøUserServiceÂÖ∑Êúâ‰∫ã‰ª∂ÂèëÂ∏ÉËÉΩÂäõ„ÄÇ ApplicationEventPublisherAware:ÂèëÂ∏É‰∫ã‰ª∂Ôºå‰πüÂ∞±ÊòØÊääÊüê‰∏™‰∫ã‰ª∂ÂëäËØâÁöÑÊâÄÊúâ‰∏éËøô‰∏™‰∫ã‰ª∂Áõ∏ÂÖ≥ÁöÑÁõëÂê¨Âô®„ÄÇ 123456789101112131415161718192021/** * @description: Áî®Êà∑Ê≥®ÂÜåÊúçÂä°ÔºåÂÆûÁé∞ApplicationEventPublisherAwareÊé•Âè£ ÔºåË°®ÊòéÊú¨Ë∫´ÂÖ∑Êúâ‰∫ã‰ª∂ÂèëÂ∏ÉËÉΩÂäõ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/25 */public class UserService implements ApplicationEventPublisherAware &#123; private ApplicationEventPublisher applicationEventPublisher; public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) &#123; this.applicationEventPublisher = applicationEventPublisher; &#125; public void register(String name) &#123; System.out.println("Áî®Êà∑Ôºö" + name + " Â∑≤Ê≥®ÂÜåÔºÅ"); applicationEventPublisher.publishEvent(new UserRegisterEvent(name)); &#125;&#125; ËøôÈáåÁöÑUserServiceÂÆûÈôÖ‰∏äÊòØ‰Ωú‰∏∫‰∫ã‰ª∂Ê∫êÂ≠òÂú®ÁöÑÔºåÈÄöËøáregisterÂ∞ÜÁî®Êà∑Ê≥®ÂÜå‰∫ã‰ª∂‰º†Êí≠Âá∫Âéª„ÄÇÈÇ£‰πà‰∏ãÈù¢Â∞±ÊòØÈúÄË¶ÅÂÆö‰πâÂ¶Ç‰ΩïÊù•ÁõëÂê¨Ëøô‰∏™‰∫ã‰ª∂ÔºåÂπ∂‰∏îÂ∞Ü‰∫ã‰ª∂ËøõË°åÊ∂àË¥πÂ§ÑÁêÜÊéâÔºåËøôÈáåÂ∞±ÊòØÈÄöËøáApplicationListenerÊù•ÂÆåÊàê„ÄÇ ÁõëÂê¨Á±ªÔºöBonusServerListenerÂΩìÁî®Êà∑Ëß¶ÂèëÊ≥®ÂÜåÊìç‰ΩúÊó∂ÔºåÂêëÁßØÂàÜÊúçÂä°ÂèëÈÄÅÊ∂àÊÅØÔºå‰∏∫Áî®Êà∑ÂàùÂßãÂåñÁßØÂàÜ„ÄÇ 1234567891011121314/** * @description: BonusServerListener ÁßØÂàÜÂ§ÑÁêÜÔºåÂΩìÁî®Êà∑Ê≥®ÂÜåÊó∂ÔºåÁªôÂΩìÂâçÁî®Êà∑Â¢ûÂä†ÂàùÂßãÂåñÁßØÂàÜ * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/25 */public class BonusServerListener implementsApplicationListener&lt;UserRegisterEvent&gt; &#123; public void onApplicationEvent(UserRegisterEvent event) &#123; System.out.println("ÁßØÂàÜÊúçÂä°Êé•Âà∞ÈÄöÁü•ÔºåÁªô " + event.getSource() + " Â¢ûÂä†ÁßØÂàÜ..."); &#125;&#125; Ê≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠123456789101112131415&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt; &lt;bean id="userService" class="com.glmapper.extention.UserService"/&gt; &lt;bean id="bonusServerListener" class="com.glmapper.extention.BonusServerListener"/&gt; &lt;/beans&gt; ÂÆ¢Êà∑Á´ØÁ±ª12345678910111213141516/** * @description: ÂÆ¢Êà∑Á´ØÁ±ª * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/25 */public class MainTest &#123; public static void main(String[] args) &#123; ApplicationContext context =new ClassPathXmlApplicationContext("beans.xml"); UserService userService = (UserService) context.getBean("userService"); //Ê≥®ÂÜå‰∫ã‰ª∂Ëß¶Âèë userService.register("glmapper"); &#125;&#125; ÂÆ¢Êà∑Á´ØÁ±ª‰∏≠ÔºåÊ≥®ÂÜå‰∏Ä‰∏™name‰∏∫glmapperÁöÑÁî®Êà∑ÔºåÊâßË°åÁªìÊûúÔºö 12Áî®Êà∑Ôºöglmapper Â∑≤Ê≥®ÂÜåÔºÅÁßØÂàÜÊúçÂä°Êé•Âà∞ÈÄöÁü•ÔºåÁªô glmapper Â¢ûÂä†ÁßØÂàÜ... Áé∞Âú®Êù•ËÄÉËôëÂè¶Â§ñ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¢ûÂä†‰∏Ä‰∏™ÂäüËÉΩÔºåÁî®Êà∑Ê≥®ÂÜå‰πãÂêéÁªôÁî®Êà∑Âèë‰∏Ä‰∏™ÈÇÆ‰ª∂„ÄÇËøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØÂ¢ûÂä†‰∏Ä‰∏™ÁõëÂê¨Á±ªÂ∞±ÂèØ‰ª•ÔºåÂâçÊèêÊòØËøô‰∏™ÁõëÂê¨ËÄÖÊòØÁõëÂê¨ÂΩìÂâç‰∫ã‰ª∂ÁöÑ„ÄÇ 123456789101112/** * @description: ÈÇÆ‰ª∂ÊúçÂä°ÁõëÂê¨Âô®ÔºåÂΩìÁõëÂê¨Âà∞Áî®Êà∑ÁöÑÊ≥®ÂÜåË°å‰∏∫Êó∂Ôºå ÁªôÁî®Êà∑ÂèëÈÄÅÈÇÆ‰ª∂ÈÄöÁü• * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/25 */public class EmailServerListener implementsApplicationListener&lt;UserRegisterEvent&gt; &#123; public void onApplicationEvent(UserRegisterEvent event) &#123; System.out.println("ÈÇÆ‰ª∂ÊúçÂä°Êé•Âà∞ÈÄöÁü•ÔºåÁªô " + event.getSource() + " ÂèëÈÄÅÈÇÆ‰ª∂..."); ËøôÈáåÂ¶ÇÊûúÂ∞ÜUserRegisterEventÊç¢ÊàêUserLoginEventÔºåÈÇ£‰πàÈÇÆ‰ª∂ÊúçÂä°Â∞Ü‰∏ç‰ºöÊúâ‰ªª‰ΩïË°å‰∏∫„ÄÇ Â¢ûÂä†ÂèëÈÄÅÈÇÆ‰ª∂ÁõëÂê¨Á±ª‰πãÂêéÁöÑÊâßË°åÁªìÊûúÔºö123Áî®Êà∑Ôºöglmapper Â∑≤Ê≥®ÂÜåÔºÅÈÇÆ‰ª∂ÊúçÂä°Êé•Âà∞ÈÄöÁü•ÔºåÁªô glmapper ÂèëÈÄÅÈÇÆ‰ª∂...ÁßØÂàÜÊúçÂä°Êé•Âà∞ÈÄöÁü•ÔºåÁªô glmapper Â¢ûÂä†ÁßØÂàÜ... Spring ÁöÑ‰∫ã‰ª∂‰º†Êí≠Êú∫Âà∂ÊòØÂü∫‰∫éËßÇÂØüËÄÖÊ®°ÂºèÔºàObserverÔºâÂÆûÁé∞ÁöÑÔºåÂÆÉÂèØ‰ª•Â∞Ü Spring BeanÁöÑÊîπÂèòÂÆö‰πâ‰∏∫‰∫ã‰ª∂ ApplicationEventÔºåÈÄöËøá ApplicationListener ÁõëÂê¨ ApplicationEvent ‰∫ã‰ª∂Ôºå‰∏ÄÊó¶Spring Bean ‰ΩøÁî® ApplicationContext.publishEvent( ApplicationEvent event )ÂèëÂ∏É‰∫ã‰ª∂ÂêéÔºåSpring ÂÆπÂô®‰ºöÈÄöÁü•Ê≥®ÂÜåÂú® ÂÆπÂô®‰∏≠ÊâÄÊúâ ApplicationListener Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåÊúÄÂêé ApplicationListener Êé•Âè£ÂÆûÁé∞Á±ªÂà§Êñ≠ÊòØÂê¶Â§ÑÁêÜÂàöÂèëÂ∏ÉÂá∫Êù•ÁöÑ ApplicationEvent ‰∫ã‰ª∂„ÄÇ ApplicationContextAware Êâ©Â±ïApplicationContextAware‰∏≠Âè™Êúâ‰∏Ä‰∏™setApplicationContextÊñπÊ≥ï„ÄÇÂÆûÁé∞‰∫ÜApplicationContextAwareÊé•Âè£ÁöÑÁ±ªÔºåÂèØ‰ª•Âú®ËØ•BeanË¢´Âä†ËΩΩÁöÑËøáÁ®ã‰∏≠Ëé∑ÂèñSpringÁöÑÂ∫îÁî®‰∏ä‰∏ãÊñáApplicationContextÔºåÈÄöËøáApplicationContextÂèØ‰ª•Ëé∑ÂèñSpringÂÆπÂô®ÂÜÖÁöÑÂæàÂ§ö‰ø°ÊÅØ„ÄÇ ËøôÁßç‰∏ÄËà¨Âú®ÈúÄË¶ÅÊâãÂä®Ëé∑ÂèñBeanÁöÑÊ≥®ÂÖ•ÂÆû‰æãÂØπË±°Êó∂‰ºö‰ΩøÁî®Âà∞„ÄÇ‰∏ãÈù¢ÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁöÑdemoÊù•‰∫ÜËß£‰∏ã„ÄÇ GlmapperApplicationContext ÊåÅÊúâApplicationContextÂØπË±°ÔºåÈÄöËøáÂÆûÁé∞ ApplicationContextAwareÊé•Âè£Êù•ÁªôApplicationContextÂÅöËµãÂÄº„ÄÇ12345678910111213141516171819/** * @description: GlmapperApplicationContext * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/29 */public class GlmapperApplicationContext implementsApplicationContextAware &#123; private ApplicationContext applicationContext; public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; this.applicationContext=applicationContext; &#125; public ApplicationContext getApplicationContext()&#123; return applicationContext; &#125;&#125; ÈúÄË¶ÅÊâãÂä®Ëé∑ÂèñÁöÑbean: 1234567891011/** * @description: HelloService * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/29 */public class HelloService &#123; public void sayHello()&#123; System.out.println("Hello Glmapper"); &#125;&#125; Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËøõË°åÈÖçÁΩÆÔºö 12345&lt;bean id="helloService"class="com.glmapper.extention.applicationcontextaware.HelloService"/&gt;&lt;bean id="glmapperApplicationContext"class="com.glmapper.extention.applicationcontextaware.GlmapperApplicationContext"/&gt; ÂÆ¢Êà∑Á´ØÁ±ªË∞ÉÁî®Ôºö 12345678910111213141516171819202122public class MainTest &#123; public static void main(String[] args) &#123; ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); HelloService helloService = (HelloService) context.getBean("helloService"); helloService.sayHello(); //ËøôÈáåÈÄöËøáÂÆûÁé∞ApplicationContextAwareÊé•Âè£ÁöÑÁ±ªÊù•ÂÆåÊàêbeanÁöÑËé∑Âèñ GlmapperApplicationContext glmapperApplicationContext = (GlmapperApplicationContext) context.getBean("glmapperApplicationContext"); ApplicationContext applicationContext = glmapperApplicationContext.getApplicationContext(); HelloService glmapperHelloService = (HelloService) applicationContext.getBean("helloService"); glmapperHelloService.sayHello(); &#125;&#125; BeanFactoryAware Êâ©Â±ïÊàë‰ª¨Áü•ÈÅìBeanFactoryÊòØÊï¥‰∏™IocÂÆπÂô®ÊúÄÈ°∂Â±ÇÁöÑÊé•Âè£ÔºåÂÆÉËßÑÂÆö‰∫ÜÂÆπÂô®ÁöÑÂü∫Êú¨Ë°å‰∏∫„ÄÇÂÆûÁé∞BeanFactoryAwareÊé•Âè£Â∞±Ë°®ÊòéÂΩìÂâçÁ±ªÂÖ∑‰ΩìBeanFactoryÁöÑËÉΩÂäõ„ÄÇ BeanFactoryAwareÊé•Âè£‰∏≠Âè™Êúâ‰∏Ä‰∏™setBeanFactoryÊñπÊ≥ï„ÄÇÂÆûÁé∞‰∫ÜBeanFactoryAwareÊé•Âè£ÁöÑÁ±ªÔºåÂèØ‰ª•Âú®ËØ•BeanË¢´Âä†ËΩΩÁöÑËøáÁ®ã‰∏≠Ëé∑ÂèñÂä†ËΩΩËØ•BeanÁöÑBeanFactoryÔºåÂêåÊó∂‰πüÂèØ‰ª•Ëé∑ÂèñËøô‰∏™BeanFactory‰∏≠Âä†ËΩΩÁöÑÂÖ∂ÂÆÉBean„ÄÇ Êù•ÊÉ≥‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨‰∏∫‰ªÄ‰πàÈúÄË¶ÅÈÄöËøáBeanFactoryÁöÑgetBeanÊù•Ëé∑ÂèñBeanÂë¢ÔºüSpringÂ∑≤ÁªèÊèê‰æõ‰∫ÜÂæàÂ§ö‰æøÊç∑ÁöÑÊ≥®ÂÖ•ÊñπÂºèÔºåÈÇ£‰πàÈÄöËøáBeanFactoryÁöÑgetBeanÊù•Ëé∑ÂèñBeanÊúâ‰ªÄ‰πàÂ•ΩÂ§ÑÂë¢ÔºüÊù•Áúã‰∏Ä‰∏™Âú∫ÊôØ„ÄÇ Áé∞Âú®Êúâ‰∏Ä‰∏™HelloServiceÔºåËøô‰∏™HelloServiceÂ∞±ÊòØÊâìÊãõÂëºÔºåÊàë‰ª¨ÈúÄË¶ÅÈÄöËøá‰∏çÂêåÁöÑËØ≠Ë®ÄÊù•ÂÆûÁé∞ÊâìÊãõÂëºÔºåÊØîÂ¶ÇÁî®‰∏≠ÊñáÔºåÁî®Ëã±Êñá„ÄÇ‰∏ÄËà¨ÁöÑÂÅöÊ≥ïÊòØÔºö 1234567891011121314151617public interface HelloService &#123; void sayHello();&#125;//Ëã±ÊñáÊâìÊãõÂëºÂÆûÁé∞public class GlmapperHelloServiceImpl implements HelloService &#123; public void sayHello() &#123; System.out.println("Hello Glmapper"); &#125;&#125;//‰∏≠ÊñáÊâìÊãõÂëºÂÆûÁé∞public class LeishuHelloServiceImpl implements HelloService &#123; public void sayHello() &#123; System.out.println("‰Ω†Â•ΩÔºåÁ£äÂèî"); &#125;&#125; ÂÆ¢Êà∑Á´ØÁ±ªÊù•Ë∞ÉÁî®Âä°ÂøÖ‰ºöÂá∫Áé∞‰∏ãÈù¢ÁöÑÊñπÂºèÔºö 123456if (condition==&quot;Ëã±Êñá&quot;)&#123; glmapperHelloService.sayHello();&#125;if (condition==&quot;‰∏≠Êñá&quot;)&#123; leishuHelloService.sayHello();&#125; Â¶ÇÊûúÊúâ‰∏ÄÂ§©ÔºåËÄÅÊùøËØ¥Êàë‰ª¨Ë¶ÅÂÅöÂõΩÈôÖÂåñÔºåË¶ÅÂÆûÁé∞ÂÖ®ÁêÉÊâÄÊúâÁöÑËØ≠Ë®ÄÊù•ÈóÆÂÄô„ÄÇ‰Ω†ÊòØËØ¥Â•ΩÁöÑÔºåËøòÊòØÊéßÂà∂‰∏ç‰ΩèË¶ÅÂä®ÊâãÂë¢Ôºü ÈÇ£‰πàÊúâÊ≤°Êúâ‰ªÄ‰πàÊñπÂºèÂèØ‰ª•Âä®ÊÄÅÁöÑÂéªÂÜ≥ÂÆöÊàëÁöÑÂÆ¢Êà∑Á´ØÁ±ªÂà∞Â∫ïÂéªË∞ÉÁî®Âì™‰∏ÄÁßçËØ≠Ë®ÄÂÆûÁé∞ÔºåËÄå‰∏çÊòØÁî®Ëøáif-elseÊñπÂºèÊù•ÁΩóÂàóÂë¢ÔºüÊòØÁöÑÔºåÂØπ‰∫éËøô‰∫õÈúÄË¶ÅÂä®ÊÄÅÁöÑÂéªËé∑ÂèñÂØπË±°ÁöÑÂú∫ÊôØÔºåBeanFactoryAwareÂ∞±ÂèØ‰ª•ÂæàÂ•ΩÁöÑÊêûÂÆö„ÄÇOKÔºåÊù•Áúã‰ª£Á†ÅÊîπÈÄ†Ôºö ÂºïÂÖ•BeanFactoryAwareÔºö 123456789101112131415161718192021222324252627282930/** * @description: ÂÆûÁé∞BeanFactoryAware ÔºåËÆ©ÂΩìÂâçbeanÊú¨Ë∫´ÂÖ∑Êúâ BeanFactory ÁöÑËÉΩÂäõ * * ÂÆûÁé∞ BeanFactoŒ∑Aware Êé•Âè£ÁöÑ bean ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆ Spring ÂÆπÂô®ÔºåË¢´ÂÆπÂô®ÂàõÂª∫‰ª•ÂêéÔºå * ÂÆÉ‰ºöÊã•Êúâ‰∏Ä‰∏™ÊåáÂêë Spring ÂÆπÂô®ÁöÑÂºïÁî®ÔºåÂèØ‰ª•Âà©Áî®ËØ•beanÊ†πÊçÆ‰º†ÂÖ•ÂèÇÊï∞Âä®ÊÄÅËé∑ÂèñË¢´springÂ∑•ÂéÇÂä†ËΩΩÁöÑbean * * @email: &lt;a href="glmapper_2018@163.com"&gt;&lt;/a&gt; * @author: guolei.sgl * @date: 18/7/29 */public class GlmapperBeanFactory implements BeanFactoryAware &#123; private BeanFactory beanFactory; public void setBeanFactory(BeanFactory beanFactory) throws BeansException &#123; this.beanFactory=beanFactory; &#125; /** * Êèê‰æõ‰∏Ä‰∏™execute ÊñπÊ≥ïÊù•ÂÆûÁé∞‰∏çÂêå‰∏öÂä°ÂÆûÁé∞Á±ªÁöÑË∞ÉÂ∫¶Âô®ÊñπÊ°à„ÄÇ * @param beanName */ public void execute(String beanName)&#123; HelloService helloService=(HelloService) beanFactory.getBean(beanName); helloService.sayHello(); &#125;&#125; ËøôÈáå‰∏∫‰∫ÜÈÄªËæëÊñπ‰æøÁêÜËß£ÔºåÂÜçÂä†ÂÖ•‰∏Ä‰∏™HelloFacade Á±ª,Ëøô‰∏™Á±ªÁöÑ‰ΩúÁî®Â∞±ÊòØÊåÅÊúâ‰∏Ä‰∏™BeanFactoryAwareÁöÑÂÆû‰æãÂØπË±°ÔºåÁÑ∂ÂêéÈÄöËøáHelloFacadeÂÆû‰æãÂØπË±°ÁöÑÊñπÊ≥ïÊù•Â±èËîΩÂ∫ïÂ±ÇBeanFactoryAwareÂÆû‰æãÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ 12345678910public class HelloFacade &#123; private GlmapperBeanFactory glmapperBeanFactory; //Ë∞ÉÁî®glmapperBeanFactoryÁöÑexecuteÊñπÊ≥ï public void sayHello(String beanName)&#123; glmapperBeanFactory.execute(beanName); &#125; public void setGlmapperBeanFactory(GlmapperBeanFactory beanFactory)&#123; this.glmapperBeanFactory = beanFactory; &#125;&#125; ÂÆ¢Êà∑Á´ØÁ±ª 1234567891011121314151617181920212223public class MainTest &#123; public static void main(String[] args) &#123; ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); HelloFacade helloFacade = (HelloFacade) context.getBean("helloFacade"); GlmapperBeanFactory glmapperBeanFactory = (GlmapperBeanFactory) context.getBean("glmapperBeanFactory"); //ËøôÈáåÂÖ∂ÂÆûÂèØ‰ª•‰∏çÈÄöËøásetÊñπÊ≥ïÊ≥®ÂÖ•Âà∞helloFacade‰∏≠Ôºå //ÂèØ‰ª•Âú®helloFacade‰∏≠ÈÄöËøáautowired //Ê≥®ÂÖ•ÔºõËøôÈáåÂú®‰ΩøÁî®mainÊñπÊ≥ïÊù•ÊâßË°åÈ™åËØÅÔºåÊâÄ‰ª•Â∞±ÊâãÂä®setËøõÂÖ•‰∫Ü helloFacade.setGlmapperBeanFactory(glmapperBeanFactory); //Ëøô‰∏™Âè™ÈúÄË¶Å‰º†ÂÖ•‰∏çÂêåHelloServiceÁöÑÂÆûÁé∞Á±ªÁöÑbeanNameÔºå //Â∞±ÂèØ‰ª•ÊâßË°å‰∏çÂêåÁöÑ‰∏öÂä°ÈÄªËæë helloFacade.sayHello("glmapperHelloService"); helloFacade.sayHello("leishuHelloService"); &#125;&#125; ÂèØ‰ª•ÁúãÂà∞Âú®Ë∞ÉÁî®ËÄÖÔºàÂÆ¢Êà∑Á´ØÔºâÁ±ª‰∏≠ÔºåÂè™ÈúÄË¶ÅÈÄöËøá‰∏Ä‰∏™beanNameÂ∞±ÂèØ‰ª•ÂÆûÁé∞‰∏çÂêåÂÆûÁé∞Á±ªÁöÑÂàáÊç¢ÔºåËÄå‰∏çÊòØÈÄöËøá‰∏ÄÂ†Üif-elseÊù•Âà§Êñ≠„ÄÇÂè¶Â§ñÊúâÁöÑÂ∞è‰ºô‰º¥ÂèØËÉΩ‰ºöËØ¥ÔºåÁ®ãÂ∫èÊÄé‰πàÁü•ÈÅìÁî®Âì™‰∏™beanNameÂë¢ÔºüÂÖ∂ÂÆûËøô‰∏™‰πüÂæàÁÆÄÂçïÔºåËøô‰∏™ÂèÇÊï∞Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰∏Ä‰∫õÈÄîÂæÑÊù•ÊãºÊé•ÂæóÂà∞ÔºåÊØîÂ¶Ç‰ΩøÁî®‰∏Ä‰∏™prefixÁî®Êù•ÊåáÂÆöËØ≠Ë®ÄÔºåprefix+HelloServiceÂ∞±ÂèØ‰ª•Á°ÆÂÆöÂîØ‰∏ÄÁöÑbeanName„ÄÇ Â∞èÁªìÊú¨Êù•ÊÉ≥ÁùÄÂú®‰∏ÄÁØáÊñáÁ´†ÈáåÈù¢ÊääÊâ©Â±ïÁÇπÈÉΩÂÜô‰∏Ä‰∏ãÁöÑÔºå‰ΩÜÊòØÂÆûÂú®Â§™Èïø‰∫Ü„ÄÇÂêéÈù¢Â∑Æ‰∏çÂ§öËøòÊúâ‰∏§ÁØá„ÄÇÊú¨Á≥ªÂàó‰∏≠ÊâÄÊúâÁöÑdemoÂèØ‰ª•Âú®githubËé∑ÂèñÔºå‰πüÊ¨¢ËøéÂ∞è‰ºô‰º¥ÊääËÉΩÂ§üÊÉ≥Âà∞ÁöÑÊâ©Â±ïÁÇπprËøáÊù•„ÄÇ glmapper-spring-extention]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>ËÅä‰∏ÄËÅä</tag>
        <tag>spring Êâ©Â±ïÊú∫Âà∂</tag>
        <tag>spring ‰∫ã‰ª∂Êú∫Âà∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÔºöSpringBoot ÈõÜÊàê SpringSession]]></title>
    <url>%2F2018%2F11%2F10%2Fspringsessionone%2F</url>
    <content type="text"><![CDATA[springSessionÊòØ spring Êóó‰∏ãÁöÑ‰∏Ä‰∏™È°πÁõÆÔºåÊää servlet ÂÆπÂô®ÂÆûÁé∞ÁöÑ httpSessionÊõøÊç¢‰∏∫springSessionÔºå‰∏ìÊ≥®‰∫éËß£ÂÜ≥sessionÁÆ°ÁêÜÈóÆÈ¢ò„ÄÇÂèØÁÆÄÂçïÂø´ÈÄü‰∏îÊó†ÁºùÁöÑÈõÜÊàêÂà∞Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠„ÄÇÊú¨ÊñáÈÄöËøá‰∏Ä‰∏™Ê°à‰æãÔºå‰ΩøÁî®SpringBootÊù•ÈõÜÊàê SpringSessionÔºåÂπ∂‰∏î‰ΩøÁî®Redis‰Ωú‰∏∫Â≠òÂÇ®Êù•ÂÆûË∑µ‰∏ãSpringSession ÁöÑ‰ΩøÁî®„ÄÇ ÁéØÂ¢ÉÂáÜÂ§áÂõ†‰∏∫ÈúÄË¶Å‰ΩøÁî®Redis‰Ωú‰∏∫Â∫ïÂ±ÇSessionÁöÑÂ≠òÂÇ®‰ªãË¥®ÔºåÂÆûÁé∞ÂàÜÂ∏ÉÂºèsessionÔºåÂõ†Ê≠§ÈúÄË¶ÅÂÆâË£ÖRedis„ÄÇ Redis ÂÆâË£Ö1„ÄÅ‰ªéÂÆòÁΩë‰∏ãËΩΩÊúÄÊñ∞ÁâàÁöÑRedis 2„ÄÅËß£Âéã 1tar zxvf redis-5.0.0.tar.gz 3„ÄÅÁºñËØëÊµãËØï 1sudo make test 4„ÄÅÁºñËØëÂÆâË£Ö 1sudo make install 5„ÄÅÂÆâË£ÖÈóÆÈ¢ò Â¶ÇÊûúÊÇ®‰πãÂâçÂÆâË£ÖËøáÔºåÈáçÂ§çÂÆâË£Ö‰∏îÊ≤°ÊúâÂç∏ËΩΩÂπ≤ÂáÄÁöÑËØùÔºå‰ºöÊä•‰∏ãÈù¢ÁöÑÈîô 12make[1]: *** [test] Error 1 make: *** [test] Error 2 Ëß£ÂÜ≥Ëøô‰∏™ÈîôËØØÔºåÊâßË°å‰∏ãÈù¢ÁöÑËØ≠Âè•Âç≥ÂèØÔºö 123make distclean make make test Ê≠£Á°ÆÂÆâË£ÖÂßøÂäøÂ¶Ç‰∏ãÔºö 6„ÄÅÂêØÂä®RedisÂú®ÊÇ®ÁöÑRedisÂÆâË£ÖÁõÆÂΩï‰∏ãÔºåÊúâ redis-server ÔºåÊâßË°åËØ•ËÑöÊú¨ÂëΩ‰ª§Ôºö OKÔºåÂà∞ËøôÈáåÔºåRedisÁöÑÂÆâË£ÖÂ∑•‰ΩúÂÆåÊØï„ÄÇ SpringBoot Â∑•Á®ãÂáÜÂ§áËøôÈáåÊàë‰ª¨Áõ¥Êé•ÈÄöËøáIdeaÊù•ÊûÑÂª∫Êàë‰ª¨ÁöÑSpringBootÂ∑•Á®ã„ÄÇ 1File-&gt;New-&gt;Project : Spring Initializr OKÔºåSpringBoot Â∑•Á®ãÂáÜÂ§áÂÆåÊØïÔºåËøôÈáåÈÄâÊã©ÂàõÂª∫ÁöÑÊòØ‰∏Ä‰∏™WebÂ∑•Á®ã„ÄÇ ÈõÜÊàêÈõÜÊàê‰∏ªË¶ÅÊòØ‰æùËµñÂºïÂÖ•ÔºåËøôÈáåÈúÄË¶ÅredisÂíåsessionÁöÑ‰æùËµñ ‰æùËµñÂºïÂÖ•123456789101112&lt;dependencies&gt; &lt;!--redis ‰æùËµñ--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--sessions ‰æùËµñ--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.session&lt;/groupId&gt; &lt;artifactId&gt;spring-session-data-redis&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ÈÖçÁΩÆapplication.properties123456789#ÊúçÂä°Á´ØÂè£server.port=8080#redi‰∏ªÊú∫Âú∞ÂùÄspring.redis.host=localhost#redisÊúçÂä°Á´ØÂè£spring.redis.port=6379# spring session‰ΩøÁî®Â≠òÂÇ®Á±ªÂûãÔºåspirngbootÈªòËÆ§Â∞±ÊòØ‰ΩøÁî®redisÊñπÂºèÔºåÂ¶ÇÊûú‰∏çÊÉ≥Áî®ÂèØ‰ª•Â°´none„ÄÇspring.session.store-type=redis Âú®ÂêØÂä®Á±ª‰∏≠Âä†ÂÖ•@EnableRedisHttpSession Ê≥®Ëß£1234567@SpringBootApplication@EnableRedisHttpSessionpublic class SpringBootSessionApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBootSessionApplication.class, args); &#125;&#125; ÊµãËØïÂÖàÊù•ÁºñÂÜô‰∏Ä‰∏™Controller 123456789101112131415161718192021222324252627/** * SessionController * * @author: glmapper@leishu * @since: 18/11/3 ‰∏ãÂçà3:16 * @version 1.0 **/@Controller@RequestMapping(value = "/")public class SessionController &#123; @ResponseBody @RequestMapping(value = "/session") public Map&lt;String, Object&gt; getSession(HttpServletRequest request) &#123; request.getSession().setAttribute("userName", "glmapper"); Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("sessionId", request.getSession().getId()); return map; &#125; @ResponseBody @RequestMapping(value = "/get") public String get(HttpServletRequest request) &#123; String userName = (String) request.getSession().getAttribute("userName"); return userName; &#125;&#125; ÊµãËØïÁªìÊûúÂêØÂä®SpringBoot Â∑•Á®ãÔºõÁÑ∂ÂêéÊµèËßàÂô®‰∏≠ËæìÂÖ•Âú∞ÂùÄ http://localhost:8080/sessionÔºõ ËøôÈáåÂØπÂ∫îÊâßË°åÁöÑÊòØÊàë‰ª¨‰∏äÈù¢Controller‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÊñπÊ≥ïgetSessionÔºåËøô‰∏™ÊñπÊ≥ïÂêësession‰∏≠ËÆæÁΩÆ‰∫Ü‰∏Ä‰∏™ÂÄº„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ÊâßË°åÔºöhttp://localhost:8080/get ËøôÈáåÊòØ‰ªésession‰∏≠ÂèñÂÄº: Âà∞Ê≠§ÔºåSpringBoot Êï¥Âêà SpringSession ÁöÑËøáÁ®ãÂ∞±ÂÆåÊàê‰∫Ü„ÄÇËøôÈáåÊàë‰ª¨Âè™ÊòØÂºïÂÖ•‰∫Ü‰æùËµñÔºåÁÑ∂ÂêéÂÅö‰∫ÜÁÆÄÂçïÁöÑÈÖçÁΩÆÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑËØ∑Ê±ÇÊòØÂ¶Ç‰ΩïË¢´ SpringSession Â§ÑÁêÜÁöÑÂë¢Ôºü‰ªéÊàë‰ª¨‰∏ÄË¥ØÁöÑËÆ§Áü•Êù•ÁúãÔºåÂØπ‰∫éÂü∫‰∫éServletËßÑËåÉÁöÑÂÆπÂô®ÔºàSpringBoot ‰ΩøÁî®ÁöÑÊòØÂµåÂÖ•ÂºèTomcatÔºâÁöÑÂ∫îÁî®ÔºåËØ∑Ê±ÇÊúÄÂÖàË¢´Â§ÑÁêÜÁöÑÊòØFilter„ÄÇÊàë‰ª¨Âú®Âü∫‰∫éSpring+SpringMvcËøôÂ•óÊäÄÊúØÊ†àÂºÄÂèëÊó∂,Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÂÅöÊùÉÈôêÁÆ°ÁêÜÔºåÈÄöËøá‰ºöÂü∫‰∫éFilterÊàñËÄÖÊã¶Êà™Âô®„ÄÇ‰ΩÜÊòØËøôÈáåË≤å‰ººÊàë‰ª¨‰ªÄ‰πà‰πüÊ≤°ÂÅöÔºå‰ΩÜÊòØËØ∑Ê±ÇÁ°ÆÂÆûË¢´SpringSessionÂ§ÑÁêÜ‰∫Ü„ÄÇOKÔºåÊàë‰ª¨Êù•Êâí‰∏ÄÊâí„ÄÇ SpringSession ÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÔºü‰∏äÈù¢ËøôÂº†Êà™ÂõæÊÉ≥ÂøÖÂ§ßÂÆ∂ÈÉΩ‰∏çÈôåÁîüÔºåÊòØSpringBootÁöÑÂêØÂä®Êó•ÂøóÔºõ‰∏äÂõæÁ∫¢Ëâ≤Ê°ÜÂÜÖÁöÑÊòØÂΩìÂâçÂ∫îÁî®Ê≥®ÂÜåÊòØFilter‰ø°ÊÅØÔºå‰ªéËøôÈáåÂèØ‰ª•ÁúãÂà∞Êúâ‰∏™Âíå session ÊúâÂÖ≥ÁöÑFilterÔºösessionRepositoryFilterÔºõËøô‰∏™beanÂØπÂ∫îÁöÑÁ±ªÊòØÔºö 12org.springframework.boot.autoconfigure.session.SessionRepositoryFilterConfiguration.ConditionalOnBean=org.springframework.session.web.http.SessionRepositoryFilter Âú®ËøôÈáåÊâæÂà∞‰∫Ü ËøôÈáåÊ∂âÂèäÂà∞SpringBootÁöÑËá™Âä®ÈÖçÁΩÆÔºå‰ªéspring-boot-autoconfigÂåÖ‰∏ãÂä†ËΩΩspring-autoconfigure-metadata.properties ÈÖçÁΩÆÊñá‰ª∂ÔºåÁÑ∂ÂêéËé∑ÂèñÊâÄÊúâÊîØÊåÅËá™Âä®ÈÖçÁΩÆÁöÑ‰ø°ÊÅØÔºõSpringSession ‰πüÂú®ÂÖ∂‰∏≠„ÄÇÂÖ≥‰∫éÂ¶Ç‰ΩïÂä†ËΩΩÂπ∂‰∏îÊ≥®ÂÜå‰∏çÂú®Êú¨ÊñáÁöÑËåÉÁï¥‰πãÂÜÖÔºåÊàë‰ª¨ÁªßÁª≠Êù•ÂàÜÊûêSpringSessionÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇ SpringSession ÁöÑÂ§ÑÁêÜËøáÁ®ã‰ªé‰∏äÈù¢SpringBootÁöÑÂêØÂä®ËøáÁ®ãÊàë‰ª¨ÊâæÂà∞‰∫ÜÂ§ÑÁêÜsessionÁöÑFilterÔºåÁÑ∂ÂêéÁü•ÈÅì‰∫ÜÂÆÉÊòØÈÄöËøáËá™Âä®ÈÖçÁΩÆÁöÑÊñπÂºèË¢´Ê≥®ÂÜåÂà∞ÂΩìÂâçÁöÑÂÆπÂô®Âπ∂‰∏îÊù•Â§ÑÁêÜËØ∑Ê±Ç„ÄÇ123@Order(SessionRepositoryFilter.DEFAULT_ORDER)public class SessionRepositoryFilter&lt;S extends Session&gt; extends OncePerRequestFilter &#123; ‰ªéSessionRepositoryFilterÁöÑÂÆö‰πâÊù•ÁúãÔºö 1„ÄÅ‰ΩøÁî®‰∫ÜOrderÔºåÂπ∂‰∏îÈÖçÁΩÆ‰∫Ü‰∏Ä‰∏™ÂæàÂ∞èÁöÑÂÄºÔºàInteger.MIN_VALUE + 50ÔºâÔºå‰ª•Ê≠§Êù•Á°Æ‰øùsessionÁöÑFilterÂú®FilterÈìæ‰∏≠Ë¢´‰ºòÂÖàÊâßË°å„ÄÇ 2„ÄÅÈõÜÊàê‰∫ÜOncePerRequestFilterÔºåÁ°Æ‰øùÂú®‰∏ÄÊ¨°ËØ∑Ê±ÇÂè™ÈÄöËøá‰∏ÄÊ¨°filterÔºåËÄå‰∏çÈúÄË¶ÅÈáçÂ§çÊâßË°å ‰∏∫‰ªÄ‰πà session ÁöÑ Filter Ë¶ÅË¢´‰ºòÂÖàÊâßË°åÂë¢ÔºüÂõ†‰∏∫Êàë‰ª¨ÁöÑËØ∑Ê±ÇË¢´ÂåÖË£Ö‰∫ÜÔºåÂ¶ÇÊûúSessionRepositoryFilter‰∏ç‰ºòÂÖàÂ§ÑÁêÜËØ∑Ê±ÇÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂêéÁª≠ÁöÑËØ∑Ê±ÇË°å‰∏∫‰∏ç‰∏ÄËá¥ÔºåËøôÈáåÊ∂âÂèäÂà∞ springSessionÊó†ÁºùÊõøÊç¢Â∫îÁî®ÊúçÂä°Âô®ÁöÑrequestÁöÑÂéüÁêÜÔºö 1.Ëá™ÂÆö‰πâ‰∏™FilterÔºåÂÆûÁé∞doFilterÊñπÊ≥ï 2.ÁªßÊâø HttpServletRequestWrapper „ÄÅHttpServletResponseWrapper Á±ªÔºåÈáçÂÜôgetSessionÁ≠âÁõ∏ÂÖ≥ÊñπÊ≥ï(Âú®Ëøô‰∫õÊñπÊ≥ïÈáåË∞ÉÁî®Áõ∏ÂÖ≥ÁöÑ sessionÂ≠òÂÇ®ÂÆπÂô®Êìç‰ΩúÁ±ª)„ÄÇ 3.Ëá™ÂÆö‰πârequestÂíåresponseÁ±ªÔºõÂπ∂ÊääÂÆÉ‰ª¨ÂàÜÂà´‰º†ÈÄíÂà∞ËøáÊª§Âô®Èìæ 4.ÊääËØ•filterÈÖçÁΩÆÂà∞ËøáÊª§Âô®ÈìæÁöÑÁ¨¨‰∏Ä‰∏™‰ΩçÁΩÆ‰∏ä OKÔºå‰∫ÜËß£‰∫ÜËøô‰∫õËÉåÊôØÔºåÊàë‰ª¨Êù•Ë∑üË∏™‰∏ãÊï¥‰∏™Â§ÑÁêÜÊµÅÁ®ã„ÄÇ 1„ÄÅÊñ≠ÁÇπÂà∞ doFilterInternal ‰ªéËøôÈáåÂèØ‰ª•ÁúãÂà∞requestÂíåresponseÁ±ªË¢´ÂåÖË£Ö‰∫Ü„ÄÇ 2„ÄÅÊñ≠ÁÇπÂà∞ getSessionËøôÈáåÊòØ‰ªéRedis‰∏≠ÊãøÊàë‰ª¨sessionÊï∞ÊçÆÁöÑÂú∞Êñπ ÂÖà‰ªéÊàë‰ª¨ÂΩìÂâçservletÂÆπÂô®‰∏≠ÂéªÊãøÔºåÂ¶ÇÊûúÊãøÂà∞ÂàôÁõ¥Êé•ËøîÂõû ÂéªRedis‰∏≠Âèñ ËøôÈáå‰ºöÊúâ‰∏Ä‰∏™ÁºìÂ≠òÂ§ÑÁêÜÔºåÂπ∂ÈùûÊòØÊØèÊ¨°ÈÉΩÂà∞Reids‰∏≠ÂéªÊü•‰∏ÄÊ¨°ÔºåÈÅøÂÖç‰∏ÄÊ¨°‰∏éReidsÁöÑ‰∫§‰∫í„ÄÇ Â¶ÇÊûúÁºìÂ≠òÂΩìÂâçÂ∫îÁî®ÂÆπÂô®ÁºìÂ≠ò‰∏≠ÊúâÔºåÂàôÁõ¥Êé•ËøîÂõûÂΩìÂâçË¢´ÁºìÂ≠òÁöÑsession Â¶ÇÊûúÊ≤°ÊúâÔºåÂàô‰ªéËØ∑Ê±Ç‰∏≠Ëé∑ÂèñsessionIdÔºåÂπ∂‰∏îÊ†πÊçÆÂΩìÂâçsessionIdÂéªReids‰∏≠Êü•ÊâæsessionÊï∞ÊçÆ Êõ¥Êñ∞ÁºìÂ≠òsessionÔºåsessionId,requestedSessionCachedÁ≠âÊï∞ÊçÆÁä∂ÊÄÅ Â¶ÇÊûúRedis‰∏≠ÊúâÔºåÂàôÊõ¥Êñ∞sessionÁõ∏ÂÖ≥‰ø°ÊÅØÂπ∂ËøîÂõû Â¶ÇÊûúReids‰∏≠Ê≤°ÊúâÊâæÂà∞ÔºåÂàôÊ†πÊçÆ create Êù•Âà§Êñ≠ÊòØÂê¶ÂàõÂª∫Êñ∞ÁöÑsession„ÄÇ Êñ≠ÁÇπÂà∞ readCookieValuesSpringSessionÊèê‰æõ‰∫Ü‰∏§Áßç‰øùÂ≠òÂíå‰º†ÈÄíSessionIdÁöÑÊñπÂºèÔºå‰∏ÄÁßçÊòØÂü∫‰∫éCookieÁöÑÔºå‰∏ÄÁßçÊòØÂü∫‰∫éHeaderÁöÑ„ÄÇSpringSession‰∏≠ÈªòËÆ§‰ΩøÁî®ÁöÑÊòØÂü∫‰∫éCookieÁöÑÊñπÂºè„ÄÇreadCookieValues Â∞±ÊòØÂÆûÁé∞Â¶Ç‰Ωï‰ªéCookie‰∏≠Ëé∑ÂèñsessionIdÁöÑ„ÄÇ Ëøô‰∏™ËøáÁ®ãÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂÖàÊòØ‰ªérequest‰∏≠Ëé∑ÂèñÂΩìÂâçËØ∑Ê±ÇÊê∫Â∏¶ÁöÑÊâÄ‰ª•ÁöÑCookie‰ø°ÊÅØÔºåÁÑ∂ÂêéÂ∞ÜÂåπÈÖçÂà∞ÁöÑ cookieName ‰∏∫ ‚ÄúSESSION‚Äù ÁöÑCookieËøõË°åËß£Êûê„ÄÇ Êñ≠ÁÇπÂà∞ RedisOperationsSessionRepository -&gt; getSessionËøôÈáåÊòØ‰ªéRedis‰∏≠ÂèñsessionÊï∞ÊçÆÁöÑÂú∞Êñπ Ê†πÊçÆsessionId‰ªé Redis‰∏≠ÂèñÂà∞ entries Êï∞ÊçÆ ÊûÑÂª∫ RedisSession Âπ∂ËøîÂõû Êñ≠ÁÇπÂà∞ commitSessioncommitSession‰ΩúÁî®ÊòØÈÄöËøáHttpSessionIdResolver Â∞ÜsessionIdÂÜôÂà∞responseÔºåÂπ∂‰∏îËøõË°åÊåÅ‰πÖÂåñ„ÄÇ ËøôÈáåÁöÑ session ÂÖ∂ÂÆûÊòØÂ∑≤ÁªèÊõ¥Êñ∞ËøáÁä∂ÊÄÅÁöÑÔºåÊØîÂ¶ÇÈáçÊñ∞ËÆæÁΩÆ‰∫Ü session ÁöÑËøáÊúüÊó∂Èó¥Á≠â„ÄÇsession Êèê‰∫§ÂÆûÈôÖ‰∏äÂ∞±ÊÑèÂë≥ÁùÄÂΩìÂâçËØ∑Ê±ÇÂ∑≤ÁªèÂ§ÑÁêÜÂÆåÊØï‰∫Ü„ÄÇ Â∞èÁªìÊú¨ÊñáÂÖà‰ªãÁªç‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® SpringBoot ÈõÜÊàê SpringSessionÔºåÂπ∂‰∏î‰ª• Redis ‰Ωú‰∏∫Â≠òÂÇ®„ÄÇÁÑ∂ÂêéÁÆÄÂçïÂàÜÊûê‰∫Ü SpringSession ÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÊú¨ÊñáÂØπ SpringSession ÁöÑÂéüÁêÜÈÉ®ÂàÜÊ≤°ÊúâËøõË°åÊ∑±ÂÖ•ÂàÜÊûêÔºå‰∏ã‰∏ÄÁØáÂàÜÊûê‰∏ãSpringSessionÁöÑÂéüÁêÜ„ÄÇ]]></content>
      <categories>
        <category>spring</category>
        <category>session</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>session</tag>
      </tags>
  </entry>
</search>

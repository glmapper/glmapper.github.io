{"title":"基于 CentOS 7.6 + Samba 搭建文件服务器","uid":"9d6bba182f887ce7358e9129a5f246bb","slug":"tools/tool-samba-file-server","date":"2023-05-31T02:00:35.000Z","updated":"2024-07-05T04:09:05.849Z","comments":true,"path":"api/articles/tools/tool-samba-file-server.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":null,"content":"<p>出于产品、解决方案同事的诉求，需要搭建一个用于共享文件的平台，因此基于 Samba 搭建了一个共享文件服务器，这里记录一下，以便用于后续维护参阅。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p> Samba 是 SMB&#x2F;CIFS 网络文件共享协议的免费开放源重新实现，该协议允许最终用户访问文件，打印机和其他共享资源。</p></blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><ul>\n<li>CentOS 7.6</li>\n<li>Samba 4.10.16</li>\n<li>能够访问互联网环境</li>\n</ul>\n<h2 id=\"安装-Samba\"><a href=\"#安装-Samba\" class=\"headerlink\" title=\"安装 Samba\"></a>安装 Samba</h2><p>执行安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install samba samba-client</span><br></pre></td></tr></table></figure>\n\n<p>安装完成后，开机启动，并且启用服务：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start smb.service </span><br><span class=\"line\">sudo systemctl enable smb.service</span><br></pre></td></tr></table></figure>\n\n<p><code>smb</code>  服务提供文件共享和打印服务，并侦听 TCP 端口 139 和 445。<code>nmb</code>服务向客户端提供基于 IP 命名服务的 NetBIOS，并侦听 UDP 端口137。</p>\n<h2 id=\"配置防火墙\"><a href=\"#配置防火墙\" class=\"headerlink\" title=\"配置防火墙\"></a>配置防火墙</h2><p>执行如下命令，允许 samba 服务访问</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# firewall-cmd --permanent --zone=public --add-service=samba</span><br><span class=\"line\">success</span><br><span class=\"line\">[root@localhost ~]# firewall-cmd --zone=public --add-service=samba</span><br><span class=\"line\">success</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建Samba用户和目录结构\"><a href=\"#创建Samba用户和目录结构\" class=\"headerlink\" title=\"创建Samba用户和目录结构\"></a>创建Samba用户和目录结构</h2><p>在确定文件或者用户目录之前要看下磁盘的空间情况</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/dev/mapper/centos-root   50G  1.4G   49G    3% /</span><br><span class=\"line\">devtmpfs                 3.9G     0  3.9G    0% /dev</span><br><span class=\"line\">tmpfs                    3.9G     0  3.9G    0% /dev/shm</span><br><span class=\"line\">tmpfs                    3.9G   17M  3.9G    1% /run</span><br><span class=\"line\">tmpfs                    3.9G     0  3.9G    0% /sys/fs/cgroup</span><br><span class=\"line\">/dev/vda1               1014M  146M  869M   15% /boot</span><br><span class=\"line\">/dev/mapper/centos-home  142G   33M  142G    1% /home</span><br><span class=\"line\">tmpfs                    783M     0  783M    0% /run/user/0</span><br></pre></td></tr></table></figure>\n\n<p>我的系统在 &#x2F;home 分配的空间最大，因此这里将所有 Samba 目录和数据都放在 &#x2F;home 空间下；新建一个 &#x2F;home&#x2F;samba</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /home/samba\t\t</span><br></pre></td></tr></table></figure>\n\n<p>创建一个名为<code>sambashare</code>的新组。然后，我们将所有 Samba 用户添加到该组中。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo groupadd sambashare</span><br></pre></td></tr></table></figure>\n\n<p>将<code>/home/samba</code>目录组所有权设置为<code>sambashare</code>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">do chgrp sambashare /home/samba</span><br></pre></td></tr></table></figure>\n\n\n\n<p>Samba 使用 Linux 用户和组权限系统，但它具有与标准 Linux 身份验证分开的身份验证机制。下面将使用标准的 Linux <code>useradd</code>工具创建用户，然后使用<code>smbpasswd</code>实用程序设置用户密码。</p>\n<h2 id=\"创建-Samba-用户\"><a href=\"#创建-Samba-用户\" class=\"headerlink\" title=\"创建 Samba 用户\"></a>创建 Samba 用户</h2><p>创建名为<code>glmapper</code>的新用户，命令如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo useradd -M -d /home/samba/glmapper -s /usr/sbin/nologin -G sambashare glmapper</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>useradd</code>选项的含义如下：</p>\n<ul>\n<li><code>-M</code> 不创建用户的主目录。(将手动创建此目录)</li>\n<li><code>-d /home/samba/glmapper</code>  将用户的主目录设置为<code>/home/samba/glmapper</code>。</li>\n<li><code>-s /usr/sbin/nologin</code>  禁止该用户访问 shell。</li>\n<li><code>-G sambashare</code>  将用户添加到<code>sambashare</code>组。</li>\n</ul>\n<p>创建用户的主目录，并将目录所有权设置为用户 glmapper 和组 sambashare：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir /home/samba/glmapper</span><br><span class=\"line\">sudo chown glmapper:sambashare /home/samba/glmapper</span><br></pre></td></tr></table></figure>\n\n\n\n<p>以下命令将 setgid 位添加到<code>/home/samba/glmapper</code>目录，以便该目录中的新创建文件将继承父目录的组。这样，无论哪个用户创建一个新文件，该文件都将具有<code>sambashare</code>的组所有者。例如，如果您未将<a href=\"https://www.myfreax.com/chmod-command-in-linux/\">目录的权限</a>设置为<code>2770</code>，并且<code>sadmin</code>用户创建了一个新文件，则用户<code>glmapper</code>将无法读取&#x2F;写入该文件。 165]</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod 2770 /home/samba/glmapper</span><br></pre></td></tr></table></figure>\n\n<p>设置用户密码将<code>glmapper</code>用户帐户添加到 Samba 数据库：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#系统将提示输入并确认用户密码。</span></span><br><span class=\"line\">sudo smbpasswd -a glmapper</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#输入成功之后</span></span><br><span class=\"line\">New SMB password:</span><br><span class=\"line\">Retype new SMB password:</span><br><span class=\"line\">Added user glmapper.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 启用 glmapper 账户，成功会显示 Enabled user glmapper.</span></span><br><span class=\"line\">sudo smbpasswd -e josh   </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>如果再需要创建其他用户，流程就是和创建 glmapper 的流程是一样的了。</p>\n<h2 id=\"创建-用户和组-sadmin\"><a href=\"#创建-用户和组-sadmin\" class=\"headerlink\" title=\"创建 用户和组 sadmin\"></a>创建 用户和组 sadmin</h2><p>sadmin 组的所有成员将具有管理权限，如果期望其他用户也具备管理权限，则可以将用户加入到 sadmin 这个组中。创建管理用户：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo useradd -M -d /home/samba/users -s /usr/sbin/nologin -G sambashare sadmin</span><br></pre></td></tr></table></figure>\n\n<p>上面的命令还创建了一个组<code>sadmin</code>，并将用户添加到<code>sadmin</code>和<code>sambashare</code>组中。</p>\n<p>设置密码并启用用户：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 设置密码</span></span><br><span class=\"line\">sudo smbpasswd -a sadmin</span><br><span class=\"line\"><span class=\"comment\"># 启用账户</span></span><br><span class=\"line\">sudo smbpasswd -e sadmin</span><br></pre></td></tr></table></figure>\n\n<p>创建<code>Users</code>共享目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建目录</span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /home/samba/users</span><br><span class=\"line\"><span class=\"comment\"># 将目录所有权设置为用户 sadmin 和组 sambashare：</span></span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> sadmin:sambashare /home/samba/users</span><br></pre></td></tr></table></figure>\n\n<p>所有身份验证的用户都可以访问此目录。以下命令配置对<code>/home/samba/users</code>目录中<code>sambashare</code>组成员的写&#x2F;读访问：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 2770 /home/samba/users</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"配置-Samba-共享\"><a href=\"#配置-Samba-共享\" class=\"headerlink\" title=\"配置 Samba 共享\"></a>配置 Samba 共享</h2><p>编辑 Samba 配置文件 <code>vi /etc/samba/smb.conf</code> ，并将下面的配置添加到配置文件中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"built_in\">users</span>]  <span class=\"comment\"># 登录时将使用的共享名称</span></span><br><span class=\"line\">    path = /home/samba/users   <span class=\"comment\"># 分享的目录路径</span></span><br><span class=\"line\">    browseable = <span class=\"built_in\">yes</span> <span class=\"comment\"># 是否应在可用共享列表中列出该共享。设置为no，其他用户将看不到共享。</span></span><br><span class=\"line\">    <span class=\"built_in\">read</span> only = no   <span class=\"comment\"># valid users 列表中指定的用户是否能够写入此共享</span></span><br><span class=\"line\">    force create mode = 0660    <span class=\"comment\"># 设置此共享中新创建文件的权限。</span></span><br><span class=\"line\">    force directory mode = 2770 <span class=\"comment\"># 设置此共享中新创建目录的权限。</span></span><br><span class=\"line\">    valid <span class=\"built_in\">users</span> = @sambashare @sadmin <span class=\"comment\"># 允许访问共享的用户和组的列表。组以@符号为前缀。</span></span><br><span class=\"line\"></span><br><span class=\"line\">[glmapper]</span><br><span class=\"line\">    path = /home/samba/glmapper</span><br><span class=\"line\">    browseable = no</span><br><span class=\"line\">    <span class=\"built_in\">read</span> only = no</span><br><span class=\"line\">    force create mode = 0660</span><br><span class=\"line\">    force directory mode = 2770</span><br><span class=\"line\">    valid <span class=\"built_in\">users</span> = glmapper @sadmin</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置完成后，重新启动 Samba 服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart smb.service</span><br><span class=\"line\">sudo systemctl restart nmb.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用-win-配置连接到-Samba-共享\"><a href=\"#使用-win-配置连接到-Samba-共享\" class=\"headerlink\" title=\"使用 win 配置连接到 Samba 共享\"></a>使用 win 配置连接到 Samba 共享</h2><p>下面是使用 Windows File Explore 访问共享的步骤：</p>\n<ul>\n<li>1、打开文件管理器，右击 “此电脑”</li>\n<li>2、选择 “添加一个网络位置”，然后点击下一步</li>\n<li>3、在 “Internet 或者网络地址” 中，输入 Samba 共享的地址 <code>\\\\192.168.1.136\\glmapper</code> (192.168.1.136 是我的主机 IP，glmapper 是我的共享目录)</li>\n<li>4、单机下一步，这里会提示你输入登录凭证（然后输入前面创建用户所设置的用户名和密码即可）</li>\n<li>5、下一步… 完成</li>\n</ul>\n<p>至此就可以在本地磁盘看到映射的服务器了。</p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>在配置完成之后，可以正常连接到文件服务器，并且也可以看到相应的目录，但是当我创建文件时，提示没有权限。从前面的用户&#x2F;组授权来看，完全是没有问题的。最后咨询了下 IT 部门的同事，猜测可能是 SELinux  禁止网络上对 Samba 服务器上的共享目录进行写操作导致；尝试执行 <code>setenforce 0</code> 之后无写权限的问题解决了。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>SELinux 的作用：</p>\n<ul>\n<li>1、通过对进程和文件资源采用 MAC 控制方式，为 Linux 系统提供了改进的安全性；</li>\n<li>2、赋予了主体最小的访问特权，最大限度地减小系统中服务进程可访问的资源，可以防止主体对其他用户或进程产生不利的影响；</li>\n<li>3、每个进程都有自己的运行区域，各进程仅运行在自己的域内，无法访问其他进程和文件；</li>\n<li>4、SELinux 能最大程序上限制 Linux 系统中的恶意代码活动。</li>\n</ul>\n<p>setenforce  设置</p>\n<ul>\n<li>1  设置 SELinux  成为 enforcing 模式</li>\n<li>0  设置 SELinux  成为 permissive 模式</li>\n</ul></blockquote>\n","text":"出于产品、解决方案同事的诉求，需要搭建一个用于共享文件的平台，因此基于 Samba 搭建了一个共享文件服务器，这里记录一下，以便用于后续维护参阅。 Samba ...","permalink":"/post/tools/tool-samba-file-server","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"工具","slug":"工具","count":3,"path":"api/categories/工具.json"}],"tags":[{"name":"tool","slug":"tool","count":2,"path":"api/tags/tool.json"},{"name":"samba","slug":"samba","count":1,"path":"api/tags/samba.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">环境</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Samba\"><span class=\"toc-text\">安装 Samba</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99\"><span class=\"toc-text\">配置防火墙</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BASamba%E7%94%A8%E6%88%B7%E5%92%8C%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">创建Samba用户和目录结构</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA-Samba-%E7%94%A8%E6%88%B7\"><span class=\"toc-text\">创建 Samba 用户</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84-sadmin\"><span class=\"toc-text\">创建 用户和组 sadmin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-Samba-%E5%85%B1%E4%BA%AB\"><span class=\"toc-text\">配置 Samba 共享</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-win-%E9%85%8D%E7%BD%AE%E8%BF%9E%E6%8E%A5%E5%88%B0-Samba-%E5%85%B1%E4%BA%AB\"><span class=\"toc-text\">使用 win 配置连接到 Samba 共享</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li></ol>","author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Linux nohup 命令","uid":"abbcd011f0be9dc628ed542e40f49896","slug":"linux/linux-no-hangup","date":"2023-08-15T02:12:22.000Z","updated":"2024-07-05T04:09:05.775Z","comments":true,"path":"api/articles/linux/linux-no-hangup.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":null,"text":"nohup 表示不挂断地运行命令，是 no hangup 的缩写，语法格式如下： 1nohup Command [ Arg ... ] [ & ] nohup ...","permalink":"/post/linux/linux-no-hangup","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":9,"path":"api/categories/Linux.json"}],"tags":[{"name":"linux","slug":"linux","count":9,"path":"api/tags/linux.json"},{"name":"nohup","slug":"nohup","count":1,"path":"api/tags/nohup.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}},"next_post":{"title":"使用 ngrok 解决测试时外部系统无法访问本地网络问题","uid":"c71afb276dbf15777a4f23717015b86c","slug":"tools/tool-ngrok","date":"2023-04-26T02:21:59.000Z","updated":"2024-07-05T04:09:05.849Z","comments":true,"path":"api/articles/tools/tool-ngrok.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"text":"问题日常开发中有一些场景会有这样的诉求，就是外部系统 callback 回调本系统，但是本系统没有提供外部访问的 IP 或者域名；比如微信公众号测试号开发，就需...","permalink":"/post/tools/tool-ngrok","photos":[],"count_time":{"symbolsCount":741,"symbolsTime":"1 mins."},"categories":[{"name":"工具","slug":"工具","count":3,"path":"api/categories/工具.json"}],"tags":[{"name":"tool","slug":"tool","count":2,"path":"api/tags/tool.json"},{"name":"ngrok","slug":"ngrok","count":1,"path":"api/tags/ngrok.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}}}
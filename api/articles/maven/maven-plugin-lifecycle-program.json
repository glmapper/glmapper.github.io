{"title":"聊一聊 maven 生命周期和 maven 插件编写","uid":"366cd935770e27ff74dc4ef2425c6648","slug":"maven/maven-plugin-lifecycle-program","date":"2021-01-19T03:05:33.000Z","updated":"2024-07-05T04:09:05.782Z","comments":true,"path":"api/articles/maven/maven-plugin-lifecycle-program.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>原文：<a href=\"https://juejin.cn/post/6919490393893502984\">https://juejin.cn/post/6919490393893502984</a></p></blockquote>\n<p>最近接到一个业务同学的诉求：用户会在他们大数据平台新建很多模型表，但是再编写业务代码时，需要手动的去创建和模型表对应的 DO 类，那对于有少量表的情况还可以接受，但是对于十几张甚至几十张表的情况，就会很头疼。</p>\n<p>我们知道 mybatis 实际上是有提供类似插件工具（mybatis-generator）的，社区也有非常多类似的代码生成工具，但是受限于一些情况，没有办法采用它们，那最简单的就是自己写个插件来完成这种工作量大且重复性高的事情。</p>\n<span id=\"more\"></span>\n\n<p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d616d689d7545208b6e196d5d427866~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>maven 大家一定都不陌生，这篇文章不对 maven 中的一些概念和插件生命周期进行说明，网上资料很多，仅记录如何去如何编写一个 maven 插件。</p>\n<p>maven 插件和普通的 maven 项目的区别不大，它也有自己的 GAV。区别在于， 每一个 maven 插件会包含了一些列的 goal，每一个 goal 对应于一个 Mojo 类，这个 Mojo 类需要实现org.apache.maven.plugin.Mojo 这个接口，Mojo 接口中提供了一个需要子类实现的 execute 方法。在实际的开发插件工作中，我们的任务其实就是实现这个 execute 方法里面的逻辑，在 execute 方法中去把插件需要做的事情处理好。下面先简单介绍下 maven 里面的一些基本知识：生命周期、阶段、goal，最后再来写一个 maven 插件。</p>\n<h2 id=\"maven-生命周期\"><a href=\"#maven-生命周期\" class=\"headerlink\" title=\"maven 生命周期\"></a>maven 生命周期</h2><p>Maven 构建遵循特定的生命周期来部署和分发目标项目，maven 中有三个内置的生命周期：</p>\n<ul>\n<li>default：负责项目部署的主要生命周期</li>\n<li>clean：清理上一次 build 产生的所有的文件(target&#x2F;)</li>\n<li>site：创建项目的站点文档</li>\n</ul>\n<p>每个生命周期由一系列阶段组成；默认的构建生命周期包括 23 个阶段，这些是主要的构建生命周期。另一方面，clean 生命周期由 3 个阶段组成，而 site 生命周期由4个阶段组成。下面详细说下这些阶段。</p>\n<h2 id=\"maven-阶段\"><a href=\"#maven-阶段\" class=\"headerlink\" title=\"maven 阶段\"></a>maven 阶段</h2><p>Maven 阶段表示 Maven 构建生命周期中的各个阶段，每个阶段负责一个特定的任务，默认的包括以下这些：</p>\n<ul>\n<li>validate：检查构建所需的所有信息是否都可用</li>\n<li>compile：编译源代码</li>\n<li>test-compile：编译测试源代码</li>\n<li>test：运行单元测试</li>\n<li>package：打包(产物常见的如：jar, war，…)</li>\n<li>integration-test：集成测试</li>\n<li>install：将包安装到本地存储库</li>\n<li>deploy：将包 deploy 到远程存储库</li>\n</ul>\n<p>maven 中的阶段是有先后顺序只分的，当运行靠后的阶段时，前面的也会执行，但是也可以通过一些参数来跳过一些操作，最常见的就是 skipTests 。</p>\n<p>比如，当我们执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn install</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d223221c2d2246e7aed30d77134c40ef~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>可以看到，compile、test 等比较靠前的阶段也都被执行了。</p>\n<h2 id=\"maven-goal\"><a href=\"#maven-goal\" class=\"headerlink\" title=\"maven goal\"></a>maven goal</h2><p>生命周期中会有阶段，阶段中会有一些列目标，每个目标负责一个特定的任务；当我们运行一个阶段时，默认会绑定到这个阶段的所有目标都按顺序执行。下面以 compile 为例：</p>\n<p>以下是一些与之相关的阶段和默认目标:</p>\n<ul>\n<li>compile:compile -&gt; 编译器插件的编译目标绑定到编译阶段</li>\n<li>compile:testCompile -&gt; 被绑定到测试编译阶段</li>\n</ul>\n<p>怎么去看特定阶段的目标和他的插件信息呢？<code>mvn help:describe -Dcmd=PHASENAME</code>，比如：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn help:describe -Dcmd=compile</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] &#x27;compile&#x27; is a phase corresponding to this plugin:</span><br><span class=\"line\">org.apache.maven.plugins:maven-compiler-plugin:3.1:compile</span><br><span class=\"line\"></span><br><span class=\"line\">It is a part of the lifecycle for the POM packaging &#x27;jar&#x27;. This lifecycle includes the following phases:</span><br><span class=\"line\">* validate: Not defined</span><br><span class=\"line\">* initialize: Not defined</span><br><span class=\"line\">* generate-sources: Not defined</span><br><span class=\"line\">* process-sources: Not defined</span><br><span class=\"line\">* generate-resources: Not defined</span><br><span class=\"line\">* process-resources: org.apache.maven.plugins:maven-resources-plugin:2.6:resources</span><br><span class=\"line\">* compile: org.apache.maven.plugins:maven-compiler-plugin:3.1:compile</span><br><span class=\"line\">* process-classes: Not defined</span><br><span class=\"line\">* generate-test-sources: Not defined</span><br><span class=\"line\">* process-test-sources: Not defined</span><br><span class=\"line\">* generate-test-resources: Not defined</span><br><span class=\"line\">* process-test-resources: org.apache.maven.plugins:maven-resources-plugin:2.6:testResources</span><br><span class=\"line\">* test-compile: org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile</span><br><span class=\"line\">* process-test-classes: Not defined</span><br><span class=\"line\">* test: org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test</span><br><span class=\"line\">* prepare-package: Not defined</span><br><span class=\"line\">* package: org.apache.maven.plugins:maven-jar-plugin:2.4:jar</span><br><span class=\"line\">* pre-integration-test: Not defined</span><br><span class=\"line\">* integration-test: Not defined</span><br><span class=\"line\">* post-integration-test: Not defined</span><br><span class=\"line\">* verify: Not defined</span><br><span class=\"line\">* install: org.apache.maven.plugins:maven-install-plugin:2.4:install</span><br><span class=\"line\">* deploy: org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"编写一个插件\"><a href=\"#编写一个插件\" class=\"headerlink\" title=\"编写一个插件\"></a>编写一个插件</h2><p>编写一个插件大体可以分为以下几步：</p>\n<h4 id=\"step1：新建一个-maven-archetype-mojo\"><a href=\"#step1：新建一个-maven-archetype-mojo\" class=\"headerlink\" title=\"step1：新建一个 maven-archetype-mojo\"></a>step1：新建一个 maven-archetype-mojo</h4><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40aa8156862c4486913600b10086808a~tplv-k3u1fbpfcp-watermark.image\"></p>\n<h4 id=\"step2：添加一个-mojo-类\"><a href=\"#step2：添加一个-mojo-类\" class=\"headerlink\" title=\"step2：添加一个 mojo 类\"></a>step2：添加一个 mojo 类</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Mojo(name = &quot;build-glmapper&quot;, defaultPhase = LifecyclePhase.PACKAGE, threadSafe = true, requiresDependencyResolution = ResolutionScope.RUNTIME, requiresDependencyCollection = ResolutionScope.RUNTIME)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RepackageMojo</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AbstractMojo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> MojoExecutionException, MojoFailureException &#123;</span><br><span class=\"line\">        getLog().info(<span class=\"string\">&quot;this is a test case for mojo&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"step3：pom-xml-处理\"><a href=\"#step3：pom-xml-处理\" class=\"headerlink\" title=\"step3：pom.xml 处理\"></a>step3：pom.xml 处理</h4><p>pom 里面，首先是 packaging 不是 pom 也不是 jar，而是</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>引入一些必要的依赖：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-archiver<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-artifact<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-plugin-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugin-tools<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-plugin-annotations<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.shared<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-common-artifact-filters<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>引入打包插件的 plugin</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-plugin-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">mojoDependencies</span>&gt;</span></span><br><span class=\"line\">                \t<span class=\"comment\">&lt;!-- plugin 的名字 --&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>com.bridge.glmapper.boot:glmapper-plugin<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">mojoDependencies</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"step4：install-你的插件-测试插件允许\"><a href=\"#step4：install-你的插件-测试插件允许\" class=\"headerlink\" title=\"step4：install 你的插件 &amp; 测试插件允许\"></a>step4：install 你的插件 &amp; 测试插件允许</h4><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d842fb860f74aa195c33b2737658cf3~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>引入的工程中通过 maven plugin 菜单也能看到：</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cf6dbb16ef54071904f641b44034204~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>这里有个小细节，就是执行插件的阶段，比如我们的插件名字是 glmapper-plugin，但是实际上执行时使用的是 glmapper，也就是当插件名满足：<code>xxx-maven-plugin</code> 或<code>maven-xxx-plugin</code>命名规则时，可以直接使用 xxx，即可。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文简单介绍了下 maven 的一些基础知识，以供备忘，也通过一个小 case 介绍了如何编写一个 maven plugin，如果你觉得还不错，欢迎点赞支持！！！</p>\n","text":" 原文：https://juejin.cn/post/6919490393893502984 最近接到一个业务同学的诉求：用户会在他们大数据平台新建很多模型表，...","permalink":"/post/maven/maven-plugin-lifecycle-program","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"maven","slug":"maven","count":4,"path":"api/categories/maven.json"}],"tags":[{"name":"maven","slug":"maven","count":4,"path":"api/tags/maven.json"},{"name":"maven plugin","slug":"maven-plugin","count":3,"path":"api/tags/maven-plugin.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#maven-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\"><span class=\"toc-text\">maven 生命周期</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#maven-%E9%98%B6%E6%AE%B5\"><span class=\"toc-text\">maven 阶段</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#maven-goal\"><span class=\"toc-text\">maven goal</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">编写一个插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#step1%EF%BC%9A%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-maven-archetype-mojo\"><span class=\"toc-text\">step1：新建一个 maven-archetype-mojo</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#step2%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA-mojo-%E7%B1%BB\"><span class=\"toc-text\">step2：添加一个 mojo 类</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#step3%EF%BC%9Apom-xml-%E5%A4%84%E7%90%86\"><span class=\"toc-text\">step3：pom.xml 处理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#step4%EF%BC%9Ainstall-%E4%BD%A0%E7%9A%84%E6%8F%92%E4%BB%B6-%E6%B5%8B%E8%AF%95%E6%8F%92%E4%BB%B6%E5%85%81%E8%AE%B8\"><span class=\"toc-text\">step4：install 你的插件 &amp; 测试插件允许</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"测试 Test Double","uid":"9706f0d2ad5a1a3cd4e67af63c8aabab","slug":"tests/test-test-double","date":"2021-06-01T03:07:53.000Z","updated":"2024-07-05T04:09:05.845Z","comments":true,"path":"api/articles/tests/test-test-double.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"text":"TestDouble 简单理解就是测试替身，在多数情况下，我们的系统能够正常运行，不仅仅依托系统本身，还需要依赖一些外部服务，比如其他系统提供的 http、rp...","permalink":"/post/tests/test-test-double","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"test","slug":"test","count":5,"path":"api/categories/test.json"}],"tags":[{"name":"test","slug":"test","count":5,"path":"api/tags/test.json"},{"name":"TestDouble","slug":"TestDouble","count":1,"path":"api/tags/TestDouble.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}},"next_post":{"title":"启动一个没有 main 函数的 java 程序","uid":"7765f5a7acd8dc6c589523580059b0dd","slug":"java/java-base-non-main","date":"2021-01-17T03:01:11.000Z","updated":"2024-07-05T04:09:05.764Z","comments":true,"path":"api/articles/java/java-base-non-main.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"text":" 原文：https://juejin.cn/post/6918637397857009677 作为一名 JAVA 开发者，不知道大家有没有去想过，JAVA 程序...","permalink":"/post/java/java-base-non-main","photos":[],"count_time":{"symbolsCount":"8.8k","symbolsTime":"8 mins."},"categories":[{"name":"JAVA","slug":"JAVA","count":12,"path":"api/categories/JAVA.json"}],"tags":[{"name":"java","slug":"java","count":5,"path":"api/tags/java.json"},{"name":"FX Application","slug":"FX-Application","count":1,"path":"api/tags/FX-Application.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}}}
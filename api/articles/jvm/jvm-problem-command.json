{"title":"JAVA 进程被 kill 排查","uid":"ac12a67b37981f610a8117ecfb8572d8","slug":"jvm/jvm-problem-command","date":"2021-01-06T08:06:55.000Z","updated":"2024-07-05T04:09:05.769Z","comments":true,"path":"api/articles/jvm/jvm-problem-command.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":null,"content":"<p>可能会导致 JAVA 进程被 kill 的原因</p>\n<ul>\n<li>Java 应用程序的问题：发生 OOM 导致进程 Crash</li>\n<li>JVM 自身故障：JVM 或J DK 自身的 Bug 导致进程 Crash</li>\n<li>被操作系统 OOM-Killer</li>\n</ul>\n<span id=\"more\"></span>\n\n<h2 id=\"Java-应用程序的问题：发生-OOM-导致进程-Crash\"><a href=\"#Java-应用程序的问题：发生-OOM-导致进程-Crash\" class=\"headerlink\" title=\"Java 应用程序的问题：发生 OOM 导致进程 Crash\"></a>Java 应用程序的问题：发生 OOM 导致进程 Crash</h2><p>一般情况下，出现 OOM 异常，JVM 的 GC 会进行回收，是不会直接导致 JVM 进程退出的。如果出现退出的情况，那就是内存泄漏，由于内存占用越来越大，最后就直接到 crash 了，这种 JVM 的 OOM 导致的异常，比较好排查。排查步骤如下：</p>\n<ul>\n<li>1、-XX:+HeapDumpOnOutOfMemoryError 和 -XX:HeapDumpPath&#x3D;*&#x2F;java.hprof</li>\n<li>2、根据 HeapDumpPath 指定的路径查看是否产生 dump 文件</li>\n<li>3、根据 dump 文件进行分析</li>\n</ul>\n<h2 id=\"JVM自身故障：JVM-或-JDK-自身的-Bug-导致进程-Crash\"><a href=\"#JVM自身故障：JVM-或-JDK-自身的-Bug-导致进程-Crash\" class=\"headerlink\" title=\"JVM自身故障：JVM 或 JDK 自身的 Bug 导致进程 Crash\"></a>JVM自身故障：JVM 或 JDK 自身的 Bug 导致进程 Crash</h2><p>当 JVM 出现致命错误时，会生成一个 hs_err_pid_xxx.log 这样的文件，该文件包含了导致 JVM crash 的重要信息，可以通过分析该文件定位到导致 crash 的根源，从而改善以保证系统稳定。当出现 crash 时，该文件默认会生成到工作目录下，然而可以通过 JVM 参数 -XX:ErrorFile 指定生成路径</p>\n<p>-XX:ErrorFile&#x3D;&#x2F;xxx&#x2F;xxx&#x2F;hs_err_pid.log<br>附 Java BUG dataBase 库：<a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8134389\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8134389</a></p>\n<h2 id=\"被操作系统-OOM-Killer\"><a href=\"#被操作系统-OOM-Killer\" class=\"headerlink\" title=\"被操作系统 OOM-Killer\"></a>被操作系统 OOM-Killer</h2><p>Linux 内核有个机制叫 OOM killer（Out-Of-Memory killer），该机制会监控那些占用内存过大，尤其是瞬间很快消耗大量内存的进程，为了防止内存耗尽而内核会把该进程杀掉。可以去 &#x2F;var&#x2F;log&#x2F;messages 里翻系统报错日志，执行如下命令:</p>\n<ul>\n<li>dmesg | grep java</li>\n<li>grep -i ‘killed process’ &#x2F;var&#x2F;log&#x2F;messages</li>\n</ul>\n","text":"可能会导致 JAVA 进程被 kill 的原因 Java 应用程序的问题：发生 OOM 导致进程 Crash JVM 自身故障：JVM 或J DK 自身的 Bu...","permalink":"/post/jvm/jvm-problem-command","photos":[],"count_time":{"symbolsCount":994,"symbolsTime":"1 mins."},"categories":[{"name":"jvm","slug":"jvm","count":6,"path":"api/categories/jvm.json"}],"tags":[{"name":"jvm","slug":"jvm","count":6,"path":"api/tags/jvm.json"},{"name":"OOM","slug":"OOM","count":2,"path":"api/tags/OOM.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Java-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A%E5%8F%91%E7%94%9F-OOM-%E5%AF%BC%E8%87%B4%E8%BF%9B%E7%A8%8B-Crash\"><span class=\"toc-text\">Java 应用程序的问题：发生 OOM 导致进程 Crash</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#JVM%E8%87%AA%E8%BA%AB%E6%95%85%E9%9A%9C%EF%BC%9AJVM-%E6%88%96-JDK-%E8%87%AA%E8%BA%AB%E7%9A%84-Bug-%E5%AF%BC%E8%87%B4%E8%BF%9B%E7%A8%8B-Crash\"><span class=\"toc-text\">JVM自身故障：JVM 或 JDK 自身的 Bug 导致进程 Crash</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A2%AB%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-OOM-Killer\"><span class=\"toc-text\">被操作系统 OOM-Killer</span></a></li></ol>","author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"启动一个没有 main 函数的 java 程序","uid":"7765f5a7acd8dc6c589523580059b0dd","slug":"java/java-base-non-main","date":"2021-01-17T03:01:11.000Z","updated":"2024-07-05T04:09:05.764Z","comments":true,"path":"api/articles/java/java-base-non-main.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"text":" 原文：https://juejin.cn/post/6918637397857009677 作为一名 JAVA 开发者，不知道大家有没有去想过，JAVA 程序...","permalink":"/post/java/java-base-non-main","photos":[],"count_time":{"symbolsCount":"8.8k","symbolsTime":"8 mins."},"categories":[{"name":"JAVA","slug":"JAVA","count":12,"path":"api/categories/JAVA.json"}],"tags":[{"name":"java","slug":"java","count":5,"path":"api/tags/java.json"},{"name":"FX Application","slug":"FX-Application","count":1,"path":"api/tags/FX-Application.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}},"next_post":{"title":"docker 基础备忘","uid":"52e98439128c052ce4502d6cce12b2b7","slug":"docker/docker-docker-command","date":"2020-12-24T15:14:59.000Z","updated":"2024-07-05T04:09:05.756Z","comments":true,"path":"api/articles/docker/docker-docker-command.json","keywords":"宋国磊, glmapper, 卫恒, 分享, 开源","cover":[],"text":"Docker 已经不是什么新鲜的事物了，Docker 崛起的核心是因为 Docker 镜像的存在，这个创新使得 Docker 在短短几年内就可以迅速地改变了整个...","permalink":"/post/docker/docker-docker-command","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"docker","slug":"docker","count":2,"path":"api/categories/docker.json"}],"tags":[{"name":"docker","slug":"docker","count":2,"path":"api/tags/docker.json"}],"author":{"name":"glmapper","slug":"blog-author","avatar":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/favicon.ico","link":"/","description":"开放，开源，分享，共享","socials":{"github":"https://github.com/glmapper","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/2412872703","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/3227821827961806","customs":{"sofastack":{"icon":"https://glmapper-blog.oss-cn-hangzhou.aliyuncs.com/common/sofastack.svg","link":"https://www.sofastack.tech/"}}}}}}